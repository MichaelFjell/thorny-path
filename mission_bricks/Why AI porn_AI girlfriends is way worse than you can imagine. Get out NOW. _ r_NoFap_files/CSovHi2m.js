SML.di("./CjFng0Zl.js",import.meta.url,"CjFng0Zl");SML.di("./CVEbQKiO.js",import.meta.url,"CVEbQKiO");SML.di("./D7lSuCop.js",import.meta.url,"D7lSuCop");SML.di("./DjajE4tX.js",import.meta.url,"DjajE4tX");SML.di("./DXILiT2j.js",import.meta.url,"DXILiT2j");SML.di("./CCphb8vV.js",import.meta.url,"CCphb8vV");SML.di("./C_WCC2D4.js",import.meta.url,"C_WCC2D4");SML.di("./GkxdfJZx.js",import.meta.url,"GkxdfJZx");SML.di("./BUDNGNBQ.js",import.meta.url,"BUDNGNBQ");SML.di("./CTD6cIv6.js",import.meta.url,"CTD6cIv6");SML.di("./CL_e-xRh.js",import.meta.url,"CL_e-xRh");SML.di("./B34jTCn6.js",import.meta.url,"B34jTCn6");SML.di("./DlFJW-AA.js",import.meta.url,"DlFJW-AA");SML.di("./L9z-yirb.js",import.meta.url,"L9z-yirb");SML.di("./BCklwcmm.js",import.meta.url,"BCklwcmm");SML.di("./likT9J3g.js",import.meta.url,"likT9J3g");
SML.dm("CSovHi2m",["CVEbQKiO","D7lSuCop","DjajE4tX","CCphb8vV","BUDNGNBQ","CjFng0Zl","DXILiT2j","C_WCC2D4","GkxdfJZx","CTD6cIv6","CL_e-xRh","B34jTCn6","DlFJW-AA","L9z-yirb","BCklwcmm","likT9J3g"],(async(e,t,s,i,o)=>{const n=e=>t.b({source:"onboarding",action:"view",noun:"upsell_unit"},{action_info:{page_type:e}}),r=()=>t.b({source:"onboarding",action:"click",noun:"upsell_unit"},{action_info:{type:"not_now"}}),a=()=>async function(e,s){await t.U(e,s)}(t.X.Dismiss,t.V.BypassableXpromo);const l=new Set(t.aL.map((e=>t.ax({source:i.F,action:i.D,noun:e})))),d=t.W(s.W(e.s));let h=class extends d{get shredditSlotterElm(){return this.shadowRoot?.querySelector("shreddit-slotter")}get bottomSheet(){return this.shredditSlotterElm?.shadowRoot?.querySelector("#inline-auth-upsell-bottom-sheet-modal")}get isInlineRendered(){return this.shredditSlotterElm?.getAttribute("slot-name")===t.ch.InlineAuthLandingExperienceXpromo}constructor(){super(),this.isOverlay=!1,this.events=new t.E(this),this._authFlowModalOpen=!1,this._cachedYScrollPosition=0,this.mounted=!1,this.pubSubController=new t.P(this),this.cacheCurrentScrollPosition=()=>{this.isInlineRendered&&(this._cachedYScrollPosition=window.scrollY||window.pageYOffset)},this.debouncedCacheCurrentScrollPosition=t.u(this.cacheCurrentScrollPosition,300),this._handleDismissButtonClick=()=>{t.e(this,r()),this.bottomSheet?.close(),this._unmount()},this.onShredditSlotterNameChanged=this.events.define("shreddit-slotter-slot-name-changed",(e=>{this.onSlotterRouteChange(e.detail.slotName)})),this._onAuthFlowModalOpen=this.events.define(t.ci.Open,(()=>{this._authFlowModalOpen=!0,this.setIsOverlayAttr()})),this.onFaceplateTrack=this.events.define("faceplate-track",(e=>{e.SAN&&l.has(e.SAN)&&(this._authFlowModalOpen=!1,this.setIsOverlayAttr(),this.switchToInlineXpromo())})),this.pubSubController.subscribe(t.T.TriggerCommentBlockingAuth,(e=>this.openBottomSheet(e)),!1)}connectedCallback(){super.connectedCallback(),this.isObserved||this.enableObserver({threshold:.8}),document.addEventListener("scroll",this.debouncedCacheCurrentScrollPosition,{passive:!0})}disconnectedCallback(){super.disconnectedCallback(),this.isObserved&&this.disableObserver(),document.removeEventListener("scroll",this.debouncedCacheCurrentScrollPosition)}bindDismissButtonListener(){const e=this.shredditSlotterElm?.shadowRoot?.querySelector("#inline-auth-upsell-bottom-sheet-modal-close");e?.addEventListener("click",this._handleDismissButtonClick)}updated(e){super.updated(e);!0===e.get("isOverlay")&&this.onReturnFromOverlay()}onReturnFromOverlay(){setTimeout((()=>{window.scrollTo(0,this._cachedYScrollPosition)}),0)}_unmount(){this.remove()}switchToInlineXpromo(){this.shredditSlotterElm?.setAttribute("slot-name",t.ch.InlineAuthLandingExperienceXpromo)}openBottomSheet({source:e}){this.triggerType===e&&this.bottomSheet?.show()}observerIsIntersectingCallback(){if(this.disableObserver(),this.mounted)return;this.mounted=!0,a();const e=t.z()??t.aa.Unknown;t.e(this,n(e))}setIsOverlayAttr(){const e=this.shredditSlotterElm?.getAttribute("slot-name");this.isOverlay=this._authFlowModalOpen||e!==t.ch.InlineAuthLandingExperienceXpromo}onSlotterRouteChange(e){e===t.ch.InlineAuthLandingExperienceXpromo&&this.bindDismissButtonListener(),this.setIsOverlayAttr()}renderAuthFlowTemplate(){const e=this.querySelector('template[slot="auth-flow"');return e instanceof HTMLTemplateElement?t.Q(e):""}render(){return e.x` <div class="${"relative block -mt-3xl z-10 bg-neutral-background shadow-[0px_-40px_21px_var(--color-neutral-background)]"}">${super.render()} ${this.renderAuthFlowTemplate()}</div> `}};h.styles=[e.i`:host([is-overlay]){display:block;position:relative;z-index:100}`,t.t],e._([e.n({type:Boolean,attribute:"is-overlay",reflect:!0})],h.prototype,"isOverlay",void 0),e._([e.n({type:String,attribute:"trigger-type"})],h.prototype,"triggerType",void 0),h=e._([e.c("inline-auth-landing-experience-xpromo-shell")],h);const c=new Set(t.aL.map((e=>t.ax({source:i.F,action:i.D,noun:e})))),u=t.W(e.s);let p=class extends u{constructor(){super(...arguments),this.isOverlay=!1,this.events=new t.E(this),this.isSlim=!1,this.delay=0,this.isVisible=!1,this.canBeShown=!1,this._authFlowModalOpen=!1,this.mounted=!1,this.pubSubController=new t.P(this),this._handleDismissButtonClick=()=>{t.e(this,r()),this._unmount()},this.onShredditSlotterNameChanged=this.events.define("shreddit-slotter-slot-name-changed",(e=>{this.onSlotterRouteChange(e.detail.slotName)})),this._onAuthFlowModalOpen=this.events.define(t.ci.Open,(()=>{this._authFlowModalOpen=!0,this.setIsOverlayAttr()})),this.onFaceplateTrack=this.events.define("faceplate-track",(e=>{e.SAN&&c.has(e.SAN)&&(this._authFlowModalOpen=!1,this.setIsOverlayAttr(),this.switchToInlineXpromo())})),this.hideOrShow=({source:e})=>{e===o.C.Scroll?this.isVisible=!0:e===o.C.Close&&(this.isVisible=!1)}}get shredditSlotterElm(){return this.shadowRoot?.querySelector("shreddit-slotter")}get wrapper(){return this.shadowRoot?.querySelector(".wrapper")}get isInlineRendered(){return this.shredditSlotterElm?.getAttribute("slot-name")===t.ch.InlineAuthLandingExperienceXpromo}connectedCallback(){super.connectedCallback(),this.delay?setTimeout((()=>{this.canBeShown=!0}),this.delay):this.canBeShown=!0,this.pubSubController.subscribe(t.T.TriggerCommentBlockingAuth,this.hideOrShow,!1),this.isObserved||this.enableObserver({threshold:.8})}disconnectedCallback(){super.disconnectedCallback(),this.isObserved&&this.disableObserver()}bindButtonListener(){const e=this.shredditSlotterElm?.shadowRoot?.querySelector("#desktop-cbau-close-button");e?.addEventListener("click",this._handleDismissButtonClick)}updated(e){super.updated(e);if(!0===e.get("isOverlay")||e.has("isVisible")||e.has("canBeShown")){const e=this.shadowRoot.querySelector(".content");this.isVisible&&this.canBeShown?(e.classList.remove("fade-out","hidden"),e.classList.add("fade-in")):(e.classList.remove("fade-in"),e.classList.add("fade-out"))}}_unmount(){this.remove()}switchToInlineXpromo(){this.shredditSlotterElm?.setAttribute("slot-name",t.ch.InlineAuthLandingExperienceXpromo)}observerIsIntersectingCallback(){if(this.disableObserver(),this.mounted)return;this.mounted=!0,a();const e=t.z()??t.aa.Unknown;t.e(this,n(e))}setIsOverlayAttr(){const e=this.shredditSlotterElm?.getAttribute("slot-name");this.isOverlay=this._authFlowModalOpen||e!==t.ch.InlineAuthLandingExperienceXpromo}onSlotterRouteChange(e){e===t.ch.InlineAuthLandingExperienceXpromo&&this.bindButtonListener(),this.setIsOverlayAttr()}renderAuthFlowTemplate(){const e=this.querySelector('template[slot="auth-flow"');return e instanceof HTMLTemplateElement?t.Q(e):""}onAnimationEnd(){this.isVisible||this.shadowRoot?.querySelector(".content")?.classList.add("hidden")}render(){return e.x` <div class="content ${this.isOverlay?"":"wrapper sticky -ml-md -mr-xs mt-[-65vh] bottom-0 z-[100] hidden"}" @animationend="${this.onAnimationEnd}"> <div class="${this.isOverlay?"":"container p-2xl pb-lg h-[auto] min-h-[65vh] justify-items-end relative flex items-end box-border"}"> <div class="w-100 h-100 absolute z-0 left-0 bottom-0 ${this.isOverlay?"hidden":"overlay"}"></div> <div class="relative z-10 max-w-100 bg-neutral-background-strong ${this.isSlim?"rounded-[12px] border-[1px] border-neutral-border border-solid":"rounded-4"} shadow-md mx-auto pointer-events-auto box-border"> ${this.renderAuthFlowTemplate()} </div> </div> </div>`}};p.styles=[e.i`:host{pointer-events:none}:host([is-overlay]){display:block;position:relative;z-index:100;pointer-events:all}@keyframes fadeInSlideUp{0%{display:none;opacity:0;transform:translateY(50px)}1%{display:block;opacity:0;transform:translateY(50px)}100%{display:block;opacity:1;transform:translateY(0)}}@keyframes fadeOutSlideDown{0%{display:block;opacity:1;transform:translateY(0)}99%{display:block;opacity:0;transform:translateY(50px)}100%{display:none;opacity:0;transform:translateY(50px)}}.fade-in{animation:fadeInSlideUp .8s ease forwards}.fade-out{animation:fadeOutSlideDown .8s ease forwards}.hidden{display:none}.wrapper{margin-top:-65vh}.container{min-height:65vh}.overlay{background:linear-gradient(0deg,var(--color-neutral-background) 10%,rgba(0,0,0,0) 100%)}`,t.t],e._([e.n({type:Boolean,attribute:"is-overlay",reflect:!0})],p.prototype,"isOverlay",void 0),e._([e.n({type:Boolean,attribute:"slim"})],p.prototype,"isSlim",void 0),e._([e.n({type:Number,attribute:"delay"})],p.prototype,"delay",void 0),e._([e.n({type:Boolean})],p.prototype,"isVisible",void 0),e._([e.n({type:Boolean})],p.prototype,"canBeShown",void 0),p=e._([e.c("auth-landing-experience-xpromo-cbau-wrapper")],p)}));