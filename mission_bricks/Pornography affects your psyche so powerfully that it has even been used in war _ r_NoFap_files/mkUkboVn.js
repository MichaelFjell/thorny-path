SML.di("./D7lSuCop.js",import.meta.url,"D7lSuCop");SML.di("./CVEbQKiO.js",import.meta.url,"CVEbQKiO");SML.di("./DZMRR9gi.js",import.meta.url,"DZMRR9gi");SML.di("./BcR8gLw3.js",import.meta.url,"BcR8gLw3");SML.di("./CK9FveTr.js",import.meta.url,"CK9FveTr");SML.di("./CCphb8vV.js",import.meta.url,"CCphb8vV");SML.di("./Btl6S_1h.js",import.meta.url,"Btl6S_1h");SML.di("./BZ7lqt1T.js",import.meta.url,"BZ7lqt1T");SML.di("./B8BAxqC_.js",import.meta.url,"B8BAxqC_");SML.di("./D9dm-Sy6.js",import.meta.url,"D9dm-Sy6");SML.di("./Mh6HSk7W.js",import.meta.url,"Mh6HSk7W");SML.di("./CCOsF7IJ.js",import.meta.url,"CCOsF7IJ");SML.di("./BMNJiqQ9.js",import.meta.url,"BMNJiqQ9");
SML.dm("mkUkboVn",["D7lSuCop","CVEbQKiO","DZMRR9gi","BcR8gLw3","CK9FveTr","CCphb8vV","Btl6S_1h","BZ7lqt1T","B8BAxqC_","D9dm-Sy6","Mh6HSk7W","CCOsF7IJ","BMNJiqQ9"],(async(e,a,i,t,s,r)=>{const n=e.d(a.s);let o=window.location,l=class extends n{constructor(){super(...arguments),this.visibility=e.eQ.Public,this.subredditIds="",this.isCreateMode=!1,this.isCopyMode=!1,this.displayNameInput=e.aE(),this.descriptionInput=e.aE(),this.visibilityInput=e.aE(),this.isPrivate=!1,this.showOnProfile=!1,this._events=new e.E(this),this.handleResponse=this._events.define("faceplate-response",(async a=>{(await a.detail.response.clone().text()).includes("faceplate-alert")||(this.fireCloseDialogEvent(),e.p(e.T.CustomFeedUpdated,{label:this.label??"",name:this.displayNameInput.value?.value??"",visibility:this.visibilityInput.value?.value,descriptionMd:this.descriptionInput.value?.value}),e.cg(this,{message:"Custom feed description updated"}))})),this.handleSubmit=this._events.define("faceplate-request",(async a=>{if(this.isCreateMode||this.isCopyMode){a.preventDefault();try{const i=a.detail.request.body,t=i?.get("subredditIds")?.toString().split(",").filter((e=>e.startsWith("t5_")))||[],{data:{createMultireddit:s}}=await e.v({operation:e.O.CustomFeedCreate,variables:{input:{displayName:i?.get("displayName")?.toString()??"",descriptionMd:i?.get("descriptionMd")?.toString()??"",visibility:i?.get("visibility")?.toString()??e.eQ.Public,subredditIds:t}}});if(s){const{ok:a,multireddit:i}=s;if(a&&i?.path){e.p(e.T.CustomFeedCreated),this.trackEvent(this.isCopyMode?r.bv(i.path):r.bw(i.path));const a=new URL(o.href);return a.pathname=i.path,void(o.href=a.href)}}throw new Error("error creating custom feed")}catch(a){const i=this.isCopyMode?"Failed to copy custom feed":"Failed to create custom feed";this.dispatchEvent(e.c("faceplate-alert",{level:e.a4.error,cause:"uncategorized",message:i}))}}}))}firstUpdated(){this.isPrivate="PRIVATE"===this.visibility,this.showOnProfile="PUBLIC"===this.visibility,this.isCreateMode||this.isCopyMode||this._events.define("faceplate-alert",(e=>{e.detail.message="Failed to save custom feed"}))}willUpdate(a){if(this.hasUpdated){const i=a.has("isPrivate"),t=a.has("showOnProfile");(i||t)&&(this.visibility=i?this.isPrivate?e.eQ.Private:e.eQ.Public:this.showOnProfile?e.eQ.Public:e.eQ.Hidden,i&&(this.showOnProfile=this.visibility===e.eQ.Public))}}fireCloseDialogEvent(){this.dispatchEvent(new CustomEvent("close-dialog",{composed:!0,bubbles:!0}))}handleCancelClick(){this.fireCloseDialogEvent()}renderForm(){return a.x` <faceplate-form action="/svc/shreddit/custom-feed-update-details/" method="POST" target="custom-feed-description" partial-mode="${e.g.Replace}"> <input type="hidden" name="visibility" ${e.aq(this.visibilityInput)} value="${this.visibility}"> <input type="hidden" name="label" value="${this.label}"> <input type="hidden" name="subredditIds" value="${this.subredditIds}"> <div class="flex flex-col gap-sm pt-sm"> <faceplate-text-input appearance="${i.T.SECONDARY}" name="displayName" ${e.aq(this.displayNameInput)} required value="${this.displayName}" maxlength="${50}" character-count> <span slot="label">${"Name"}</span> </faceplate-text-input> <faceplate-textarea-input appearance="${t.a.SECONDARY}" class="relative w-full" name="descriptionMd" ${e.aq(this.descriptionInput)} value="${this.description}" maxlength="${500}" character-count> <span slot="label">${"Description"}</span> </faceplate-textarea-input> ${s.l({onClick:()=>this.isPrivate=!this.isPrivate,label:"Make private",attributes:{role:"menuitemcheckbox",className:"group"},size:s.L.Medium,trailingSlot:a.x` <faceplate-switch-input name="" data-testid="private-toggle" ?checked="${this.isPrivate}"> </faceplate-switch-input> `,description:"Only viewable by you"})} ${s.l({onClick:()=>{this.isPrivate||(this.showOnProfile=!this.showOnProfile)},label:"Show on profile",attributes:{role:"menuitemcheckbox"},size:s.L.Medium,trailingSlot:a.x` <faceplate-switch-input name="" data-testid="show-on-profile-toggle" ?checked="${this.showOnProfile}" ?disabled="${this.isPrivate}"> </faceplate-switch-input> `,description:"Display this feed on your profile so others can find it"})} <div class="flex justify-end gap-xs"> ${e.k({appearance:"secondary",size:e._.Small,children:"Cancel",attributes:{type:"button",onclick:this.handleCancelClick}})} ${e.k({appearance:"primary",size:e._.Small,children:"Submit",attributes:{type:"submit"}})} </div> </div> </faceplate-form> `;}render(){return this.renderForm()}};l.styles=[e.t],a._([a.n({type:String})],l.prototype,"label",void 0),a._([a.n({type:String,attribute:"display-name"})],l.prototype,"displayName",void 0),a._([a.n({type:String})],l.prototype,"description",void 0),a._([a.n({type:String,reflect:!0})],l.prototype,"visibility",void 0),a._([a.n({type:String,attribute:"subreddit-ids"})],l.prototype,"subredditIds",void 0),a._([a.n({type:Boolean,attribute:"create"})],l.prototype,"isCreateMode",void 0),a._([a.n({type:Boolean,attribute:"copy"})],l.prototype,"isCopyMode",void 0),a._([a.b()],l.prototype,"isPrivate",void 0),a._([a.b()],l.prototype,"showOnProfile",void 0),l=a._([a.c("custom-feed-details-form")],l)}));