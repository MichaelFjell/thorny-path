SML.dm("DiR4G0LH",["CVEbQKiO","D7lSuCop"],(async(e,t)=>{let r=class extends e.s{constructor(){super(...arguments),this.redirect=e=>{window.location.href=e.toString()},this.refreshAndAppendConsent=e=>{if("click"===e.type||"Enter"===e.key||"Space"===e.key){const e=new URL(window.location.href);e.searchParams.set("consent","true"),this.redirect(e)}},this.goBack=e=>{history.length>1&&("click"===e.type||"Enter"===e.key||"Space"===e.key)?this.redirect(new URL(document.referrer||location.origin)):this.redirect(new URL(location.origin))}}render(){return e.x`<slot name="continue" @click="${this.refreshAndAppendConsent}" @keypress="${this.refreshAndAppendConsent}"></slot> <slot name="back" @click="${this.goBack}" @keypress="${this.goBack}"></slot>`}};r.styles=[t.t],r=e._([e.c("blocked-profile-interactions")],r);let n=class extends e.s{constructor(){super(...arguments),this.redirect=e=>{window.location.href=e.toString()},this.goBack=e=>{history.length>1&&("click"===e.type||"Enter"===e.key||"Space"===e.key)?this.redirect(new URL(document.referrer||location.origin)):this.redirect(new URL(location.origin))}}render(){return e.x`<slot name="back" @click="${this.goBack}" @keypress="${this.goBack}"></slot>`}};n.styles=[t.t],n=e._([e.c("back-to-reddit")],n),customElements.whenDefined("faceplate-modal").then((()=>{const e=document.querySelector("#over-18-interstitial-modal");e?.showModal({blur:!0})}))}));
SML.dm("DlFJW-AA",["D7lSuCop"],(async e=>{function t(e){localStorage.removeItem(function(e){return`chat:${e}`}(e))}function o(){(function(){let e=["access-token","matrix-user-id","matrix-access-token"];for(let o of e)t(o)})(),function(){try{window.indexedDB.deleteDatabase("matrix-js-sdk:reddit-chat-sync")}catch{}}()}function n(){e.D.remove(e.fL),e.D.remove(e.ac),e.D.remove(e.db),e.D.remove(e.fM),e.D.remove(e.fN),o()}const r="comment-draft-items-";var c;!function(e){e[e.Submit=0]="Submit",e[e.Discard=1]="Discard",e[e.Other=2]="Other"}(c||(c={}));let a=window.location;return{C:r,get D(){return c},a:function(e){return new Promise(((t,o)=>{e?window.google?.accounts?.id?window.google.accounts.id.revoke(e,(({successful:e,error:n})=>{e?t():o(n)})):o("Google API is not ready"):o("Google account id is not available")}))},b:(t,o)=>e.b({source:t,action:"view",noun:"banner"},{action_info:{reason:o}}),e:(t,o)=>e.b({source:t,action:"submit",noun:"email"},{action_info:{success:o}}),g:()=>!!document.querySelector("shreddit-app")?.hasAttribute?.("user-logged-in"),l:async function(){await fetch(e.aN.Logout,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({0:"1",csrf_token:e.D.get("csrf_token")})}),window.google?.accounts?.id?.disableAutoSelect?.(),e.D.remove(e.fO),e.D.remove(e.fP),e.l.removeItem(e.L.RecentPages),e.l.removeItem(e.L.RecentCommunities),e.l.removeItem(e.L.RecentSearches),n(),Object.keys(localStorage).filter((e=>e.startsWith(r))).forEach((e=>localStorage.removeItem(e))),localStorage.removeItem(e.L.DraftsCoachMarkSeen),a.reload()},p:function(e){try{return new URL(e,"https://www.reddit.com")}catch(e){return}},r:()=>e.b({source:e.aw.ResetPassword,action:"submit",noun:"reset_complete"}),s:()=>{e.l.setItem(e.L.LoginTime,(new Date).toString())}}}));
SML.dm("CkKql46U",["CVEbQKiO","D7lSuCop","DlFJW-AA"],(async(e,t,r)=>{let s=class extends e.s{constructor(){super(...arguments),this.country="",this.onClick=()=>{this.confirmOver18()},this.onKeyPress=e=>{"Enter"!==e.key&&"Space"!==e.key||this.confirmOver18()}}redirect(e){window.location.href=e.toString()}refreshAndRememberSEO(){const e=new URL(window.location.href);e.searchParams.set(t.I,"1"),this.redirect(e)}setOver18Cookie(){t.G({country:this.country,name:t.J,value:"true",options:t.H})}async confirmOver18(){r.g()?await t.v({operation:t.O.UpdateProfileSettings,variables:{input:{isNsfw:!0}}}):this.setOver18Cookie(),this.refreshAndRememberSEO()}render(){return e.x`<slot @click="${this.onClick}" @keypress="${this.onKeyPress}"></slot>`}};s.styles=[t.t],e._([e.n({type:String})],s.prototype,"country",void 0),s=e._([e.c("confirm-over-18")],s)}));
SML.dm("CCphb8vV",["D7lSuCop","CVEbQKiO"],(async(e,t)=>{const n=(e,t)=>{if(!e||!t)return!1;if(e===t)return!0;if(0===e.childElementCount&&!(e instanceof HTMLSlotElement))return!1;if(e.contains(t))return!0;if(e instanceof HTMLSlotElement&&e.assignedElements().some((e=>n(e,t))))return!0;if(e instanceof Element&&e.shadowRoot&&n(e.shadowRoot,t))return!0;for(const a of e.querySelectorAll("slot"))if(a.assignedElements().some((e=>n(e,t))))return!0;return!1};const a=new WeakMap;function r(e,t=document){let n=a.get(t);n||(n=new Map,a.set(t,n));let r=n.get(e);return r||(r={key:e},n.set(e,r)),r}const i=Symbol("mixins/pagination"),o=function(t){const n=new WeakMap,a=e.fE();return{getContextKey:(e,t)=>r(e,t),appointLeader(e,r){if(n.has(r)){if(n.get(r).isConnected)throw new Error(`Cannot appoint leader for key "${r.key}" in the same context twice.`)}n.set(r,e);const i=a.getRegisteredElements(r);if(i)for(const n of i)t(e,n)},dismissLeader(e,t){const a=n.get(t);a&&a===e&&n.delete(t)},getLeader:e=>n.get(e),registerFollower(e,r){a.register(r,e);const i=n.get(r);i&&t(i,e)},unregisterFollower(e,t){a.unregister(t,e)},getFollowers:e=>a.getRegisteredElements(e)}}(((e,t)=>{t.syncPagination(e)}));const s=new WeakMap;const l=e=>!e.hasAttribute("disabled"),c=e=>e.tabIndex=0,u=e=>e.tabIndex=-1,d=e=>0===e.tabIndex&&l(e),m=e=>(c(e),e.focus(),e),h=e=>(u(e),e),p=e=>{for(let t=0;t<e.length;t++){const n=e[t];if(d(n))return[n,t]}return null},g=e=>{for(const t of e)if(l(t))return t;return null},f=e=>{const t=g(e);return t?m(t):null},b=e=>{const t=(e=>{for(let t=0;t<e.length;t++){const n=e[e.length-1-t];if(l(n))return n}return null})(e);return t?m(t):null},v=Symbol.for("rpl-menu-item");function k(e){return e.assignedNodes({flatten:!0}).filter((e=>!!(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE&&e.textContent?.match(/\S/)))).length>0;}const N=({selected:n,selectedIcon:a,size:r=e._.Medium,unselectedIcon:i,...o})=>{const{html:s}=t.g();return e.fI({...o,attributes:{...o.attributes},size:r,selected:n,leadingIcon:n?a:i,trailingIcon:s`<span class="inline-flex dropdown-icon ${o.children&&"ml-2xs"}"> ${t.M({size:r===e._.Small?t.q.Small:t.q.Medium})} </span>`,dropdown:!0})};function I(e){const t={};return(n,a)=>{const r=((e,t)=>t?e+JSON.stringify(t):e)(n,a);return Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=new e(n,a)}}const y=I(Intl.NumberFormat),T=I(Intl.RelativeTimeFormat),S=I(Intl.DateTimeFormat);function _(e){return void 0===e?e:e.startsWith("selector(")?e.replace(/^selector\(/,"").replace(/\)$/,""):e;}function w(e){return{...e,trigger:"object"==typeof e.trigger?C(e.trigger):e.trigger,target:_(e.target),template:_(e.template),triggerElem:_(e.triggerElem)}}function C(e){if("event"in e)return e.filters?`event(${e.event}(${JSON.stringify(e.filters)}))`:`event(${e.event})`;if("topic"in e)return e.filters?`subscribe(${e.topic}(${JSON.stringify(e.filters)}))`:`subscribe(${e.topic})`;if("intersection"in e){if("enter"===e.intersection)return e.observerArgs?`view(args(${JSON.stringify(e.observerArgs)}))`:"view";if("leave"===e.intersection)return e.observerArgs?`leave(${e.observerArgs})`:"leave"}return""}function R(e){return n=>e(t.x,t.l,n)}const E=R((function(e,t,n){return e`<ac-activate ?once="${(n=w(n)).once}" ?scoped="${n.scoped}" args="${t(n.args?JSON.stringify(n.args):void 0)}" debounce="${t(n.debounce)}" delay="${t(n.delay)}" name="${n.name.toString()}" query-params="${t(n.queryParams?JSON.stringify(n.queryParams):void 0)}" render-mode="${t(n.renderMode)}" route-params="${t(n.routeParams?JSON.stringify(n.routeParams):void 0)}" target="${t(n.target)}" throttle="${t(n.throttle)}" trigger-elem="${t(n.triggerElem)}" trigger="${t(n.trigger)}"></ac-activate>`})),x=R((function(e,t,n){return e`<ac-dispatch ?once="${(n=w(n)).once}" debounce="${t(n.debounce)}" delay="${t(n.delay)}" detail="${t(n.detail?JSON.stringify(n.detail):void 0)}" event-name="${n.eventName}" target="${t(n.target)}" throttle="${t(n.throttle)}" trigger-elem="${t(n.triggerElem)}" trigger="${t(n.trigger)}"></ac-dispatch>`})),P=R((function(e,t,n){return e`<ac-gql-mutate ?once="${(n=w(n)).once}" debounce="${t(n.debounce)}" delay="${t(n.delay)}" id="${t(n.id)}" operation="${n.operation}" throttle="${t(n.throttle)}" target="${t(n.target)}" trigger-elem="${t(n.triggerElem)}" trigger="${t(n.trigger)}" variables="${t(n.variables?JSON.stringify(n.variables):void 0)}"></ac-gql-mutate>`})),A=R((function(e,t,n){return e`<ac-track ?once="${(n=w(n)).once}" data-faceplate-tracking-context="${t(n.faceplateTrackingContext?JSON.stringify(n.faceplateTrackingContext):void 0)}" debounce="${t(n.debounce)}" delay="${t(n.delay)}" san="${n.san}" throttle="${t(n.throttle)}" trigger-elem="${t(n.triggerElem)}" trigger="${t(n.trigger)}"></ac-track>`})),O=Symbol.for("lit-nothing");let L="RelativeTimeFormat"in Intl;const z=6e4;function D(e){const t=Math.abs(e.diff);switch(e.unit){case"minutes":return`${t} min. ago`;case"hours":return`${t} hr. ago`;case"days":return t>1?`${t} days ago`:`${t} day ago`;case"months":return`${t} mo. ago`;case"years":return`${t} yr. ago`;default:!function(e){throw new Error("Unexpected object: "+e)}(e.unit)}}const $=()=>e.D.get(e.k2),M=()=>e.D.get(e.k4),F="combined";const H={get:()=>{if(!e.l.isAvailable())return;const t=e.l.getItem(e.L.I18nPostTranslationBanner);return t?JSON.parse(t):void 0},set:t=>{e.l.isAvailable()&&e.l.setItem(e.L.I18nPostTranslationBanner,JSON.stringify(t))},update:e=>{const t=H.get()||{};H.set({...t,...e})}},U="shreddit_mt_immersive_en",j=new Set,B=t=>{if(j.has(t))return;j.add(t);const n=e.cb(t);return e.ek({experimentName:t,variant:n??"",experimentVersion:""})},K={post:e=>{B(U)},comment:e=>{B(U)}},V={"3xs":"w-[1rem] h-[1rem]","2xs":"w-[1rem] h-[1rem]",xs:"w-[1.5rem] h-[1.5rem]",sm:"w-[2rem] h-[2rem]",md:"w-[2.5rem] h-[2.5rem]",lg:"w-[3rem] h-[3rem]",xl:"w-[3.5rem] h-[3.5rem]","2xl":"w-[4rem] h-[4rem]","3xl":"w-[5.5rem] h-[5.5rem]"},G={"3xs":"w-[1rem] h-[1rem] min-w-[1rem] min-h-[1rem]","2xs":"w-[1rem] h-[1rem] min-w-[1rem] min-h-[1rem]",xs:"w-[1.5rem] h-[1.5rem] min-w-[1.5rem] min-h-[1.5rem]",sm:"w-[2rem] h-[2rem] min-w-[2rem] min-h-[2rem]",md:"w-[2.5rem] h-[2.5rem] min-w-[2.5rem] min-h-[2.5rem]",lg:"w-[3rem] h-[3rem] min-w-[3rem] min-h-[3rem]",xl:"w-[2.875rem] h-[2.875rem] min-w-[2.875rem] min-h-[2.875rem]","2xl":"w-[3.25rem] h-[3.25rem] min-w-[3.25rem] min-h-[3.25rem]","3xl":"w-[4.5rem] h-[4.5rem] min-w-[4.5rem] min-h-[4.5rem]"},q={"3xs":"outline-offset-[0.125rem]","2xs":"outline-offset-[0.125rem]",xs:"outline-offset-[0.125rem]",sm:"outline-offset-[0.125rem]",md:"outline-offset-[0.125rem]",lg:"outline-offset-[0.1875rem]",xl:"outline-offset-[0.1875rem]","2xl":"outline-offset-[0.1875rem]","3xl":"outline-offset-[.25rem]"},W={"3xs":"border","2xs":"border",xs:"border",sm:"border",md:"border-md",lg:"border-md",xl:"border-md","2xl":"border-lg","3xl":"border-lg"},J={"3xs":"outline-1","2xs":"outline-1",xs:"outline-1",sm:"outline-1",md:"outline-2",lg:"outline-2",xl:"outline-2","2xl":"outline-4","3xl":"outline-4"},Z={"3xs":2,"2xs":2,xs:2,sm:4,md:4,lg:4,xl:6,"2xl":6,"3xl":6},Y={"3xs":-5.4,"2xs":-5.4,xs:-5.4,sm:-7,md:-7,lg:-7,xl:-8.3,"2xl":-8.3,"3xl":-8.3},X={"3xs":"-right-[0.0625rem]","2xs":"right-0",xs:"right-[0.05rem]",sm:"right-[0.10rem]",md:"-right-[0.0825rem]",lg:"-right-[0.125rem]",xl:"-right-[0.125rem]","2xl":"-right-[.65rem]","3xl":"-right-[.75rem]"},Q={"3xs":"w-[.25rem] h-[.25rem] border","2xs":"w-[.25rem] h-[.25rem] border",xs:"w-[.25rem] h-[.25rem] border",sm:"w-[.375rem] h-[.375rem] border-2",md:"w-[.375rem] h-[.375rem] border-2",lg:"w-[.625rem] h-[.625rem] border-2",xl:"w-[.625rem] h-[.625rem] border-2","2xl":"w-[1rem] h-[1rem] border-2","3xl":"w-[1.25rem] h-[1.25rem] border-2"},ee={"3xs":"rounded-1","2xs":"rounded-1",xs:"rounded-1",sm:"rounded-2",md:"rounded-2",lg:"rounded-2",xl:"rounded-[.75rem]","2xl":"rounded-[.75rem]","3xl":"rounded-4"},te=({ringColorClassName:e,size:t})=>e?`${e} outline ${J[t]} ${q[t]}`:"",ne=({...e})=>{const{html:n,ifDefined:a}=t.g(),{attributes:r,children:i,position:o="relative",size:s,status:l}=e;return n`<span class="inline-flex snoovatar ${o} ${a(r?.className)}">${i}${ie({status:l,size:s})} </span>`},ae=({children:e,snoovatarSrc:n,avatarBgClassName:a,appearance:r})=>{const{html:i}=t.g();return i` <span style="${a||!n?"":`background: ${"media"===r?"var(--color-avatar-media-gradient)":"var(--color-avatar-gradient)"}`}" class="rounded-full absolute h-full w-full inline-flex justify-center ${a||""}"> ${e??t.A} </span>`},re=e=>{const{appearance:n}=e;return"collectible"===n?(({snoovatarSrc:e,snoovatarAlt:n,size:a,attributes:r,status:i,flip:o,lazy:s})=>{const{html:l}=t.g();return ne({flip:o,size:a,status:i,children:l`${le()} ${se({size:a})}${oe({snoovatarSrc:e,snoovatarAlt:n,size:a,lazy:s})}`,attributes:{...r,className:`${G[a]}`}})})(e):(({attributes:e,ringLayer:n,children:a,snoovatarAlt:r,snoovatarSrc:i,avatarBgClassName:o,size:s,ringColorClassName:l,status:c,appearance:u,flip:d,lazy:m})=>{const{html:h}=t.g(),p="default"===u?"box-border [&>:first-child]:rounded-[inherit] overflow-hidden":"",g=h`<span class="absolute rounded-full inset-0 border border-solid border-neutral-border-weak bg-transparent"></span>`;return ne({flip:d,size:s,status:c,position:n?"absolute":"relative",attributes:{...e,className:`${te({ringColorClassName:l,size:s})} fp-avatar-container rounded-full ${G[s]} isolate box-content`},children:h` ${i?t.A:ae({snoovatarSrc:i,appearance:u,avatarBgClassName:o,children:h`<span class="relative rounded-full overflow-hidden ${n?"border border-solid border-neutral-background":""} inline-flex w-full h-full ${p}">${a} ${"default"===u&&n?g:t.A} </span>`})} ${i?ce({snoovatarSrc:i,snoovatarAlt:r,size:s,ringColorClassName:l,avatarBgClassName:o,appearance:u,lazy:m}):t.A}`})})(e)},ie=({status:e,size:n})=>{const{html:a}=t.g();return e?a` <span class="${"online"===e?"bg-online":""} flex absolute bottom-0 rounded-full border-solid border-neutral-background bg-neutral-background ${X[n]} ${W[n]} ${Q[n]}"> ${"online"===e?"":e} </span> `:""},oe=({size:e,snoovatarAlt:n,snoovatarSrc:a,lazy:r})=>{const{html:i,svg:o}=t.g(),s=Math.random().toString(16).slice(2);return i`<div class="absolute h-full w-full" style="transform:translateY(${Y[e]}%)"> <svg width="100%" height="100%" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" class="overflow-hidden"> <defs> <clipPath id="${s}"> <path d="M120 0H0V96H22.0602C22.5169 98.2109 23.896 100.155 25.8949 101.309L56          118.691C58.4752 120.12 61.5248 120.12 64 118.691L94.1051 101.309C96.104 100.155 97.4831          98.2109 97.9398 96H120V0Z"/> </clipPath> </defs> ${r?o`<foreignObject clip-path="url(#${s})" width="100%" height="100%"> <img src="${a}" alt="${n}" loading="lazy"> </foreignObject>`:o`<image href="${a}" alt="${n}" clip-path="url(#${s})" height="100%" width="100%">`} </svg> </div>`},se=({size:e})=>{const{html:n}=t.g();return n`<span class="absolute h-full w-full start-0"> <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 72 72" fill="none"> <path d="M34 3.4641C35.2376 2.74957 36.7624 2.74957 38 3.4641L63.1769 18C64.4145 18.7145 65.1769 20.035 65.1769 21.4641V50.5359C65.1769 51.965 64.4145 53.2855 63.1769 54L38 68.5359C36.7624 69.2504 35.2376 69.2504 34 68.5359L8.82309 54C7.58548 53.2855 6.82309 51.965 6.82309 50.5359V21.4641C6.82309 20.035 7.58548 18.7145 8.82309 18L34 3.4641Z" stroke="url(#paint0_diamond_26526_186798)" stroke-width="${Z[e]}" stroke-linejoin="round"/> <defs> <radialGradient id="paint0_diamond_26526_186798" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(-7.4247 26.0998) rotate(15.9097) scale(50.0682 24082.5)"> <stop stop-color="#1185B5"/> <stop offset="0.29452" stop-color="#D7F7FF"/> <stop offset="0.526042" stop-color="#5EF6D8"/> <stop offset="0.838434" stop-color="#5EF6D8"/> <stop offset="0.867246" stop-color="#1990B9"/> <stop offset="1" stop-color="#3F9FC6"/> </radialGradient> </defs> </svg> </span>`},le=()=>{const{html:e}=t.g();return e`<div class="absolute h-full w-full" style="transform:scale(${.95})"> <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 64 64" fill="none"> <path d="M29 1.73205C30.8564 0.660254 33.1436 0.660254 35 1.73205L56.7128 14.2679C58.5692 15.3397 59.7128 17.3205 59.7128 19.4641V44.5359C59.7128 46.6795 58.5692 48.6603 56.7128 49.7321L35 62.2679C33.1436 63.3397 30.8564 63.3397 29 62.2679L7.28719 49.7321C5.43078 48.6603 4.28719 46.6795 4.28719 44.5359V19.4641C4.28719 17.3205 5.43078 15.3397 7.28719 14.2679L29 1.73205Z" fill="url(#paint0_diamond_26026_173944)"/> <path d="M29 1.73205C30.8564 0.660254 33.1436 0.660254 35 1.73205L56.7128 14.2679C58.5692 15.3397 59.7128 17.3205 59.7128 19.4641V44.5359C59.7128 46.6795 58.5692 48.6603 56.7128 49.7321L35 62.2679C33.1436 63.3397 30.8564 63.3397 29 62.2679L7.28719 49.7321C5.43078 48.6603 4.28719 46.6795 4.28719 44.5359V19.4641C4.28719 17.3205 5.43078 15.3397 7.28719 14.2679L29 1.73205Z" fill="url(#paint1_linear_26026_173944)"/> <defs> <radialGradient id="paint0_diamond_26026_173944" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(-6.59974 23.1999) rotate(15.9097) scale(44.5051 21406.7)"> <stop stop-color="#1185B5"/> <stop offset="0.29452" stop-color="#D7F7FF"/> <stop offset="0.526042" stop-color="#5EF6D8"/> <stop offset="0.838434" stop-color="#5EF6D8"/> <stop offset="0.867246" stop-color="#1990B9"/> <stop offset="1" stop-color="#3F9FC6"/> </radialGradient> <linearGradient id="paint1_linear_26026_173944" x1="23.5687" y1="22.7061" x2="44.1183" y2="53.4817" gradientUnits="userSpaceOnUse"> <stop stop-color="#004E5F"/> <stop offset="1" stop-color="#727CD8" stop-opacity="0.81"/> </linearGradient> </defs> </svg> </div>`},ce=({size:e,snoovatarAlt:n,snoovatarSrc:a,attributes:r,avatarBgClassName:i,appearance:o,lazy:s})=>{const{html:l,svg:c,createElement:u}=t.g(),d=Math.random().toString(16).slice(2);return u("span",{...r,className:"absolute start-0 end-0 bottom-0 mx-auto inline-flex shrink-0 justify-center box-border h-full w-full"},l`${ae({snoovatarSrc:a,avatarBgClassName:i,appearance:o})} <svg viewBox="0 0 121 122" xmlns="http://www.w3.org/2000/svg" class="overflow-hidden absolute bottom-0 ${V[e]}"> <defs> <clipPath id="${d}"> <path d="M0 0V79L28.1628 105.5C35.013 115.465 46.4934 122 59.5 122C72.5066 122 83.987 115.465 90.8372 105.5L120.5 79V0H0Z"/> </clipPath> </defs> ${s?c`<foreignObject clip-path="url(#${d})" width="100%" height="100%"> <img src="${a}" alt="${n}" loading="lazy"> </foreignObject>`:c`<image href="${a}" alt="${n}" clip-path="url(#${d})" height="100%" width="100%">`} </svg>`)},ue=({size:e="sm",appearance:n="default",snoovatarAlt:a="User Avatar",ringLayer:r,attributes:i,...o})=>{const{html:s,ifDefined:l}=t.g(),c="icon"===n||"subreddit"===n;return s`<span class="inline-flex items-center justify-center ${V[e]} ${i?.className}" rpl avatar ?flip="${o.flip}" id="${l(i?.id)}" slot="${l(i?.slot)}"> ${r&&!c?r:""} ${c?(({attributes:e,children:n,size:a,appearance:r,status:i,ringColorClassName:o})=>{const s="icon"===r?"rounded-full":ee[a],{html:l,ifDefined:c}=t.g();return l`<span rpl id="${c(e?.id)}" slot="${c(e?.slot)}" class="inline-block ${s} ${te({ringColorClassName:o,size:a})} relative [&>:first-child]:h-full [&>:first-child]:w-full [&>:first-child]:mb-0 [&>:first-child]:rounded-[inherit] h-full w-full [&>:first-child]:overflow-hidden [&>:first-child]:max-h-full"> ${n}${ie({status:i,size:a})} </span>`})({size:e,attributes:i,appearance:n,...o}):re({attributes:i,snoovatarAlt:a,appearance:n,ringLayer:r,size:e,...o})}</span>`};function de(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var a=e[n];if("*"!==a&&"+"!==a&&"?"!==a)if("\\"!==a)if("{"!==a)if("}"!==a)if(":"!==a)if("("!==a)t.push({type:"CHAR",index:n,value:e[n++]});else{var r=1,i="";if("?"===e[s=n+1])throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<e.length;)if("\\"!==e[s]){if(")"===e[s]){if(0==--r){s++;break}}else if("("===e[s]&&(r++,"?"!==e[s+1]))throw new TypeError("Capturing groups are not allowed at ".concat(s));i+=e[s++]}else i+=e[s++]+e[s++];if(r)throw new TypeError("Unbalanced pattern at ".concat(n));if(!i)throw new TypeError("Missing pattern at ".concat(n));t.push({type:"PATTERN",index:n,value:i}),n=s}else{for(var o="",s=n+1;s<e.length;){var l=e.charCodeAt(s);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;o+=e[s++]}if(!o)throw new TypeError("Missing parameter name at ".concat(n));t.push({type:"NAME",index:n,value:o}),n=s}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),a=t.prefixes,r=void 0===a?"./":a,i=t.delimiter,o=void 0===i?"/#?":i,s=[],l=0,c=0,u="",d=function(e){if(c<n.length&&n[c].type===e)return n[c++].value},m=function(e){var t=d(e);if(void 0!==t)return t;var a=n[c],r=a.type,i=a.index;throw new TypeError("Unexpected ".concat(r," at ").concat(i,", expected ").concat(e))},h=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t},p=function(e){var t=s[s.length-1],n=e||(t&&"string"==typeof t?t:"");if(t&&!n)throw new TypeError('Must have text between two parameters, missing text after "'.concat(t.name,'"'));return!n||function(e){for(var t=0,n=o;t<n.length;t++){var a=n[t];if(e.indexOf(a)>-1)return!0}return!1}(n)?"[^".concat(me(o),"]+?"):"(?:(?!".concat(me(n),")[^").concat(me(o),"])+?")};c<n.length;){var g=d("CHAR"),f=d("NAME"),b=d("PATTERN");if(f||b){var v=g||"";-1===r.indexOf(v)&&(u+=v,v=""),u&&(s.push(u),u=""),s.push({name:f||l++,prefix:v,suffix:"",pattern:b||p(v),modifier:d("MODIFIER")||""})}else{var k=g||d("ESCAPED_CHAR");if(k)u+=k;else if(u&&(s.push(u),u=""),d("OPEN")){v=h();var N=d("NAME")||"",I=d("PATTERN")||"",y=h();m("CLOSE"),s.push({name:N||(I?l++:""),pattern:N&&!I?p(v):I,prefix:v,suffix:y,modifier:d("MODIFIER")||""})}else m("END")}}return s}function me(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");}const he=t.e(class extends t.a{constructor(e){super(e),this.tt=new WeakMap}render(e){return[e]}update(e,[n]){if(t.eO(this.et)&&(!t.eO(n)||this.et.strings!==n.strings)){const n=t.eP(e).pop();let a=this.tt.get(this.et.strings);if(void 0===a){const e=document.createDocumentFragment();a=t.B(t.A,e),a.setConnected(!1),this.tt.set(this.et.strings,a)}t.b6(a,[n]),t.eQ(a,void 0,n)}if(t.eO(n)){if(!t.eO(this.et)||this.et.strings!==n.strings){const a=this.tt.get(n.strings);if(void 0!==a){const n=t.eP(a).pop();t.eR(e),t.eQ(e,void 0,n),t.b6(e,[n])}}this.et=n}else this.et=void 0;return this.render(n)}}),pe=function(e){return e},ge=new Map([["image/png",e.k6.Png],["image/x-png",e.k6.Png],["image/gif",e.k6.Gif],["image/jpeg",e.k6.Jpeg],["image/webp",e.k6.Webp],["video/mp4",e.k6.Mp4],["video/quicktime",e.k6.Quicktime]]);let fe={uploadErrorMessage:()=>"There was an error uploading the file.",uploadToS3ErrorMessage:()=>"Failed to upload file to S3.",genericErrorMessage:()=>"Something went wrong",unsupportedMimetype:e=>`${e} files are not supported.`};function be(e,t){const n=new FormData;return t?.forEach((({header:e,value:t})=>{t&&n.append(e,t)})),n.append("file",e),n}function ve(e){return(new DOMParser).parseFromString(e,"text/xml")}function ke(e){window.Sentry?.captureMessage?.(e)}const Ne={plain:"plain",plainInverted:"plainInverted",error:"destructive",brand:"brand",caution:"plain",success:"success"};function Ie(){return "Something went wrong";}let ye=e.v;let Te=e.v;const Se="highlight_card_";const _e={rootMargin:"0px",threshold:[1]};class we extends e.a${constructor(t,n){super(t),this._isInViewport=!1,this._hasBeenImpressed=!1,this._hasBeenConsumed=!1,this._hasPageUnloaded=!1,this.onVisible=e=>{this._isInViewport&&e&&(this._hasPageUnloaded=!1,this._becameVisibleOnScreenTimestamp=Date.now())},this.onHidden=e=>{this._isInViewport&&(e||this._hasPageUnloaded||this.handlePotentialConsume())},this.onBeforeUnloadCallback=()=>{this._hasPageUnloaded=!0,this._isInViewport&&this.handlePotentialConsume()},this.onEnter=()=>{this._isInViewport||(this._isInViewport=!0,this._becameVisibleOnScreenTimestamp=Date.now(),this.handlePotentialImpression())},this.onLeave=()=>{this._isInViewport&&(this.handlePotentialConsume(),this._isInViewport=!1)},t.addController(this),this._config={...n,observerConfig:n.observerConfig??_e},this._observerController=new e.ag(this,t,this._config.observerConfig);const a=new e.E(this,(()=>t));a.define("faceplate-enter",this.onEnter),a.define("faceplate-leave",this.onLeave)}hostConnected(){super.hostConnected(),e.am(this.onVisible,{immediate:!0}),e.am(this.onHidden,{immediate:!0,shouldBeCalledFirst:!0}),e.al.subscribe(this.onBeforeUnloadCallback,{shouldBeCalledFirst:!0})}hostDisconnected(){super.hostDisconnected(),e.an(this.onHidden),e.an(this.onVisible),e.al.unsubscribe(this.onBeforeUnloadCallback)}handlePotentialImpression(){this._hasBeenImpressed||(this._hasBeenImpressed=!0,this._config.onView?.())}handlePotentialConsume(){!this._hasBeenConsumed&&this._becameVisibleOnScreenTimestamp&&Date.now()-this._becameVisibleOnScreenTimestamp>this._config.consumeThreshold&&(this._hasBeenConsumed=!0,this._observerController.hostDisconnected(),this._config.onConsume?.())}}const Ce="component-reload";const Re=(t,n,a)=>e.b({source:"custom_feeds",...t},{customFeed:{id:n},...(a ? {subreddit:{id:a}} : {})}),Ee=new Set,xe=t=>{if(!e.l.isAvailable())return;const n=e.l.getItem(t);if(n)try{return JSON.parse(n)}catch{return}},Pe=(t,n)=>{e.l.isAvailable()&&e.l.setItem(t,JSON.stringify(n))},Ae=new Set(["reddit","config","special"]),Oe=new Set(["edit","revisions","settings","discussions","pages","create"]),Le=new Set(["config/description","config/sidebar","config/stylesheet","config/submit_text"]);function ze(e,t){const n=xe(e);return n?n.slice(0,t):[]}const De=Object.entries({16:"icon32",24:"icon48",32:"icon64",40:"icon96",48:"icon96",56:"icon96",88:"icon96"});const $e=1e3,Me=1e6,Fe=1e9,He=({num:e,divider:t,defaultFixed:n=0,maxDigits:a,removeZeroDecimal:r})=>{const i=e/t;if(!a){const e=i.toFixed(n);return r&&Number(e)%1==0?Math.floor(i).toString():i.toFixed(Math.floor(n))}return i.toString().slice(0,a+1)};const Ue=(e,t,n=1)=>{const a=Math.pow(10,n);return(Math.floor(e/(t/a))/a).toFixed(n)},je=/(?:\/|-)nftv2_([a-z0-9%]+)_([a-z]+)_([a-z0-9-]{36})(?:-headshot)?\.(?:png|svg)/i;const Be="moderator";function Ke(t){return t===e.d0.Post}const Ve=(e,t)=>{"complete"!==document.readyState?window.addEventListener("load",e,t):e()},Ge="siteRule.value",qe="categoryOrRule.value";const We="preview";return {$:function(e,t){if(!e)return{color:"",icon:"",backgroundColor:""};const n=function(e){const t=e?.primaryColor,n=e?.mobileKeyColor,a=e?.legacyPrimaryColor;return t||n||a||null}(e)||"",a=function(e,t){if(!t)return e?.icon??null;for(const[n,a]of De){const r=e?.[a];if(r&&t<=parseInt(n,10))return r}return e?.icon??null}(e,t),r=e?.legacyIcon?.url;return{color:n,icon:a||r||"",backgroundColor:e?.backgroundColor||""}},A:class{constructor(t,n){this._batchTimer=0,this._batchDisplay=()=>{if(this._batchTimer=0,!this._batchQueue||!this._batchQueue.length)return;const t=e.k7(this._batchQueue);for(const e of t)this.options.onAlert(e);this._batchQueue.length=0},t.addController(this),this.host=t,this.options=n,n.batchWindow&&n.batchWindow>0&&(this._batchQueue=[])}hostConnected(){e.k8(this.host).then((t=>{t&&(this._reporter=t,e.k9.register(t,this))}))}hostDisconnected(){this._reporter&&(e.k9.unregister(this._reporter,this),this._reporter=void 0),this._batchTimer&&window.clearTimeout(this._batchTimer),this._batchQueue&&(this._batchQueue.length=0)}shouldDisplayAlert(e){if(!this.options.isOnline()&&!e.showWhenOffline)return!1;const t=this.options;if("number"==typeof e.level){if(t.max&&e.level>t.max)return!1;if(t.min&&e.level<t.min)return!1}else if(void 0!==t.min||void 0!==t.max)return!1;return!t.name||t.name===e.name}displayAlert(e){if(this._batchQueue){if(this._batchQueue.push(e),this._batchTimer)return;this._batchTimer=window.setTimeout(this._batchDisplay,this.options.batchWindow)}else this.options.onAlert(e)}},B:"back",C:class{constructor(t,n){this.isLoading=!1,this.hasReloadError=!1,this.handleReload=async e=>{if(this.reloadUrl){this.isLoading=!0,this.hasReloadError=!1,this.host.requestUpdate();try{await this.getAndReplacePartial(e.detail?.queryParameters)}catch(e){this.hasReloadError=!0}this.isLoading=!1,this.host.requestUpdate()}};const{reloadUrl:a,containerSelector:r,mode:i=e.g.Contents}=n||{};(this.host=t).addController(this),this._partialRequest=new e.aB(this.host),this._reloadUrl=a,this.containerSelector=r||this.host.tagName.toLowerCase(),this._mode=i}get reloadUrl(){return this._reloadUrl}set reloadUrl(e){this._reloadUrl=e}get mode(){return this._mode}set mode(e){this._mode=e}hostConnected(){this.host.addEventListener(Ce,this.handleReload)}hostDisconnected(){this.host.removeEventListener(Ce,this.handleReload)}async getAndReplacePartial(t={}){const n=this.reloadUrl&&Array.from(Object.entries(t)).reduce(((t,[n,a])=>e.c4(t,n,a)),this.reloadUrl),a=await this._partialRequest.request(n),r=await(a?.text());if(!r)throw new Error("Unable to reload content");const i=(new DOMParser).parseFromString(r,"text/html").querySelector(this.containerSelector);if(!i)throw new Error(`Element ${this.containerSelector} not found in reload response`);if(this.mode!==e.g.Contents)e.aC(i.outerHTML,this.host,this.mode);else{if(!i?.innerHTML)throw new Error("No content to reload");e.aC(i.innerHTML,this.host,this.mode)}}},D:"dismiss",E:function(){return window.matchMedia("(pointer: coarse)").matches},F:"onboarding",G:e=>{window.location.href=e||window.location.href},H:()=>e.b({source:"comment",action:"click",noun:"share"}),I:class{constructor(e,t){this.observedElements=[],this.handleSlotChange=e=>{this.observer.disconnect();const t=e.target;t instanceof HTMLSlotElement&&(this.observedElements=t.assignedElements(),this.observedElements.forEach((e=>this.observer.observe(e))))},this.observer=new IntersectionObserver(this.handleIntersection.bind(this),t),(this.host=e).addController(this)}hostConnected(){this.observedElements.forEach((e=>this.observer.observe(e)))}hostDisconnected(){this.observer.disconnect()}isLoadableFaceplatePartial(t){return t instanceof e.bx&&t.loading===e.o.Programmatic&&!t.isLoading}async handleIntersection(e){e.forEach((e=>{e.isIntersecting&&this.isLoadableFaceplatePartial(e.target)&&e.target.load()}))}},J:()=>e.b({source:"comment",action:"click",noun:"share_copy"}),K:Pe,L:xe,M:"gen_guides",N:t=>{const{error:n,metadata:a,element:r,componentName:i}=t,o=r.translationContextValue?.isTranslationActive;let s;try{a&&(s=JSON.stringify({isTranslationActive:o,...a}))}catch(e){}const l="string"==typeof n?n:void 0;let c=`[${i}] ${n.message??n?.msg??l??"unknown error"}`;s&&(c+=` ${s}`),function(t,n){const a=e.b({source:"translate_button",action:"error",noun:"app"},{action_info:{reason:n}});e.e(t,a)}(r,c),function(e){try{const t="Sentry"in window?window.Sentry:void 0;t?.captureException&&t.captureException(e)}catch(e){}}(c)},O:"observe-gallery-item-impression",P:function(e){return{source:"feed_experience",action:e?"unsubscribe":"subscribe",noun:"subreddit"}},Q:function(){return{source:"feed_experience_overflow",noun:"hide",action:"click"}},R:function(){return{source:"feed_experience",action:"impression",noun:"feed_experience"}},S:"subreddit-posting-eligibility-modal",T:()=>"Comment deleted by user",U:function(){const e=window.location?.search??"";return new URLSearchParams(e).has("tl")},V:we,W:function(e){if(i in e)return e;class t extends e{constructor(){super(...arguments),this.pages=1,this._pageIndex=1,this._pageNames=void 0}get pageIndex(){return this._pageIndex}set pageIndex(e){if(e===this._pageIndex)return;const t=this._pageIndex;this._pageIndex=e,this.pageIndexChangedCallback(t)}get pageNames(){return this._pageNames}set pageNames(e){e&&(this.pages=e.length),this._pageNames=e}syncLinkedPageables(){if(this._paginationLeaderContext){const e=o.getFollowers(this._paginationLeaderContext);if(!e||!e.size)return;for(const t of e)t.syncPagination(this)}if(this._paginationFollowerContext){const e=o.getLeader(this._paginationFollowerContext);e&&(e.pageIndex=this._pageIndex)}}syncPagination(e){this.pageIndex=e.pageIndex,this.pages=e.pages,this.pageNames=e.pageNames}getPaginationContext(){const e=this.getRootNode();if(e!==this&&(e instanceof Document||e instanceof ShadowRoot))return e}connectedCallback(){super.connectedCallback&&super.connectedCallback();const e=this.getPaginationContext();if(!e)return;const t=this.getAttribute("for");t&&(this._paginationFollowerContext=o.getContextKey(t,e),o.registerFollower(this,this._paginationFollowerContext)),this.id&&!t&&(this._paginationLeaderContext=o.getContextKey(this.id,e),o.appointLeader(this,this._paginationLeaderContext))}disconnectedCallback(){super.connectedCallback&&super.connectedCallback(),this._paginationLeaderContext&&(o.dismissLeader(this,this._paginationLeaderContext),this._paginationLeaderContext=void 0),this._paginationFollowerContext&&(o.unregisterFollower(this,this._paginationFollowerContext),this._paginationFollowerContext=void 0)}nextPage(){this.pageIndex=Math.min(this.pages,this.pageIndex+1)}previousPage(){this.pageIndex=Math.max(1,this.pageIndex-1)}pageIndexChangedCallback(e){this.syncLinkedPageables()}}return t[i]=!0,t},X:H,Y:({conversationId:e,position:t,searchQuery:n})=>{const a={conversation_id:e};return t&&(a.query_id=`${t}`),n&&(a.query=n),{search:a}},Z:function(e){return e.replace(Se,"")},_:ue,a:(e,t)=>{const n=e.composedPath(),a=Array.isArray(t)?t.map((e=>e.toUpperCase())):[t.toUpperCase()];for(const e of n)if(a.includes(e.tagName))return!0;return!1},a$:"saved_responses__cancel_update",a0:"pdp-ama-comment-tab-wrapper",a1:"clear-search-input",a2:e=>{try{return new URL(e).hostname.endsWith("reddit.com")}catch(e){return!1}},a3:e=>e.startsWith("https://alb.reddit.com/cr"),a4:function(){return"button_appearance"===e.cb(e.k5)||e.cb(e.k5)===F},a5:class{hostConnected(){}constructor(e,t){this.host=e,this.config=t,this.mouseIsDown=!1,this._interactionTrigger=null,this.eventUsedMap=new WeakMap,this.handleBlur=e=>{if(this.hasTrigger("focus")||this.hasTrigger("focus-visible")){const t=()=>this.host.finishInteraction(e,"focus");this.config.delayOpenOnFocus?this.delayInteraction(t,this.config.hoverDelayEnd(this.host)):t()}},this.handleClick=e=>{this.eventUsedMap.has(e)||(this.eventUsedMap.set(e,!0),this.hasTrigger("click")&&(this.config.isInteractedWith(this.host)?this.host.finishInteraction(e,"click"):this.host.startInteraction(e,"click")))},this.handleFocus=e=>{const t=this.hasTrigger("focus"),n=this.hasTrigger("focus-visible");if((!(!t&&n&&e.target instanceof HTMLElement)||e.target.matches(":focus-visible"))&&(t||n)&&!this.mouseIsDown){const t=()=>this.host.startInteraction(e,"focus");this.config.delayOpenOnFocus?this.delayInteraction(t,this.config.hoverDelayStart(this.host)):t()}},this.handleMouseEnter=e=>{this.hasTrigger("hover")&&this.delayInteraction((()=>this.host.startInteraction(e,"hover")),this.config.hoverDelayStart(this.host))},this.handleMouseLeave=e=>{this.hasTrigger("hover")&&this.delayInteraction((()=>this.host.finishInteraction(e,"hover")),this.config.hoverDelayEnd(this.host))},this.handleMouseDown=()=>{this.hasTrigger("click")&&(this.mouseIsDown=!0)},this.handleMouseUp=()=>{this.hasTrigger("click")&&(this.mouseIsDown=!1)},this.host.addController(this)}set interactionTrigger(e){this._interactionTrigger=e,this.host.requestUpdate()}get interactionTrigger(){return this._interactionTrigger}delayInteraction(e,t){clearTimeout(this.delayTimeout),this.delayTimeout=window.setTimeout(e,t)}hasTrigger(e){return this.host.trigger.split(" ").includes(e)}},a6:n,a7:d,a8:c,a9:u,aA:({item:e,reason:t})=>new CustomEvent("rpl:menu-close",{bubbles:!0,composed:!0,detail:{item:e,reason:t,itemPath:[e]}}),aB:t=>Object.values(e.cN).includes(t),aC:t=>Object.values(e.cO).includes(t),aD:v,aE:je,aF:Oe,aG:Ae,aH:"config/automoderator",aI:"config/post_removal_message",aJ:Le,aK:50,aL:100,aM:"request",aN:"saved-responses__saved",aO:function(t){return t===e.a3.ModQueueCompactView},aP:Ie,aQ:t=>e.b({source:Be,action:"click",noun:Ke(t)?"reorder_post_flair_confirm":"reorder_flair_confirm"}),aR:"flair-settings__table-feature-id",aS:function(e=!1){return e?"Saved":"Save";},aT:function(e){return`${Se}${e}`},aU:(e,t)=>{const n=e.getBoundingClientRect(),a=t.getBoundingClientRect();return Math.floor(n.top)>=Math.floor(a.top)&&Math.ceil(n.bottom)<=Math.ceil(a.bottom)&&Math.ceil(n.right)<=Math.ceil(a.right)&&Math.floor(n.left)>=Math.floor(a.left)},aV:"saved-responses__create",aW:"saved-responses__exit-create-view",aX:"saved-responses__delete",aY:"saved-responses__update-item",aZ:"saved-responses__submit",a_:"saved-responses__open-reorder-modal",aa:g,ab:t=>Object.values(e.c0).includes(t),ac:p,ad:h,ae:l,af:m,ag:f,ah:e=>{const t=p(e);return t?(h(t[0]),t):null},ai:b,aj:(e,t,n)=>{if(!t)return b(e);const a=((e,t,n)=>{for(let a=1;a<e.length;a++){const r=(t-a+e.length)%e.length,i=e[r];if(r>t&&!n)return null;if(l(i))return i}return l(e[t])?e[t]:null})(e,t[1],n);return a?m(a):null},ak:(e,t,n)=>{if(!t)return f(e);const a=((e,t,n)=>{for(let a=1;a<e.length;a++){const r=(t+a)%e.length,i=e[r];if(r<t&&!n)return null;if(l(i))return i}return l(e[t])?e[t]:null})(e,t[1],n);return a?m(a):null},al:e=>v in e,am:{MenuItem:"menuitem",Button:"button",Link:"link",Checkbox:"menuitemcheckbox",Radio:"menuitemradio"},an:k,ao:P,ap:O,aq:({attributes:n,children:a,selected:r,leadingIcon:i,ariaControls:o,screenReaderContent:s,deleteButtonConfig:l})=>{const{html:c,ifDefined:u}=t.g();return c` <span class="inline-flex relative max-w-full" slot="${u(n?.slot)}"> ${e.fI({hideChildrenOverflow:!0,ariaControls:o,attributes:n,selected:r,size:e._.Small,leadingIcon:i&&ue({children:i,appearance:"icon",size:"2xs"}),children:c`<span class="${r?"inline-block me-[calc(var(--size-button-sm-h)-var(--rem10)-var(--button-border-width-default))]":""} overflow-hidden text-ellipsis">${a}</span>`,screenReaderContent:s})} ${r?c` <span style="${"transform: translateY(-50%);\nposition: absolute;\ninset-inline-end: 0;\ntop: 50%;\ntransform: translateY(-50%);\ndisplay: inline-flex;\n"}"> ${e.k({...l,appearance:"plain",size:e._.Small,leadingIcon:t.J({size:t.q.Small})})} </span>`:void 0} </span> `},ar:2e3,as:"saved-responses__reorder",at:"reddit-search:open",au:function(e){return!!e},av:(e,t)=>Re({action:"add",noun:"subreddit"},e,t),aw:(e,t)=>Re({action:"remove",noun:"subreddit"},e,t),ax:class{get active(){return this.duration>0}get timeRemaining(){return`${Math.floor(this.duration/6e4)}:${Math.ceil(this.duration%6e4/1e3).toString().padStart(2,"0")}`}get secondsRemaining(){return Math.ceil(this.duration/1e3).toString()}constructor(e){this.duration=0,this.interval=0,this.update=()=>{this.duration=this.duration-this.interval,this.duration<=0&&this.reset(),this.host.requestUpdate()},this.host=e,this.host.addController(this)}hostDisconnected(){this.reset()}reset(){clearInterval(this.timeout),this.duration=0,this.interval=0}start(e,t=1e3){this.reset(),this.duration=e,this.interval=t,this.timeout=setInterval(this.update,this.interval),this.host.requestUpdate()}},ay:5,az:(e,t)=>new CustomEvent("rpl:menu-clicked-item",{bubbles:!0,composed:!0,cancelable:!0,detail:{type:e,item:t}}),b:Ce,b$:"auth_modal",b0:"saved-responses-table__partial_id",b1:"saved_responses__response_delete_modal_id",b2:function(e){return`add-ama-collaborators-modal-${e}`},b3:({attributes:e,children:n,trailingSlot:a})=>{const{html:r,createElement:i}=t.g();return i("li",{...e,booleanListItemHeader:!0,className:"flex items-center m-0 pe-md h-2xl min-w-0 text-secondary font-semibold text-12",rpl:!0},r`<span class="grow min-w-0 px-sm truncate">${n}</span> ${a?r`<span class="flex items-center">${a}</span> `:void 0}`)},b4:t=>e.b({source:"achievements",action:"click",noun:"card_icon"},{action_info:{page_type:t}}),b5:t=>e.b({source:"achievements",action:"click",noun:"profile_showcase"},{action_info:{page_type:t}}),b6:function(n,a){return e.k({attributes:a,appearance:Ne[n],leadingIcon:t.C()})},b7:async function(t){const n={input:t},{data:a,errors:r}=await ye({operation:e.O.RemoveHighlightedPost,variables:n});if(r?.length)throw new Error(Ie());const{removeHighlightedPost:i}=a;if(!i?.ok)throw new Error(Ie())},b8:function(){return"vote_component"===e.cb(e.k5)||e.cb(e.k5)===F},b9:"wiki-banned-users__unban",bA:(e,t,n)=>{const a=ze(t,n),r=new Map,i=[e,...a];for(;i.length&&r.size<n;){const e=i.shift();r.has(e.uuid)||r.set(e.uuid,e)}const o=Array.from(r.values());o.length===a.length&&o.every(((e,t)=>e.uuid===a[t].uuid))||Pe(t,o)},bB:"login",bC:function(e){return!!e&&je.test(e)},bD:(e,t,n)=>{for(const n of t)if(n[0]===e)return(0,n[1])();return null==n?void 0:n()},bE:function(){return document&&document.documentElement.lang?document.documentElement.lang:navigator&&navigator.language?navigator.language:"en-US"},bF:function(e){return new Date(e.replace("+0000","+00:00"))},bG:function(e){return e?"Settings saved.":"Failed to save settings. Please try again.";},bH:function(e=!1){return e?"Saved":"Save changes";},bI:"wiki-page-settings-done-button",bJ:"wiki-page-settings-close-button",bK:"wiki-page-setting-modal-dialog",bL:S,bM:function(e,t,n){var a;const r=function(e,t){const n=t.getTime()-e.getTime(),a=Math.round(n/31104e6),r=Math.round(n/2592e6),i=Math.round(n/864e5),o=Math.round(n/36e5),s=n/z;let l="minutes",c=0;return Math.abs(Math.round(s))<60?c=s>-1&&s<1?Math.sign(s)*Math.ceil(Math.abs(s)):Math.round(s):Math.abs(o)<24?(l="hours",c=o):Math.abs(i)<29?(l="days",c=i):Math.abs(r)<11?(l="months",c=r):(l="years",c=a),{unit:l,diff:c}}(new Date,e);try{if(L){return function(e,t,n){return T(t,{localeMatcher:"lookup",numeric:"always",style:n}).format(e.diff,e.unit)}(r,t,null!==(a=null==n?void 0:n.format)&&void 0!==a?a:(null==n?void 0:n.short)?"short":"long")}}catch(e){}return ((null==n?void 0:n.short)||"short"===(null==n?void 0:n.format))&&r.diff<0&&t.match(/en.*/)?D(r):S(t,{dateStyle:"short",timeStyle:"short"}).format(e);},bN:function(t){return t===e.a3.CompactView},bO:class{constructor(e){this.bottomScrollIntoViewIfNeeded=e=>{const t=e?.parentElement;if(t&&e){t.clientHeight-(e.offsetTop+e.clientHeight)<0&&e.scrollIntoView()}},this.getHiddenInputValue=e=>this.reportFormEl.querySelector(`form input[type=hidden][name="${e}"]`)?.getAttribute("value")??"",this.setHiddenInputValue=(e,t)=>this.reportFormEl.querySelector(`form input[type=hidden][name="${e}"]`)?.setAttribute("value",t)??"",this.getAllHiddenInputValues=()=>Array.from(this.reportFormEl.querySelectorAll("form input[type=hidden]")).reduce(((e,t)=>{const n=t.getAttribute("name");return n?{...e,[n]:t.getAttribute("value")??""}:e}),{}),this.getComputedValueByRef=e=>{if(e===Ge){const t=this.getHiddenInputValue(qe);return this.getHiddenInputValue(e).includes(t)?this.getHiddenInputValue(e):""}return this.getHiddenInputValue(e)},this.checkCondition=e=>{if("object"==typeof e){const{args:t,$type:n}=e;if("computed"===n&&Array.isArray(t)){const n=t.map((e=>"object"==typeof e&&"ref"===e.$type?this.getComputedValueByRef(e.ref):e));return"neq"===e.function?String(n[0])!==String(n[1]):String(n[0])===String(n[1])}if("ref"===n&&e.ref)return this.getHiddenInputValue(e.ref)}return!1},this.getComputedProp=e=>{if("computed"===e.$type&&"conditionalSelect"===e.function&&e.conditions&&e.values){const t=e.conditions;for(const[n,a]of t.entries())if(!0===a||"boolean"!=typeof a&&this.checkCondition(a))return e.values[n]}return e},this.getText=e=>{if(this.isString(e))return e;const t=this.getComputedProp(e);return this.isString(t)?t:""},this.getAction=e=>this.getComputedProp(e),this.getDisabledCondition=e=>!!this.checkCondition(this.getComputedProp(e)),this.getTextDataRef=e=>{const t=e.conditions?.[0];if(t&&"boolean"!=typeof t){const e=t.args;if(Array.isArray(e)&&!this.isString(e[0]))return e[0].ref}return""},this.getDisabledRef=e=>{const t=e.args;if(t&&Array.isArray(t)&&!this.isString(t[0]))return[t[0].ref];const n=e.values;return n?n.map((e=>e.args[0].ref)):void 0},this.isString=e=>"string"==typeof e,this.performAction=e=>{switch(e.actionType){case"formSubmit":return{formSubmit:!0,data:e.args};case"formClose":return{formClose:!0};case"flow":return"SELF_HARM"===this.getHiddenInputValue(e.args[0].ref)?{openCtlFlow:!0}:void 0;case"openTemplatedUrl":const t=e.args,{urlTemplate:n,placeholders:a}=t;if(t&&n&&a){let e="";return a.forEach((a=>{const r=t[a],i=this.getHiddenInputValue(r.ref);i&&(e=n.replaceAll(`%(${a})s`,i))})),{href:e,formClose:!0}}return{formClose:!0};default:const{value:r,key:i}=e.args;return"ref"===r.$type?(this.setHiddenInputValue(i,this.getHiddenInputValue(r.ref)),{key:i,value:this.getHiddenInputValue(r.ref)}):void 0}},this.reportFormEl=e}},bP:Ge,bQ:qe,bR:()=>"[deleted]",bS:e=>!!e&&(e.indexOf("profileIcon_snoo")>-1||e.indexOf("snoovatar/avatars")>-1||e.endsWith("snoovatar_anonymous.svg")),bT:"subreddit_about",bU:"comment-post",bV:he,bW:"list-reply-comment",bX:(t="post_detail",n)=>e.b({source:t,action:"click",noun:"downvote_comment"},{action_info:{trigger_type:n}}),bY:(t="post_detail",n)=>e.b({source:t,action:"click",noun:"upvote_comment"},{action_info:{trigger_type:n}}),bZ:(t="post_detail",n)=>e.b({source:t,action:"click",noun:"clearvote_comment"},{action_info:{trigger_type:n}}),b_:"view",ba:"wiki-banned-users__ban",bb:"wiki-banned-users__edit",bc:"wiki-banned-contributors-confirmation-modal",bd:"wiki-banned-contributors-ban-modal",be:function(e,{displayFull:t,roundDown:n,maxDigits:a,removeZeroDecimal:r}={}){return t?(e=>{const t=e.split(".");return [t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")].concat(t.slice(1)).join(".");})(e.toString()):e>=99999999949?`${He({num:e,divider:Fe,maxDigits:a,removeZeroDecimal:r})}b`:e>=999999949&&e<99999999949?`${He({num:e,divider:Fe,defaultFixed:1,maxDigits:a,removeZeroDecimal:r})}b`:e>=99999949&&e<999999949?`${He({num:e,divider:Me,maxDigits:a,removeZeroDecimal:r})}m`:e>=999949&&e<99999949?`${He({num:e,divider:Me,defaultFixed:1,maxDigits:a,removeZeroDecimal:r})}m`:e>=99949&&e<999949?`${He({num:e,divider:$e,maxDigits:a,removeZeroDecimal:r})}k`:e>=$e&&e<99949?n?`${Ue(e,$e)}k`:`${He({num:e,divider:$e,defaultFixed:1,maxDigits:a,removeZeroDecimal:r})}k`:String(e);},bf:()=>e.b({source:"post_detail",action:"click",noun:"load_more_comments"}),bg:async function({responseId:t,subredditId:n,contentId:a,modmailVariables:r}){const{data:i,errors:o}=await Te({operation:e.O.RenderSavedResponseTemplateBySubredditId,variables:{responseId:t,subredditId:n,...(a ? {removalVariables:{contentId:a}} : {}),...(r ? {variables:{modmailVariables:r}} : {})}});if(o?.length||"Subreddit"!==i.subredditInfoById?.__typename||!i.subredditInfoById?.moderation?.renderSavedResponseTemplate?.templateValidation?.ok)throw new Error(Ie());return i.subredditInfoById.moderation.renderSavedResponseTemplate.response.markdown},bh:e=>Re({action:"delete",noun:"custom_feed"},e),bi:function(n,a){if(!n)return;const{html:r}=t.g();return r` <span class="flex items-center justify-center">${Array.isArray(n)?r`${n.map((t=>e.k({...t,appearance:Ne[a]})))}`:e.k(n)}</span>`},bj:async function(e,t){const n=await window.fetch(t.uploadLeaseUrl,{method:"POST",body:be(e,t.uploadLeaseHeaders)});if(n.ok){const e=function(e){const t=ve(e);return t.querySelector("Location")?.textContent?.trim()}(await n.text());return e||ke("Unable to retrieve S3 url for uploaded resource."),e}throw (ke(`Failed to upload file to S3 with error code: ${function(e){const t=ve(e);return t.querySelector("Code")?.textContent?.trim()}(await n.text())}`), new Error(fe.uploadToS3ErrorMessage()))},bk:ge,bl:K,bm:()=>e.b({source:"comment",action:"click",noun:"load_more_comments"}),bn:()=>e.b({source:"post_detail",action:"click",noun:"comment_image"}),bo:"comment-composer-cancel-draft",bp:"comment-edit-success",bq:"reloadPollingDurationMs",br:()=>e.b({source:"post_detail",action:"click",noun:"collapse_comment"}),bs:()=>e.b({source:"post_detail",action:"click",noun:"expand_comment"}),bt:"/svc/shreddit/edit-comment",bu:(t,{communityId:n,communityName:a})=>t.trackEvent(e.b({source:"community_page",action:"click",noun:"communities_menu",subreddit:{name:a,id:n}})),bv:e=>Re({action:"duplicate",noun:"custom_feed"},e),bw:e=>Re({action:"create",noun:"custom_feed"},e),bx:"https://chat.reddit.com/",by:()=>e.b({source:"community_nav",action:"click",noun:"community_recent"}),bz:ze,c:(n,a)=>a?e.k({shape:"pill",appearance:"plain",size:e._.Small,attributes:{className:"border-0 [:not(:hover)]:bg-transparent text-12 font-semibold text-secondary-plain",slot:"trigger",...n},hideChildrenOverflow:!0,children:t.x`<slot name="trigger-content"></slot>`,trailingIcon:t.N({size:t.q.Small,attributes:{"aria-hidden":"true",className:"px-[2px]"}})}):N({appearance:"plain",attributes:{className:"border-0 [:not(:hover)]:bg-transparent text-12 font-semibold text-secondary-plain",...n},children:t.x`<slot name="trigger-content"></slot>`,size:e._.Small}),c$:2e3,c0:"send",c1:pe,c2:function*(e,t){if(void 0!==e){let n=0;for(const a of e)yield t(a,n++)}},c3:{STREAK_EXTENDED:"streak_progressed",TROPHY_UNLOCKED:"achievement_unlocked",TROPHY_PROGRESSED:"achievement_progress"},c4:"product-carousel-item",c5:"gallery-images-container",c6:"achievement-progress-toast",c7:({attributes:n,title:a,titleDataTestId:r,description:i,buttonProps:o,creative:s,creativeSafe:l=!0})=>{const{html:c,createElement:u}=t.g();return u("div",{...n,className:"flex flex-col items-center w-full",rpl:!0,"rpl-empty-state":!0},c`<div class="w-full flex flex-col items-center overflow-hidden box-border ${!l&&"p-md"}"> ${s} </div> <div class="flex flex-col w-full items-center box-border px-md gap-md ${a||i?"pb-md":""}"> ${a||i?c` <div class="max-w-[480px] flex flex-col items-center text-center"> <div class="text-24 font-bold text-neutral-content-strong" data-testid="${t.l(r)}"> ${a} </div> <div class="text-16 text-neutral-content-weak">${i}</div> </div> `:""} ${o?c`<div>${e.k(o)}</div>`:""} </div>`)},c8:function(e,t,n){return e?t():null==n?void 0:n()},c9:t=>t.trackEvent(e.b({source:"community_page",action:"click",noun:"all_communities"})),cA:t=>e.b({source:Be,action:"click",noun:Ke(t)?"post_flair_edit_save":"flair_edit_save"}),cB:t=>e.b({source:Be,action:"click",noun:Ke(t)?"create_post_flair_confirm":"create_flair_confirm"}),cC:"flair-form-success",cD:"flair-settings__flair-copy",cE:"flair-settings__flair-delete",cF:"flair-settings__flair-delete-modal",cG:"flair-settings__flair-form",cH:t=>e.b({source:Be,action:"click",noun:Ke(t)?"remove_post_flair_confirm":"remove_flair_confirm"}),cI:function({fieldErrors:e,defaultMessage:t}){return e?.[0]?.message??t},cJ:E,cK:({productName:e,productPrice:t,productId:n,retailerId:a,retailerName:r,retailerPrice:i,retailerLink:o})=>{const s={product_name:e,display_price:t};return n&&(s.product_id=n),a&&(s.retailer_id=a),r&&(s.retailer_name=r),i&&(s.retailer_price=i),o&&(s.retailer_link=o),s},cL:A,cM:$,cN:(t,n,a)=>{e.e0({name:e.k2}),e.G({name:e.k2,country:n,value:`${t}`,options:{...e.H,domain:a}})},cO:M,cP:(t,n,a)=>{e.e0({name:e.k4}),e.G({name:e.k4,country:n,value:`${t}`,options:{...e.H,domain:a}})},cQ:()=>e.D.get(e.k3),cR:(t,n,a)=>{e.e0({name:e.k3}),e.G({name:e.k3,country:n,value:`${t}`,options:{...e.H,domain:a}})},cS:({attributes:e,children:n})=>{const{html:a,createElement:r}=t.g();return r("li",{...e,booleanListItemGroup:!0,className:"list-none",rpl:!0},a`<ul class="p-0"> ${n} </ul>`)},cT:function(t){return t===e.a3.CardView},cU:"emote|",cV:"giphy|",cW:e=>!e||e.includes("avatar_default_"),cX:function({type:n,iconProps:a}){switch(n){case e.eN.Public:return {label:"Public",description:"Anyone can view, post, and comment to this community",icon:t.cP(a),iconSelected:t.cQ(a)};case e.eN.Restricted:return {label:"Restricted",description:"Anyone can view, but only approved users can contribute",icon:t.cd(a),iconSelected:t.cc(a)};case e.eN.Private:return {label:"Private",description:"Only approved users can view and contribute",icon:t.bD(a),iconSelected:t.aF(a)};case e.eN.EmployeesOnly:return {label:"Employee-only",description:"Only employees can view and contribute",icon:t.df(a),iconSelected:t.dg(a)};default:return null}},cY:x,cZ:"wiki-revision-note-modal-dialog",c_:"wiki-page-tabs",ca:t=>t.trackEvent(e.b({source:"community_page",action:"click",noun:"favorites"})),cb:t=>t.trackEvent(e.b({source:"community_search",action:"view",noun:"search_bar"})),cc:t=>t.trackEvent(e.b({source:"community_search",action:"view",noun:"query_prompt"})),cd:t=>t.trackEvent(e.b({source:"community_search",action:"click",noun:"search_bar"})),ce:(t,n)=>e.b({source:Be,action:"click",noun:Ke(t)?"enable_post_flair":"enable_user_flair"},{action_info:{setting_value:n?"toggle on":"toggle off"}}),cf:(t,n)=>e.b({source:Be,action:"click",noun:Ke(t)?"let_users_assign_post_flair":"let_users_assign_flair"},{action_info:{setting_value:n?"toggle on":"toggle off"}}),cg:t=>e.b({source:Be,action:"click",noun:Ke(t)?"reorder_post_flair_dialog":"reorder_flair_dialog"}),ch:e=>!!e&&(e.indexOf("profileIcon_snoo")>-1||e.indexOf("snoovatar/avatars")>-1||e.endsWith("snoovatar_anonymous.svg")),ci:"toggleable-video-player-element",cj:"toggleable-video-player-close-btn",ck:"thumbnail-video-toggle-container",cl:"thumbnail-image-video-toggle",cm:"thumbnail-playback-action-circle",cn:"hiddenClassnames",co:"visibleClassnames",cp:"skip",cq:e=>e.startsWith("a2_")?e.replace("a2_",""):e.startsWith("t2_")?e.replace("t2_",""):e,cr:"onboarded-ad-account",cs:"ad-account-creation-cancel",ct:"https://www.reddit.com/redditchat/",cu:"chat-mobile-xpromo",cv:"reputation-recaptcha",cw:{Total:"#D2DADD",Posts:"#0E8A00",Negative:"#372F8C",Positive:"#008675",Neutral:"#629FFF",Score:"#D93A00",Performance:"#6A5CFF",Comments:"#D93900",Upvotes:"#6A5CFF","Post Upvotes":"#DE019F","Comment Upvotes":"#5BA200","Total Upvotes":"#97AFBC","Total Mentions":"#6A5CFF"},get cx(){return fe},cy:e=>e??O,cz:class{get matches(){return this.mediaQuery.matches}constructor(e,t){this.host=e,this.query=t,this.rafId=null,this.handleMediaChange=()=>{this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame((()=>{this.rafId=null,this.host.requestUpdate("matches",!this.matches)}))},e.addController(this),this.mediaQuery=window.matchMedia(t),this.mediaQuery.addEventListener("change",this.handleMediaChange)}async hostConnected(){}async hostDisconnected(){}},d:class{constructor(e){this.host=e,this.slotsCache=new Map,this.hasContentsCache=new Map,this.slotTextCache=new Map,this.handleSlotChange=e=>{if(!(e.target instanceof HTMLSlotElement))return;const t=e.target,n=t.hasAttribute("name")?t.name:"default",a=this.hasContentsCache.get(n),r=k(t);this.slotsCache.set(n,t),this.hasContentsCache.set(n,k(t)),this.slotTextCache.delete(n),a!==r&&this.host.requestUpdate()},e.addController(this)}hostConnected(){}getSlot(e){const t=this.slotsCache.get(e);if(void 0!==t)return t;const n=this.host.shadowRoot?.querySelector("default"===e?"slot:not([name])":`slot[name="${e}"]`);return n instanceof HTMLSlotElement?(this.slotsCache.set(e,n),n):null}hasSlotContent(e){return this.hasContentsCache.get(e)??!1}getSlotText(e){const t=this.slotTextCache.get(e);if(void 0!==t)return t;if(!(this.hasContentsCache.get(e)??!1))return this.slotTextCache.set(e,null),null;const n=this.getSlot(e);if(!n)return null;const a=(e=>{const t=e.assignedNodes({flatten:!0}),n=[];for(const e of t)e.nodeType===Node.TEXT_NODE&&e.textContent?.match(/\S/)&&n.push(e.textContent.trim()),e.nodeType===Node.ELEMENT_NODE&&e.textContent?.match(/\S/)&&n.push(e.textContent.trim());return n.length>0?n.join(" "):null})(n);return this.slotTextCache.set(e,a),a}},d0:"hidePostSubmitLink",d1:"isTranslatable",d2:"targetLanguage",d3:({adjacentElement:t})=>{if(!e.jy(e.jz()))return()=>{};const n=document.createElement("input");return n.setAttribute("type","text"),n.style.position="absolute",n.style.opacity="0",n.style.height="0",n.style.fontSize="16px",t.insertAdjacentElement("afterend",n),n.focus(),()=>n.remove()},d4:"comment-deletion-modal",d5:t=>e.b({source:t,action:"click",noun:"follow"}),d6:t=>e.b({source:t,action:"undo",noun:"follow"}),d7:"list-reply-comment-button",d8:t=>e.b({source:t,action:"click",noun:"save"}),d9:t=>e.b({source:t,action:"click",noun:"unsave"}),da:function(t){const n={[e.h9.Female]:"Woman",[e.h9.Male]:"Man",[e.h9.NonBinary]:"Non-binary",[e.h9.OptOut]:"I prefer not to say",[e.h9.UserDefined]:"I refer to myself as..."};return t?n[t]:n},e:r,f:e=>/^award_.+\|t\d_.+$/.test(e),g:function(e,t){const n=e.composedPath();for(const e of n){const n=e.dataset,a=n&&n[t];if(null!=a)return a}return null},h:function(e){return Array.from(function*(e){for(let t=1;t<=e;t++)yield t}(e))},i:({listId:e,seeButtonId:t})=>{const n=document.querySelector(`#${e}`),a=n?.querySelectorAll(".hidden"),r=n?.querySelector(`#${t}`),i=r?.getAttribute("data-see-less-label"),o=r?.getAttribute("data-see-more-label");if((!r||!Ee.has(r))&&n&&r&&a&&i&&o){let e=!0;r.addEventListener("click",(()=>{Array.from(a).forEach((t=>{e?t.classList.remove("hidden"):t.classList.add("hidden")})),r.textContent=e?i:o,e=!e})),Ee.add(r)}},j:y,k:function(e,t){return function(e,t){void 0===t&&(t={});var n=function(e){return e&&e.sensitive?"":"i"}(t),a=t.encode,r=void 0===a?function(e){return e}:a,i=t.validate,o=void 0===i||i,s=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:".concat(e.pattern,")$"),n)}));return function(t){for(var n="",a=0;a<e.length;a++){var i=e[a];if("string"!=typeof i){var l=t?t[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,u="*"===i.modifier||"+"===i.modifier;if(Array.isArray(l)){if(!u)throw new TypeError('Expected "'.concat(i.name,'" to not repeat, but got an array'));if(0===l.length){if(c)continue;throw new TypeError('Expected "'.concat(i.name,'" to not be empty'))}for(var d=0;d<l.length;d++){var m=r(l[d],i);if(o&&!s[a].test(m))throw new TypeError('Expected all "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(m,'"'));n+=i.prefix+m+i.suffix}}else if("string"!=typeof l&&"number"!=typeof l){if(!c){var h=u?"an array":"a string";throw new TypeError('Expected "'.concat(i.name,'" to be ').concat(h))}}else{m=r(String(l),i);if(o&&!s[a].test(m))throw new TypeError('Expected "'.concat(i.name,'" to match "').concat(i.pattern,'", but got "').concat(m,'"'));n+=i.prefix+m+i.suffix}}else n+=i}return n}}(de(e,t),t)},l:(...e)=>e.filter(Boolean).join(" "),m:function(e="#preview"){Ve((function(){const t=document.querySelector(e);t?.classList.contains(We)||t?.classList.add(We)}))},n:()=>{const e=M(),t=$();return"true"===e||void 0===e&&void 0===t?window.matchMedia("(prefers-reduced-motion: reduce)")?.matches:"false"!==t},o:"templateSelector",p:function(e){const t=document.querySelector(e);if(!t)return Promise.reject(`lazy script "${e}" cannot be found`);const n=s.get(t);if(n)return n;if(!t.nonce)return Promise.reject('loadLazyScriptWithNonce should only be used to load scripts with "nonce"s');const a=t?.getAttribute("data-src");if(!a)return Promise.reject('loadLazyScriptWithNonce expects a script tag with a "data-src" attribute');const r=document.querySelector(`script[src="${a}"]`);if(r)return Promise.resolve(r);const i=new Promise(((e,n)=>{const r=document.createElement("script");r.nonce=t.nonce,r.onload=function(){e(r)},r.onerror=function(e){n(e?.toString())},r.src=a,r.dataset.lazy="true",document.body.appendChild(r)}));return s.set(t,i),i},q:function(){return{source:"feed_experience",action:"consume",noun:"subreddit"}},r:()=>e.b({source:"global",action:"view",noun:"screen"},{action_info:{page_type:e.aa.AchievementDetail}}),s:Ve,t:function(){return{source:"feed_experience",action:"impression",noun:"subreddit"}},u:"click",v:(e,t=e.tagName.toLowerCase())=>{const n=e=>(""===e&&(e="generic"),t+":"+e);return{dispatch:(t,a={bubbles:!0,cancelable:!0,composed:!0})=>e.dispatchEvent(new CustomEvent(n(t),a)),eventId:n}},w:N,x:function(e,t=0,n=!1){let a=!1,r=null;const i=function(...o){a?n&&(r=[this,o]):(e.apply(this,o),a=!0,setTimeout((()=>{a=!1,r&&(i.apply(r[0],r[1]),r=null)}),t))};return i},y:function(e,t){if(!e?.includes("r/"))return"/";let n=[e,t].filter(Boolean).join("/");return n.startsWith("/")||(n=`/${n}`),n.endsWith("/")||(n=`${n}/`),n},z:function(e,t){return null!==e.querySelector(`:scope > [slot="${t}"]`)}};}));
SML.dm("CITAGWir",["D7lSuCop","CVEbQKiO","CCphb8vV"],(async(e,a,t)=>{let r=class extends e.go{constructor(){super(...arguments),this._fullscreenBlurEl=document.createElement("div"),this._appliedBlurFilter=null,this._blurElement=null,this.shouldContentScroll=!1,this.isFooterEmpty=!0,this.render=()=>{const t=a.x`<slot name="closeButton" class="${e.x({floating:this.shouldContentScroll})}"></slot>`,r=a.x`<div id="header" class="${e.x({"with-icon":this._titleGraphic.length>0})}"> <slot name="titleGraphic"></slot> <slot name="title"></slot> </div>`,n=a.x`<slot name="primaryButton" @slotchange="${this.calcFooterChildren}"></slot> <slot name="secondaryButton" @slotchange="${this.calcFooterChildren}"></slot> <slot name="tertiaryButton" @slotchange="${this.calcFooterChildren}"></slot>`;return a.x` ${e.ck(this.modal?"\n  <style>\n    :host {\n      top: 50%;\n      transform: translateY(-50%);\n      position: fixed;\n    }\n  </style>\n":"\n  <style>\n    :host {\n      position: absolute;\n    }\n  </style>\n")} <div id="wrapper" role="${a.l(this.open?"dialog":void 0)}" aria-label="${a.l(this.ariaLabel??void 0)}" aria-labelledby="${a.l(null!=this.ariaLabel?void 0:"header-container")}" aria-modal="${a.l(this.open&&this.modal?"true":void 0)}"> <div id="content"> ${t} <div id="header-container"> ${r} </div> <slot></slot> </div> <div id="footer" class="${e.x({"sticky-footer":this.shouldContentScroll,empty:this.isFooterEmpty})}"> ${n} <slot name="footer" @slotchange="${this.calcFooterChildren}"></slot> </div> </div> `}}static get styles(){return a.i`${e.go.styles}:host{--content-padding:var(--spacer-md);box-sizing:border-box;max-width:none;border-radius:var(--rem16);padding:0;overflow:hidden}#wrapper{display:flex;flex-direction:column;align-items:center;height:100%;position:relative;font-size:16px;box-sizing:border-box;max-height:inherit;min-height:inherit;overflow:hidden}slot[name=closeButton]{display:inline-flex;position:absolute;position:absolute;top:0;inset-inline-end:0;margin:var(--content-padding)}#header{display:flex;flex-direction:column;gap:var(--spacer-sm);align-items:center;text-align:start;width:100%;box-sizing:border-box}#header.with-icon{text-align:center;padding:0 var(--rem40)}slot[name=title]{font-size:var(--rem18);font-weight:700}slot:not([name]){display:flex;flex-grow:1;width:100%;padding:var(--spacer-xs) 0;font-size:var(--rem14)}#footer{display:flex;flex-direction:column;gap:var(--spacer-sm);width:100%;background:var(--color-ui-modalbackground);padding:var(--spacer-md);box-sizing:border-box}slot[name=tertiaryButton]{display:inline-flex;justify-content:center;font-size:14px}#footer.empty{display:none}@media (min-width:640px){#content{padding:var(--content-padding)}#header,#header.with-icon{flex-direction:row;padding-inline:0 var(--spacer-2xl)}#footer{flex-direction:row-reverse;align-items:center;justify-content:end}slot[name=tertiaryButton]{margin-inline-end:auto}slot[name=title]{text-align:start}}#content{height:100%;max-height:100%;width:100%;overflow:auto;position:relative;--content-padding:var(--spacer-md);padding:var(--content-padding);box-sizing:border-box;flex:1}.overflowing-content{max-height:100%;overflow-y:auto}.sticky-footer{box-shadow:var(--elevation-md)}slot[name=closeButton].floating{box-shadow:var(--elevation-sm);border-radius:999px}`}connectedCallback(){super.connectedCallback(),Object.assign(this._fullscreenBlurEl.style,{position:"fixed",top:"0",bottom:"0",right:"0",left:"0",backdropFilter:n(4)})}disconnectedCallback(){this._fullscreenBlurEl.remove(),e.gn.remove(this),this.resizeObserver?.disconnect()}firstUpdated(){this.resizeObserver=new ResizeObserver((()=>{this.measureShouldContentScroll()})),this.resizeObserver.observe(this.content)}calcFooterChildren(){this.isFooterEmpty=!(this._footerSlot?.length||this._primaryButtonSlot?.length||this._secondaryButtonSlot?.length||this._tertiaryButtonSlot?.length)}measureShouldContentScroll(){this.shouldContentScroll=Boolean(this.content?.scrollHeight&&this.content?.scrollHeight>this.content.offsetHeight)}showModal(a){if(e.gn.add(this),super.showModal(),null!=a?.blur){const e=!0===a.blur?4:Number(a.blur);this._appliedBlurFilter=n(e),a?.blurElement?(this._blurElement=a.blurElement,t=this._blurElement,r=this._appliedBlurFilter,t.style.filter=t.style.filter+" "+r):(Object.assign(this._fullscreenBlurEl.style,{backdropFilter:this._appliedBlurFilter}),document.body.append(this._fullscreenBlurEl))}var t,r}close(){this.open&&(super.close(),e.gn.remove(this),null!=this._blurElement&&null!=this._appliedBlurFilter?(!function(e,a){const t=e.style.filter.split(" ").filter(Boolean).reverse(),r=t.indexOf(a);if(-1===r)return;t.splice(r,1),e.style.filter=t.reverse().join(" ")}(this._blurElement,this._appliedBlurFilter),this._appliedBlurFilter=null,this._blurElement=null):this._fullscreenBlurEl.remove())}};function n(e){return`blur(${e}px)`}a._([a.b()],r.prototype,"shouldContentScroll",void 0),a._([a.k({slot:"titleGraphic"})],r.prototype,"_titleGraphic",void 0),a._([a.z("#content")],r.prototype,"content",void 0),a._([a.z("#footer")],r.prototype,"footer",void 0),a._([a.b()],r.prototype,"isFooterEmpty",void 0),a._([a.v({slot:"footer",flatten:!0})],r.prototype,"_footerSlot",void 0),a._([a.v({slot:"primaryButton",flatten:!0})],r.prototype,"_primaryButtonSlot",void 0),a._([a.v({slot:"secondaryButton",flatten:!0})],r.prototype,"_secondaryButtonSlot",void 0),a._([a.v({slot:"tertiaryButton",flatten:!0})],r.prototype,"_tertiaryButtonSlot",void 0),r=a._([a.c("faceplate-modal")],r);function i(e){return e?.[0]?.message??"Something went wrong";}const o=e=>({error:e||"There was an error uploading the file."});async function l(a,r){const n=t.bk.get(a.type);if(!n)throw new Error(`${a.type} files are not supported.`);try{const l=await async function(a){const t=await e.v({operation:e.O.CreateSubredditStructuredStylesUploadLease,variables:{input:a}});if(t.errors?.length)throw new Error(i(t.errors));const r=t.data.createSubredditStructuredStylesUploadLease;if(r?.ok&&r.uploadLease)return{uploadLeaseUrl:r.uploadLease.uploadLeaseUrl,uploadLeaseHeaders:r.uploadLease.uploadLeaseHeaders};throw new Error(i(r?.errors))}({...r,filepath:a.name,mimetype:n}),s=await t.bj(a,l);return s?{url:s}:o()}catch(e){return l=e.message,window.Sentry?.captureMessage?.(`Media file upload failed with error: ${l}`),o(e.message)}var l}return {C:class{async makeGQLRequest(...a){return e.v(...a)}async uploadMedia(...e){return l(...e)}async saveImage({subredditId:e,url:a,fileContent:t,uploadType:r,gqlOperation:n}){if(t)try{const n=await this.uploadMedia(t,{subredditId:e,imagetype:r});if(a=n.url?decodeURIComponent(n.url):a,n.error)return this.handleError(r)}catch(e){return this.handleError(r)}try{await this.makeGQLRequest({operation:n,variables:{input:{subredditId:e,[this.getOperationArg(r)]:a??""}}})}catch(e){return this.handleError(r)}return null}async saveCommunityIcon(a,t,r){return this.saveImage({subredditId:a,url:t,fileContent:r,uploadType:e.gp.CommunityIcon,gqlOperation:e.O.UpdateSubredditIcon})}async saveBanner(a,t,r){return this.saveImage({subredditId:a,url:t,fileContent:r,uploadType:e.gp.BannerBackgroundImage,gqlOperation:e.O.UpdateSubredditBanner})}async saveMobileBanner(a,t,r){return this.saveImage({subredditId:a,url:t,fileContent:r,uploadType:e.gp.MobileBannerImage,gqlOperation:e.O.UpdateSubredditBanner})}handleError(a){switch(a){case e.gp.BannerBackgroundImage:return "Something went wrong while saving the banner.";case e.gp.MobileBannerImage:return "Something went wrong while saving the mobile banner.";case e.gp.CommunityIcon:default:return "Something went wrong saving the avatar.";}}getOperationArg(a){switch(a){case e.gp.BannerBackgroundImage:return"bannerBackgroundImage";case e.gp.MobileBannerImage:return"mobileBannerImage";case e.gp.CommunityIcon:default:return"communityIcon"}}},get F(){return r},O:"mod-show-post-level-crowd-control-modal",u:l};}));
SML.dm("CW-W37sd",["CVEbQKiO","D7lSuCop"],(async(a,t)=>{let e=class extends a.s{constructor(){super(...arguments),this.data={}}connectedCallback(){super.connectedCallback(),t.p(t.T.PageDataLoaded,this.data)}};a._([a.n({type:Object})],e.prototype,"data",void 0),e=a._([a.c("reddit-page-data")],e)}));
SML.dm("D_QMHsXc",["CVEbQKiO","D7lSuCop","Cq9O5zpS","CCphb8vV","DlWm-1vG","Cx0Ea5Jz"],(async(e,t,i,s,r,n)=>{const a=t.W(e.s);let o=class extends a{constructor(){super(...arguments),this.id="undefined"}static get styles(){return e.i`:host{display:block}`}connectedCallback(){super.connectedCallback(),this.enableObserver(this.config)}disconnectedCallback(){super.disconnectedCallback(),this.isObserved&&this.disableObserver()}observerIsIntersectingCallback(e){const i=t.c("io-event-is-intersecting",{id:this.id,details:e});this.dispatchEvent(i)}observerIsNotIntersectingCallback(e){const i=t.c("io-event-is-not-intersecting",{id:this.id,details:e});this.dispatchEvent(i)}render(){return e.x`<slot></slot>`}};e._([e.n({type:String})],o.prototype,"id",void 0),e._([e.n({type:Object})],o.prototype,"config",void 0),o=e._([e.c("shreddit-with-observer-wrapper")],o);const d=new Set(["t3_103b4tl","t3_u1cuyg","t3_103bmpv","t3_xipqoc","t3_xipsi3"]);function l(e){const t=new Map;return e.forEach((e=>{const i=t.get(e.type)||[];i.push(e),t.set(e.type,i)})),t}function h(e){return!!e.encryptedTrackingId}function u(e,t){return e.encryptedTrackingId+t.additionalEventMetadata}function m({pixelEvent:e,pixelRequestBody:t,metadata:i,target:s}){if(!e.encryptedTrackingId)return;if(T(e.type))return u(e,t);const r=i?function(e){return Object.entries(e).reduce(((e,[t,i])=>(e[t]=i.toString(),e)),{})}(i):{};return fetch("https://alb.reddit.com/track",{method:"POST",mode:"no-cors",body:JSON.stringify({encryptedTrackingId:e.encryptedTrackingId,encryptedTrackingPayload:t.encryptedTrackingPayload,additionalEventMetadata:t.additionalEventMetadata,clientImpressionID:t.impressionId,...r})}).then((()=>{_(s,"succeeded",e)})).catch((t=>{const i="Sentry"in window?window.Sentry:void 0;i?.captureException&&i.captureException(new Error(`Error in POST response from pixel server for pixel of type ${e.type}: ${t}`)),_(s,"failed",e)})),u(e,t)}function c(e){return!!t.gH.includes(e)||t.gI.some((({experimentName:i,pixelEventTypes:s})=>t.bU(i)&&s.includes(e)))}function T(e){return t.gL.some((({experimentName:i,pixelEventTypes:s})=>t.bU(i)&&s.includes(e)))}function E({target:e,pixelEvent:i,impressionId:n,displayMetadata:a,videoMetadata:o,pixelRequestBody:d}){const l=r.P[i.type];if(!l)return;const u={impression_id:n,event_timestamp:Math.floor(Date.now()),display_metadata:a,video_metadata:o,additional_metadata:d.additionalEventMetadata};if(h(i))u.encrypted_tracking_id=i.encryptedTrackingId,u.encrypted_tracking_payload=d.encryptedTrackingPayload;else{if(!s.a2(i.url))return;const{encryptedTrackingId:e,encryptedTrackingPayload:t}=function(e){const t=new URL(e);return{encryptedTrackingPayload:t.searchParams.get("za")||"",encryptedTrackingId:t.searchParams.get("zp")||""}}(i.url);u.encrypted_tracking_id=e,u.encrypted_tracking_payload=t}const m={client_ad_event_metadata:u,video_watch_metadata:t.gJ[i.type],vendor_fully_in_view_metadata:t.gK[i.type],screen:{height:window.screen.height,width:window.screen.width}},c=t.c("track-event",{details:t.b(l,m)});e.dispatchEvent(c)}function _(e,i,r){if(t.bU(t.gM))return;if(!h(r)&&!s.a2(r.url))return;const n=t.gN({name:"ads_igif_requests_total",value:1,label_values:[`tracking_type,${t.bS[r.type]}`,`request_stage,${i}`]});t.e(e,n)}class I{constructor(e,i){this.impressionTimestamp=0,this.wasEverViewableTimer={fired:!1},this.largeAdFullViewTimer={fired:!1},this.hasDispatchedViewEvent=!1,this.resetTimers=()=>{for(const e of this.pixelTimers.keys())this.clearPixelTimer(e);for(const e of this.continuousTimers.keys())this.unsetContinuousTimer(e);for(const e of this.cumulativeTimers.keys())this.pauseCumulativeTimer(e);this.wasEverViewableTimer.timer&&(clearTimeout(this.wasEverViewableTimer.timer),this.wasEverViewableTimer.timer=void 0),this.largeAdFullViewTimer.timer&&(clearTimeout(this.largeAdFullViewTimer.timer),this.largeAdFullViewTimer.timer=void 0)},this.pixelFiringController=i,this.getFiredRedditPixelsCount=e.getFiredRedditPixelsCount,this.postId=e.postId,this.impressionId=e.impressionId,this.postElement=e.postElement,this.galleryItems=e.galleryItems,this.pixelTimers=new Map,this.cumulativeTimers=new Map,this.continuousTimers=new Map,this.setupUnloadFiring(),this.isProductAd=e.events.some((e=>e.type===t.bS.PRODUCT_CLICK||e.type===t.bS.PRODUCT_IMPRESSION))}setupUnloadFiring(){if(window.addEventListener(t.al.eventType,(()=>this.handleUnload())),d.has(this.postId)){const e=new URLSearchParams(t.dW.search),i=Number.parseInt(e.get(t.gO)||"");isNaN(i)||window.setTimeout((()=>this.fireUnloadPixel()),i)}}getCumulativeTimes(e){const i=this.updateCumulativeTimer(t.dY.ANY_TOTAL_VIEW_TIME,e),s=this.updateCumulativeTimer(t.dY.FIFTY_TOTAL_VIEW_TIME,e),r=this.updateCumulativeTimer(t.dY.FULL_TOTAL_VIEW_TIME,e),n=this.updateCumulativeTimer(t.dY.EIGHTY_TOTAL_VIEW_TIME,e);return{totalViewTime:i?.cumulativeTime||0,fiftyViewTime:s?.cumulativeTime||0,fullViewTime:r?.cumulativeTime||0,eightyViewTime:n?.cumulativeTime||0}}getContinuousTimes(e){const i=this.updateContinuousTimer(t.dY.ANY_CONTINUOUS_VIEW_TIME,e),s=this.updateContinuousTimer(t.dY.FIFTY_CONTINUOUS_VIEW_TIME,e),r=this.updateContinuousTimer(t.dY.FULL_CONTINUOUS_VIEW_TIME,e),n=this.updateContinuousTimer(t.dY.EIGHTY_CONTINUOUS_VIEW_TIME,e),a=this.updateContinuousTimer(t.dY.THIRTY_CONTINUOUS_VIEW_TIME,e);return{maxAnyViewTime:i?.maxContinuousTime||0,maxFiftyViewTime:s?.maxContinuousTime||0,maxFullViewTime:r?.maxContinuousTime||0,maxEightyViewTime:n?.maxContinuousTime||0,maxThirtyViewTime:a?.maxContinuousTime||0}}getMetadata(e){const i=Date.now(),{totalViewTime:s,fiftyViewTime:r,fullViewTime:n,eightyViewTime:a}=this.getCumulativeTimes(i),{maxAnyViewTime:o,maxFiftyViewTime:d,maxFullViewTime:l,maxEightyViewTime:h,maxThirtyViewTime:u}=this.getContinuousTimes(i),m=this.pixelTimers.get(t.bS.GROUP_M_VIEWABLE)?.fired||e===t.bS.GROUP_M_VIEWABLE,c=e===t.bS.VIEWABLE_IMPRESSION||this.wasEverViewableTimer.fired;e===t.bS.IMPRESSION&&0===this.impressionTimestamp&&(this.impressionTimestamp=i);const T=this.postElement?.getBoundingClientRect(),E=Math.floor(T?.width??0),_=Math.floor(T?.height??0),I=this.getFiredRedditPixelsCount?.()||0,p=new URLSearchParams(t.dW.search).get(t.gP);return{[t.dY.ANY_TOTAL_VIEW_TIME]:s,[t.dY.FIFTY_TOTAL_VIEW_TIME]:r,[t.dY.EIGHTY_TOTAL_VIEW_TIME]:a,[t.dY.FULL_TOTAL_VIEW_TIME]:n,[t.dY.ANY_CONTINUOUS_VIEW_TIME]:o,[t.dY.FIFTY_CONTINUOUS_VIEW_TIME]:d,[t.dY.THIRTY_CONTINUOUS_VIEW_TIME]:u,[t.dY.EIGHTY_CONTINUOUS_VIEW_TIME]:h,[t.dY.FULL_CONTINUOUS_VIEW_TIME]:l,[t.dY.GLOBAL_COUNT]:I,[t.dY.GROUP_M_VIEWABLE]:m?1:0,[t.dY.AD_LOAD_TIME]:this.impressionTimestamp,[t.dY.TIMESTAMP]:i,[t.dY.WAS_EVER_VIEWABLE]:c?1:0,[t.dY.LARGE_AD_FULL_VIEW]:this.largeAdFullViewTimer.fired?1:0,[t.dY.HEIGHT]:_,[t.dY.WIDTH]:E,[t.dY.SCREEN_HEIGHT]:window.screen.height,[t.dY.SCREEN_WIDTH]:window.screen.width,...null!==p&&{[t.dY.TEST_ID]:p}}}getAdEventDisplayMetadata(){const e=Date.now(),{totalViewTime:t,fiftyViewTime:i,eightyViewTime:s,fullViewTime:r}=this.getCumulativeTimes(e),{maxAnyViewTime:n,maxThirtyViewTime:a,maxFiftyViewTime:o,maxEightyViewTime:d,maxFullViewTime:l}=this.getContinuousTimes(e),h=this.postElement?.getBoundingClientRect(),u=Math.floor(h?.width??0),m=Math.floor(h?.height??0);return{any_total_view_time_ms:Math.floor(t),fifty_total_view_time_ms:Math.floor(i),eighty_total_view_time_ms:Math.floor(s),full_total_view_time_ms:Math.floor(r),any_continuous_view_time_ms:Math.floor(n),thirty_continuous_view_time_ms:Math.floor(a),fifty_continuous_view_time_ms:Math.floor(o),eighty_continuous_view_time_ms:Math.floor(d),full_continuous_view_time_ms:Math.floor(l),height:m,width:u,screen_width:Math.floor(window.screen.width),screen_height:Math.floor(window.screen.height)}}getAdEventVideoMetadata(){}getPixelScalingFields(e){return{encryptedTrackingPayload:this.postElement.encryptedTrackingPayload||"",additionalEventMetadata:this.postElement.additionalEventMetadata?this.postElement.additionalEventMetadata[e||0]:"",impressionId:this.impressionId}}firePixel(e,t){const i=c(e);this.pixelFiringController.firePixel({pixelEventType:e,metadata:this.getMetadata(e),displayMetadata:i?this.getAdEventDisplayMetadata():void 0,videoMetadata:i?this.getAdEventVideoMetadata():void 0,galleryIndex:t})}fireUnloadPixel(){this.firePixel(t.bS.UNLOAD)}measureViewChange(e){const i=this.postElement?.getBoundingClientRect(),s=Math.floor(i?.width??0),r=Math.floor(i?.height??0),n=r*s,a=n>=242500,o=r>document.documentElement.clientHeight;if(e.intersectionRatio){this.setCumulativeTimer(t.dY.ANY_TOTAL_VIEW_TIME),this.setContinuousTimer(t.dY.ANY_CONTINUOUS_VIEW_TIME),this.measureImpressionPixel(),this.galleryItems?.length?this.measureGalleryItemImpression():this.isProductAd&&this.measureProductImpression(),t.gQ.queuePostForUnload(this.postId,this.impressionId,this.getMetadata.bind(this),this.pixelFiringController.firePixel.bind(this),this.getPixelScalingFields.bind(this));const e=this.postElement,i=this.galleryItems;if(!this.hasDispatchedViewEvent&&e&&!e.isBlank){const s=t.c("observe-post-view-ad",{postId:this.postId,post:e,galleryItems:i||[]});this.postElement.dispatchEvent(s),this.hasDispatchedViewEvent=!0}}else this.unsetContinuousTimer(t.dY.ANY_CONTINUOUS_VIEW_TIME),this.pauseCumulativeTimer(t.dY.ANY_TOTAL_VIEW_TIME);if(e.intersectionRatio>=t.bR.LARGE_AD_FULL_VIEW_THRESHOLD?this.setContinuousTimer(t.dY.THIRTY_CONTINUOUS_VIEW_TIME):this.unsetContinuousTimer(t.dY.THIRTY_CONTINUOUS_VIEW_TIME),e.intersectionRatio>=t.bR.VIEWABILITY_THRESHOLD){this.setCumulativeTimer(t.dY.FIFTY_TOTAL_VIEW_TIME),this.setContinuousTimer(t.dY.FIFTY_CONTINUOUS_VIEW_TIME),this.pixelTimers.has(t.bS.VIEWABLE_IMPRESSION)||this.setPixelTimer(t.bS.VIEWABLE_IMPRESSION,1e3),this.wasEverViewableTimer.timer||this.wasEverViewableTimer.fired||(this.wasEverViewableTimer.timer=setTimeout((()=>{this.wasEverViewableTimer.timer&&(this.wasEverViewableTimer.fired=!0,this.wasEverViewableTimer.timer=void 0)}),1e3));const e=this.cumulativeTimers.get(t.dY.FIFTY_TOTAL_VIEW_TIME);e&&(this.pixelTimers.has(t.bS.VENDOR_FULLY_IN_VIEW_5_SECS)||this.setPixelTimer(t.bS.VENDOR_FULLY_IN_VIEW_5_SECS,5e3-e.cumulativeTime),this.pixelTimers.has(t.bS.VENDOR_FULLY_IN_VIEW_15_SECS)||this.setPixelTimer(t.bS.VENDOR_FULLY_IN_VIEW_15_SECS,15e3-e.cumulativeTime))}else this.pixelTimers.has(t.bS.VIEWABLE_IMPRESSION)&&this.clearPixelTimer(t.bS.VIEWABLE_IMPRESSION),this.pixelTimers.has(t.bS.VENDOR_FULLY_IN_VIEW_5_SECS)&&this.clearPixelTimer(t.bS.VENDOR_FULLY_IN_VIEW_5_SECS),this.pixelTimers.has(t.bS.VENDOR_FULLY_IN_VIEW_15_SECS)&&this.clearPixelTimer(t.bS.VENDOR_FULLY_IN_VIEW_15_SECS),this.pauseCumulativeTimer(t.dY.FIFTY_TOTAL_VIEW_TIME),this.unsetContinuousTimer(t.dY.FIFTY_CONTINUOUS_VIEW_TIME);e.intersectionRatio>=t.bR.EIGHTY_VIEWABILITY_THRESHOLD?(this.setCumulativeTimer(t.dY.EIGHTY_TOTAL_VIEW_TIME),this.setContinuousTimer(t.dY.EIGHTY_CONTINUOUS_VIEW_TIME)):(this.pauseCumulativeTimer(t.dY.EIGHTY_TOTAL_VIEW_TIME),this.unsetContinuousTimer(t.dY.EIGHTY_CONTINUOUS_VIEW_TIME)),e.intersectionRatio>=t.bR.FULL_VIEWABILITY_THRESHOLD?(this.setCumulativeTimer(t.dY.FULL_TOTAL_VIEW_TIME),this.setContinuousTimer(t.dY.FULL_CONTINUOUS_VIEW_TIME)):(this.pauseCumulativeTimer(t.dY.FULL_TOTAL_VIEW_TIME),this.unsetContinuousTimer(t.dY.FULL_CONTINUOUS_VIEW_TIME)),e.intersectionRatio<t.bR.VIEWABILITY_THRESHOLD&&this.wasEverViewableTimer.timer&&(clearTimeout(this.wasEverViewableTimer.timer),this.wasEverViewableTimer.timer=void 0);a&&e.intersectionRatio>=t.bR.LARGE_AD_FULL_VIEW_THRESHOLD||e.intersectionRatio>=t.bR.FULL_VIEWABILITY_THRESHOLD?this.largeAdFullViewTimer.timer||this.largeAdFullViewTimer.fired||(this.largeAdFullViewTimer.timer=setTimeout((()=>{this.largeAdFullViewTimer.timer&&(this.largeAdFullViewTimer.fired=!0,this.largeAdFullViewTimer.timer=void 0)}),1e3)):this.largeAdFullViewTimer.timer&&(clearTimeout(this.largeAdFullViewTimer.timer),this.largeAdFullViewTimer.timer=void 0),o?1!==e.intersectionRatio||this.pixelTimers.has(t.bS.GROUP_M_VIEWABLE)?n*e.intersectionRatio<1&&this.pixelTimers.has(t.bS.GROUP_M_VIEWABLE)&&this.clearPixelTimer(t.bS.GROUP_M_VIEWABLE):this.setPixelTimer(t.bS.GROUP_M_VIEWABLE,1e3):e.intersectionRatio>=t.bR.FULL_VIEWABILITY_THRESHOLD?(this.pixelTimers.has(t.bS.GROUP_M_VIEWABLE)||this.setPixelTimer(t.bS.GROUP_M_VIEWABLE,1e3),this.pixelTimers.has(t.bS.VENDOR_FULLY_IN_VIEW)||this.setPixelTimer(t.bS.VENDOR_FULLY_IN_VIEW,100)):(this.pixelTimers.has(t.bS.GROUP_M_VIEWABLE)&&this.clearPixelTimer(t.bS.GROUP_M_VIEWABLE),this.pixelTimers.has(t.bS.VENDOR_FULLY_IN_VIEW)&&this.clearPixelTimer(t.bS.VENDOR_FULLY_IN_VIEW))}clearPixelTimer(e){const t=this.pixelTimers.get(e);t?.timer&&(clearTimeout(t.timer),this.pixelTimers.delete(e))}setPixelTimer(e,t){const i=this.pixelTimers.get(e)?.fired;i||(this.pixelTimers.get(e)?.timer&&this.clearPixelTimer(e),this.pixelTimers.set(e,{timer:setTimeout((()=>{this.pixelTimers.get(e)&&(this.firePixel(e),this.pixelTimers.set(e,{fired:!0,timer:void 0}))}),t)}))}handleClickRedirect(e,s){const r=this.getMetadata(t.bS.CLICK);this.pixelFiringController.fireDebugPixel({pixel:i.a(e,r),pixelEvent:{url:e,type:t.bS.CLICK,metadata:r},impressionId:this.impressionId,postId:this.postId}),this.isProductAd&&this.firePixel(t.bS.PRODUCT_CLICK,s)}measureImpressionPixel(){this.firePixel(t.bS.IMPRESSION)}measureGalleryItemImpression(e=0){this.firePixel(t.bS.GALLERY_ITEM_IMPRESSION,e),this.isProductAd&&this.firePixel(t.bS.PRODUCT_IMPRESSION,e)}measureProductImpression(){this.firePixel(t.bS.PRODUCT_IMPRESSION)}handleUnload(){t.gQ.fireQueuedUnloadPixels()}setCumulativeTimer(e){const t=this.cumulativeTimers.get(e),i=Date.now();if(t&&t.previousDate){const s=i-t.previousDate+t.cumulativeTime;this.cumulativeTimers.set(e,{previousDate:i,cumulativeTime:s})}else this.cumulativeTimers.set(e,{previousDate:i,cumulativeTime:t?.cumulativeTime||0})}updateCumulativeTimer(e,t){const i=this.cumulativeTimers.get(e);if(i&&i.previousDate){const s=t-i.previousDate+(i.cumulativeTime||0);this.cumulativeTimers.set(e,{previousDate:t,cumulativeTime:s})}return this.cumulativeTimers.get(e)}pauseCumulativeTimer(e){const t=this.updateCumulativeTimer(e,Date.now());t&&this.cumulativeTimers.set(e,{previousDate:null,cumulativeTime:t.cumulativeTime||0})}setContinuousTimer(e){const t=this.continuousTimers.get(e),i=Date.now();if(t&&t.previousDate){const s=t.currentContinuousTime+(i-t.previousDate),r=Math.max(s,t.maxContinuousTime);this.continuousTimers.set(e,{previousDate:i,currentContinuousTime:s,maxContinuousTime:r})}else this.continuousTimers.set(e,{previousDate:i,currentContinuousTime:t?.currentContinuousTime||0,maxContinuousTime:t?.maxContinuousTime||0})}updateContinuousTimer(e,t){const i=this.continuousTimers.get(e);if(i&&i.previousDate){const s=i.currentContinuousTime+(t-i.previousDate),r=Math.max(s,i.maxContinuousTime);this.continuousTimers.set(e,{previousDate:t,currentContinuousTime:s,maxContinuousTime:r})}return this.continuousTimers.get(e)}unsetContinuousTimer(e){const t=this.continuousTimers.get(e),i=Date.now();if(t&&t.previousDate){const s=Math.max(t.currentContinuousTime+(i-t.previousDate),t.maxContinuousTime);this.continuousTimers.set(e,{previousDate:null,currentContinuousTime:0,maxContinuousTime:s})}}}function p(e=0){return 1e3*e}class v extends I{get visible(){return!!this.videoIntersectionRatio}get viewable(){return(this.videoIntersectionRatio||0)>=t.bR.VIEWABILITY_THRESHOLD}get currentQuartileState(){switch((this.viewable?1:0)+(this.videoVolume&&this.videoVolume>0?2:0)){case 0:return t.gR.NOT_VISIBLE_NOT_AUDIBLE;case 1:return t.gR.VISIBLE_NOT_AUDIBLE;case 2:return t.gR.AUDIBLE_NOT_VISIBLE;case 3:return t.gR.VISIBLE_AND_AUDIBLE;default:return t.gR.NO_EVENT}}constructor(e,t){super(e,t),this.videoDuration=1/0,this.videoCurrentTime=0,this.seekingInitialized=!1,this.hasSeeked=!1,this.accumulatedWatchedTime=0,this.videoWasFullscreen=!1,this.videoWasVisible=!1,this.quartileState=new Map,this.dimensions=e.dimensions,this.thresholds=i.g(i.b)}minTimeRequired({timePercent:e=1/0,time:t=1/0}){const i=Number.isFinite(e)?e*this.videoDuration:1/0,s=Number.isFinite(t)?t:1/0;return Math.min(i,s)}setViewablePixelTimer(e){const t=Date.now(),i=this.pixelTimers.get(e.pixelEvent);if(i?.fired||i?.timer)return;let s=e.time;e.timePercent&&this.videoDuration&&(s=Math.min(this.videoDuration*e.timePercent,e.time));const r=i?.timeLeft?i?.timeLeft:s;this.pixelTimers.set(e.pixelEvent,{timer:setTimeout((()=>{this.firePixel(e.pixelEvent),this.pixelTimers.set(e.pixelEvent,{fired:!0,timer:void 0})}),r),timeLeft:r,lastSetTime:t})}resetViewablePixelTimer(e){const t=this.pixelTimers.get(e.pixelEvent);t?.fired||t&&!t.fired&&this.clearPixelTimer(e.pixelEvent)}pauseViewablePixelTimer(e){const t=this.pixelTimers.get(e.pixelEvent);if(t&&!t?.fired&&void 0!==this.videoCurrentTime&&void 0!==this.videoDuration){const i=Date.now();if(t.timer&&t.lastSetTime){const s=e.time-(i-t.lastSetTime);clearTimeout(t.timer),this.pixelTimers.set(e.pixelEvent,{timeLeft:s})}}}videoStateChange(){this.visible&&!this.videoWasVisible&&(this.videoWasVisible=!0),this.videoPlaying&&(this.updateQuartileState(),this.firePixel(t.bS.VIDEO_STARTED),this.videoVolume&&this.firePixel(t.bS.VIDEO_PLAYED_WITH_SOUND),t.gS.forEach((e=>{this.videoViewabilityStateChange(e)}))),t.gT.forEach((e=>{this.videoWatchedPercentStateChange(e)})),t.gU.forEach((e=>{this.videoWatchedSecondsStateChange(e)})),this.videoGroupMViewableChange()}videoViewabilityStateChange(e){this.videoIntersectionRatio&&this.videoIntersectionRatio>=e.threshold?this.videoPlaying?this.setViewablePixelTimer(e):this.pauseViewablePixelTimer(e):this.resetViewablePixelTimer({pixelEvent:e.pixelEvent,time:e.time})}videoWatchedPercentStateChange(e){if("number"==typeof this.videoCurrentTime&&"number"==typeof this.videoDuration){this.videoCurrentTime/this.videoDuration>=e.timePercent&&(e.quartileKey&&!this.quartileState.has(e.quartileKey)&&(e.quartileKey!==t.gV.VIDEO_STATE_Q0||this.videoPlaying)&&this.quartileState.set(e.quartileKey,this.currentQuartileState),t.gW(e)&&this.firePixel(e.pixelEvent))}}updateQuartileState(){t.gT.forEach((e=>{if(e.quartileKey&&"number"==typeof this.videoCurrentTime&&"number"==typeof this.videoDuration){this.videoCurrentTime/this.videoDuration>=e.timePercent&&e.quartileKey&&!this.quartileState.has(e.quartileKey)&&this.quartileState.set(e.quartileKey,this.currentQuartileState)}}))}videoWatchedSecondsStateChange(e){this.accumulatedWatchedTime>=this.minTimeRequired(e)&&this.firePixel(e.pixelEvent)}setMediaDetails(e){Number.isFinite(e.volume)&&(this.videoVolume=e.muted?0:e.volume),Number.isFinite(e.duration)&&(this.videoDuration=p(e.duration)),Number.isFinite(e.currentTime)&&(this.videoCurrentTime=p(e.currentTime))}updateAccumulatedWatchTime(e){const t=e-this.videoCurrentTime;return this.accumulatedWatchedTime+=t,t}updateThresholds(e){const{visibleThresholds:t}=this.getHiddenAndVisibleThresholds();t.forEach((t=>{this.thresholds[t.key].totalTime+=e,this.thresholds[t.key].currentContinuousTime+=e;const{currentContinuousTime:i,maxContinuousTime:s}=this.thresholds[t.key];i>s&&(this.thresholds[t.key].maxContinuousTime=i)})),this.resetContinuousTimerForHiddenThresholds()}getHiddenAndVisibleThresholds(){const e=[],t=[];return i.V.forEach((i=>{this.meetsViewabilityRequirements(i)?e.push(i):t.push(i)})),{visibleThresholds:e,hiddenThresholds:t}}resetContinuousTimerForHiddenThresholds(){this.resetContinuousTimerForThresholds(this.getHiddenAndVisibleThresholds().hiddenThresholds)}resetContinuousTimerForThresholds(e){e.forEach((e=>{this.thresholds[e.key].currentContinuousTime=0}))}measureViewChange(e){(e.id===t.gX.IN_FEED_AD_VIDEO||e.id===t.gX.COMMENT_PAGE_AD_VIDEO||e.id===t.gX.RELATED_POST_AD_VIDEO)&&(this.videoIntersectionRatio=e.intersectionRatio),super.measureViewChange(e),this.videoStateChange(),this.resetContinuousTimerForHiddenThresholds()}measureVideoPlay(e){this.videoPlaying=!0,this.setMediaDetails(e),this.videoStateChange()}measureVideoPause(e){this.videoPlaying=!1,this.setMediaDetails(e),this.videoStateChange(),t.gS.forEach((e=>{this.pauseViewablePixelTimer(e)}))}measureVideoSeek(e){this.hasSeeked=!0,this.seekingInitialized||(this.videoPlaying=!1,this.setMediaDetails(e),t.gS.forEach((e=>{this.resetViewablePixelTimer({pixelEvent:e.pixelEvent,time:e.time})})),this.seekingInitialized=!0)}measureVideoSeeked(e){this.seekingInitialized=!1,this.hasSeeked=!0,this.videoCurrentTime=p(e.currentTime),e.paused||this.measureVideoPlay(e)}measureVolumeChange(e){this.setMediaDetails(e),this.videoStateChange(),e.volume&&!e.muted&&this.videoPlaying&&t.gS.forEach((e=>{this.firePixel(e.pixelEvent),this.pixelTimers.set(e.pixelEvent,{fired:!0})}))}measureFullscreenChange(e){this.videoFullscreen=e.fullscreen,this.videoStateChange(),e.fullscreen&&(this.videoWasFullscreen=!0,this.firePixel(t.bS.VIDEO_PLAYED_EXPANDED),this.videoPlaying&&t.gS.forEach((e=>{this.firePixel(e.pixelEvent),this.pixelTimers.set(e.pixelEvent,{fired:!0})})))}measureVideoTimeUpdate(e){const t=this.updateAccumulatedWatchTime(p(e.currentTime));this.updateThresholds(t),this.videoCurrentTime=p(e.currentTime),this.videoStateChange()}getMetadata(e){const i=super.getMetadata(e),s=this.thresholds.HALF_DURATION_80_IN_VIEW_AUDIBLE.totalTime;return{...i,[t.dZ.IS_VIDEO_AD]:1,[t.dZ.TOTAL_MRC_VIEWABLE_TIME]:Math.floor(this.thresholds.TOTAL_MRC_VIEWABLE_TIME.totalTime),[t.dZ.VIDEO_AD_DURATION]:isFinite(this.videoDuration)?Math.floor(this.videoDuration):0,[t.dZ.TOTAL_PLAY_TIME]:Math.floor(this.accumulatedWatchedTime),[t.dZ.VOLUME]:Math.floor(100*(this.videoVolume??0)),[t.dZ.IS_VISIBLE]:this.visible?1:0,[t.dZ.VIDEO_HEIGHT]:this.visible&&this.dimensions?this.dimensions.height:0,[t.dZ.TOTAL_AUDIBLE_TIME]:Math.floor(this.thresholds.TOTAL_AUDIBLE_TIME.totalTime),[t.dZ.VIDEO_STATE_Q0]:this.quartileState.get(t.gV.VIDEO_STATE_Q0)??t.gR.NO_EVENT,[t.dZ.VIDEO_STATE_Q1]:this.quartileState.get(t.gV.VIDEO_STATE_Q1)??t.gR.NO_EVENT,[t.dZ.VIDEO_STATE_Q2]:this.quartileState.get(t.gV.VIDEO_STATE_Q2)??t.gR.NO_EVENT,[t.dZ.VIDEO_STATE_Q3]:this.quartileState.get(t.gV.VIDEO_STATE_Q3)??t.gR.NO_EVENT,[t.dZ.VIDEO_STATE_Q4]:this.quartileState.get(t.gV.VIDEO_STATE_Q4)??t.gR.NO_EVENT,[t.dZ.VIDEO_WIDTH]:this.visible&&this.dimensions?this.dimensions.width:0,[t.dZ.WAS_FULL_SCREEN]:this.videoWasFullscreen?1:0,[t.dZ.HALF_DURATION_80_IN_VIEW_AUDIBLE]:s>=15e3||this.videoDuration&&s>=.5*this.videoDuration?1:0,[t.dZ.FULL_IN_VIEW_AUDIBLE_TIME]:Math.floor(this.thresholds.FULL_IN_VIEW_AUDIBLE_TIME.totalTime),[t.dZ.EIGHTY_TOTAL_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.EIGHTY_IN_VIEW_TIME.totalTime),[t.dZ.FULL_IN_VIEW_TIME]:Math.floor(this.thresholds.FULL_IN_VIEW_TIME.totalTime),[t.dZ.WAS_FULL_IN_VIEW_1SEC]:this.thresholds.FULL_IN_VIEW_TIME.maxContinuousTime>=1e3?1:0,[t.dZ.ANY_CONTINUOUS_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.ANY_IN_VIEW_TIME.maxContinuousTime),[t.dZ.FIFTY_CONTINUOUS_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.FIFTY_IN_VIEW_TIME.maxContinuousTime),[t.dZ.FULL_CONTINUOUS_VIDEO_VIEW_TIME]:Math.floor(this.thresholds.FULL_IN_VIEW_TIME.maxContinuousTime),[t.dZ.HAS_SEEKED]:this.hasSeeked?1:0}}getAdEventVideoMetadata(){return{is_video:!0,total_mrc_viewable_time_ms:Math.floor(this.thresholds.TOTAL_MRC_VIEWABLE_TIME.totalTime),video_ad_duration:isFinite(this.videoDuration)?Math.floor(this.videoDuration):0,total_play_time:Math.floor(this.accumulatedWatchedTime),volume:Math.floor(100*(this.videoVolume??0)),total_audible_time:Math.floor(this.thresholds.TOTAL_AUDIBLE_TIME.totalTime),was_full_screen:this.videoWasFullscreen,video_state_q1:(this.quartileState.get(t.gV.VIDEO_STATE_Q1)??t.gR.NO_EVENT).toString(),video_state_q2:(this.quartileState.get(t.gV.VIDEO_STATE_Q2)??t.gR.NO_EVENT).toString(),video_state_q3:(this.quartileState.get(t.gV.VIDEO_STATE_Q3)??t.gR.NO_EVENT).toString(),video_state_q4:(this.quartileState.get(t.gV.VIDEO_STATE_Q4)??t.gR.NO_EVENT).toString(),full_in_view_audible_time_ms:Math.floor(this.thresholds.FULL_IN_VIEW_AUDIBLE_TIME.totalTime),full_in_view_time_ms:Math.floor(this.thresholds.FULL_IN_VIEW_TIME.totalTime),video_height:this.visible&&this.dimensions?this.dimensions.height:0,video_width:this.visible&&this.dimensions?this.dimensions.width:0,fifty_continuous_video_view_time_v2_ms:Math.floor(this.thresholds.FIFTY_IN_VIEW_TIME.maxContinuousTime),eighty_total_video_view_time_v2_ms:Math.floor(this.thresholds.EIGHTY_IN_VIEW_TIME.totalTime),any_continuous_video_view_time_v2_ms:Math.floor(this.thresholds.ANY_IN_VIEW_TIME.maxContinuousTime),full_continuous_video_view_time_v2_ms:Math.floor(this.thresholds.FULL_IN_VIEW_TIME.maxContinuousTime)}}isAdequatelyInView(e){return!!this.videoFullscreen||(this.videoIntersectionRatio||0)>=e}meetsViewabilityRequirements(e){return this.isAdequatelyInView(e.threshold)&&(!e.playing||this.videoPlaying)&&(!e.withSound||this.videoVolume&&this.videoVolume>0)}videoGroupMViewableChange(){const e=this.dimensions?.height*this.dimensions?.width;let i=this.thresholds.FULL_IN_VIEW_AUDIBLE_TIME.totalTime;e>=3e5&&(i=this.thresholds.HALF_DURATION_80_IN_VIEW_AUDIBLE.totalTime),i/this.videoDuration>=t.bR.VIEWABILITY_THRESHOLD&&this.firePixel(t.bS.VIDEO_GROUP_M_VIEWABLE)}}const g=(e,{ignoredTags:t=new Set}={})=>{const i=(e=>{const t=window.getComputedStyle(e).borderRadius,i=Number.parseInt(t)/2,s=e.getBoundingClientRect();return document.elementFromPoint(s.left+i,s.top+i)})(e);return{overlappingElement:i,isOverlapped:!(!i||e.isSameNode(i)||e.contains(i)||t.has(i.tagName)||!((e,t)=>{const i=e.getBoundingClientRect(),s=t.getBoundingClientRect();return!(i.top>s.bottom||i.right<s.left||i.bottom<s.top||i.left>s.right)})(e,i))}},V=(e,t)=>{if((e=>{const t=e.getBoundingClientRect();if(t.width*t.height==0)return!0;const i=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight;return t.right<0||t.bottom<0||t.left>i||t.top>s})(e))return 0;const i=e.getBoundingClientRect(),s=t.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,n=Math.min(r,i.bottom);return Math.max(0,n-s.bottom)/i.height},f=(e,t)=>{if(!e||!e.title)return 0;if(!1===e.renderTitleTruncation)return e.title.length;const i=e?.querySelector('[click-location="title"]')?.shadowRoot?.querySelector("a"),s=document.body,r=document.createElement("div");if(r.id="dummyDiv",r.className=i?.className,r.className=r.className.replace(/line-clamp-\d+/,""),r.classList.add("px-md"),t||(r.classList.add("font-normal"),r.classList.add("text-14")),r.style.position="absolute",r.style.left="-9999px",r.style.top="-9999px",r.style.visibility="hidden",s?.appendChild(r),r.style.width=i?.clientWidth+"px",r.textContent=e.title,r.offsetHeight<=i?.offsetHeight)return r?.remove(),e.title.length;let n=0;r.textContent="";for(let t=0;t<e.title.length;t++){const s=e.title?.slice(0,t+1);if(r.textContent=s+"",r.offsetHeight>i?.offsetHeight)break;n+=1}return r?.remove(),n},C=({postId:e,post:i,galleryItems:s,page_request_id:n,adsCorrelationId:a})=>{const o=i?.querySelector(`[click-location=${t.A.MEDIA}]`);let d;o&&(d=o.getBoundingClientRect());const l={post:{id:e,subreddit_id:i?.subredditId,subreddit_name:i?.subredditPrefixedName,author_id:i?.authorId,promoted:!0,title:i?.postTitle||i?.title,domain:i?.domain,nsfw:i?.nsfw,number_comments:i?.commentCount,type:i?.postType,created_timestamp:t.eL(i?.createdTimestamp||""),spoiler:i?.spoiler,url:i?.outboundLinkUrl},ad_metadata:{impression_id:i?.impressionId||"",placement:r.e({post:i}),ad_correlation_id:a},feed:t.fW(),action_info:{page_request_id:n},screen:{height:window.screen.height,width:window.screen.width}};i&&r.i(i)&&(l.action_info||(l.action_info={}),l.action_info.position=i.feedIndex,l.screen||(l.screen={}),l.screen={},l.screen.view_type=t.fX(i.viewType));const h=s&&s.length>0||!1;if(i&&r.f(i)&&(l.view_stats={characters_displayed:f(i,h)},l.parent={post_id:i?.parentElement?.querySelector("shreddit-post")?.id},l.action_info||(l.action_info={}),l.action_info.position=(e=>{if(e.shouldTrackPosition&&!e.isBlank)return e.placement===t.Z.COMMENTS_PAGE?0:[...document.querySelectorAll('shreddit-comments-page-ad[placement="comments_page"], shreddit-comments-page-ad[placement="comment_trees"], shreddit-comment[depth="0"]')].findIndex((t=>t.id===e.id))||void 0})(i)),s&&s.length>0){const e=s.map((e=>e.media?.id||""));l.gallery={num_items:s.length,media_ids:e,id:s[0].id},l.media={id:s[0].media?s[0].media.id:"",width:s[0].media?s[0].media.width:0,height:s[0].media?s[0].media.height:0}}else d&&(l.media={id:e,height:Math.round(d?.height),width:Math.round(d?.width)});return t.b(r.h,l)},y=e=>e.map((e=>{const i=t.bS[e.type];return{...e,type:i}}));class b{constructor(e){this.firedPixels=new Set,this.firedRedditPixels=new Set,this.firePixel=({pixelEventType:e,metadata:t,galleryIndex:i,displayMetadata:s,videoMetadata:r})=>{const n=this.postEvents?.get(e)||[];if(this.host.galleryItems){const t=this.getGalleryUrls(e,i)||[];n.push(...t)}const a=this.getPixelScalingFields(i);return this.firePixelsFromEvents({pixelEvents:n,metadata:t,pixelRequestBody:a,displayMetadata:s,videoMetadata:r})},this.fireDebugPixel=e=>{const i=t.c("pixelFired",e);window.dispatchEvent(i)},this.firePixelsFromEvents=({pixelEvents:e,metadata:t,pixelRequestBody:i,displayMetadata:s,videoMetadata:r})=>{const n=[];return e.forEach((e=>{const a=this.firePixelRequest({pixelEvent:e,metadata:t,pixelRequestBody:i,displayMetadata:s,videoMetadata:r});a&&n.push(a)})),n},this.firePixelRequest=({pixelEvent:e,metadata:r,pixelRequestBody:n,displayMetadata:a,videoMetadata:o})=>{if(this.hasPixelAlreadyFired(e,n))return;let d;return _(this.host,"queued",e),h(e)?d=m({pixelEvent:e,metadata:r,pixelRequestBody:n,target:this.host}):(d=function(e,t,r){const n=!s.a2(e.url);if(T(e.type)&&!n)return e.url;const a=new Image;a.onload=()=>{_(r,"succeeded",e)},a.onerror=t=>{const i="Sentry"in window?window.Sentry:void 0;i?.captureException&&i.captureException(new Error(`Error in GET response from pixel server for pixel of type ${e.type}: ${t}`)),_(r,"failed",e)};let o=e.url;return t&&!n&&(o=i.a(o,t)),a.src=o,e.url}(e,r,this.host),s.a2(e.url)||e.type!==t.bS.IMPRESSION||function(e){const i=e===t.aK.DESKTOP?"shreddit_desktop":"shreddit_mobile";t.eU({type:t.aW.Counter,name:"ads_third_party_impression_tracker_total",value:1,labels:{client_platform:i}})}(this.deviceType)),c(e.type)&&E({pixelEvent:e,impressionId:this.host.impressionId,displayMetadata:a,videoMetadata:o,pixelRequestBody:n,target:this.host}),d&&(this.firedPixels.add(d),(h(e)||s.a2(d))&&this.firedRedditPixels.add(d)),h(e)?this.fireDebugPixel({pixel:u(e,n),pixelEvent:{encryptedTrackingId:e.encryptedTrackingId,type:e.type,metadata:r},encryptedTrackingPayload:n.encryptedTrackingPayload,additionalEventMetadata:n.additionalEventMetadata,postId:this.host.postId,impressionId:this.host.impressionId}):this.fireDebugPixel({pixel:e.url,pixelEvent:{url:e.url,type:e.type,metadata:s.a2(e.url)?r:void 0},postId:this.host.postId,impressionId:this.host.impressionId}),d},this.hasPixelAlreadyFired=(e,t)=>h(e)?this.firedPixels.has(u(e,t)):this.firedPixels.has(e.url),this.deviceType=document.querySelector("shreddit-app")?.deviceType||t.aK.MOBILE,this.host=e,this.host.addController(this)}hostConnected(){const e=y(this.host.adEvents);this.postEvents=l(e),this.host.galleryItems&&(this.galleryEvents=this.host.galleryItems.map((e=>l(y(e.adEvents||[])))))}get firedRedditPixelsCount(){return this.firedRedditPixels.size}getPixelScalingFields(e){return{encryptedTrackingPayload:this.host.encryptedTrackingPayload||"",additionalEventMetadata:this.host.additionalEventMetadata?this.host.additionalEventMetadata[e||0]:"",impressionId:this.host.impressionId}}getGalleryUrls(e,i){const s=void 0===i&&e===t.bS.IMPRESSION,r=s?0:i;if(void 0===r)return;const n=s?t.bS.GALLERY_ITEM_IMPRESSION:e;return this.galleryEvents?.[r]&&this.galleryEvents[r].get(n)||[]}}const S=Symbol("mixins/with-ad-observer"),M=new Set(["SHREDDIT-APP","FACEPLATE-PARTIAL"]);var O=Object.freeze({__proto__:null,ToggleableVideoAdController:class{constructor(e,i){this.expandVideoPlayer=()=>{this.toggleElVisibility(this.videoPlayerEl,!0),this.toggleElVisibility(this.thumbnailContainerEl,!1),this.toggleElVisibility(this.thumbnailImageEl,!1),this.toggleElVisibility(this.thumbnailPlayBtnEl,!1),setTimeout((()=>{this.shredditPlayer&&this.updateVideoAdMeasurerDimensions(this.shredditPlayer.offsetHeight,this.shredditPlayer.offsetWidth)}),300)},this.hideVideoPlayer=()=>{this.toggleElVisibility(this.videoPlayerEl,!1),this.toggleElVisibility(this.thumbnailContainerEl,!0),this.toggleElVisibility(this.thumbnailImageEl,!0),this.toggleElVisibility(this.thumbnailPlayBtnEl,!0),this.shredditPlayer?.mediaUI?.hasAttribute(t.h5.PLAYING)&&this.host.dispatchEvent(new CustomEvent(t.g$,{detail:{currentTime:this.shredditPlayer?.videoElement.currentTime,duration:this.shredditPlayer?.videoElement.duration}}))},(this.host=e).addController(this),this.updateVideoAdMeasurerDimensions=i}get videoPlayerEl(){return this.host.querySelector(`.${s.ci}`)}get videoPlayerCloseBtnEl(){return this.host.querySelector(`.${s.cj}`)}get thumbnailContainerEl(){return this.host.querySelector(`.${s.ck}`)}get thumbnailImageEl(){return this.host.querySelector(`.${s.cl}`)}get thumbnailPlayBtnEl(){return this.host.querySelector(`.${s.cm}`)}get shredditPlayer(){return this.host.querySelector("shreddit-player-2")}toggleElVisibility(e,t){if(null===e)return;const i=t?e.dataset[s.cn]:e.dataset[s.co];i&&i?.split(" ").forEach((t=>{e.classList.remove(t)}));const r=t?e.dataset[s.co]:e.dataset[s.cn];r&&r?.split(" ").forEach((t=>{e.classList.add(t)}))}async hostConnected(){this.host.adType===t.ah.VIDEO&&(this.thumbnailContainerEl?.addEventListener("click",this.expandVideoPlayer),this.videoPlayerCloseBtnEl?.addEventListener("click",this.hideVideoPlayer))}hostDisconnected(){this.host.adType===t.ah.VIDEO&&(this.thumbnailContainerEl?.removeEventListener("click",this.expandVideoPlayer),this.videoPlayerCloseBtnEl?.removeEventListener("click",this.hideVideoPlayer))}}});return{W:function(e){const i=t.d(e);if(t.d4(i,S))return i;class a extends i{constructor(){super(...arguments),this.eventController=new t.E(this),this.pubsub=new t.P(this),this.isOverlapped=!1,this.isVideo=!1,this.isGallery=!1,this.visibilityChangeHandler=this.onVisibilityChange.bind(this),this.isAdObserved=!1,this.onCommentCreated=()=>{this.firePixel(t.bS.COMMENT)},this.onCommentUpvoted=()=>{this.firePixel(t.bS.COMMENT_UPVOTE)},this.onCommentDownvoted=()=>{this.firePixel(t.bS.COMMENT_DOWNVOTE)},this.onHideAd=({impressionId:e,action:t})=>{this.impressionId===e&&t===n.a.hide&&this.adMeasurer?.resetTimers()},this.checkAndMeasureIfAdIsBeingOverlapped=t.u((()=>{if(!this.postElement||!this.postElement.isConnected)return;const{hidden:e}=this.getHiddenAndVisibilityChangeForDocument();if(document[e])return void this.measureOutOfViewChange();const{isOverlapped:t,overlappingElement:i}=g(this.postElement,{ignoredTags:M});if(t&&i){this.isOverlapped=!0;const e={intersectionRatio:V(this.postElement,i)};this.adMeasurer?.measureViewChange(e),this.lastIOEvent=e}else this.isOverlapped&&(this.isOverlapped=!1,this.measureBackInViewChange())}),30),this.handleIntersectingEvent=this.eventController.define("io-event-is-intersecting",(e=>{this.isIntersectingChange(e)})),this.handleNotIntersectingEvent=this.eventController.define("io-event-is-not-intersecting",(e=>{this.isIntersectingChange(e)})),this.updateViewChangeDetails=e=>{this.lastIOEvent=e,e.intersectionRatio>0&&(this.lastVisibleIOEvent=e)},this.measureOutOfViewChange=()=>{const e={intersectionRatio:0};if(this.isVideo){const t=this.querySelector("shreddit-with-observer-wrapper")?.id;t&&(e.id=t)}this.adMeasurer?.measureViewChange(e),this.updateViewChangeDetails(e)},this.measureBackInViewChange=()=>{if(this.lastVisibleIOEvent){const e={...this.lastVisibleIOEvent};if(this.isVideo){const t=this.querySelector("shreddit-with-observer-wrapper")?.id;t&&(e.id=t)}this.adMeasurer?.measureViewChange(e),this.updateViewChangeDetails(e)}},this.handleAnalyticEvent=this.eventController.define("track-event",(e=>{const i=e.detail.details;if(i.post?.id!==this.postId)return;const{source:s,action:r,noun:n}=i;if("gallery"===s&&this.isGallery){if("forward"!==n&&"backward"!==n)return;const e="forward"===n?this.galleryIndex+1:this.galleryIndex-1;if(e<0||e>=this.galleryItemLength)return;this.galleryIndex=e,this.adMeasurer?.measureGalleryItemImpression(this.galleryIndex),this.lastIOEvent&&this.adMeasurer?.measureViewChange(this.lastIOEvent)}if("post_detail"===s&&"click"===r)switch(n){case"upvote_comment":this.firePixel(t.bS.COMMENT_UPVOTE);break;case"downvote_comment":this.firePixel(t.bS.COMMENT_DOWNVOTE);break;case"submit_comment":this.firePixel(t.bS.COMMENT)}if("post"===s&&"click"===r)switch(n){case"comments":this.firePixel(t.bS.COMMENTS_VIEW);break;case"upvote":this.firePixel(t.bS.UPVOTE);break;case"downvote":this.firePixel(t.bS.DOWNVOTE)}})),this.handlePostViewAdEvent=this.eventController.define("observe-post-view-ad",(e=>{const i=e.detail.post,{postId:s,galleryItems:r}=e.detail,n=t.c9();this.trackEvent(C({postId:s,post:i,galleryItems:r,page_request_id:n,adsCorrelationId:i.adsCorrelationId}))})),this.handleAdClickEvent=this.eventController.define("observe-ad-click",(e=>{const{postId:i,impressionId:r,outboundUrl:n,galleryIndex:a}=e.detail;if(i!==this.postId&&r!==this.impressionId)return;s.a3(n)&&(this.adMeasurer?.handleClickRedirect(n,a),this.fireAnalyticsEventForClickRedirect({outboundUrl:n,impressionId:r,galleryIndex:a}));const o=a??this.galleryIndex;this.firePixel(t.bS.CLICK,o)})),this.handleLeadGenSubmissionEvent=this.eventController.define(r.L,(e=>{this.firePixel(t.bS.LEAD_GENERATION)})),this.handleAdEngagedClickEvent=this.eventController.define(r.A,(e=>{this.firePixel(t.bS.ENGAGED_CLICK)}))}getMetadataForPixelEvent(e){return this.adMeasurer?.getMetadata(e)}enableAdObserver(e){try{if(this.isAdObserved)return;const{adType:i,...s}=e;this.postId=e.postId,this.impressionId=e.impressionId,this.postElement=e.postElement,this.isVideo=i===t.ah.VIDEO,Array.isArray(e.galleryItems)&&(this.isGallery=!0,this.galleryIndex=0,this.galleryItemLength=e.galleryItems.length),this.overlappingObserver=new MutationObserver(this.checkAndMeasureIfAdIsBeingOverlapped),this.pixelFiringController=new b(e.postElement),s.getFiredRedditPixelsCount=()=>this.pixelFiringController?.firedRedditPixelsCount||0,this.adMeasurer=this.isVideo?new v(s,this.pixelFiringController):new I(s,this.pixelFiringController),this.isVideo&&this.setupVideoEvents(),this.isGallery&&this.setupGalleryEvents(),this.isAdObserved=!0,this.impressionId||this.fireInitializationErrorMetricEvent("missing_impression_id")}catch(e){window.Sentry?.captureException?.(`enableAdObserver | ${e.stack}`),this.fireInitializationErrorMetricEvent("exception")}}connectedCallback(){super.connectedCallback(),this.setupVisibilityTracking(),this.pubsub.subscribe(t.T.AdUpdated,this.onHideAd),this.postElement&&this.postElement.isPDP&&(this.pubsub.subscribe(t.T.CommentCreated,this.onCommentCreated),this.pubsub.subscribe(t.T.CommentUpvoted,this.onCommentUpvoted),this.pubsub.subscribe(t.T.CommentDownvoted,this.onCommentDownvoted))}disconnectedCallback(){super.disconnectedCallback(),this.teardownVisibilityTracking(),this.measureOutOfViewChange()}firePixel(e,t){if(!this.adMeasurer||!this.pixelFiringController)return;const i=c(e);this.pixelFiringController.firePixel({pixelEventType:e,metadata:this.adMeasurer.getMetadata(e),displayMetadata:i?this.adMeasurer.getAdEventDisplayMetadata():void 0,videoMetadata:i?this.adMeasurer.getAdEventVideoMetadata():void 0,galleryIndex:t})}measureOutOfViewChangeIgnoringPrompts(e){e.relatedTarget&&this.measureOutOfViewChange()}onVisibilityChange(){const{hidden:e}=this.getHiddenAndVisibilityChangeForDocument();this.lastIOEvent&&(document[e]?this.measureOutOfViewChange():this.measureBackInViewChange())}setupVisibilityTracking(){const{visibilityChange:e}=this.getHiddenAndVisibilityChangeForDocument();document.addEventListener(e,this.visibilityChangeHandler),window.addEventListener("blur",this.measureOutOfViewChangeIgnoringPrompts),window.addEventListener("focus",this.measureBackInViewChange),this.overlappingObserver?.observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!1})}teardownVisibilityTracking(){const{visibilityChange:e}=this.getHiddenAndVisibilityChangeForDocument();document.removeEventListener(e,this.visibilityChangeHandler),window.removeEventListener("blur",this.measureOutOfViewChangeIgnoringPrompts),window.removeEventListener("focus",this.measureBackInViewChange),this.overlappingObserver?.disconnect()}isIntersectingChange(e){const{details:t,id:i}=e.detail,s={id:i,intersectionRatio:t.intersectionRatio};this.updateViewChangeDetails(s),this.adMeasurer?.measureViewChange(s),(t.intersectionRatio||this.isOverlapped)&&this.checkAndMeasureIfAdIsBeingOverlapped()}getHiddenAndVisibilityChangeForDocument(){let e=t.gY.Standard,i=t.gZ.hidden;return void 0!==document.hidden?(e=t.gY.Standard,i=t.gZ.hidden):void 0!==document.webkitHidden&&(e=t.gY.Webkit,i=t.gZ.webkitHidden),{hidden:e,visibilityChange:i}}setupVideoEvents(){this.handleVideoFullscreenEvent=this.eventController.define(t.g_,(e=>{this.adMeasurer?.measureFullscreenChange(e.detail)})),this.handleVideoPauseEvent=this.eventController.define(t.g$,(e=>{this.adMeasurer?.measureVideoPause(e.detail)})),this.handleVideoPlayEvent=this.eventController.define(t.h0,(e=>{this.adMeasurer?.measureVideoPlay(e.detail)})),this.handleVideoVolumeEvent=this.eventController.define(t.h1,(e=>{this.adMeasurer?.measureVolumeChange(e.detail)})),this.handleVideoSeekingEvent=this.eventController.define(t.h2,(e=>{e.detail.fromReconnect||this.adMeasurer?.measureVideoSeek(e.detail)})),this.handleVideoSeekedEvent=this.eventController.define(t.h3,(e=>{e.detail.fromReconnect||this.adMeasurer?.measureVideoSeeked(e.detail)})),this.handleVideoTimeUpdateEvent=this.eventController.define(t.h4,(e=>{setTimeout((()=>{this.adMeasurer?.measureVideoTimeUpdate(e.detail)}))}))}setupGalleryEvents(){this.handleGalleryItemImpressionEvent=this.eventController.define(s.O,(e=>{const{postId:t,itemIndex:i}=e.detail;t===this.postId&&this.adMeasurer?.measureGalleryItemImpression(i)}))}fireAnalyticsEventForClickRedirect({outboundUrl:e,impressionId:i,galleryIndex:s}){c(t.bS.CLICK)&&this.adMeasurer&&this.postElement&&E({target:this.postElement,pixelEvent:{type:t.bS.CLICK,url:e},impressionId:i,pixelRequestBody:this.adMeasurer.getPixelScalingFields(s),displayMetadata:this.adMeasurer.getAdEventDisplayMetadata(),videoMetadata:this.adMeasurer.getAdEventVideoMetadata()})}fireInitializationErrorMetricEvent(e){const i=t.gN({name:"shreddit_ad_init_failure",value:1,label_values:[`error_type,${e}`,`post_id,${this.postId}`,`impression_id,${this.impressionId}`]}),s=t.c("track-event",{details:i});this.postElement?.dispatchEvent(s)}}return a[S]=!0,a},e:y,get i(){return O}}}));
SML.dm("DlWm-1vG",["D7lSuCop"],(async e=>{const n={source:"post",action:"click",noun:"ad"},o="client_ad",t={[e.bS.IMPRESSION]:{source:o,action:"view",noun:"ad"},[e.bS.CLICK]:{source:o,action:"click",noun:"ad"},[e.bS.VIDEO_VIEWABLE_IMPRESSION]:{source:o,action:"view",noun:"video"},[e.bS.VIDEO_VIEWABLE_WATCHED_6_SECS]:{source:o,action:"view",noun:"video"},[e.bS.VIDEO_VIEWABLE_WATCHED_15_SECS]:{source:o,action:"view",noun:"video"},[e.bS.GROUP_M_VIEWABLE]:{source:o,action:"group_m_viewable",noun:"ad"},[e.bS.COMMENTS_VIEW]:{source:o,action:"view",noun:"comments"},[e.bS.UPVOTE]:{source:o,action:"upvote",noun:"ad"},[e.bS.DOWNVOTE]:{source:o,action:"downvote",noun:"ad"},[e.bS.COMMENT]:{source:o,action:"submit",noun:"comment"},[e.bS.COMMENT_UPVOTE]:{source:o,action:"upvote",noun:"comment"},[e.bS.COMMENT_DOWNVOTE]:{source:o,action:"downvote",noun:"comment"},[e.bS.VIDEO_FULLY_VIEWABLE_IMPRESSION]:{source:o,action:"fully_view",noun:"video"},[e.bS.VIDEO_PLAYED_WITH_SOUND]:{source:o,action:"watch_with_sound",noun:"video"},[e.bS.VIDEO_PLAYED_EXPANDED]:{source:o,action:"watch_expanded",noun:"video"},[e.bS.VIDEO_GROUP_M_VIEWABLE]:{source:o,action:"watch_group_m",noun:"video"},[e.bS.VIDEO_WATCHED_25]:{source:o,action:"watch_percentage",noun:"video"},[e.bS.VIDEO_WATCHED_50]:{source:o,action:"watch_percentage",noun:"video"},[e.bS.VIDEO_WATCHED_75]:{source:o,action:"watch_percentage",noun:"video"},[e.bS.VIDEO_WATCHED_95]:{source:o,action:"watch_percentage",noun:"video"},[e.bS.VIDEO_WATCHED_100]:{source:o,action:"watch_percentage",noun:"video"},[e.bS.VIDEO_STARTED]:{source:o,action:"watch_percentage",noun:"video"},[e.bS.VIDEO_WATCHED_3_SECS]:{source:o,action:"watch_seconds",noun:"video"},[e.bS.VIDEO_WATCHED_5_SECS]:{source:o,action:"watch_seconds",noun:"video"},[e.bS.VIDEO_WATCHED_10_SECS]:{source:o,action:"watch_seconds",noun:"video"},[e.bS.VENDOR_FULLY_IN_VIEW]:{source:o,action:"vendor_fully_in_view",noun:"ad"},[e.bS.VENDOR_FULLY_IN_VIEW_5_SECS]:{source:o,action:"vendor_fully_in_view",noun:"ad"},[e.bS.VENDOR_FULLY_IN_VIEW_15_SECS]:{source:o,action:"vendor_fully_in_view",noun:"ad"},[e.bS.VIEWABLE_IMPRESSION]:{source:o,action:"viewable",noun:"ad"},[e.bS.UNLOAD]:{source:o,action:"unload",noun:"ad"},[e.bS.GALLERY_ITEM_IMPRESSION]:{source:o,action:"view",noun:"gallery_item"},[e.bS.ENGAGED_CLICK]:{source:o,action:"engaged_click",noun:"ad"},[e.bS.PRODUCT_IMPRESSION]:{source:o,action:"view",noun:"product"},[e.bS.PRODUCT_CLICK]:{source:o,action:"click",noun:"product"},[e.bS.LEAD_GENERATION]:{source:o,action:"submit",noun:"lead"}},c=n=>n.placement===e.Z.FEED,i=n=>n.placement===e.Z.COMMENTS_PAGE||n.placement===e.Z.COMMENT_TREES,a=({post:n,placement:o})=>n&&i(n)&&n.isPdpCombined?e.Z.COMMENTS_PAGE:o||n?.placement,s=({postId:o,adMedia:t,impressionId:i,post:s,clickLocation:r=e.A.UNKNOWN,galleryIndex:d,page_request_id:u,placement:l})=>{const _={post:{id:o,subreddit_id:s?.subredditId,author_id:s?.authorId,promoted:!0},ad_click:{location:r},ad_metadata:{impression_id:i,placement:a({post:s,placement:l})},feed:e.fW(),action_info:{page_request_id:u}};return s&&c(s)&&(_.action_info||(_.action_info={}),_.action_info.position=s.feedIndex,_.screen||(_.screen={}),_.screen={},_.screen.view_type=e.fX(s.viewType)),s?.galleryItems&&(_.gallery={position:d,num_items:s.galleryItems.length}),s?.countryCode&&(_.geo={country_code:s.countryCode}),t&&(_.media={height:Math.round(t?.height),width:Math.round(t?.width)}),e.b(n,_)},r=e=>{const n=e.closest("shreddit-ad-post")||e.closest("shreddit-comments-page-ad")||e.closest("ad-event-tracker")||e.closest("shreddit-sidebar-ad");if(n)return n;{const n=e.getRootNode(),o=n instanceof ShadowRoot?n.host:null;return"SHREDDIT-SIDEBAR-AD"===o?.tagName||"SHREDDIT-COMMENTS-PAGE-AD"===o?.tagName?o:null}};function d(n){n&&e.l.setItem(e.L.AdEvents,JSON.stringify(n))}function u(n){n&&e.l.setItem(e.L.AdUserTargeting,JSON.stringify(n))}var l=Object.freeze({__proto__:null,AdStorageController:class{constructor(e){this.host=e}getParentAdPost(){const e=this.host.closest("ad-event-tracker");return e||null}storeAdDataInStorage(){const e=this.getParentAdPost();e&&(d({impressionId:e.impressionId,adEvents:e.adEvents,clickRedirectUrl:e.outboundLinkUrl,encryptedTrackingPayload:e.encryptedTrackingPayload,additionalEventMetadata:e.additionalEventMetadata}),e.adUserTargeting&&u(e.adUserTargeting))}}});return{A:"ad-engaged-click",B:"brand-unsafe-post-view",H:"hide-btf-sidebar-ad",L:"lead-gen-submission",P:t,S:"show-btf-sidebar-ad",a:function({el:n,outboundUrl:o,clickLocation:t,galleryIndex:c}){const i=r(n),a=i?.placement||("placement"in n?n.placement:void 0),s=i?.id||n?.id||("postId"in n?n?.postId:""),d=i?.impressionId||("impressionId"in n?n?.impressionId:""),u=e.c("observe-ad-click",{postId:s,impressionId:d,outboundUrl:o,galleryIndex:c,clickLocation:t});n.dispatchEvent(u),e.l.isAvailable()&&(e.l.setItem(e.L.LastClickedAdId,s),e.l.setItem(e.L.ImpressionId,d),e.l.setItem(e.L.AdPlacement,a||""))},b:u,c:function(n){const o=e.l.getItem(e.L.AdEvents);if(null===o)return null;let t;try{t=JSON.parse(o)}catch{return null}return t.impressionId!==n?null:(e.l.removeItem(e.L.AdEvents),t)},d:function(){const n=e.l.getItem(e.L.AdUserTargeting);if(null===n)return null;let o;try{o=JSON.parse(n)}catch{return null}return e.l.removeItem(e.L.AdUserTargeting),o},e:a,f:i,g:r,h:{source:"post",action:"view",noun:"ad"},i:c,get j(){return l},s:d,t:function({el:n,clickLocation:o,galleryIndex:t}){try{const c=r(n),i=c?.placement||("placement"in n?n?.placement:void 0),a=c?.postId||("postId"in n?n?.postId:""),d=c?.impressionId||("impressionId"in n?n?.impressionId:""),u=c?c.querySelector(`[click-location=${e.A.MEDIA}]`):n.querySelector(`[click-location=${e.A.MEDIA}]`);let l;u&&(l=u.getBoundingClientRect());const _=e.c9(),E=e.c("track-event",{details:s({postId:a,impressionId:d,post:c,adMedia:l,clickLocation:o,galleryIndex:t||0,page_request_id:_,placement:i})});n.dispatchEvent(E)}catch(e){const n="Sentry"in window?window.Sentry:void 0;n?.captureException&&(e.message&&(e.message=`post/click/ad exception: ${e.message}`),n.captureException(e))}}}}));
SML.dm("Cq9O5zpS",["CVEbQKiO","D7lSuCop","DlWm-1vG","CCphb8vV"],(async(t,e,i,n)=>{const o=[{key:"TOTAL_MRC_VIEWABLE_TIME",playing:!0,threshold:e.bR.VIEWABILITY_THRESHOLD},{key:"TOTAL_AUDIBLE_TIME",playing:!0,threshold:0,withSound:!0},{key:"HALF_DURATION_80_IN_VIEW_AUDIBLE",playing:!0,withSound:!0,threshold:e.bR.EIGHTY_VIEWABILITY_THRESHOLD},{key:"FULL_IN_VIEW_AUDIBLE_TIME",playing:!0,threshold:e.bR.FULL_VIEWABILITY_THRESHOLD,withSound:!0},{key:"FULL_IN_VIEW_TIME",playing:!0,threshold:e.bR.FULL_VIEWABILITY_THRESHOLD},{key:"ANY_IN_VIEW_TIME",playing:!0,threshold:e.bR.VISIBILITY_THRESHOLD},{key:"FIFTY_IN_VIEW_TIME",playing:!0,threshold:e.bR.VIEWABILITY_THRESHOLD},{key:"EIGHTY_IN_VIEW_TIME",playing:!0,threshold:e.bR.EIGHTY_VIEWABILITY_THRESHOLD}];function r(t,e){const i=new URL(t);return Object.entries(e).forEach((([t,e])=>{i.searchParams.set(t,String(e))})),i.toString()}const a=o.map((t=>t.key));const s="noopener nofollow sponsored",d=e.d(t.s);let l=class extends d{constructor(){super(...arguments),this.impressionId="0",this.clickLocation=e.A.UNKNOWN,this.renderAsButton=!1,this.ButtonProps={},this.anchorStyleClass="",this.isOutboundLinkInitialized=!1}static get styles(){return[e.t,e.j("a {\n  color: inherit;\n  text-decoration: none;\n}\nbutton {\n  all: unset;\n  display: inline-block;\n  height: 100%;\n  width: 100%;\n  background: transparent;\n  cursor: pointer;\n}\n")]}get effectiveOutboundLink(){const t=this.outboundLinkOverride??(this.outboundLinkUrl||"");return n.a2(t)&&this.metadata?r(t,this.metadata):t}get calculatedTabIndex(){return this.disableKeyboardNav?"-1":""===this.effectiveOutboundLink?"0":void 0}connectedCallback(){super.connectedCallback(),void 0===this.outboundLinkOverride&&(this.outboundLinkUrl=this.getOutboundLinkUrlFromParent(),this.isOutboundLinkInitialized=!0)}updated(t){void 0===this.outboundLinkOverride&&t.has("galleryIndex")&&(this.outboundLinkUrl=this.getOutboundLinkUrlFromParent())}getOutboundLinkUrlFromParent(){const t=i.g(this);if(!t)return;if(void 0===this.galleryIndex)return t.getAttribute("outbound-link-url");const e=t.getAttribute("gallery-items");let n;try{n=JSON.parse(e||"[]")}catch{n=[]}return n[this.galleryIndex]?.outboundUrl}fetchAndUpdateMetadata(){if(!n.a2(this.effectiveOutboundLink))return;const t=i.g(this);if(!t)return;const o=t.getMetadataForPixelEvent(e.bS.CLICK);o&&(this.metadata=o)}handleClick(t){if("auxclick"!==t.type||1===t.button){if(void 0!==this.outboundLinkOverride||this.isOutboundLinkInitialized||(this.outboundLinkUrl=this.getOutboundLinkUrlFromParent(),this.isOutboundLinkInitialized=!0),n.a3(this.effectiveOutboundLink)&&"_blank"===this.target&&e.bT(this.impressionId),this.fetchAndUpdateMetadata(),i.t({el:this,clickLocation:this.clickLocation,galleryIndex:this.galleryIndex}),i.a({el:this,clickLocation:this.clickLocation,outboundUrl:this.effectiveOutboundLink,galleryIndex:this.galleryIndex}),function(t){const i=t=>{try{return t()}catch{return null}};let n=i((()=>new URL(t)));return n||(n=i((()=>new URL(t,location.origin)))),!!n&&"1"===n.searchParams.get(e.bQ)}(this.effectiveOutboundLink)){const t=this.closest("shreddit-ad-post");if(!t)return;i.s({impressionId:this.impressionId,adEvents:t.adEvents,clickRedirectUrl:this.effectiveOutboundLink}),i.b(t.adUserTargeting)}n.a3(this.effectiveOutboundLink)&&"contextmenu"!==t.type&&e.bU(e.bV)&&(t.preventDefault(),this.fetchAndUpdateMetadata(),window.open(this.effectiveOutboundLink,this.target||"_self"))}}render(){const i=this.effectiveOutboundLink||void 0,o=t.x`<slot></slot>`;if(this.renderAsButton)return e.k({appearance:n.a4()?"secondary":"bordered",children:o,size:e._.Medium,attributes:{href:i,onclick:this.handleClick,oncontextmenu:this.handleClick,target:this.target,rel:s,className:this.anchorStyleClass},...this.ButtonProps});const r=this.effectiveOutboundLink||"_self"===this.target,a=n.l(this.anchorStyleClass,r?"cursor-pointer":"cursor-default");return t.x`<a class="${a}" href="${t.l(i)}" target="${t.l(this.target)}" tabindex="${t.l(this.calculatedTabIndex)}" @click="${this.handleClick}" @mouseover="${this.fetchAndUpdateMetadata}" @focus="${this.fetchAndUpdateMetadata}" @contextmenu="${this.handleClick}" @auxclick="${this.handleClick}" rel="${s}" role="${i?"link":"button"}" aria-label="${t.l(this.ariaLabel)}"> ${o} </a>`}};return t._([t.n({type:String,attribute:"outbound-link-override",reflect:!0})],l.prototype,"outboundLinkOverride",void 0),t._([t.n({type:String,attribute:"impression-id"})],l.prototype,"impressionId",void 0),t._([t.n({type:String,attribute:"click-location"})],l.prototype,"clickLocation",void 0),t._([t.n({type:String,attribute:"post-id"})],l.prototype,"postId",void 0),t._([t.n({type:Number,attribute:"gallery-index",reflect:!0})],l.prototype,"galleryIndex",void 0),t._([t.n({type:String})],l.prototype,"target",void 0),t._([t.n({type:Boolean,attribute:"disable-keyboard-nav"})],l.prototype,"disableKeyboardNav",void 0),t._([t.n({type:Boolean,attribute:"render-as-button"})],l.prototype,"renderAsButton",void 0),t._([t.n({type:Object,attribute:"button-props"})],l.prototype,"ButtonProps",void 0),t._([t.n({type:String,attribute:"anchor-style-class"})],l.prototype,"anchorStyleClass",void 0),t._([t.z("a")],l.prototype,"anchorEl",void 0),t._([t.z("slot")],l.prototype,"slotEl",void 0),t._([t.b()],l.prototype,"outboundLinkUrl",void 0),t._([t.b()],l.prototype,"metadata",void 0),l=t._([t.c("shreddit-dynamic-ad-link")],l),{get S(){return l},V:o,a:r,b:a,g:t=>t.reduce(((t,e)=>(t[e]={maxContinuousTime:0,currentContinuousTime:0,totalTime:0},t)),{})}}));
SML.dm("C6s1R5yD",["CVEbQKiO","D7lSuCop","Cq9O5zpS"],(async(t,e)=>{let r=class extends t.s{constructor(){super(...arguments),this.postId="",this.impressionId="0",this.clickLocation=e.A.UNKNOWN,this.anchorStyleClass="",this.renderAsButton=!1,this.buttonProps={},this._currGalleryIndex=0,this._currGalleryItemText="",this.handleGalleryNavEvent=t=>{t!==this._currGalleryIndex&&(this._currGalleryIndex=t,this.galleryContent&&(this._currGalleryItemText=this.galleryContent[this._currGalleryIndex]))}}connectedCallback(){super.connectedCallback(),this._currGalleryItemText=this.galleryContent?.[this._currGalleryIndex]}createRenderRoot(){return this}render(){return this.galleryContent&&!this._currGalleryItemText?t.A:t.x` <shreddit-dynamic-ad-link target="_blank" post-id="${this.postId}" impression-id="${this.impressionId}" gallery-index="${this._currGalleryIndex}" click-location="${this.clickLocation}" anchor-style-class="${this.anchorStyleClass}" ?render-as-button="${this.renderAsButton}" .ButtonProps="${this.buttonProps}">${this._currGalleryItemText}</shreddit-dynamic-ad-link>`}};r.styles=[e.t],t._([t.n({type:String,attribute:"post-id"})],r.prototype,"postId",void 0),t._([t.n({type:String,attribute:"impression-id"})],r.prototype,"impressionId",void 0),t._([t.n({type:String,attribute:"click-location"})],r.prototype,"clickLocation",void 0),t._([t.n({type:String})],r.prototype,"target",void 0),t._([t.n({type:String,attribute:"anchor-style-class"})],r.prototype,"anchorStyleClass",void 0),t._([t.n({type:Boolean,attribute:"render-as-button"})],r.prototype,"renderAsButton",void 0),t._([t.n({type:Object,attribute:"button-props"})],r.prototype,"buttonProps",void 0),t._([t.n({type:Array,attribute:"gallery-content"})],r.prototype,"galleryContent",void 0),t._([t.b()],r.prototype,"_currGalleryIndex",void 0),t._([t.b()],r.prototype,"_currGalleryItemText",void 0),r=t._([t.c("call-to-action-gallery-links")],r);const o=()=>document.getElementById(e.ap);return{a:async({leadGenInfo:t})=>{t&&!o()&&await e.f({name:e.ao})},s:({leadGenInfo:t,postId:e,impressionId:r,onSuccess:n})=>{t&&o()?.showModal({...t,postId:e,impressionId:r,onSuccess:n,prompt:t.prompt??"",privacyPolicyUrl:t.privacyPolicyUrl??"",leadFormFields:t.leadFormFields??[],formId:t.formId??null,publicEncryptionKey:t.publicEncryptionKey??null})}}}));
SML.dm("KzHvibf8",["CVEbQKiO","D7lSuCop","DlWm-1vG"],(async(t,e,o)=>{const a=e.d(t.s);let n=class extends a{constructor(){super(...arguments),this.clickLocation=e.A.UNKNOWN,this.enableAdPostHydration=!1,this.storageController=null}async connectedCallback(){await super.connectedCallback(),await this.resolveAdStorageControllerDependencies()}async resolveAdStorageControllerDependencies(){if(!this.enableAdPostHydration)return;const{AdStorageController:t}=await SML.di("./DlWm-1vG.js",import.meta.url,"DlWm-1vG").then((function(t){return t.j}));this.storageController=new t(this)}async disconnectedCallback(){await super.disconnectedCallback()}handleClick(t){this.storageController&&this.enableAdPostHydration&&this.storageController.storeAdDataInStorage();"auxclick"===t.type&&1!==t.button||o.t({el:this,clickLocation:this.clickLocation})}render(){return t.x`<slot @click="${this.handleClick}" @contextmenu="${this.handleClick}" @auxclick="${this.handleClick}"></slot>`}};n.styles=[e.t],t._([t.n({type:String,attribute:"click-location"})],n.prototype,"clickLocation",void 0),t._([t.n({type:Boolean,attribute:"enable-ad-post-hydration"})],n.prototype,"enableAdPostHydration",void 0),n=t._([t.c("click-location-tracker")],n)}));
SML.dm("CU4mObWU",[],(async()=>{class t{constructor(e,o){this.element=e,this.touch1=null,this.touch2=null,this.touchStartX=null,this.touchStartY=null,this.touchEndX=null,this.touchEndY=null,this.touchMove1=null,this.touchMove2=null,this.touchMoveX=null,this.touchMoveY=null,this.velocityX=null,this.velocityY=null,this.longPressTimer=null,this.doubleTapTimer=null,this.doubleTapWaiting=!1,this.thresholdX=0,this.thresholdY=0,this.disregardVelocityThresholdX=0,this.disregardVelocityThresholdY=0,this.swipingHorizontal=!1,this.swipingVertical=!1,this.swipingDirection=null,this.swipedHorizontal=!1,this.swipedVertical=!1,this.originalDistance=null,this.newDistance=null,this.scale=null,this.originalAngle=null,this.newAngle=null,this.rotation=null,this.handlers={panstart:[],panmove:[],panend:[],swipeleft:[],swiperight:[],swipeup:[],swipedown:[],tap:[],doubletap:[],longpress:[],pinch:[],pinchend:[],rotate:[],rotateend:[]},this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchEnd=this.onTouchEnd.bind(this),this.opts=Object.assign({},t.defaults,o),this.element.addEventListener("touchstart",this._onTouchStart,i),this.element.addEventListener("touchmove",this._onTouchMove,i),this.element.addEventListener("touchend",this._onTouchEnd,i),this.opts.mouseSupport&&!("ontouchstart"in window)&&(this.element.addEventListener("mousedown",this._onTouchStart,i),document.addEventListener("mousemove",this._onTouchMove,i),document.addEventListener("mouseup",this._onTouchEnd,i))}destroy(){var t,i;this.element.removeEventListener("touchstart",this._onTouchStart),this.element.removeEventListener("touchmove",this._onTouchMove),this.element.removeEventListener("touchend",this._onTouchEnd),this.element.removeEventListener("mousedown",this._onTouchStart),document.removeEventListener("mousemove",this._onTouchMove),document.removeEventListener("mouseup",this._onTouchEnd),clearTimeout(null!==(t=this.longPressTimer)&&void 0!==t?t:void 0),clearTimeout(null!==(i=this.doubleTapTimer)&&void 0!==i?i:void 0)}on(t,i){if(this.handlers[t])return this.handlers[t].push(i),{type:t,fn:i,cancel:()=>this.off(t,i)}}off(t,i){if(this.handlers[t]){const e=this.handlers[t].indexOf(i);-1!==e&&this.handlers[t].splice(e,1)}}fire(t,i){for(let e=0;e<this.handlers[t].length;e++)this.handlers[t][e](i)}onTouchStart(t){var i,e,o,s,h,n,l,u,r,d,c,a,v,p,m,T,g,M,w,f,y,X,Y,E,b,S;let V=!1;if("mousedown"!==t.type){if(this.touch1||(this.touch1=t.changedTouches[0],V=!0),(V&&t.changedTouches.length>1||!V)&&!this.touch2)return this.touch2=[...t.changedTouches].find((t=>{var i;return t.identifier!==(null===(i=this.touch1)||void 0===i?void 0:i.identifier)}))||null,this.originalDistance=Math.sqrt(Math.pow((null!==(e=null===(i=this.touch2)||void 0===i?void 0:i.screenX)&&void 0!==e?e:0)-(null!==(n=null!==(s=null===(o=this.touchMove1)||void 0===o?void 0:o.screenX)&&void 0!==s?s:null===(h=this.touch1)||void 0===h?void 0:h.screenX)&&void 0!==n?n:0),2)+Math.pow((null!==(u=null===(l=this.touch2)||void 0===l?void 0:l.screenY)&&void 0!==u?u:0)-(null!==(a=null!==(d=null===(r=this.touchMove1)||void 0===r?void 0:r.screenY)&&void 0!==d?d:null===(c=this.touch1)||void 0===c?void 0:c.screenY)&&void 0!==a?a:0),2)),void(this.originalAngle=Math.atan2((null!==(p=null===(v=this.touch2)||void 0===v?void 0:v.screenY)&&void 0!==p?p:0)-(null!==(M=null!==(T=null===(m=this.touchMove1)||void 0===m?void 0:m.screenY)&&void 0!==T?T:null===(g=this.touch1)||void 0===g?void 0:g.screenY)&&void 0!==M?M:0),(null!==(f=null===(w=this.touch2)||void 0===w?void 0:w.screenX)&&void 0!==f?f:0)-(null!==(E=null!==(X=null===(y=this.touchMove1)||void 0===y?void 0:y.screenX)&&void 0!==X?X:null===(Y=this.touch1)||void 0===Y?void 0:Y.screenX)&&void 0!==E?E:0))/(Math.PI/180));if(!V)return}(V||"mousedown"===t.type)&&(this.thresholdX=this.opts.threshold("x",this),this.thresholdY=this.opts.threshold("y",this),this.disregardVelocityThresholdX=this.opts.disregardVelocityThreshold("x",this),this.disregardVelocityThresholdY=this.opts.disregardVelocityThreshold("y",this),this.touchStartX="mousedown"===t.type?t.screenX:(null===(b=this.touch1)||void 0===b?void 0:b.screenX)||0,this.touchStartY="mousedown"===t.type?t.screenY:(null===(S=this.touch1)||void 0===S?void 0:S.screenY)||0,this.touchMoveX=null,this.touchMoveY=null,this.touchEndX=null,this.touchEndY=null,this.swipingDirection=null,this.longPressTimer=setTimeout((()=>this.fire("longpress",t)),this.opts.longPressTime),this.scale=1,this.rotation=0,this.fire("panstart",t))}onTouchMove(t){var i,e,o,s,h,n,l,u,r,d,c,a,v;if("mousemove"===t.type&&(!this.touchStartX||null!==this.touchEndX))return;let p,m;if("mousemove"!==t.type&&(p=[...t.changedTouches].find((t=>{var i;return t.identifier===(null===(i=this.touch1)||void 0===i?void 0:i.identifier)})),this.touchMove1=p||this.touchMove1,m=[...t.changedTouches].find((t=>{var i;return t.identifier===(null===(i=this.touch2)||void 0===i?void 0:i.identifier)})),this.touchMove2=m||this.touchMove2),"mousemove"===t.type||p){const u=("mousemove"===t.type?t.screenX:null!==(i=null==p?void 0:p.screenX)&&void 0!==i?i:0)-(null!==(e=this.touchStartX)&&void 0!==e?e:0);this.velocityX=u-(null!==(o=this.touchMoveX)&&void 0!==o?o:0),this.touchMoveX=u;const r=("mousemove"===t.type?t.screenY:null!==(s=null==p?void 0:p.screenY)&&void 0!==s?s:0)-(null!==(h=this.touchStartY)&&void 0!==h?h:0);this.velocityY=r-(null!==(n=this.touchMoveY)&&void 0!==n?n:0),this.touchMoveY=r;const d=Math.abs(this.touchMoveX),c=Math.abs(this.touchMoveY);this.swipingHorizontal=d>this.thresholdX,this.swipingVertical=c>this.thresholdY,this.swipingDirection=d>c?this.swipingHorizontal?"horizontal":"pre-horizontal":this.swipingVertical?"vertical":"pre-vertical",Math.max(d,c)>this.opts.pressThreshold&&clearTimeout(null!==(l=this.longPressTimer)&&void 0!==l?l:void 0),this.fire("panmove",t)}"mousemove"!==t.type&&null!=this.touchMove1&&null!=this.touchMove2&&(this.newDistance=Math.sqrt(Math.pow(this.touchMove2.screenX-this.touchMove1.screenX,2)+Math.pow(this.touchMove2.screenY-this.touchMove1.screenY,2)),this.scale=this.newDistance/(null!==(u=this.originalDistance)&&void 0!==u?u:0),this.fire("pinch",t),this.newAngle=Math.atan2((null!==(r=this.touchMove2.screenY)&&void 0!==r?r:0)-(null!==(d=this.touchMove1.screenY)&&void 0!==d?d:0),(null!==(c=this.touchMove2.screenX)&&void 0!==c?c:0)-(null!==(a=this.touchMove1.screenX)&&void 0!==a?a:0))/(Math.PI/180),this.rotation=this.newAngle-(null!==(v=this.originalAngle)&&void 0!==v?v:0),this.fire("rotate",t))}onTouchEnd(t){var i,e,o,s,h,n,l,u,r,d;let c;if("mouseup"!==t.type&&(c=[...t.changedTouches].find((t=>{var i;return t.identifier===(null===(i=this.touch1)||void 0===i?void 0:i.identifier)})),[...t.touches].find((t=>{var i;return t.identifier===(null===(i=this.touch1)||void 0===i?void 0:i.identifier)}))||(this.touch1=null,this.touchMove1=null),[...t.touches].find((t=>{var i;return t.identifier===(null===(i=this.touch2)||void 0===i?void 0:i.identifier)}))||(this.touch2=null,this.touchMove2=null)),"mouseup"!==t.type||this.touchStartX&&null===this.touchEndX){if("mouseup"===t.type||c){this.touchEndX="mouseup"===t.type?t.screenX:null!==(i=null==c?void 0:c.screenX)&&void 0!==i?i:0,this.touchEndY="mouseup"===t.type?t.screenY:null!==(e=null==c?void 0:c.screenY)&&void 0!==e?e:0,this.fire("panend",t),clearTimeout(null!==(o=this.longPressTimer)&&void 0!==o?o:void 0);const a=this.touchEndX-(null!==(s=this.touchStartX)&&void 0!==s?s:0),v=Math.abs(a),p=this.touchEndY-(null!==(h=this.touchStartY)&&void 0!==h?h:0),m=Math.abs(p),T=Math.sqrt(Math.pow(a,2)+Math.pow(p,2)),g=Math.abs(T),M=m/v;v>this.thresholdX||m>this.thresholdY||this.opts.diagonalSwipes&&(g>this.thresholdX||g>this.thresholdY)?(this.swipedHorizontal=v>this.thresholdX||this.opts.diagonalSwipes&&g>this.thresholdX,this.swipedVertical=m>this.thresholdY||this.opts.diagonalSwipes&&g>this.thresholdY,(!this.opts.diagonalSwipes||M<Math.tan((45-this.opts.diagonalLimit)*Math.PI/180)||M>Math.tan((45+this.opts.diagonalLimit)*Math.PI/180))&&(v>=m&&(this.swipedVertical=!1),m>v&&(this.swipedHorizontal=!1)),this.swipedHorizontal&&(a<0?((null!==(n=this.velocityX)&&void 0!==n?n:0)<-this.opts.velocityThreshold||T<-this.disregardVelocityThresholdX)&&this.fire("swipeleft",t):((null!==(l=this.velocityX)&&void 0!==l?l:0)>this.opts.velocityThreshold||T>this.disregardVelocityThresholdX)&&this.fire("swiperight",t)),this.swipedVertical&&(p<0?((null!==(u=this.velocityY)&&void 0!==u?u:0)<-this.opts.velocityThreshold||T<-this.disregardVelocityThresholdY)&&this.fire("swipeup",t):((null!==(r=this.velocityY)&&void 0!==r?r:0)>this.opts.velocityThreshold||T>this.disregardVelocityThresholdY)&&this.fire("swipedown",t))):v<this.opts.pressThreshold&&m<this.opts.pressThreshold&&(this.doubleTapWaiting?(this.doubleTapWaiting=!1,clearTimeout(null!==(d=this.doubleTapTimer)&&void 0!==d?d:void 0),this.fire("doubletap",t)):(this.doubleTapWaiting=!0,this.doubleTapTimer=setTimeout((()=>this.doubleTapWaiting=!1),this.opts.doubleTapTime),this.fire("tap",t)))}this.touch1||this.touch2||(this.fire("pinchend",t),this.fire("rotateend",t),this.originalDistance=null,this.newDistance=null,this.scale=null,this.originalAngle=null,this.newAngle=null,this.rotation=null)}}}t.defaults={threshold:(t,i)=>Math.max(25,Math.floor(.15*("x"===t?window.innerWidth||document.body.clientWidth:window.innerHeight||document.body.clientHeight))),velocityThreshold:10,disregardVelocityThreshold:(t,i)=>Math.floor(.5*("x"===t?i.element.clientWidth:i.element.clientHeight)),pressThreshold:8,diagonalSwipes:!1,diagonalLimit:15,longPressTime:500,doubleTapTime:300,mouseSupport:!0};let i=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){i={passive:!0}}}))}catch(t){}return{T:t}}));
SML.dm("CLkam3rl",["CVEbQKiO"],(async t=>{var e;!function(t){t.NEUTRAL="NEUTRAL",t.SUCCESS="SUCCESS",t.WARNING="WARNING",t.ALERT="ALERT",t.PLAIN="PLAIN",t.DISABLED="DISABLED",t.DANGER="DANGER",t.INVERTED="INVERTED",t.SECONDARY="SECONDARY",t.MEDIA="MEDIA",t.BRAND="BRAND"}(e||(e={}));const n="bg-brand-background text-brand-onBackground",r="bg-secondary-background text-secondary-onBackground",o={[e.WARNING]:"bg-warning-background text-neutral-background",[e.SUCCESS]:"bg-success-background text-primary-onBackground",[e.NEUTRAL]:"bg-neutral-content text-neutral-background",[e.PLAIN]:r,[e.ALERT]:n,[e.BRAND]:n,[e.DANGER]:"bg-danger-background text-primary-onBackground",[e.DISABLED]:"bg-interactive-content-disabled text-neutral-background",[e.INVERTED]:"bg-inverted-neutral-background text-neutral-background",[e.SECONDARY]:r,[e.MEDIA]:"bg-media-background text-media-onBackground"};const a=(()=>{let t=0;return()=>(t+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${t}`)})();function i(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}function c(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function s(t,e={}){return{width:e.width||function(t){const e=c(t,"border-left-width"),n=c(t,"border-right-width");return t.clientWidth+e+n}(t),height:e.height||function(t){const e=c(t,"border-top-width"),n=c(t,"border-bottom-width");return t.clientHeight+e+n}(t)}}const l=16384;function u(t){return new Promise(((e,n)=>{const r=new Image;r.decode=()=>e(r),r.onload=()=>e(r),r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t}))}async function d(t,e,n){const r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),a=document.createElementNS(r,"foreignObject");return o.setAttribute("width",`${e}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${e} ${n}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),o.appendChild(a),a.appendChild(t),async function(t){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(t))).then(encodeURIComponent).then((t=>`data:image/svg+xml;charset=utf-8,${t}`))}(o)}const h=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return null!==n&&(n.constructor.name===e.name||h(n,e))};function f(t,e,n){const r=`.${t}:${e}`,o=n.cssText?function(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}(n):function(t){return i(t).map((e=>`${e}: ${t.getPropertyValue(e)}${t.getPropertyPriority(e)?" !important":""};`)).join(" ")}(n);return document.createTextNode(`${r}{${o}}`)}function g(t,e,n){const r=window.getComputedStyle(t,n),o=r.getPropertyValue("content");if(""===o||"none"===o)return;const i=a();try{e.className=`${e.className} ${i}`}catch(t){return}const c=document.createElement("style");c.appendChild(f(i,n,r)),e.appendChild(c)}const m="application/font-woff",p="image/jpeg",w={woff:m,woff2:m,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:p,jpeg:p,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function y(t){const e=function(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}(t).toLowerCase();return w[e]||""}function b(t){return-1!==t.search(/^(data:)/)}async function E(t,e,n){const r=await fetch(t,e);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const o=await r.blob();return new Promise(((t,e)=>{const a=new FileReader;a.onerror=e,a.onloadend=()=>{try{t(n({res:r,result:a.result}))}catch(t){e(t)}},a.readAsDataURL(o)}))}const S={};async function x(t,e,n){const r=function(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}(t,e,n.includeQueryParams);if(null!=S[r])return S[r];let o;n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());try{const r=await E(t,n.fetchRequestInit,(({res:t,result:n})=>(e||(e=t.headers.get("Content-Type")||""),function(t){return t.split(/,/)[1]}(n))));o=function(t,e){return`data:${e};base64,${t}`}(r,e)}catch(e){o=n.imagePlaceholder||"";let r=`Failed to fetch resource: ${t}`;e&&(r="string"==typeof e?e:e.message),r&&console.warn(r)}return S[r]=o,o}async function R(t,e){return h(t,HTMLCanvasElement)?async function(t){const e=t.toDataURL();return"data:,"===e?t.cloneNode(!1):u(e)}(t):h(t,HTMLVideoElement)?async function(t,e){if(t.currentSrc){const e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.clientWidth,e.height=t.clientHeight,null==n||n.drawImage(t,0,0,e.width,e.height),u(e.toDataURL())}const n=t.poster,r=y(n);return u(await x(n,r,e))}(t,e):h(t,HTMLIFrameElement)?async function(t){var e;try{if(null===(e=null==t?void 0:t.contentDocument)||void 0===e?void 0:e.body)return await C(t.contentDocument.body,{},!0)}catch(t){}return t.cloneNode(!1)}(t):t.cloneNode(!1)}const A=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function N(t,e){return h(e,Element)&&(function(t,e){const n=e.style;if(!n)return;const r=window.getComputedStyle(t);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):i(r).forEach((o=>{let a=r.getPropertyValue(o);if("font-size"===o&&a.endsWith("px")){const t=Math.floor(parseFloat(a.substring(0,a.length-2)))-.1;a=`${t}px`}h(t,HTMLIFrameElement)&&"display"===o&&"inline"===a&&(a="block"),"d"===o&&e.getAttribute("d")&&(a=`path(${e.getAttribute("d")})`),n.setProperty(o,a,r.getPropertyPriority(o))}))}(t,e),function(t,e){g(t,e,":before"),g(t,e,":after")}(t,e),function(t,e){h(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),h(t,HTMLInputElement)&&e.setAttribute("value",t.value)}(t,e),function(t,e){if(h(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find((e=>t.value===e.getAttribute("value")));r&&r.setAttribute("selected","")}}(t,e)),e}async function C(t,e,n){return n||!e.filter||e.filter(t)?Promise.resolve(t).then((t=>R(t,e))).then((n=>async function(t,e,n){var r,o;let a=[];return a=A(t)&&t.assignedNodes?i(t.assignedNodes()):h(t,HTMLIFrameElement)&&(null===(r=t.contentDocument)||void 0===r?void 0:r.body)?i(t.contentDocument.body.childNodes):i((null!==(o=t.shadowRoot)&&void 0!==o?o:t).childNodes),0===a.length||h(t,HTMLVideoElement)||await a.reduce(((t,r)=>t.then((()=>C(r,n))).then((t=>{t&&e.appendChild(t)}))),Promise.resolve()),e}(t,n,e))).then((e=>N(t,e))).then((t=>async function(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(0===n.length)return t;const r={};for(let o=0;o<n.length;o++){const a=n[o].getAttribute("xlink:href");if(a){const n=t.querySelector(a),o=document.querySelector(a);n||!o||r[a]||(r[a]=await C(o,e,!0))}}const o=Object.values(r);if(o.length){const e="http://www.w3.org/1999/xhtml",n=document.createElementNS(e,"svg");n.setAttribute("xmlns",e),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const r=document.createElementNS(e,"defs");n.appendChild(r);for(let t=0;t<o.length;t++)r.appendChild(o[t]);t.appendChild(n)}return t}(t,e))):null}const v=/url\((['"]?)([^'"]+?)\1\)/g,$=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,T=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function D(t,e,n,r,o){try{const a=n?function(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),e&&(r.href=e),o.href=t,o.href}(e,n):e,i=y(e);let c;return o||(c=await x(a,i,r)),t.replace(function(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}(e),`$1${c}$3`)}catch(t){}return t}function P(t){return-1!==t.search(v)}async function L(t,e,n){if(!P(t))return t;const r=function(t,{preferredFontFormat:e}){return e?t.replace(T,(t=>{for(;;){const[n,,r]=$.exec(t)||[];if(!r)return"";if(r===e)return`src: ${n};`}})):t}(t,n),o=function(t){const e=[];return t.replace(v,((t,n,r)=>(e.push(r),t))),e.filter((t=>!b(t)))}(r);return o.reduce(((t,r)=>t.then((t=>D(t,r,e,n)))),Promise.resolve(r))}async function I(t,e,n){var r;const o=null===(r=e.style)||void 0===r?void 0:r.getPropertyValue(t);if(o){const r=await L(o,null,n);return e.style.setProperty(t,r,e.style.getPropertyPriority(t)),!0}return!1}async function k(t,e){h(t,Element)&&(await async function(t,e){await I("background",t,e)||await I("background-image",t,e),await I("mask",t,e)||await I("mask-image",t,e)}(t,e),await async function(t,e){const n=h(t,HTMLImageElement);if((!n||b(t.src))&&(!h(t,SVGImageElement)||b(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,o=await x(r,y(r),e);await new Promise(((e,r)=>{t.onload=e,t.onerror=r;const a=t;a.decode&&(a.decode=e),"lazy"===a.loading&&(a.loading="eager"),n?(t.srcset="",t.src=o):t.href.baseVal=o}))}(t,e),await async function(t,e){const n=i(t.childNodes).map((t=>k(t,e)));await Promise.all(n).then((()=>t))}(t,e))}const M={};async function B(t){let e=M[t];if(null!=e)return e;const n=await fetch(t);return e={url:t,cssText:await n.text()},M[t]=e,e}async function U(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,o=(n.match(/url\([^)]+\)/g)||[]).map((async o=>{let a=o.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),E(a,e.fetchRequestInit,(({result:t})=>(n=n.replace(o,`url(${t})`),[o,t])))}));return Promise.all(o).then((()=>n))}function O(t){if(null==t)return[];const e=[];let n=t.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const t=r.exec(n);if(null===t)break;e.push(t[0])}n=n.replace(r,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let t=o.exec(n);if(null===t){if(t=a.exec(n),null===t)break;o.lastIndex=a.lastIndex}else a.lastIndex=o.lastIndex;e.push(t[0])}return e}async function H(t,e){if(null==t.ownerDocument)throw new Error("Provided element is not within a Document");const n=i(t.ownerDocument.styleSheets),r=await async function(t,e){const n=[],r=[];return t.forEach((n=>{if("cssRules"in n)try{i(n.cssRules||[]).forEach(((t,o)=>{if(t.type===CSSRule.IMPORT_RULE){let a=o+1;const i=B(t.href).then((t=>U(t,e))).then((t=>O(t).forEach((t=>{try{n.insertRule(t,t.startsWith("@import")?a+=1:n.cssRules.length)}catch(e){console.error("Error inserting rule from remote css",{rule:t,error:e})}})))).catch((t=>{console.error("Error loading remote css",t.toString())}));r.push(i)}}))}catch(o){const a=t.find((t=>null==t.href))||document.styleSheets[0];null!=n.href&&r.push(B(n.href).then((t=>U(t,e))).then((t=>O(t).forEach((t=>{a.insertRule(t,n.cssRules.length)})))).catch((t=>{console.error("Error loading remote stylesheet",t)}))),console.error("Error inlining remote css file",o)}})),Promise.all(r).then((()=>(t.forEach((t=>{if("cssRules"in t)try{i(t.cssRules||[]).forEach((t=>{n.push(t)}))}catch(e){console.error(`Error while reading CSS rules from ${t.href}`,e)}})),n)))}(n,e);return function(t){return t.filter((t=>t.type===CSSRule.FONT_FACE_RULE)).filter((t=>P(t.style.getPropertyValue("src"))))}(r)}async function V(t,e){const n=await H(t,e);return(await Promise.all(n.map((t=>{const n=t.parentStyleSheet?t.parentStyleSheet.href:null;return L(t.cssText,n,e)})))).join("\n")}async function j(t,e={}){const{width:n,height:r}=s(t,e),o=await C(t,e,!0);await async function(t,e){const n=null!=e.fontEmbedCSS?e.fontEmbedCSS:e.skipFonts?null:await V(t,e);if(n){const e=document.createElement("style"),r=document.createTextNode(n);e.appendChild(r),t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}}(o,e),await k(o,e),function(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;null!=r&&Object.keys(r).forEach((t=>{n[t]=r[t]}))}(o,e);return await d(o,n,r)}async function F(t,e={}){const{width:n,height:r}=s(t,e),o=await j(t,e),a=await u(o),i=document.createElement("canvas"),c=i.getContext("2d"),d=e.pixelRatio||function(){let t,e;try{e=process}catch(t){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}(),h=e.canvasWidth||n,f=e.canvasHeight||r;return i.width=h*d,i.height=f*d,e.skipAutoScale||function(t){(t.width>l||t.height>l)&&(t.width>l&&t.height>l?t.width>t.height?(t.height*=l/t.width,t.width=l):(t.width*=l/t.height,t.height=l):t.width>l?(t.height*=l/t.width,t.width=l):(t.width*=l/t.height,t.height=l))}(i),i.style.width=`${h}`,i.style.height=`${f}`,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,i.width,i.height)),c.drawImage(a,0,0,i.width,i.height),i}var q=Object.freeze({__proto__:null,getFontEmbedCSS:async function(t,e={}){return V(t,e)},toBlob:async function(t,e={}){const n=await F(t,e);return await function(t,e={}){return t.toBlob?new Promise((n=>{t.toBlob(n,e.type?e.type:"image/png",e.quality?e.quality:1)})):new Promise((n=>{const r=window.atob(t.toDataURL(e.type?e.type:void 0,e.quality?e.quality:void 0).split(",")[1]),o=r.length,a=new Uint8Array(o);for(let t=0;t<o;t+=1)a[t]=r.charCodeAt(t);n(new Blob([a],{type:e.type?e.type:"image/png"}))}))}(n)},toCanvas:F,toJpeg:async function(t,e={}){return(await F(t,e)).toDataURL("image/jpeg",e.quality||1)},toPixelData:async function(t,e={}){const{width:n,height:r}=s(t,e);return(await F(t,e)).getContext("2d").getImageData(0,0,n,r).data},toPng:async function(t,e={}){return(await F(t,e)).toDataURL()},toSvg:j});return{get B(){return e},b:({attributes:n,appearance:r=e.NEUTRAL,content:a,outline:i=!1})=>{const{html:c,createElement:s}=t.g(),l=c`<span class="font-semibold inline-block text-10 text-center ${a&&"min-h-[1rem] min-w-[0.5rem]"} px-2xs">${a}</span>`;let u="rounded-full inline-flex";return a||(u+=" h-xs w-xs"),i&&(u+=" border-md border-solid border-neutral-background"),s("span",{...n,className:`${[o[r]]} ${u} ${n?.className}`,rpl:!0},l)},get i(){return q}}}));
SML.dm("n2VAdrRK",["CVEbQKiO","D7lSuCop","CU4mObWU","CCphb8vV","CLkam3rl"],(async(t,i,e,n,s)=>{var a;!function(t){t.PLAIN="plain",t.MEDIA="media"}(a||(a={}));const o=12;let r=class extends t.s{constructor(){super(...arguments),this.pages=0,this.pageIndex=0,this.appearance=a.PLAIN,this.animationDuration=0,this.containerLabel="",this.numVisible=2,this.centerIndexPosition=3,this.setTransitionDuration=async()=>{this._dotsContainer&&(await this.updateComplete,this._dotsContainer.style.setProperty("--pagination-transition-duration",`${this.animationDuration}ms`))},this.animateInfiniteCurrentPage=t=>{if(this._currentPageIndicator){const i=[{transform:t?`translateX(${o*this.pages}px)`:"translateX(-12px)",opacity:0},{opacity:0,transform:t?"translateX(-12px)":`translateX(${o*this.pages}px)`},{opacity:1,transform:t?"translateX(0px)":`translateX(${o*(this.pages-1)}px)`}],e={duration:this.animationDuration,fill:"forwards",iterations:1};this.setDotsTrackTransform(!t),this._currentPageIndicator.animate(i,e)}},this.animateCurrentPage=async()=>{this.setDotsTrackTransform(),this.animateCurrentPageNumber()},this.animateCurrentPageNumber=()=>{if(this._currentPageIndicator){const t=[{width:"var(--rem6)"},{width:"var(--rem18)",borderRadius:"4px"},{width:"var(--rem6)",transform:`translateX(${o*this.pageIndex}px)`}],i={duration:this.animationDuration,fill:"forwards",iterations:1};this._currentPageIndicator.animate(t,i)}},this.onSelect=t=>{const i=new CustomEvent("pagination-click",{detail:{pageIndex:t},bubbles:!0,composed:!0});this.dispatchEvent(i)},this.isEdgeDot=t=>{if(this.pages>=6){const i=t===this.pageIndex-3,e=t===this.pageIndex+3;return i||e}return!1},this.getDotButton=e=>{const n=Math.abs(e-this.pageIndex),s=t=>t===this.pageIndex?`(${this.currentPageLabel??"Current Page"})`:"",a=this.getPageLabels?`${this.getPageLabels(e)} ${s(e)}`:`Page ${e+1} ${s(e)}`,o=0===n||1===n;return t.x`<button class="${i.x({dot:!0,edge:this.isEdgeDot(e)})}" aria-hidden="${!o}" tabindex="${o?0:-1}" @click="${t=>{0===t.target.tabIndex&&this.onSelect(e)}}" @keydown="${t=>{"Enter"!==t.key&&"Space"!==t.key||this.onSelect(e)}}"> <faceplate-screen-reader-content>${a}</faceplate-screen-reader-content> </button>`},this.render=()=>{if(0!==this.pages)return t.x` <div id="dots-container" dir="ltr"> <div class="dots-track-container"> <div id="dots-track" role="group" aria-label="${this.containerLabel}"> ${this.currentPageIndicator} ${[...Array(this.pages).keys()].map(((t,i)=>this.getDotButton(i)))} </div> </div> </div> `}}static get styles(){return t.i`:host{display:inline-flex;height:var(--rem16,1rem);width:100%;justify-content:center}:host(:dir(rtl)){transform:scaleX(-1)}:host #dots-container{display:inline-flex;position:relative;height:100%;overflow:hidden;align-items:center;border-radius:var(--rem8,.5rem);padding:0 var(--rem2,.125rem);transition:width ease-in-out var(--pagination-transition-duration)}:host .dots-track-container{position:relative;height:100%;width:100%;display:flex;align-items:center}:host #dots-track{display:flex;position:absolute;inset-inline-start:0;height:var(--rem12,.75rem);overflow:hidden;box-sizing:border-box;font-size:var(--rem10,.625rem);align-items:center;transition:transform ease-in-out var(--pagination-transition-duration)}:host([appearance=media]) #dots-container{background-color:var(--color-media-background)}:host([appearance=media]) .dot{background-color:var(--color-media-onbackground-disabled)}:host .dot:focus-visible{outline:solid 1px var(--color-global-focus)}:host([appearance=media]) #current-page-indicator.number{color:var(--color-media-onbackground)}:host([appearance=media]) #current-page-indicator.dot{background-color:var(--color-media-onbackground)}:host #current-page-indicator{z-index:2;position:absolute}:host #current-page-indicator.number{color:var(--color-neutral-content);display:flex;align-items:center;justify-content:center;transition:transform ease-in-out var(--pagination-transition-duration)}:host #current-page-indicator.dot{background-color:var(--color-neutral-content)}:host .dot{height:var(--rem6,.375rem);width:var(--rem6,.375rem);border-radius:50%;box-sizing:content-box;display:inline-block;margin:calc(var(--rem2,.125rem) + var(--rem1,.0625rem));padding:0;border:none}:host #current-page-indicator.number{height:var(--rem15,.9375rem);width:var(--rem16,1rem);margin:0}:host .dot{background-color:var(--color-neutral-border);background-clip:content-box;transition:all ease-in-out var(--pagination-transition-duration)}:host .dot[tabindex='0']{cursor:pointer}:host .dot:focus{transition:none}:host .dot.edge{transform:scale(.5);flex-shrink:0}`}willUpdate(t){t.has("pageIndex")&&(this.pageIndex<0||this.pageIndex>this.pages-1)&&(this.pageIndex=0)}async updated(t){await this.updateComplete,(t.has("pageIndex")||t.has("pages"))&&this.shrinkOrStretch();const i=t.get("pageIndex")===this.pages-1&&0===this.pageIndex,e=0===t.get("pageIndex")&&this.pageIndex===this.pages-1;i||e?this.animateInfiniteCurrentPage(i):t.has("pageIndex")&&await this.animateCurrentPage(),t.has("animationDuration")&&this.setTransitionDuration()}shrinkOrStretch(){this.pages>=6?0===this.pageIndex||this.pageIndex===this.pages-1?this.numVisible=4:1===this.pageIndex||this.pageIndex===this.pages-2?this.numVisible=5:2===this.pageIndex||this.pageIndex===this.pages-3?this.numVisible=6:this.pageIndex>=3&&this.pageIndex<=this.pages-4&&(this.numVisible=7):this.numVisible=this.pages,this._dotsContainer&&(this._dotsContainer.style.width=`calc(var(--rem12, 0.75rem) * ${this.numVisible})`)}setDotsTrackTransform(t){const i=this.pageIndex-this.centerIndexPosition,e=i>0?i:0;if(this._dotsTrack){const i=`translateX(${o*e*-1}px)`;i!==this._dotsTrack.style.transform?this._dotsTrack.style.transform=i:t&&"translateX(0px)"!==this._dotsTrack.style.transform&&(this._dotsTrack.style.transform="translateX(0px)")}}get currentPageIndicator(){return t.x`<span id="current-page-indicator" class="dot" aria-hidden="true"></span>`}};t._([t.n({type:Number})],r.prototype,"pages",void 0),t._([t.n({type:Number,attribute:"page-index"})],r.prototype,"pageIndex",void 0),t._([t.n({type:String})],r.prototype,"appearance",void 0),t._([t.n({type:Number,attribute:"animation-duration"})],r.prototype,"animationDuration",void 0),t._([t.n({type:String,attribute:"current-page-label"})],r.prototype,"currentPageLabel",void 0),t._([t.n()],r.prototype,"getPageLabels",void 0),t._([t.n({type:String,attribute:"container-label"})],r.prototype,"containerLabel",void 0),t._([t.z("#dots-container")],r.prototype,"_dotsContainer",void 0),t._([t.z("#dots-track")],r.prototype,"_dotsTrack",void 0),t._([t.z("#current-page-indicator")],r.prototype,"_currentPageIndicator",void 0),t._([t.X(".dot")],r.prototype,"_dots",void 0),r=t._([t.c("faceplate-pagination-indicator")],r);let l=class extends t.s{constructor(){super(...arguments),this.appearance=a.PLAIN,this.autoplay=0,this.pages=0,this.pageIndex=0,this.isAnimationFinished=!1,this._currentAnimation=null,this.handleAutoplayInterruption=async t=>{this.cancelAnimation(t)},this.cancelAnimation=async t=>{const i=await this._autoplayPillContainer;if(i){const{children:e}=i;if(e[t]?.firstElementChild){const i=e[t]?.firstElementChild?.getAnimations().map((t=>(t.cancel(),t.ready)));i&&await Promise.all(i)}}},this.resetAnimations=async()=>{const t=await this._autoplayPillContainer;if(t){const{children:i}=t;for(let t=0;t<i.length;t++)this.cancelAnimation(t)}},this.animatePill=async()=>{this.isAnimationFinished=!1;try{await this.updateComplete,this._currentAnimation?.cancel();const t=[{backgroundColor:"var(--color-neutral-border-medium)",width:0,height:"var(--rem4)"},{backgroundColor:"var(--color-neutral-border-medium)",width:"100%",height:"var(--rem4)"}],i={duration:this.autoplay,fill:"forwards",iterations:1},{children:e}=await this._autoplayPillContainer,n=e?.[this.pageIndex]?.firstElementChild;this._currentAnimation=n?.animate(t,i),await(this._currentAnimation?.finished),this.isAnimationFinished=!0}catch(t){t instanceof DOMException&&"AbortError"===t.name||console.error(t)}},this.pauseAnimation=()=>{this._currentAnimation?.pause()},this.resumeAnimation=()=>{this._currentAnimation?.play()},this.render=()=>{if(0!==this.pages)return t.x` <div class="pagination-container"> <div class="${i.x({"pagination-controls":!0,plain:this.appearance===a.PLAIN,media:this.appearance===a.MEDIA,autoplay:this.autoplay})}"> <span id="autoplay-pill-container">${[...Array(this.pages).keys()].map(((e,n)=>t.x`<span class="${i.x({track:!0,"in-view":this.pageIndex===n})}"> <span class="${i.x({autoplayPill:!0,"in-view":this.pageIndex===n,viewed:n<this.pageIndex,plain:this.appearance===a.PLAIN,media:this.appearance===a.MEDIA})}"></span> </span>`))}</span> </div> </div> `}}static get styles(){return t.i`:host{display:block;box-sizing:border-box}.pagination-container{display:flex;justify-content:center}.track.in-view{height:var(--rem4,.25rem);border-radius:var(--rem2,.125rem)}.autoplayPill,.track{height:var(--rem2,.125rem);display:inline-block;border-radius:var(--rem2,.0625);width:100%}.autoplayPill{position:absolute}.track{background-color:var(--color-neutral-border);flex:1;margin:0 var(--rem2,.125rem);display:inline-block;position:relative}#autoplay-pill-container{display:flex;width:100%;align-items:center}.autoplayPill.viewed{background-color:var(--color-neutral-border-medium)}.pagination-controls.autoplay{width:90%}.pagination-controls.media.autoplay{position:absolute;bottom:var(--rem12,.75rem);z-index:2}.pagination-controls{display:flex;align-items:center;justify-content:center}.pagination-controls.plain .current-page-indicator{color:var(--color-media-onbackground)}.pagination-controls.media .current-page-indicator{color:var(--color-neutral-content)}`}updated(t){t.has("pageIndex")&&!this.isAnimationFinished&&this.handleAutoplayInterruption(t.get("pageIndex"))}};var h,d,c,p,u;t._([t.n({type:String,attribute:"appearance"})],l.prototype,"appearance",void 0),t._([t.n({type:Number})],l.prototype,"autoplay",void 0),t._([t.n({type:Number})],l.prototype,"pages",void 0),t._([t.n({type:Number,attribute:"page-index"})],l.prototype,"pageIndex",void 0),t._([t.b()],l.prototype,"isAnimationFinished",void 0),t._([t.bK("#autoplay-pill-container")],l.prototype,"_autoplayPillContainer",void 0),l=t._([t.c("faceplate-carousel-pagination")],l),function(t){t.OUTSIDE="outside",t.INSIDE="inside",t.OFF="off"}(h||(h={})),function(t){t.NEXT="next",t.BOTH="both",t.OFF="off"}(d||(d={})),function(t){t.INSIDE="inside",t.OUTSIDE="outside",t.OFF="off"}(c||(c={})),function(t){t.FORWARDS="forwards",t.BACKWARDS="backwards"}(p||(p={})),function(t){t.LEFT="left",t.CENTER="center",t.OFF="off"}(u||(u={}));let g=class extends t.s{constructor(){super(...arguments),this.navPlacement=c.OUTSIDE,this.paginationPlacement=h.OUTSIDE,this.autoplay="default",this.advanceAnimation=!1,this.numVisible=1,this.infinite=!1,this.inset=d.OFF,this.startIndex=0,this._pageIndex=0,this.pageCount=0,this.isCarouselInitialized=!1,this.hasBeenInteractedWith=!1,this._childCount=0,this._autoplayTimeoutId=null,this._isInsetBothAllowed=!1,this._lowerBoundOffset=0,this._upperBoundOffset=0,this._prevButtonHidden=!1,this._isNextButtonHidden=!1,this._gap=0,this._gapTotal=0,this._autoplayPaginationRef=i.aE(),this._carouselListRef=i.aE(),this._gesture=null,this.firstRender=!0,this.autoplayInProgress=!1,this.hidePrevButton=!1,this.hideNextButton=!1,this.emitter=n.v(this),this._animationStartTime=0,this._animationRemainingTime=0,this.generateAriaLiveMsg=({pageIndex:t,numVisible:i,pageCount:e})=>{const n=t*i+1;return i>1?`Items ${n} through ${n+i-1} of ${e}`:`Item ${n} of ${e}`},this.updated=async t=>{(t.has("numVisible")||t.has("infinite")||t.has("inset")||t.has("autoplay")||t.has("navPlacement")||t.has("paginationPlacement")||t.has("pageWidth"))&&((t.has("inset")||t.has("navPlacement"))&&(this.cachedDimensions=null),this.firstRender||this.resetAndInitialize()),(t.has("_pageIndex")||t.has("infinite"))&&this.toggleDisabledProgressButtons()},this.resetAndInitialize=()=>{this.resetCarousel(),this.initializeCarousel()},this.initializeResize=()=>{this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver((async()=>{if(!this.firstRender){this.cachedDimensions=null,await new Promise((t=>requestAnimationFrame(t)));const t=this.getCarouselDimensions();t&&await this.showFirstChild(t.width)}})),this.resizeObserver.observe(this)},this.intersectionCallback=t=>{t.forEach((t=>{t.target.style.visibility=t.isIntersecting?"visible":"hidden"}));const i=new CustomEvent("__TEST-ONLY_carousel-intersection");this.dispatchEvent(i)},this.initializeIntersectionObserver=()=>{if(this._intersectionObserver=new IntersectionObserver(this.intersectionCallback,{root:this._carouselListRef?.value}),this.carouselSlot.children)for(const t of Array.from(this.carouselSlot.children))this._intersectionObserver.observe(t)},this.onPaginationClick=t=>{this.goToPage(t.detail.pageIndex,!0)},this.initializeCarousel=()=>{if(this.isCarouselInitialized)return;const{children:t}=this.carouselSlot;this.setChildAndPageCount(t),this.handleAutoPlay(),this._isInsetBothAllowed=this._childCount>=3&&(this.inset===d.BOTH||this.alignment===u.CENTER),this.infinite&&this.cloneBoundElements({children:t});if(this.navPlacement===c.INSIDE&&this.paginationPlacement===h.INSIDE||!this.firstRender){const t=this.getCarouselDimensions();t&&this.showFirstChild(t.width)}this.firstRender=!1,this.isCarouselInitialized=!0,this.initListMutationObserver(),this.initializeVisibility(),this.initializeIntersectionObserver(),this.toggleDisabledProgressButtons(),this._paginationCounter?.[0]&&(this._paginationCounter[0].style.visibility=this.pageCount<=5?"hidden":"visible");const i=new CustomEvent("__TEST-ONLY_carousel-initialized");this.dispatchEvent(i)},this.showFirstChild=async t=>{!this.hasBeenInteractedWith&&this.startIndex&&(this._pageIndex=this.startIndex),await this.setChildDimensions(t),this.goToPage(this.pageIndex,!1);const i=new CustomEvent("__TEST-ONLY_carousel-children-ready",{bubbles:!0});this.dispatchEvent(i)},this.handleAutoPlay=async()=>{"off"===this.autoplay||isNaN(this._autoplaySpeed)||(this.autoplayInProgress&&this.clearAnimationTimeout(),this.autoplayInProgress=!0,(this.infinite||this._pageIndex<this.pageCount-1)&&(this._animationStartTime=Date.now(),this._autoplayPaginationRef?.value?.animatePill(),this._autoplayTimeoutId=setTimeout((async()=>{await this.slideForwards(),this.handleAutoPlay()}),this._autoplaySpeed)))},this.cachedDimensions=null,this.getCarouselDimensions=()=>{if(this.cachedDimensions)return this.cachedDimensions;const t=this._carouselListRef.value?.getBoundingClientRect();if(t){const{width:i}=t;return this.cachedDimensions={width:i,height:t.height},this.cachedDimensions}},this.calcChildWidth=t=>{if(this.pageWidth)return"string"==typeof this.pageWidth&&this.pageWidth.endsWith("%")?t*(parseInt(this.pageWidth)/100):this.pageWidth;let i=0;this._gapTotal=this._gap*(this.numVisible-1)||0,this.inset!==d.OFF&&(i=48*(this.inset===d.NEXT?1:2),this._gapTotal=this._gap*(this.inset===d.NEXT?this.numVisible:this.numVisible+1));return(t-this._gapTotal-i)/this.numVisible},this.setChildDimensions=async t=>{this._gap=parseInt(getComputedStyle(this.carouselSlot).getPropertyValue("gap"))||0;for(const i of Array.from(this.carouselSlot.children)){const{width:e}=i.getBoundingClientRect(),n=i;if(n.style.boxSizing="border-box",t){const i=this.calcChildWidth(t);i!==e&&(n.style.width="number"==typeof i?`${i}px`:i)}"100%"!==n.style.height&&(n.style.height="100%"),"hidden"!==n.style.overflow&&(n.style.overflow="hidden")}},this.prepareNextSlideVisibility=t=>{const i=this.carouselSlot.children.length;for(let e=t;e<Math.min(t+this.numVisible,i);e++)this.carouselSlot.children[e].style.visibility="visible"},this.handleTranslateXWithOffset=async({element:t,startIndex:i})=>{this.prepareNextSlideVisibility(i);let e="";const n=this.insetWidth(t);if(this._isInsetBothAllowed)switch(i){case 0:e="0px";break;case this.pageCount-1:e=this.isRTL?`calc(-1 * ${t.offsetLeft}px)`:`calc(-1 * (${t.offsetLeft}px - ${2*n}px - ${this._gap*this.numGaps}px))`;break;default:e=`calc(-1 * (${t.offsetLeft}px - ${n}px - ${this._gap}px))`}else{const i=getComputedStyle(this.carouselSlot),n=parseInt(i.paddingLeft||"0"),s=parseInt(i.paddingRight||"0"),a=this.carouselSlot.scrollWidth-(this.carouselSlot.clientWidth-s),o=t.offsetLeft===n?0:t.offsetLeft;e=-Math.min(o,a)+"px"}return this.carouselSlot.style.transform=`translateX(${e})`,await Promise.all(this.carouselSlot.getAnimations().map((t=>t.finished))).catch((t=>{t instanceof DOMException&&"AbortError"===t.name||console.error(t)}))},this.slideCarousel=async({isWithinBounds:t,direction:i,requestedIndex:e,allowAnimations:n,onSuccessfulSlide:s})=>{const{children:a}=this.carouselSlot,o=a.length,r=Math.max(1,Math.min(this.numVisible,o));let l=!1;if(this.firstRender||(this.carouselSlot.style.transitionDuration=`${n?this.animationDuration:0}ms`),t){let t=e*r+this._lowerBoundOffset;if(t+r>o){const i=e-1,n=t+r-o;t=Math.max(0,i*r+(r-n))}await this.handleTranslateXWithOffset({element:a[t],startIndex:t}),l=!0}else this.infinite&&(await this.handleInfiniteSlide({children:a,direction:i}),l=!0);l&&(this.hasBeenInteractedWith||(this.hasBeenInteractedWith=!0),s?.());const h=new CustomEvent("faceplate-carousel:slide",{detail:{prevPositionIndex:this._pageIndex,currPositionIndex:e,direction:i,num_items:this._childCount},bubbles:!0});this.dispatchEvent(h)},this.cloneBoundElements=({children:t})=>{let i=0;const e=this._childCount-1,n=this._isInsetBothAllowed?1:0;for(let i=0;i<this.numVisible+n;i++){const e=t[i]?.cloneNode(!0);e instanceof HTMLElement&&(e.dataset.fpUiCarouselMarker="true",e.id=Math.random().toString(16).slice(2),e.role="presentation",this.carouselSlot.append(e),++this._upperBoundOffset)}const s=this._isInsetBothAllowed?1:0;for(let n=0;n<this.numVisible+s;n++){const s=t[e-n+i++]?.cloneNode(!0);s instanceof HTMLElement&&(s.dataset.fpUiCarouselMarker="true",s.id=Math.random().toString(16).slice(2),s.role="presentation",this.carouselSlot.prepend(s),++this._lowerBoundOffset)}},this.handleInfiniteSlide=async({children:t,direction:i})=>{this.carouselSlot.style.transitionDuration="0s";let e=this._isInsetBothAllowed?1:0;i===p.BACKWARDS&&(e=t.length-this._upperBoundOffset),await this.handleTranslateXWithOffset({element:t[e],startIndex:e}),this.carouselSlot.style.transitionDuration=`${this.animationDuration}ms`;const n=i===p.BACKWARDS?e-this.numVisible:e+this.numVisible;await this.handleTranslateXWithOffset({element:t[n],startIndex:n})},this.setNavButtonVisibility=({type:t,hidden:i})=>{this.navPlacement!==c.OFF&&("next"===t?(this.hideNextButton=i,this._isNextButtonHidden=i):(this.hidePrevButton=i,this._prevButtonHidden=i))},this.toggleDisabledProgressButtons=()=>{if(!this.infinite){const t=0===this.pageIndex,i=this.pageIndex===Math.ceil(this._childCount/this.numVisible)-1,e=0===this._childCount;this.setNavButtonVisibility({type:"previous",hidden:e||t}),this.setNavButtonVisibility({type:"next",hidden:e||i})}},this.resetCarousel=()=>{this.resetChildren(),this.cancelAutoPlay(),this.resetDisabledProgressButtons(),this._pageIndex=0,this.pageCount=0,this.isCarouselInitialized=!1,this._isInsetBothAllowed=!1,this._lowerBoundOffset=0,this._upperBoundOffset=0;const t=new CustomEvent("__TEST-ONLY_carousel-reset");this.dispatchEvent(t)},this.resetChildren=()=>{const{children:t}=this.carouselSlot;let i=0;const e=t.length;for(let n=0;n<e;n++){const e=t[i];e instanceof HTMLElement&&e.dataset.fpUiCarouselMarker?e.remove():i++}},this.clearAnimationTimeout=t=>{"number"==typeof this._autoplayTimeoutId&&(window.clearTimeout(this._autoplayTimeoutId),this.autoplayInProgress=!1,t&&t())},this.cancelAutoPlay=()=>{this.clearAnimationTimeout(this._autoplayPaginationRef?.value?.resetAnimations)},this.onListItemKeydown=t=>{"ArrowLeft"===t.key?this.slideBackwards(t):"ArrowRight"===t.key&&this.slideForwards(t)},this.goToPage=(t,i)=>{if(t<0||t>=this.pageCount)return;let e=p.BACKWARDS;t>this._pageIndex&&(e=p.FORWARDS),this._pageIndex=t,this.slideCarousel({isWithinBounds:!0,direction:e,requestedIndex:t,allowAnimations:i})},this.swipeForwards=t=>{this.slideForwards(t),this.dispatchSwipeEvent(p.FORWARDS)},this.swipeBackwards=t=>{this.slideBackwards(t),this.dispatchSwipeEvent(p.BACKWARDS)},this.onInterruptedAutoplay=async t=>{await t(),this.handleAutoPlay()},this.slideHelper=async({navButtonDisabled:t,slide:i,e})=>{t||(this._autoplayTimeoutId&&e?this.onInterruptedAutoplay(i):await i())},this.slideForwards=async t=>{const i=this._pageIndex+1,e=i<this.pageCount;await this.slideHelper({navButtonDisabled:this._isNextButtonHidden,slide:async()=>{this._pageIndex=e?i:0,this.slideCarousel({isWithinBounds:e,direction:p.FORWARDS,requestedIndex:i,allowAnimations:!0})},e:t})},this.onKeyDown=(t,i)=>{"Enter"!==t.key&&"Space"!==t.key||(t.preventDefault(),i(t))},this.slideBackwards=async t=>{const i=this._pageIndex-1,e=i>=0;await this.slideHelper({navButtonDisabled:this._prevButtonHidden,slide:async()=>{this._pageIndex=e?i:this.pageCount-1,this.slideCarousel({isWithinBounds:e,direction:p.BACKWARDS,requestedIndex:i,allowAnimations:!0})},e:t})},this.onListItemFocusIn=()=>{this.autoplay&&"off"!==this.autoplay&&(this._animationRemainingTime=this._autoplaySpeed-(Date.now()-this._animationStartTime),this.clearAnimationTimeout(),this.autoplayInProgress=!1,this._autoplayPaginationRef?.value?.pauseAnimation())},this.onListItemBlur=()=>{this.autoplay&&"off"!==this.autoplay&&(this._autoplayPaginationRef?.value?.resumeAnimation(),setTimeout((async()=>{await this.slideForwards(),this.handleAutoPlay()}),this._animationRemainingTime))}}static get styles(){return t.i`:host{display:flex;position:relative;width:inherit;isolation:isolate;--carousel-gap:var(--spacer-xs, 0.5rem);--carousel-padding:0;--carousel-margin:0}.carousel-container{display:flex;height:auto;align-items:center;position:relative;width:100%}::slotted(:not([slot])){height:100%;display:grid;grid-auto-flow:column;transition:transform;transition-timing-function:ease-out;margin:var(--carousel-margin)!important;padding:var(--carousel-padding)!important;list-style:none;position:relative;gap:var(--carousel-gap)}::slotted([slot=nextButton]),::slotted([slot=prevButton]){display:inline-block}.content-nav-buttons{display:inline-block;position:relative;z-index:2}.content-nav-buttons.hide{visibility:hidden}.content-nav-buttons.start{position:absolute;inset-inline-start:var(--spacer-sm,.75rem)}.content-nav-buttons.outside.end{padding:0 var(--spacer-sm,.75rem)}.content-nav-buttons.inside{position:absolute;top:50%;transform:translateY(-50%)}.content-nav-buttons.inside.start{inset-inline-start:var(--spacer-xs,.5rem)}.content-nav-buttons.inside.end{inset-inline-end:var(--spacer-xs,.5rem)}#carousel-window{position:relative;overflow:hidden;contain:content;display:flex;flex-direction:column;height:100%;flex:1}#carousel-list{height:100%;overflow:hidden;position:relative}:host([pagination-placement=outside]) #pagination-container{padding-top:var(--spacer-xs,.5rem)}:host(:not([nav-placement])) #carousel-window,:host([nav-placement=outside]) #carousel-window{margin-inline-start:var(--rem56,3.5rem)}:host([pagination-placement=inside]) #pagination-container{position:absolute;bottom:var(--rem16,1rem);inset-inline:0;margin:0 auto;width:fit-content}.carousel-actions{position:absolute;inset-inline-end:var(--rem12,.5rem);display:inline-flex;align-items:center;gap:var(--rem12,.75rem)}.carousel-actions.top{top:var(--rem12,.5rem)}.carousel-actions.bottom{bottom:var(--rem16,.1rem)}.hidden{visibility:hidden}.visible{visibility:visible;transition:visibility ease-in}`}get pageIndex(){return this._pageIndex}get isRTL(){try{return this.matches(":dir(rtl)")}catch{return"rtl"===getComputedStyle(this).direction}}get carouselSlot(){return this._children.reduce(((t,i)=>i.assignedSlot&&"UL"===i.nodeName?i:t),document.createElement("ul"))}connectedCallback(){if(super.connectedCallback(),this._gesture=new e.T(this,{mouseSupport:!1}),this._gesture.on("swipeleft",this.isRTL?this.swipeBackwards:this.swipeForwards),this._gesture.on("swiperight",this.isRTL?this.swipeForwards:this.swipeBackwards),this.initializeResize(),this.isCarouselInitialized){const t=this._pageIndex;this.resetAndInitialize(),this._pageIndex!==t&&this.goToPage(t,!1)}}disconnectedCallback(){super.disconnectedCallback(),this._gesture?.destroy(),this.resizeObserver?.disconnect(),this._listMutationObserver?.disconnect(),this._intersectionObserver?.disconnect()}firstUpdated(){this.initializeCarousel()}async handleChildRemoval(){const{children:t}=this.carouselSlot;this.setChildAndPageCount(t),this._firstViewableIndex>this._childCount-1&&this.slideBackwards(),this._childCount||this.toggleDisabledProgressButtons();const i=new CustomEvent("__TEST-ONLY_carousel-children-reset");this.dispatchEvent(i)}get _firstViewableIndex(){return this.infinite?this.pageIndex*this.numVisible+this._lowerBoundOffset:this.pageIndex*this.numVisible}initListMutationObserver(){this._listMutationObserver&&this._listMutationObserver.disconnect(),this._listMutationObserver=new MutationObserver((t=>{for(const i of t)"childList"===i.type&&this.isCarouselInitialized&&(i.removedNodes.length>0?this.handleChildRemoval():i.addedNodes.length>0&&this.handleChildrenAddition())})),this.carouselSlot&&this._listMutationObserver.observe(this.carouselSlot,{childList:!0})}setChildAndPageCount(t){this._childCount=t.length,this.pageCount=Math.ceil(this._childCount/this.numVisible)}async handleChildrenAddition(){const t=this._childCount,{children:i}=this.carouselSlot;this.setChildAndPageCount(i);const e=this.getCarouselDimensions();e&&await this.setChildDimensions(e.width),this._childCount>t&&this.toggleDisabledProgressButtons()}get _autoplaySpeed(){switch(this.autoplay){case"off":return 0;case"default":return 5e3;default:return parseInt(this.autoplay)}}get animationDuration(){return this.advanceAnimation&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches?250:0}get numInsets(){return this.inset===d.BOTH||this.alignment===u.CENTER?2:this.inset===d.NEXT||this.alignment===u.LEFT?1:0}get numGaps(){return this.numVisible+this.numInsets-1}insetWidth(t){const i=this.getCarouselDimensions();if(i){return(i.width-t.getBoundingClientRect().width*this.numVisible-this._gap*this.numGaps)/this.numInsets}return 0}resetDisabledProgressButtons(){this.setNavButtonVisibility({type:"next",hidden:!1}),this.setNavButtonVisibility({type:"previous",hidden:!1})}initializeVisibility(){for(const t of Array.from(this.carouselSlot.children))t.dataset.fpUiCarouselMarker||(t.style.visibility="hidden")}dispatchSwipeEvent(t){const i=new CustomEvent("faceplate-carousel:swipe",{detail:{currPositionIndex:this._pageIndex,direction:t},bubbles:!0});this.dispatchEvent(i)}render(){return t.x` <div class="carousel-container"> <div id="carousel-window"> <div id="carousel-list" ${i.aq(this._carouselListRef)}> <slot @keydown="${this.onListItemKeydown}" @focusin="${this.onListItemFocusIn}" @focusout="${this.onListItemBlur}"></slot> <span class="carousel-actions top"> <slot name="paginationCounter"></slot> <slot name="closeButton"></slot> </span> <span class="carousel-actions bottom"> <slot name="addButton"></slot> </span> </div> <div id="pagination-container" class="${i.x({inside:this.paginationPlacement===h.INSIDE})}"> ${this.paginationPlacement===h.OFF?null:this._autoplaySpeed?t.x`<faceplate-carousel-pagination ${i.aq(this._autoplayPaginationRef)} pages="${this.pageCount}" page-index="${this._pageIndex}" autoplay="${this._autoplaySpeed}" appearance="${this.paginationPlacement===h.INSIDE?a.MEDIA:a.PLAIN}"> </faceplate-carousel-pagination>`:t.x`<faceplate-pagination-indicator @pagination-click="${this.onPaginationClick}" .getPageLabels="${this.getPageLabels}" numbered current-page-label="${t.l(this.currentPageLabel)}" appearance="${this.paginationPlacement===h.INSIDE?a.MEDIA:a.PLAIN}" animation-duration="${this.animationDuration}" pages="${this.pageCount}" page-index="${this._pageIndex}" container-label="${t.l(this.paginationContainerLabel)}"></faceplate-pagination-indicator>`} </div> </div> <slot class="content-nav-buttons start ${i.x({hide:this.navPlacement===c.OFF||this.hidePrevButton,outside:this.navPlacement===c.OUTSIDE,inside:this.navPlacement===c.INSIDE})}" name="prevButton" @click="${this.slideBackwards}" @keydown="${t=>this.onKeyDown(t,this.slideBackwards)}"> </slot> <slot class="content-nav-buttons end ${i.x({hide:this.navPlacement===c.OFF||this.hideNextButton,outside:this.navPlacement===c.OUTSIDE,inside:this.navPlacement===c.INSIDE})}" name="nextButton" @click="${this.slideForwards}" @keydown="${t=>this.onKeyDown(t,this.slideForwards)}"> </slot> </div> <faceplate-screen-reader-content aria-live="polite" aria-atomic="true"> ${this.currentAriaLiveMsg??this.generateAriaLiveMsg({pageIndex:this.pageIndex,pageCount:this.pageCount,numVisible:this.numVisible})} </faceplate-screen-reader-content> `}};return g.navButton=({placement:e,progress:n,ariaLabel:s})=>{const a=n===p.FORWARDS?"Next Page":"Previous Page";return i.k({appearance:e===c.INSIDE?"media":"secondary",size:i._.Small,leadingIcon:n===p.FORWARDS?t.bL({size:t.q.Small}):t.bM({size:t.q.Small}),attributes:{"aria-label":s??a}})},g.closeButton=({attributes:e})=>i.k({appearance:"media",size:i._.Small,leadingIcon:t.V({size:t.q.Small}),attributes:e}),g.addButton=({children:e,attributes:n})=>i.k({appearance:"media",size:i._.Small,leadingIcon:t.bN({size:t.q.Small}),attributes:n,children:e}),g.paginationCounter=({attributes:t,pageIndex:i,pageCount:e})=>s.b({appearance:s.B.MEDIA,content:`${i+1} / ${e}`,attributes:t}),t._([t.n({type:String,attribute:"nav-placement",reflect:!0})],g.prototype,"navPlacement",void 0),t._([t.n({type:String,attribute:"pagination-placement",reflect:!0})],g.prototype,"paginationPlacement",void 0),t._([t.n({type:String})],g.prototype,"autoplay",void 0),t._([t.n({type:Boolean,attribute:"advance-animation"})],g.prototype,"advanceAnimation",void 0),t._([t.n({type:Number,attribute:"num-visible"})],g.prototype,"numVisible",void 0),t._([t.n({type:Boolean})],g.prototype,"infinite",void 0),t._([t.n({type:String})],g.prototype,"inset",void 0),t._([t.n({type:String,attribute:"pagination-counter-label"})],g.prototype,"paginationCounterLabel",void 0),t._([t.n({type:Number,attribute:"start-index"})],g.prototype,"startIndex",void 0),t._([t.n()],g.prototype,"getPageLabels",void 0),t._([t.n({type:String,attribute:"current-page-label"})],g.prototype,"currentPageLabel",void 0),t._([t.n({type:String,attribute:"current-aria-live-msg"})],g.prototype,"currentAriaLiveMsg",void 0),t._([t.n({type:String,attribute:"pagination-container-label"})],g.prototype,"paginationContainerLabel",void 0),t._([t.n({type:String,attribute:"page-width"})],g.prototype,"pageWidth",void 0),t._([t.n({type:String})],g.prototype,"alignment",void 0),t._([t.b()],g.prototype,"_pageIndex",void 0),t._([t.b()],g.prototype,"pageCount",void 0),t._([t.b()],g.prototype,"isCarouselInitialized",void 0),t._([t.b()],g.prototype,"hasBeenInteractedWith",void 0),t._([t.v({flatten:!0})],g.prototype,"_children",void 0),t._([t.v({slot:"paginationCounter",flatten:!0})],g.prototype,"_paginationCounter",void 0),t._([t.b()],g.prototype,"firstRender",void 0),t._([t.b()],g.prototype,"autoplayInProgress",void 0),t._([t.b()],g.prototype,"hidePrevButton",void 0),t._([t.b()],g.prototype,"hideNextButton",void 0),g=t._([t.c("faceplate-carousel")],g),{get C(){return p},get F(){return g},get I(){return d},get N(){return c},get P(){return h}}}));
SML.dm("DsV3drw0",["D7lSuCop","CCphb8vV"],(async(e,t)=>{var o,n;!function(e){e.SubredditFeed="SubredditFeed",e.CustomFeed="CustomFeed",e.AggregateFeed="AggregateFeed",e.BestOfRedditPage="BestOfRedditPage",e.CommentsPage="CommentsPage",e.Comment="Comment",e.DynamicFeed="DynamicFeed",e.ListingBelowSubredditPosts="ListingBelowSubredditPosts",e.ListingBelowLinkedPosts="ListingBelowLinkedPosts",e.PopularFeed="PopularFeed",e.PostStatsPage="PostStatsPage",e.ProfileFeed="ProfileFeed",e.ProfileFeed2="ProfileFeed2",e.ProfileTrendingConvos="ProfileTrendingConvos",e.BrandMentionFeed="BrandMentionFeed",e.BrandPostPerformanceFeed="BrandPostPerformanceFeed",e.ArticleFeed="ArticleFeed",e.SearchResultsPage="SearchResultsPage",e.RightRail="RightRail",e.ModChatChannels="ModChatChannels",e.ModQueue="ModQueue",e.ModQueueAll="ModQueueAll",e.ModNotesRail="ModNotesRail",e.ModLog="ModLog",e.UserManagement="UserManagement",e.ModRules="ModRules",e.ModRecruitment="ModRecruitment",e.ModWiki="ModWiki",e.ArticleDetails="ArticleDetails",e.RelatedPosts="RelatedPosts"}(o||(o={})),function(e){e.Scheduled="scheduled",e.Live="live",e.Ended="ended"}(n||(n={}));const i=e=>`${e}`.startsWith("t3_")?`${e}`:`t3_${e}`;function s(e){return e===o.ListingBelowLinkedPosts||e===o.ListingBelowSubredditPosts}const a=/^.*?\/(?:u|user|r)\/(?:[a-zA-Z0-9_-]+)\/comments\/(?<postId>[a-zA-Z0-9]+)(?:(?:\/|\?).*|$)/;const r=t=>c(t,e.eH)?t:void 0,c=(e,t)=>Object.values(t).includes(e),d=(e,t)=>void 0===e?void 0:t(e);function u(e){return e&&s(e)?"post_detail":"post"}function l(e){return u(e.viewContext??null)}const m=({archived:t,authorId:o,createdTimestamp:n,domain:i,id:s,feedIndex:a,nsfw:c,isStickied:u,isHighlighted:l,postTitle:m,postType:p,promoted:_,recommendationSource:f,recommendationSubredditId:b,recommendationSubredditName:g,score:h,spoiler:w,subredditId:v,subredditPrefixedName:P,viewType:k,commentCount:T,permalink:M,awardId:I,interactionFromHotkey:L})=>{const F=d(p,r),A=d(n,e.eL),C={name:P?.toLowerCase(),id:v},S=I?{id:I}:void 0,x=L?e.cM.HOTKEY:void 0;return{...S,post:{archived:t,author_id:o,created_timestamp:A,domain:i,id:s,nsfw:c,pinned:u,highlighted:l,promoted:_,score:h,spoiler:w,subreddit_id:v,subreddit_name:C.name,title:m,type:F,recommendation_source:f?.toLowerCase(),recommendation_source_subreddit_id:b,recommendation_source_subreddit_name:g,number_comments:T,url:M},screen:{view_type:e.fX(k)},subreddit:C,action_info:{position:a,trigger_type:x}}},p=t=>({...m(t),feed:e.fW()}),_=({fields:e,post:t,postIsTranslated:o,reason:n})=>{const{isMTSEOUserPage:i,postLanguage:s,translationLanguage:a}=t;return e={...e,post:{...e.post,language:s,translation_language:o?a:"original",translation_state:o,translation_reason:o?i?"mt_seo":"immersive_auto":"original"},...n&&{action_info:{...e.action_info,reason:n}}}};function f(e,t){return e&&t?{ad_metadata:{impression_id:e,placement:t}}:void 0}function b(e){return{..._({fields:p(e),post:e,postIsTranslated:!!e.isPostTranslated,withTranslationMetrics:!0}),new_award:{id:e.awardId,is_content_eligible:Boolean(e.isAwardable)}}}const g=(t,o,n={})=>e.b({source:l(t),action:"click",noun:o},{...t.viewContext&&s(t.viewContext)?b(t):n,feed:e.fW()}),h=e=>`${e}`.startsWith("t1_")?`${e}`:`t1_${e}`,w=/^.*\/r\/.*\/comments\/(?<postId>[a-zA-Z0-9]+)\/.*\/?$/;const v=/\/r\/([^/]+)\/$/;return{$:function(t){return t===e.aa.Home},get A(){return n},B:(t,o)=>e.b({source:u(t),action:"click",noun:"report"},o),C:"hidden",D:t=>e.b({source:"ad_overflow",action:"hide",noun:"ad"},t),E:(t,o)=>e.b({source:u(t),action:"click",noun:"overflow_show_less"},o),F:t=>e.b({source:u(t),action:"click",noun:"edit"}),G:t=>e.b({source:u(t),action:"click",noun:"update_post_flair"}),H:t=>e.b({source:u(t),action:"click",noun:"save"}),I:t=>e.b({source:u(t),action:"click",noun:"overflow_rec_context"}),J:(t,o)=>e.b({source:u(t),action:o?"undo":"click",noun:"follow"}),K:t=>e.b({source:u(t),action:"click",noun:"unpin"}),L:t=>e.b({source:u(t),action:"click",noun:"pin"}),M:"overflow-hidden h-[60px] embed-xs:h-[80px]",N:t=>e.b({source:u(t),action:"click",noun:"delete"}),O:({markedAsSpoiler:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"mark_spoiler":"unmark_spoiler"}),get P(){return o},Q:({markedAsNsfw:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"mark_nsfw":"unmark_nsfw"}),R:"read-more-click",S:({markedAsBrandAffiliate:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"mark_brand_affiliate":"unmark_brand_affiliate"}),T:"h-[316px]",U:({turnNotificationsOn:t,viewContext:o})=>e.b({source:u(o),action:"click",noun:t?"turn_notifications":"unsend_reply_notifications"}),V:t=>e.b({source:u(t),action:"click",noun:"hide"}),W:(t,o)=>e.b({source:"post"===o?"post":"post_detail",action:t,noun:"post"===o?"post":"comment"},{action_info:{trigger_type:e.cM.HOTKEY}}),X:t=>e.b({source:"post",action:"leave",noun:"post",visibility:{on_screen_timestamp:t.becameVisibleOnScreenTimestamp,off_screen_timestamp:Date.now()}},p(t)),Y:t=>e.b({source:"post",action:"consume",noun:"post"},{..._({fields:p(t),post:t,postIsTranslated:!!t.isPostTranslated,withTranslationMetrics:!0}),new_award:{id:t.awardId,is_content_eligible:Boolean(t.isAwardable)}}),Z:t=>e.b({source:l(t),action:"click",noun:"read_more"},p(t)),_:function(t){return t===e.aa.Popular},a:2e3,a0:function(e){return e===o.BrandMentionFeed||e===o.ArticleDetails},a1:s,a2:e=>g(e,"share",m(e)),a3:e=>g(e,"share_copy",m(e)),a4:(o,n)=>{switch(t.g(o,"postClickLocation")){case e.a8.SUBREDDIT_LINK:return(e=>g(e,"subreddit",m(e)))(n);case e.a8.JOIN:return(e=>g(e,"subscribe",m(e)))(n);case e.a8.OVERFLOW_BUTTON:case e.a8.COMMENTS_BUTTON:case e.a8.VOTE:case e.a8.SHARE:case e.a8.VIDEO_PLAYER:return null;case e.a8.TEXT_BODY:return(e=>g(e,"text",m(e)))(n);default:return(e=>g(e,"post",m(e)))(n)}},a5:t=>e.b({source:l(t),action:"click",noun:"vote_try"},m(t)),a6:t=>e.b({source:"subreddit_hovercard",action:"view",noun:"hover_subreddit_hovercard"},p(t)),a7:t=>e.b({source:"user_hovercard",action:"view",noun:"hover_user_hovercard"},p(t)),a8:function(e){const t=e.match(a),o=t?.groups?.postId;if(o)return i(o)},b:function(e){switch(e){case o.AggregateFeed:case o.SubredditFeed:case o.CustomFeed:case o.ListingBelowLinkedPosts:case o.ListingBelowSubredditPosts:case o.PopularFeed:case o.ProfileFeed:case o.ProfileFeed2:case o.BrandMentionFeed:case o.BrandPostPerformanceFeed:case o.ArticleDetails:case o.ModQueue:case o.ModQueueAll:case o.ModLog:case o.ModNotesRail:return!0;case o.CommentsPage:default:return!1}},c:"partial-update",d:function(e){return`https://www.redditmedia.com/mediaembed/${e.replace("t3_","")}/`},e:i,f:e=>e.startsWith("t3_"),g:m,h:_,i:function(e){return e===o.CommentsPage},j:p,k:t=>e.b({source:l(t),action:"click",noun:"clearvote"},p(t)),l:t=>e.b({source:l(t),action:"click",noun:"downvote"},{..._({fields:p(t),post:t,postIsTranslated:!!t.isPostTranslated,withTranslationMetrics:!0})}),m:t=>e.b({source:l(t),action:"view",noun:"post"},b(t)),n:function(e){const t=(e?.getAttribute("href")||"").match(w),o=t?.groups?.postId;return o?i(o):""},o:e=>g(e,"view_all_comments",m(e)),p:(t,o)=>e.b({source:"translate_button",action:"view",noun:"post"},_({fields:p(t),post:t,postIsTranslated:o,reason:o?"on":"off"})),q:e=>g(e,"comments",m(e)),r:"flex",s:t=>e.b({source:u(t),action:"click",noun:"post_overflow_menu"}),t:"max-h-[253px] overflow-hidden s:max-h-[318px] m:max-h-[337px] l:max-h-[352px] xl:max-h-[452px]",u:t=>e.b({source:l(t),action:"click",noun:"upvote"},{..._({fields:p(t),post:t,postIsTranslated:!!t.isPostTranslated,withTranslationMetrics:!0})}),v:t=>e.b({source:"event_post",action:"click",noun:"rsvp"},{...m(t),...f(t.impressionId,t.placement)}),w:t=>e.b({source:"event_post",action:"click",noun:"un_rsvp"},{...m(t),...f(t.impressionId,t.placement)}),x:function(t){const o=t?e.hi(t.href):null;if(!o)return{postId:"",commentId:""};const n=o?.groups?.postId,s=o?.groups?.commentId;return{postId:n?i(n):"",commentId:s?h(s):""}},y:function(e){const t=(e?.getAttribute("href")||"").match(v);return t?t[1]:""},z:h}}));
SML.dm("Bw4iLYyr",["D7lSuCop","DsV3drw0","n2VAdrRK"],(async(a,t,i)=>{var r;!function(a){a.Forward="forward",a.Backward="backward"}(r||(r={}));const e=(i,r,e)=>a.b({source:"gallery",action:"view",noun:"media"},{...t.g(i),gallery:{num_items:e,position:r}}),n=(i,r,e,n)=>a.b({source:"gallery",action:"click",noun:r},{...t.g(i),gallery:{num_items:n,position:e}});return{get G(){return r},a:e,g:n,h:(a,t,o)=>{const c=n(a,t.detail.direction===i.C.FORWARDS?r.Forward:r.Backward,t.detail.prevPositionIndex,t.detail.num_items),d=e(a,t.detail.currPositionIndex,t.detail.num_items);o&&(c.ad_metadata={impression_id:o},d.ad_metadata={impression_id:o}),a.trackEvent(c),a.trackEvent(d)}}}));
SML.dm("BR8SLhNF",["D7lSuCop"],(async e=>{const t={[e.Z.FEED]:e.$.Feed,[e.Z.FULL_BLEED_VIDEO_FEED]:e.$.FullBleedVideoFeed,[e.Z.COMMENTS_PAGE]:e.$.CommentsPage,[e.Z.COMMENT_TREES]:e.$.CommentTrees,[e.Z.SIDEBARS]:e.$.Sidebars,[e.Z.TRENDING_DISCOVERY]:e.$.TrendingDiscovery,[e.Z.TRENDING_SEARCH_RESULT]:e.$.TrendingSearchResult,[e.Z.BLANK_ONLY]:e.$.BlankOnly,[e.Z.RELATED_POSTS]:e.$.ListingBelow};return{m:e=>e&&t[e]||null,s:(e,t={})=>{const{includeFeedChecks:a=!1,includeCommentsPageChecks:n=!1}=t;return e.composedPath().some((e=>{const t=e;if("AD-REMINDER-BUTTON"===t.tagName||"AD-EVENT-STATUS"===t.tagName||"SHREDDIT-POST-OVERFLOW-MENU"===t.tagName||"CLICK-LOCATION-TRACKER"===t.tagName)return!0;if(a){if(t.hasAttribute?.("upvote")||t.hasAttribute?.("downvote")||"comments-action-button"===t.getAttribute?.("name")||t.matches?.("button.toggle__expando-button")||t.matches?.("div#unpacked-actions")||t.matches?.("faceplate-dropdown-menu#defaultActions")||"SHREDDIT-POST-SHARE-BUTTON"===t.tagName)return!0}if(n){if("SHREDDIT-SLIDER-ELEMENT"===t.tagName||"VIDEO"===t.tagName||t.matches?.("img.thumbnail-image-video-toggle")||t.matches?.("button.toggleable-video-player-close-btn")||t.matches?.("button.thumbnail-playback-action-circle"))return!0}return!1}))}}}));
SML.dm("Bj8wOYTD",["D7lSuCop"],(async e=>{var o,t,r;!function(e){e.AddRemovalReason="mod-add-removal-reason",e.IgnoreReports="mod-ignore-reports",e.UnignoreReports="mod-unignore-reports",e.Distinguish="mod-distinguish",e.Undistinguish="mod-undistinguish",e.Sticky="mod-sticky",e.Unsticky="mod-unsticky",e.Lock="mod-lock",e.Unlock="mod-unlock",e.ApproveContent="mod-approve-content",e.RemoveContent="mod-remove-content",e.RemoveContentAsSpam="mod-remove-spam-content",e.ConfirmRemoval="mod-confirm-removal",e.RemoveContentMenu="mod-remove-content-menu",e.MarkNsfw="mod-mark-nsfw",e.UnmarkNsfw="mod-unmark-nsfw",e.MarkSpoiler="mod-mark-spoiler",e.UnmarkSpoiler="mod-unmark-spoiler",e.AdjustCrowdControl="mod-adjust-crowd-control",e.OpenEditPostFlairModal="mod-open-edit-post-flair-modal",e.SnoozeReporter="mod-snooze-reporter",e.UnsnoozeReporter="mod-unsnooze-reporter",e.UpdateHighlightedPost="mod-update-highlighted-post",e.RemoveHighlightedPost="mod-remove-highlighted-post",e.ApproveContentOptimistic="mod-approve-content-optimistic",e.RemoveContentOptimistic="mod-remove-content-optimistic",e.ConfirmRemovalOptimistic="mod-confirm-removal-optimistic",e.RemoveContentAsSpamOptimistic="mod-remove-spam-optimistic",e.ShareToModChat="mod-share-to-mod-chat",e.ViewChatThread="view-chat-thread"}(o||(o={})),function(e){e.Distinguish="admin-distinguish",e.Undistinguish="admin-undistinguish"}(t||(t={})),function(e){e.Dismissed="Dismissed",e.Ignored="Ignored",e.Reported="Reported"}(r||(r={}));return {get A(){return t},get M(){return o},get R(){return r},a:()=>"MOD",b:()=>"CO-HOST",c:()=>"OP",d:t=>{switch(t){case e.f9.ApproveComment:case e.f9.ApproveLink:return o.ApproveContent;case e.f9.RemoveComment:case e.f9.RemoveLink:return o.RemoveContent;case e.f9.SpamComment:case e.f9.SpamLink:return o.RemoveContentAsSpam;case e.f9.AddRemovalReason:return o.AddRemovalReason;default:return o.ApproveContent}},g:()=>"ADMIN"};}));
SML.dm("Cx0Ea5Jz",["Bj8wOYTD","D7lSuCop"],(async(t,e)=>{var o;!function(t){t.follow="follow",t.hide="hide",t.save="save",t.delete="delete",t.markAsSpoiler="mark_as_spoiler",t.markAsNsfw="mark_as_nsfw",t.markAsCommercialCommunication="mark_as_commercial_communication",t.distinguishAsMod="distinguish_as_mod",t.distinguishAsAdmin="distinguish_as_admin",t.updatePostFlair="update_post_flair",t.lock="lock",t.sticky="sticky",t.addRemovalReason="add_removal_reason",t.edit="edit",t.updateContent="update_content",t.updatePostBodyPending="update_post_body_pending",t.approve="approve",t.remove="remove",t.removeAsSpam="remove_as_spam",t.ignoreReports="ignore_reports",t.confirmRemoval="confirm_removal",t.updateSendReplies="update_send_replies",t.snoozeReporter="snooze_reporter",t.unsnoozeReporter="unsnooze_reporter",t.updateHighlightedPost="update_highlighted_post",t.approveOptimistic="approve_optimistic",t.removeOptimistic="remove_optimistic",t.removeAsSpamOptimistic="remove_as_spam_optimistic",t.confirmRemovalOptimistic="confirm_removal_optimistic",t.shareToModChat="share_to_mod_chat"}(o||(o={}));const i={isPostFollowed:o.follow,isPostHidden:o.hide,isPostSaved:o.save,isPostSpoiler:o.markAsSpoiler,isPostNsfw:o.markAsNsfw,isPostCommercialCommunication:o.markAsCommercialCommunication,isPostDistinguishedAsAdmin:o.distinguishAsAdmin,isPostStickied:void 0,isReceivingPostReplies:o.updateSendReplies,[t.M.Distinguish]:o.distinguishAsMod,[t.M.Undistinguish]:o.distinguishAsMod,[t.M.Lock]:o.lock,[t.M.Unlock]:o.lock,[t.M.Sticky]:o.sticky,[t.M.Unsticky]:o.sticky,[t.M.AddRemovalReason]:o.addRemovalReason,[t.M.ApproveContent]:o.approve,[t.M.RemoveContent]:o.remove,[t.M.RemoveContentAsSpam]:o.removeAsSpam,[t.M.ConfirmRemoval]:o.confirmRemoval,[t.M.IgnoreReports]:o.ignoreReports,[t.M.UnignoreReports]:o.ignoreReports,[t.M.SnoozeReporter]:o.snoozeReporter,[t.M.UnsnoozeReporter]:o.unsnoozeReporter,[t.M.RemoveHighlightedPost]:o.updateHighlightedPost,[t.A.Distinguish]:o.distinguishAsAdmin,[t.A.Undistinguish]:o.distinguishAsAdmin,[t.M.ApproveContentOptimistic]:o.approveOptimistic,[t.M.RemoveContentOptimistic]:o.removeOptimistic,[t.M.RemoveContentAsSpamOptimistic]:o.removeAsSpamOptimistic,[t.M.ConfirmRemovalOptimistic]:o.confirmRemovalOptimistic};o.hide,o.markAsSpoiler,o.markAsNsfw,o.markAsCommercialCommunication;var r;!function(t){t[t.Follow=5]="Follow",t[t.Edit=10]="Edit",t[t.Report=20]="Report",t[t.Save=30]="Save",t[t.TranslationSetting=35]="TranslationSetting",t[t.LanguageAndTranslations=40]="LanguageAndTranslations",t[t.Delete=70]="Delete",t[t.AdminDistinguish=80]="AdminDistinguish",t[t.BrandAffiliate=90]="BrandAffiliate",t[t.Notifs=100]="Notifs",t[t.Reply=110]="Reply",t[t.Award=120]="Award",t[t.Insights=130]="Insights",t[t.ShareAsPost=140]="ShareAsPost"}(r||(r={}));const s="429";function a(t){return t?.[0]?.message??"Something went wrong";}return{get C(){return r},E:"post__click_unrsvp",P:["isPostFollowed","isPostHidden","isPostSaved","isPostSpoiler","isPostNsfw","isPostCommercialCommunication","isPostDistinguishedAsAdmin","isPostStickied","isReceivingPostReplies"],R:s,S:i,get a(){return o},b:"post__click_rsvp",c:"edit",d:async function(t){const o={input:t},{data:i,errors:r}=await e.v({operation:e.O.DeletePost,variables:o});if(r?.length)throw new Error(a(r));const{deletePost:s}=i;if(!s?.ok)throw new Error(a(s?.errors))},e:"overflow__click_comments",f:"overflow__click_share",g:async function(t,o){const i={input:{postId:t,saveState:o?e.g1.None:e.g1.Saved}},{data:r,errors:s}=await e.v({operation:e.O.UpdatePostSaveState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostSaveState?.ok)return!o;throw new Error(a(r?.updatePostSaveState?.errors))},h:async function(t,o){const i={input:{postId:t,followState:o?e.g3.Unfollowed:e.g3.Followed}},{data:r,errors:s}=await e.v({operation:e.O.UpdatePostFollowState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostFollowState?.ok)return!o;throw new Error(a(r?.updatePostFollowState?.errors))},i:async function(t,o){const i={input:{postId:t,distinguishState:o?e.g2.None:e.g2.Distinguished,distinguishType:o?e.f$.None:e.f$.AdminDistinguished}},{data:r,errors:s}=await e.v({operation:e.O.UpdatePostDistinguishedState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostDistinguishState?.ok)return r.updatePostDistinguishState.distinguishType===e.f$.AdminDistinguished;throw new Error(a(r?.updatePostDistinguishState?.errors))},j:async function(t,o){const i={input:{postId:t,spoilerState:o?e.fZ.None:e.fZ.Spoiler}},{data:r,errors:s}=await e.v({operation:e.O.UpdatePostSpoilerState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostSpoilerState?.ok)return r.updatePostSpoilerState.spoilerState===e.fZ.Spoiler;throw new Error(a(r?.updatePostSpoilerState?.errors))},k:async function(t,o){const i={input:{postId:t,nsfwState:o?e.f_.None:e.f_.Nsfw}},{data:r,errors:s}=await e.v({operation:e.O.UpdatePostNsfwState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostNsfwState?.ok)return r.updatePostNsfwState.nsfwState===e.f_.Nsfw;throw new Error(a(r?.updatePostNsfwState?.errors))},l:async function(t,o){const i={input:{thingId:t,commercialCommunicationState:!o}},{data:r,errors:s}=await e.v({operation:e.O.UpdateCommercialCommunicationState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updateCommercialCommunicationState?.ok)return!o;throw new Error(a(r?.updateCommercialCommunicationState?.errors))},m:async function(t,o){const i={postId:t,sendRepliesState:o?e.g0.DoNotSend:e.g0.Send},{data:r,errors:s}=await e.v({operation:e.O.UpdatePostSendRepliesState,variables:{input:i}});if(s?.length)throw new Error(a(s));if(r?.updatePostSendRepliesState?.ok)return r.updatePostSendRepliesState?.sendRepliesState===e.g0.Send;throw new Error(a(r?.updatePostSendRepliesState?.errors))},n:async function(t,o){const i={input:{postId:t,hideState:o?e.fY.None:e.fY.Hidden}},{data:r,errors:s}=await e.v({operation:e.O.UpdatePostHideState,variables:i});if(s?.length)throw new Error(a(s));if(r?.updatePostHideState?.ok)return r.updatePostHideState.hideState===e.fY.Hidden;throw new Error(a(r?.updatePostHideState?.errors))},o:async function(t){const o={input:t},{data:i,errors:r}=await e.v({operation:e.O.UpdatePostStickyState,variables:o});if(r?.length)throw new Error(a(r));if(!i?.updatePostStickyState?.ok)throw new Error(a(i?.updatePostStickyState?.errors))},u:async function(t){const o={input:t},{data:i,errors:r}=await e.v({operation:e.O.UpdateAdHideState,variables:o});if(r?.length)throw new Error(a(r));if(i?.updateAdHideState?.ok)return i.updateAdHideState.hideState===e.fY.Hidden;if(i?.updateAdHideState?.errors&&(i?.updateAdHideState?.errors[0]).code===s)throw new Error(s);throw new Error(a(i?.updateAdHideState?.errors))}}}));
SML.dm("BIEmYQmK",["CVEbQKiO","D7lSuCop","D_QMHsXc","C6s1R5yD","CCphb8vV","DlWm-1vG","n2VAdrRK","Bw4iLYyr","BR8SLhNF","Cx0Ea5Jz","DsV3drw0","KzHvibf8","Cq9O5zpS","CU4mObWU","CLkam3rl","Bj8wOYTD"],(async(e,t,i,s,r,o,a,n,d,l,h)=>{function p({galleryIdx:e,galleryData:i,impressionId:s,postId:r}){const o=i[e];if(!o)return null;const a={action_info:{page_type:t.aa.PostDetail},post:{id:r,promoted:!0},media:{id:o.media.id,height:o.media.height,width:o.media.width,url:o.outboundUrl},gallery:{id:o.id,position:e,media_ids:i.map((e=>e.media.id)),num_items:i.length},ad_metadata:{impression_id:s}};return t.b({source:"gallery",action:"view",noun:"media"},a)}class c{constructor(e){this.areItemsLoaded=!1,(this.host=e).addController(this),this.eventController=new t.E(e)}get galleryItemEls(){return Array.from(this.host.querySelectorAll(`.${r.c4}`))}async waitUntilImagesLoaded(){return new Promise((e=>{this.areItemsLoaded&&e();let t=0;const i=()=>{t++,t===this.galleryItemEls.length&&(this.areItemsLoaded=!0,e())};this.galleryItemEls.forEach((e=>{const t=e.querySelector("img");t.complete?i():t.onload=()=>{i()}}))}))}handleCarouselArrowClick(e){const i=e.detail.direction===a.C.FORWARDS?n.G.Forward:n.G.Backward,s=function({direction:e,numGalleryItems:i,placement:s,impressionId:r,postId:o,authorId:a,subredditId:n,title:d}){return t.b({source:"gallery",action:"click",noun:e},{gallery:{num_items:i,position:void 0},ad_metadata:{placement:s,impression_id:r},post:{id:o,author_id:a,promoted:!0,subreddit_id:n,title:d,type:t.eH.Gallery}})}({authorId:this.host.authorId,impressionId:this.host.impressionId,numGalleryItems:this.host.galleryItems?.length??0,placement:this.host.placement,postId:this.host.id,subredditId:this.host.subredditId,title:this.host.title,direction:i});this.host.trackEvent(s)}getActiveSlideIndex(e){const t="SHREDDIT-DYNAMIC-AD-LINK"===e.nodeName?e:e.querySelector("shreddit-dynamic-ad-link"),i=t?.galleryIndex;return void 0===i?null:i}async observeGalleryItems(e){try{await this.waitUntilImagesLoaded()}catch(e){return}this.galleryItemEls.forEach((t=>e.observe(t)))}async setupGalleryViewMediaTracking(){const e=this.createGalleryViewMediaObserver();this.galleryViewMediaObserver=e,await this.observeGalleryItems(this.galleryViewMediaObserver)}async setupPixelImpressionTracking(){const e=this.createImpressionObserver();this.galleryImpressionObserver=e,await this.observeGalleryItems(this.galleryImpressionObserver)}teardownObserver(e){e&&this.galleryItemEls.forEach((t=>e.unobserve(t)))}createImpressionObserver(){return new IntersectionObserver((e=>{e.forEach((e=>{if(!e.isIntersecting)return;const i=this.getActiveSlideIndex(e.target);if(null===i)return;const s=t.c(r.O,{itemIndex:i,postId:this.host.id});this.host.dispatchEvent(s),this.galleryImpressionObserver?.unobserve(e.target)}))}),{threshold:.25})}createGalleryViewMediaObserver(){return new IntersectionObserver((e=>{e.forEach((e=>{if(!e.isIntersecting)return;const i=this.getActiveSlideIndex(e.target);if(null===i)return;const s=t.c("track-event",{details:p({galleryData:this.host.galleryItems||[],galleryIdx:i,impressionId:this.host.impressionId,postId:this.host.id})});this.host.dispatchEvent(s),this.galleryViewMediaObserver?.unobserve(e.target)}))}),{threshold:.2})}async hostConnected(){this.host.galleryItems&&(this.eventController.define("faceplate-carousel:slide",this.handleCarouselArrowClick.bind(this)),await this.setupPixelImpressionTracking(),await this.setupGalleryViewMediaTracking())}hostDisconnected(){this.teardownObserver(this.galleryImpressionObserver),this.teardownObserver(this.galleryViewMediaObserver)}}class m{constructor(e){this.isDown=!1,this.startX=0,this.scrollLeft=0,this.onMouseDown=e=>{this.galleryImagesContainer&&(this.isDown=!0,this.startX=e.pageX-this.galleryImagesContainer.offsetLeft,this.scrollLeft=this.galleryImagesContainer.scrollLeft)},this.unsetIsDown=()=>{this.isDown=!1},this.onMouseMove=e=>{if(!this.galleryImagesContainer)return;if(!this.isDown)return;e.preventDefault();const t=3*(e.pageX-this.galleryImagesContainer.offsetLeft-this.startX);this.galleryImagesContainer.scrollLeft=this.scrollLeft-t},(this.host=e).addController(this)}get hasHorizontalDragBehavior(){return this.host.useLegacyDragNav}get galleryImagesContainer(){return document.querySelector(`.${r.c5}`)}setupDesktopDragScroll(){this.galleryImagesContainer?.addEventListener("mousedown",this.onMouseDown),this.galleryImagesContainer?.addEventListener("mouseleave",this.unsetIsDown),this.galleryImagesContainer?.addEventListener("mouseup",this.unsetIsDown),this.galleryImagesContainer?.addEventListener("mousemove",this.onMouseMove)}teardownDesktopDragScroll(){this.galleryImagesContainer?.removeEventListener("mousedown",this.onMouseDown),this.galleryImagesContainer?.removeEventListener("mouseleave",this.unsetIsDown),this.galleryImagesContainer?.removeEventListener("mouseup",this.unsetIsDown),this.galleryImagesContainer?.removeEventListener("mousemove",this.onMouseMove)}hostConnected(){this.host.useLegacyDragNav&&this.galleryImagesContainer&&this.setupDesktopDragScroll()}hostDisconnected(){this.host.useLegacyDragNav&&this.galleryImagesContainer&&this.teardownDesktopDragScroll()}}const u=i.W(e.s);let y=class extends u{constructor(){super(...arguments),this.adEvents=[],this.outboundLinkUrl="",this.isBlank=!1,this.impressionId="0",this.isShoppingAd=!1,this.isHideAdEnabled=!1,this.hidden=!1,this.isMobile=!1,this.useLegacyDragNav=!1,this.shouldTrackPosition=!1,this.isPdpCombined=!1,this.isCategoryTakeover=!1,this.isReminderAd=!1,this.isReminderAdModalKsEnabled=!1,this.isHiddenOnSort=!1,this.isClickDisabled=!1,this._events=new t.E(this),this.toggleableVideoAdController=null,this.galleryTrackingController=new c(this),this.dragScroll=new m(this),this.pubsub=new t.P(this),this.handleRsvpClick=e=>{this.trackEvent(h.v(this))},this.handleUnRsvpClick=e=>{this.trackEvent(h.w(this))},this.handleClick=e=>{if(!this.isReminderAd||this.isReminderAdModalKsEnabled)return;const i=this.querySelector("ad-reminder-button");if(i?.isReminderSet||!1)return;d.s(e,{includeCommentsPageChecks:!0})||(e.preventDefault(),this.pubsub.publish(t.T.TriggerAdReminderModal,{postId:this.id}))},this.onAdUpdateAction=({action:e,value:t,impressionId:i})=>{this.impressionId===i&&e===l.a.hide&&(this.hidden=t)},this.handleHideOnSort=()=>{this.isHiddenOnSort=!0},this.handleBlockPdpAdClick=({delay:e})=>{this.isClickDisabled=!0,setTimeout((()=>{this.isClickDisabled=!1}),e)},this._trackAdClick=this._events.define("observe-ad-click",(async e=>{await this._activateLeadGenDialog(),s.s({leadGenInfo:this.leadGenInfo,postId:this.id,impressionId:this.impressionId,onSuccess:()=>this.dispatchEvent(t.c(o.L))})}))}static get styles(){return[t.t]}getAdObserverConfig(){return{events:i.e(this.adEvents),postId:this.id,impressionId:this.impressionId,postElement:this,galleryItems:this.galleryItems?.map((e=>({...e,adEvents:i.e(e.adEvents||[])}))),adType:this.adType}}async connectedCallback(){super.connectedCallback(),this.enableAdObserver(this.getAdObserverConfig()),this.pubsub.subscribe(t.T.AdUpdated,this.onAdUpdateAction),this.pubsub.subscribe(t.T.CommentSort,this.handleHideOnSort),this.pubsub.subscribe(t.T.BlockPdpAdClick,this.handleBlockPdpAdClick),this.addEventListener(l.b,this.handleRsvpClick),this.addEventListener(l.E,this.handleUnRsvpClick),this.addEventListener("click",this.handleClick),await this.resolveCarouselDependencies(),await this.resolveVideoAdDependencies()}async disconnectedCallback(){super.disconnectedCallback(),this.adMeasurer&&this.adMeasurer.handleUnload(),this.removeEventListener(l.b,this.handleRsvpClick),this.removeEventListener(l.E,this.handleUnRsvpClick),this.removeEventListener("click",this.handleClick)}_activateLeadGenDialog(){return s.a({leadGenInfo:this.leadGenInfo})}get shouldRenderCarouselComponent(){return Array.isArray(this.galleryItems)&&!this.isMobile&&!this.useLegacyDragNav}async resolveCarouselDependencies(){this.shouldRenderCarouselComponent&&(await SML.di("./CL_e1Se4.js",import.meta.url,"CL_e1Se4"),this.querySelector("shreddit-gallery-carousel")?.classList.remove("flex"))}async resolveVideoAdDependencies(){if(this.adType!==t.ah.VIDEO)return;const{ToggleableVideoAdController:e}=await SML.di("./D_QMHsXc.js",import.meta.url,"D_QMHsXc").then((function(e){return e.i}));this.toggleableVideoAdController=new e(this,((e,t)=>{this.adMeasurer&&(this.adMeasurer.dimensions={height:e,width:t})}))}render(){return this.hidden&&this.isHideAdEnabled||this.isHiddenOnSort?e.A:e.x` <shreddit-with-observer-wrapper id="${"comments-page-ad"}" .config="${{threshold:t.ai}}"> <div class="${r.l(this.isMobile&&this.placement!==t.Z.COMMENT_TREES&&"mx-md",this.isClickDisabled&&"pointer-events-none")}"> <slot name="full-comments-page-ad-link"></slot> ${this.isCategoryTakeover?e.x` <slot name="ad-format-content"></slot> <slot name="expanded-video-player"></slot> <slot name="disclaimer-text"></slot> `:e.x` <slot name="credit-bar"></slot> <slot name="ad-format-content"></slot> <slot name="call-to-action-row"></slot> <slot name="ad-reminder-bar"></slot> <slot name="expanded-video-player"></slot> `} </div> </shreddit-with-observer-wrapper> `}};e._([e.n({type:String,attribute:"post-id"})],y.prototype,"postId",void 0),e._([e.n({type:Array,attribute:"ad-events",reflect:!0})],y.prototype,"adEvents",void 0),e._([e.n({type:Array,attribute:"gallery-items"})],y.prototype,"galleryItems",void 0),e._([e.n({type:String,attribute:"outbound-link-url",reflect:!0})],y.prototype,"outboundLinkUrl",void 0),e._([e.n({type:Boolean,attribute:"is-blank"})],y.prototype,"isBlank",void 0),e._([e.n({type:Object,attribute:"lead-gen-info"})],y.prototype,"leadGenInfo",void 0),e._([e.n({type:String,attribute:"impression-id"})],y.prototype,"impressionId",void 0),e._([e.n({type:String,attribute:"ad-type"})],y.prototype,"adType",void 0),e._([e.n({type:String,attribute:"campaign-id"})],y.prototype,"campaignId",void 0),e._([e.n({type:Boolean,attribute:"is-shopping-ad"})],y.prototype,"isShoppingAd",void 0),e._([e.n({type:Boolean,attribute:"is-hide-ad-enabled"})],y.prototype,"isHideAdEnabled",void 0),e._([e.n({type:Boolean,reflect:!0})],y.prototype,"hidden",void 0),e._([e.n({type:Boolean,attribute:"is-mobile"})],y.prototype,"isMobile",void 0),e._([e.n({type:Boolean,attribute:"use-legacy-drag-nav"})],y.prototype,"useLegacyDragNav",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],y.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"country-code"})],y.prototype,"countryCode",void 0),e._([e.n({type:String,attribute:"author-id"})],y.prototype,"authorId",void 0),e._([e.n({type:String})],y.prototype,"title",void 0),e._([e.n({type:String})],y.prototype,"domain",void 0),e._([e.n({type:String,attribute:"placement"})],y.prototype,"placement",void 0),e._([e.n({type:Boolean,attribute:"should-track-position"})],y.prototype,"shouldTrackPosition",void 0),e._([e.n({type:Boolean,attribute:"is-pdp-combined"})],y.prototype,"isPdpCombined",void 0),e._([e.n({type:String,attribute:"encrypted-tracking-payload"})],y.prototype,"encryptedTrackingPayload",void 0),e._([e.n({type:Array,attribute:"additional-event-metadata"})],y.prototype,"additionalEventMetadata",void 0),e._([e.n({type:String,attribute:"ad-transparency-encoded-data"})],y.prototype,"adTransparencyEncodedData",void 0),e._([e.n({type:Boolean,attribute:"is-category-takeover"})],y.prototype,"isCategoryTakeover",void 0),e._([e.n({type:Boolean,attribute:"is-reminder-ad"})],y.prototype,"isReminderAd",void 0),e._([e.n({type:Boolean,attribute:"is-reminder-ad-modal-ks-enabled"})],y.prototype,"isReminderAdModalKsEnabled",void 0),e._([e.n({type:String,attribute:"ads-correlation-id"})],y.prototype,"adsCorrelationId",void 0),e._([e.b()],y.prototype,"isHiddenOnSort",void 0),e._([e.b()],y.prototype,"isClickDisabled",void 0),y=e._([e.c("shreddit-comments-page-ad")],y)}));
SML.dm("rtVjLspA",["CVEbQKiO","D7lSuCop","DsV3drw0"],(async(t,e,i)=>{const s=e.d(t.s),o=["allow-forms","allow-orientation-lock","allow-popups","allow-popups-to-escape-sandbox","allow-presentation","allow-same-origin","allow-scripts","allow-top-navigation-by-user-activation"].join(" ");let r=class extends s{constructor(){super(...arguments),this.postId="",this.limitHeight=!1,this.onMessage=t=>{const{data:e}=t;if(!t.source||t.source!==this.iframe?.contentWindow||"tweet-measured"!==e?.action||i.e(e?.id36)!==this.postId)return;this.iframe.height=`${e?.height}px`,this.limitHeight&&e?.height>550?(this.renderRoot?.querySelector(`#${this.postId}-tweet-overflow`)?.classList.remove("hidden"),this?.style.setProperty("height","550px")):this?.style.setProperty("height",`${e?.height+4}px`),this.renderRoot?.querySelector(`#${this.postId}-tweet-loading-placeholder`)?.remove();const s=document.querySelector(`#${this.postId}-post-media-container`),o=s?.querySelector(`#${this.postId}-aspect-ratio`);if(o){const t=this.offsetHeight/this.offsetWidth;o?.style.setProperty("--aspect-ratio",`${t}`);const e=this.offsetHeight-o.offsetHeight;o?.style.setProperty("height",`${e}px`)}}}static get styles(){return[e.t]}connectedCallback(){super.connectedCallback(),window.addEventListener("message",this.onMessage)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("message",this.onMessage)}onIframeLoad(){this.iframe?.contentWindow?.postMessage("twitter-measure-requested","https://www.redditmedia.com")}render(){const e=`${i.d(this.postId)}?responsive=true&is_nightmode=${matchMedia("(prefers-color-scheme: dark)").matches}`;return t.x` <div id="${this.postId}-tweet-loading-placeholder" class="${this.className} bg-neutral-background-weak absolute left-0 right-0 top-0 bottom-0"></div> <div class="overflow-hidden flex justify-center w-100 ${this.limitHeight?"max-h-[550px] ":""}"> <iframe id="${this.postId}-tweet-iframe" scrolling="no" allowfullscreen class="items-center overflow-hidden b-0 border-transparent justify-center bg-neutral-background-weak max-w-[550px] rounded-[14px]" max-width="${"550px"}" width="100%" title="${this.title}" aria-label="Tweet: ${this.title}" src="${e}" sandbox="${o}" @load="${this.onIframeLoad}" allowtransparency="true"></iframe> </div> ${this.limitHeight?t.x`<div id="${this.postId}-tweet-overflow" class="h-[66px] mt-[-66px] w-100 from-[color:var(--color-neutral-background-weak)] bg-gradient-to-t hidden isolate pointer-events-none"></div>`:""} `}};t._([t.n({type:String,attribute:"post-id"})],r.prototype,"postId",void 0),t._([t.n({type:Boolean,attribute:"limit-height"})],r.prototype,"limitHeight",void 0),t._([t.z("iframe")],r.prototype,"iframe",void 0),r=t._([t.c("shreddit-tweet-embed")],r)}));
SML.dm("CXdNNYNO",["CVEbQKiO","D7lSuCop","CCphb8vV"],(async(e,t,a)=>{let s=class extends(a.W(t.az)){constructor(){super(...arguments),this.pages=0,this.for=void 0,this._events=new t.E(this),this._windowEvents=new t.E(this,(()=>window)),this._locationHashMap=new Map,this._selectedElements=new Set,this._activeSlotRef=t.aE(),this._handleHashChange=this._windowEvents.define("hashchange",(()=>{const e=this._locationHashMap.get(window.location.hash);e&&(this.pageIndex=e)})),this._handleClick=this._events.define("click",(e=>{let t=null;e.target instanceof HTMLAnchorElement&&(t=e.target.getAttribute("href"),t&&"#"!==t[0]&&(t=null)),null!==t&&(e.preventDefault(),e.stopPropagation());const a=e.composedPath();for(let e=0;e<a.length;e++){const s=a[e];if(s instanceof HTMLSpanElement){const e=this.getPageIndexFromSpanWrapper(s);if(t){const e=new URL(window.location.href);e.hash=t,window.history.pushState(null,"",e.href)}if(0!==e){this.pageIndex=e;break}}}})),this._handleKeydown=this._events.define("keydown",(e=>{if("ArrowLeft"===e.key)this.previousPage();else{if("ArrowRight"!==e.key)return;this.nextPage()}e.preventDefault(),e.stopPropagation()}))}get pageIndex(){return super.pageIndex}set pageIndex(e){super.pageIndex=e}get pageNames(){return super.pageNames}set pageNames(e){super.pageNames=e}render(){if(this.pages<1)return e.x``;const{pageNames:s}=this;return e.x` <div class="tablist" role="tablist"> ${a.h(this.pages).map((a=>e.x` <span data-i="${a}" role="tab" aria-selected="${a===this.pageIndex?"true":"false"}"> <slot @slotchange="${this.handleSlotChange}" name="${s?s[a-1]:`page-${a}`}" ${a===this.pageIndex?t.aq(this._activeSlotRef):""}></slot> </span> `))} </div> `}updated(e){if(e.has("pageIndex")){this._clearSelectedAttributes();const e=this._activeSlotRef.value;if(!e)return;for(const t of e.assignedElements())this._setSelectedAttribute(t),t.focus()}}_clearSelectedAttributes(){if(this._selectedElements.size){for(const e of this._selectedElements)e.removeAttribute("faceplate-tab-selected");this._selectedElements.clear()}}_setSelectedAttribute(e){this._selectedElements.add(e),e.setAttribute("faceplate-tab-selected","")}handleSlotChange(e){const{hash:t}=window.location,a=e.target;if(!(a.parentElement instanceof HTMLSpanElement))return;const s=a.assignedElements(),n=this.getPageIndexFromSpanWrapper(a.parentElement),i=n===this.pageIndex;if(i&&this._clearSelectedAttributes(),s.length)for(const e of s){if(i&&this._setSelectedAttribute(e),!(e instanceof HTMLAnchorElement))continue;const a=e.getAttribute("href");a&&(this._locationHashMap.set(a,n),a===t&&(this.pageIndex=n))}}getPageIndexFromSpanWrapper(e){return e.dataset.i?parseInt(e.dataset.i,10):0}pageIndexChangedCallback(e){super.pageIndexChangedCallback(e),this.requestUpdate("pageIndex",e)}};return e._([e.n({type:Number})],s.prototype,"pages",void 0),e._([e.n({type:Number,attribute:"pageindex"})],s.prototype,"pageIndex",null),e._([e.n({type:String})],s.prototype,"for",void 0),e._([e.n({converter:t.K,attribute:"pagenames"})],s.prototype,"pageNames",null),e._([e.z(".tablist")],s.prototype,"tabList",void 0),s=e._([e.c("faceplate-tablist")],s),{get F(){return s}}}));
SML.dm("ccIdaLiK",["CVEbQKiO","CXdNNYNO","CCphb8vV","D7lSuCop"],(async(t,e,i,n)=>{var a;let s=a=class extends e.F{constructor(){super(...arguments),this._setup=!1,this._bbwidth=0,this._fbwidth=0,this._forwardButtonVisible=!0,this._backButtonVisible=!1,this.selectedClasses=["bg-secondary-background-selected","!text-neutral-content-strong","tab-selected"],this.appearance="fill",this.insetHug=!1,this.underline=!1,this._mutationCallback=t=>{for(const e of t)if("attributes"===e.type&&"faceplate-tab-selected"===e.attributeName&&e.target.nodeType===Node.ELEMENT_NODE){e.target.hasAttribute("faceplate-tab-selected")?this._handleTabSelected(e.target):this._handleTabDeselected(e.target)}},this._setupButtons=()=>{this._setup&&(this.backButtonElements[0]?.removeEventListener("click",this._handleBackButtonClick),this.style.removeProperty("--back-button-width"),this.forwardButtonElements[0]?.removeEventListener("click",this._handleForwardButtonClick),this.style.removeProperty("--forward-button-width")),this.backButtonElements[0]instanceof HTMLElement&&(this._backButtonVisible||this.backButton?.removeAttribute("hidden"),this._bbwidth=this.backButton.clientWidth,this._backButtonVisible||this.backButton?.setAttribute("hidden",""),this.style.setProperty("--back-button-width",`${this._bbwidth}px`),this.backButtonElements[0].addEventListener("click",this._handleBackButtonClick)),this.forwardButtonElements[0]instanceof HTMLElement&&(this._forwardButtonVisible||this.forwardButton?.removeAttribute("hidden"),this._fbwidth=this.forwardButton.clientWidth,this._forwardButtonVisible||this.backButton?.setAttribute("hidden",""),this.style.setProperty("--forward-button-width",`${this._fbwidth}px`),this.forwardButtonElements[0].addEventListener("click",this._handleForwardButtonClick))},this._handleContainerScroll=()=>{this._backButtonVisible=0!==Math.floor(this._containerLeft),this._forwardButtonVisible=Math.round(this._containerBaseRight)!==Math.round(this.container?.scrollWidth??0)},this._handleBackButtonClick=t=>{t.preventDefault(),t.stopPropagation();const e=this._tabs,i=this._leftmostVisibleTab,n=e[i];if(null==n)return;let s=n.right-(this.container?.clientWidth??0);i!==e.length-1&&(s+=(this._fbwidth??0)-a.tabSpacing.raw),this.container?.scroll({behavior:"smooth",left:s})},this._handleForwardButtonClick=t=>{t.preventDefault(),t.stopPropagation();const e=this._tabs,i=this._rightmostVisibleTab,n=e[i];if(null==n)return;let s=n.left;0!==i&&(s-=(this._bbwidth??0)+a.tabSpacing.raw),this.container?.scroll({behavior:"smooth",left:s})},this._scrollToSelected=()=>{const t=this._tabs,e=t.findIndex((t=>"true"===t.el.getAttribute("aria-selected"))),i=t[e];if(null==i)return;const n=i.right-i.left,a=(this.container?.clientWidth??0)-(this._bbwidth+this._fbwidth),s=i.left-this._bbwidth-a/2+n/2;this.container?.scroll({behavior:"smooth",left:s})}}connectedCallback(){super.connectedCallback(),this._mutationObserver=new MutationObserver(this._mutationCallback),this._mutationObserver.observe(this,a.mutationObserverOptions)}disconnectedCallback(){super.disconnectedCallback(),this._mutationObserver.disconnect()}firstUpdated(t){super.firstUpdated(t),this._setupAll()}_setupAll(){this._setup&&this.container&&(this.container.removeEventListener("scroll",this._handleContainerScroll),this._resizeObserver?.unobserve(this.container)),this.container?.addEventListener("scroll",this._handleContainerScroll),this.container?.removeEventListener("resize",this._setupAll),this._setupButtons(),this._resizeObserver||(this._resizeObserver=new ResizeObserver(this._handleContainerScroll)),this.container&&this._resizeObserver?.observe(this.container),this._setup||(this.style.setProperty("--anim-duration","0ms"),this._handleContainerScroll(),requestAnimationFrame((()=>{this.style.removeProperty("--anim-duration")}))),this._setup=!0}_handleTabSelected(t){let e=this.selectedClasses;t.classList.contains("tab-bottom-border")&&t.hasAttribute("rpl")&&(e=e?.filter((t=>"bg-secondary-background-selected"!==t))),t.classList.add(...e??[]),t.tabIndex=0,this._scrollToSelected()}_handleTabDeselected(t){t.tabIndex=-1,t.classList.remove(...this.selectedClasses??[])}get _containerBaseWidth(){return this.container?.clientWidth??0}get _containerBaseLeft(){return this.container?.scrollLeft??0}get _containerLeft(){return 0===this._containerBaseLeft?this._containerBaseLeft:this._containerBaseLeft+(this.backButton?.clientWidth??0)+a.tabSpacing.raw}get _containerBaseRight(){return this._containerBaseLeft+this._containerBaseWidth}get _containerRight(){return this._containerBaseRight===this.container?.scrollWidth?this._containerBaseRight:this._containerBaseRight-((this.forwardButton?.clientWidth??0)+a.tabSpacing.raw)}get _rightmostVisibleTab(){const t=this._tabs;let e=0,i=0;for(let i=t.length-1;i>=0;i--)if(t[i]?.isVisible){e=i;break}if(0===e)for(let i=t.length-1;i>=0;i--)if(t[i]?.partiallyVisible){e=i;break}for(const[e,n]of t.entries()){const a=t[i];n.partiallyVisible&&a&&n.right>a.right&&(i=e)}return i<=e&&e<t.length-1?e+1:t[i]?.isVisible&&i!==t.length-1?i+1:i}get _leftmostVisibleTab(){const t=this._tabs;let e=t.length-1,i=t.length-1;for(let i=0;i<t.length;i++)if(t[i]?.isVisible){e=i;break}if(e===t.length-1)for(let i=0;i<t.length;i++)if(t[i]?.partiallyVisible){e=i;break}for(const[e,n]of t.entries()){const a=t[i];n.partiallyVisible&&a&&n.left<a.left&&(i=e)}return i>=e&&e>0?e-1:t[i]?.isVisible&&0!==i?i-1:i}get _tabs(){const{pageNames:t}=this,e=[];for(const n of i.h(this.pages)){const i=t?t[n-1]:`page-${n}`,a=this.shadowRoot.querySelector(`slot[name="${i}"]`).parentElement,s=a.offsetLeft,r=a.offsetLeft+a.offsetWidth,o=s>this._containerLeft&&s<this._containerRight||r<this._containerRight&&r>this._containerLeft,l=s>this._containerLeft&&r<this._containerRight||s<this._containerLeft&&r>this._containerRight;e.push({el:a,left:s,right:r,isVisible:l,partiallyVisible:o})}return e}render(){const e=super.render();return t.x`<div class="container"> ${e} <div class="${n.x({internalButton:!0,internalForwardButton:!0,hideable:!0,hidden:!this._forwardButtonVisible})}" @resize="${this._setupButtons}"> <slot name="forward-button" @slotchange="${this._setupButtons}"></slot> </div> <div class="${n.x({internalButton:!0,internalBackButton:!0,hideable:!0,hidden:!this._backButtonVisible})}" @resize="${this._setupButtons}"> <slot name="back-button" @slotchange="${this._setupButtons}"></slot> </div> </div>`}};return s.mutationObserverOptions={childList:!0,subtree:!0,attributes:!0,attributeFilter:["faceplate-tab-selected"]},s.tabSpacing={raw:8},s.backButton=()=>n.k({appearance:"plain",attributes:{type:"button",tabindex:"-1",slot:"back-button"},shape:"pill",size:n._.Small,leadingIcon:t.az({size:t.q.Small}),screenReaderContent:"back"}),s.forwardButton=()=>n.k({appearance:"plain",attributes:{type:"button",tabindex:"-1",slot:"forward-button"},shape:"pill",size:n._.Small,leadingIcon:t.aA({size:t.q.Small}),screenReaderContent:"forward"}),s.styles=t.i`:host{--plain-background:rgba(255, 255, 255, 0);--anim-duration:300ms;--button-gap:var(--spacer-xs, 8);display:flex;width:fit-content;max-width:100%}@media (prefers-color-scheme:dark){:host{--plain-background:rgba(0, 0, 0, 0)}}@media (prefers-reduced-motion){:host{--anim-duration:0ms}}.hideable{transition:opacity var(--anim-duration,300ms) ease;visibility:visible;opacity:1}.hidden{animation-name:hide-button;animation-duration:var(--anim-duration,300ms);animation-fill-mode:forwards;opacity:0}@keyframes hide-button{from{visiblity:visible}to{visiblity:hidden;z-index:-1}}.container{width:fit-content;max-width:100%;overflow:hidden;display:flex;justify-content:center;align-items:center;flex-direction:row;flex-wrap:nowrap;position:relative}.tablist{display:flex;overflow:auto;align-items:center;flex-flow:row nowrap;gap:var(--button-gap);scroll-behavior:smooth;scrollbar-width:none}.tablist::-webkit-scrollbar{display:none}.tablist:focus-visible{outline:0}[role=tab]{display:flex;flex-shrink:0}.internalButton{position:absolute;top:0;bottom:0;display:flex;align-items:center}.internalForwardButton{inset-inline-end:0;padding-inline-start:var(--button-gap);background-image:linear-gradient(to right,var(--plain-background) 0,var(--color-neutral-background) 30%);cursor:pointer}.internalBackButton{inset-inline-start:0;padding-inline-end:var(--button-gap);background-image:linear-gradient(to left,var(--plain-background) 0,var(--color-neutral-background) 30%);cursor:pointer}:host([inset]) .container{margin:0 var(--spacer-md)}:host([appearance=fill]){--button-gap:0;width:100%}:host([appearance=fill]) .container,:host([appearance=fill]) .tablist{width:inherit}:host([appearance=fill]) [role=tab]{flex-grow:1}:host([underline]) .container::after{position:absolute;display:block;content:'';border-bottom:solid var(--rem1) var(--color-neutral-border-weak);inset-inline:0;bottom:0}`,t._([t.z(".internalForwardButton")],s.prototype,"forwardButton",void 0),t._([t.z(".internalBackButton")],s.prototype,"backButton",void 0),t._([t.z(".tablist")],s.prototype,"container",void 0),t._([t.k({slot:"forward-button"})],s.prototype,"forwardButtonElements",void 0),t._([t.k({slot:"back-button"})],s.prototype,"backButtonElements",void 0),t._([t.b()],s.prototype,"_forwardButtonVisible",void 0),t._([t.b()],s.prototype,"_backButtonVisible",void 0),t._([t.n({attribute:!1})],s.prototype,"selectedClasses",void 0),t._([t.n({attribute:!0})],s.prototype,"appearance",void 0),t._([t.n({attribute:!0,type:Boolean})],s.prototype,"insetHug",void 0),t._([t.n({attribute:!0,type:Boolean})],s.prototype,"underline",void 0),s=a=t._([t.c("faceplate-tabgroup")],s),{get F(){return s}}}));
SML.dm("CTD6cIv6",["CVEbQKiO","D7lSuCop","CCphb8vV"],(async(e,a,t)=>{let p=class extends(t.W(e.s)){constructor(){super(...arguments),this.pages=0,this.for=void 0}get pageIndex(){return super.pageIndex}set pageIndex(e){super.pageIndex=e}get pageNames(){return super.pageNames}set pageNames(e){super.pageNames=e}static get styles(){return e.i`:host{display:block}.page{display:none}.active{display:block}`}render(){if(this.pages<1)return;const{pageNames:p}=this;return e.x` <div aria-roledescription="carousel"> ${t.h(this.pages).map((t=>e.x` <div role="tabpanel" class="${a.x({page:!0,active:t===this.pageIndex})}"> <slot name="${p?p[t-1]:`page-${t}`}"></slot> </div> `))} </div> `}pageIndexChangedCallback(e){super.pageIndexChangedCallback(e),this.requestUpdate("pageIndex",e)}};return e._([e.n({type:Number})],p.prototype,"pages",void 0),e._([e.n({type:Number,attribute:"pageindex"})],p.prototype,"pageIndex",null),e._([e.n({converter:a.K,attribute:"pagenames"})],p.prototype,"pageNames",null),e._([e.n({type:String})],p.prototype,"for",void 0),p=e._([e.c("faceplate-tabpanel")],p),{get F(){return p}}}));
SML.dm("B011DCe8",["CVEbQKiO"],(async e=>{var r;!function(e){e.CIRCLE="circle",e.RECTANGLE="rectangle",e.PILL="pill"}(r||(r={}));const t=2500;let i=0,s=null,a=class extends e.s{constructor(){super(...arguments),this.shape=r.RECTANGLE,this.calcDelay=e=>{if(0===e)return 0;let r=0;const i=s?.getAnimations()[0];return i&&(r=i.effect?.getComputedTiming().progress*t),(r+200*e)%t}}static get styles(){return e.i`:host{display:inline-flex}:host([shape=pill]) #loader{border-radius:var(--rem8)}:host([shape=circle]) #loader{border-radius:50%}#loader{background:var(--color-shimmer-background);height:100%;width:100%;position:relative;overflow-x:hidden}#shimmer-object{background:var(--color-shimmer-gradient-overlay);border-radius:.5rem;height:100%;width:200%;position:absolute;top:0;inset-inline-start:0;transform:translateX(-100%)}`}firstUpdated(){this.shimmer(i++)}async shimmer(e){await new Promise((e=>requestAnimationFrame(e)));s||(s=this.shimmerObject);const r={duration:t,delay:-1*this.calcDelay(e),iterations:1/0};this.shimmerObject?.animate([{transform:"translateX(50%)"}],r)}render(){return e.x`<div id="loader"> <span id="shimmer-object"></span> </div> `}};return e._([e.n({type:String})],a.prototype,"shape",void 0),e._([e.z("#shimmer-object")],a.prototype,"shimmerObject",void 0),a=e._([e.c("faceplate-shimmer")],a),{get L(){return r}}}));
SML.dm("D102GxTJ",["CVEbQKiO","D7lSuCop","CCphb8vV"],(async(e,t,s)=>{const o=t.d(e.s);let n=class extends o{constructor(){super(...arguments),this.commentComposer=null,this.addCommentButton=null,this._events=new t.E(this),this.handleCommentPost=this._events.define(s.bU,(()=>{const e=this.querySelector("#empty-comments-banner");e&&(e.classList.add("hidden"),e.ariaHidden="true")})),this.handleCommentSearchToggle=e=>{this.commentComposer?.classList.toggle("hidden",e.detail.isHidden),this.addCommentButton?.classList.toggle("hidden",e.detail.isHidden)}}firstUpdated(){this.commentComposer=this.querySelector(`${t.cf.commentComposerHost}`),this.addCommentButton=this.querySelector(t.cf.addCommentButton),this.dispatchEvent(t.c(t.fx))}render(){return e.x` <faceplate-tracker source="post_detail" action="view" noun="comment_body_header"> <slot @pdp-comment-search-toggle="${this.handleCommentSearchToggle}"> </slot> </faceplate-tracker> `}};return n=e._([e.c("comment-body-header")],n),{get CommentBodyHeader(){return n}}}));
SML.dm("D9dm-Sy6",["D7lSuCop"],(async e=>{const t=e.fE(),n=function(){const e=new WeakMap;let t=!1;return{get isDirty(){return t},getRegistration:(e,t,n)=>({target:e,key:t,value:n}),register({target:n,key:s,value:r}){const a=e.get(n);if(a&&!a.has(s))a.set(s,r);else{if(a)throw new Error(`Cannot register value for key ${s}; something is already registered!`);e.set(n,new Map([[s,r]]))}t=!0},unregister({target:n,key:s,value:r}){const a=e.get(n);a&&a.get(s)===r&&(a.delete(s),t=!0)},getRegisteredElements(n){const s=e.get(n);return t=!1,s},unregisterAll(n){e.delete(n),t=!0}}}(),s=e.fD("FaceplateForm"),r=s.registerAncestorClass,a=s.connectToAncestor,i=Symbol.for("mixins/form-association");function c(e){return!!e&&i in e.constructor}function o(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||i in e.constructor)}const l=new Set(["checkbox","radio"]);function u(e){return o(e)&&l.has(e.type)||c(e)&&"checked"in e}const p=new Set(["radio"]);return{F:i,a:u,b:c,c:a,d:function(e){return!!e&&(e instanceof HTMLSelectElement||i in e.constructor&&"options"in e)},e:o,f:function(e){return null!=e},g:function(e){return u(e)&&p.has(e.type)},h:n,i:function(e,t,{className:n,size:s="small",label:r,description:a,leadingContent:i,trailingContent:c,truncateTrailingContent:o,disabled:l=!1,id:u,testId:p}){return e`<div class="flex justify-between gap-[0.5rem] text-secondary py-xs ${l?"opacity-60 pointer-events-none":""} ${n??""}" id="${t(u)}" data-testid="${t(p)}"> <span class="flex items-center gap-xs min-w-0 ${o?"shrink-0 grow":"shrink"}"> ${i?e`<span class="flex shrink-0 items-center justify-center h-xl w-xl"> <span class="text-20 leading-4">${i}</span> </span>`:void 0} <span class="flex flex-col justify-center min-w-0 shrink py-[var(--rem6)]"> <span class="${"small"===s?"text-14":"text-16"} break-normal">${r}</span> <span class="text-12 text-secondary-weak break-normal">${a}</span> </span> </span> <span class="flex items-center ${o?"shrink pl-[8px] min-w-0":"shrink-0"}"> <span class="flex items-center justify-center h-lg ${o?"min-w-0":""}">${c}</span> </span> </div>`},j:t,r}}));
SML.dm("Mh6HSk7W",["CVEbQKiO","D9dm-Sy6","D7lSuCop"],(async(t,e,i)=>{class s{constructor(t,e,i,s,a,n,r,l,o,d){this.valueMissing=t,this.typeMismatch=e,this.patternMismatch=i,this.tooLong=s,this.tooShort=a,this.rangeUnderflow=n,this.rangeOverflow=r,this.stepMismatch=l,this.badInput=o,this.customError=d}}class a{constructor(t){this.submissionValue=null,this.constraintsSuffered={},this.customValidityMessage="",this.validityMessage="",this.validationAnchor=null,this.target=t,this.input=document.createElement("input"),this.input.className="faceplate-internal-input",this.input.tabIndex=-1,this.input.style.opacity="0",this.input.style.width="1px",this.input.style.height="100%",this.input.style.padding="0",this.input.style.border="0",this.input.style.pointerEvents="none",this.input.hidden=!0}_connect(t){t?(this._form=t,e.j.register(t,this.target)):this._form=void 0}_disconnect(){this._form&&(e.j.unregister(this._form,this.target),this._form=void 0)}getFormValue(){return this.submissionValue}setFormValue(t){this.submissionValue=t}get form(){return this._form}isSufferingFromItsConstraints(){for(const t in this.constraintsSuffered)if(this.constraintsSuffered[t])return!0;return!1}setValidity(t,e,i=null){if(t){const e=this.convertFlagsToValidityState(t);for(const i in t)this.constraintsSuffered[i]=e[i]}else this.constraintsSuffered={};const s=!!e&&this.isSufferingFromItsConstraints();if(t&&Object.prototype.hasOwnProperty.call(t,"customError")){const t=this.constraintsSuffered.customError&&e?e:"";this.customValidityMessage=t}else this.validationAnchor=i,this.validityMessage=s&&e?e:"";(this.validationAnchor||this.input).setCustomValidity(this.validationMessage),this.target.setAttribute("faceplate-validity",s?"invalid":"valid")}get willValidate(){return!(this.target.disabled||null===this.submissionValue)}convertFlagsToValidityState(t){return new s(!!t.valueMissing,!!t.typeMismatch,!!t.patternMismatch,!!t.tooLong,!!t.tooShort,!!t.rangeUnderflow,!!t.rangeOverflow,!!t.stepMismatch,!!t.badInput,!!t.customError)}get validity(){const t=this.constraintsSuffered;return this.convertFlagsToValidityState(t)}get validationMessage(){return this.customValidityMessage||this.validityMessage}dispatchInvalidEvent(){const t=new Event("invalid",{bubbles:!0,cancelable:!0});return this.target.dispatchEvent(t),t}checkValidity(){return!this.isSufferingFromItsConstraints()||(this.dispatchInvalidEvent(),!1)}reportValidity(){if(this.isSufferingFromItsConstraints()){if(!this.dispatchInvalidEvent().defaultPrevented){(this.validationAnchor||this.input).reportValidity()}return!1}return!0}}const n=i.fE(),r=new MutationObserver((t=>{for(const e of t){if("attributes"!==e.type||"disabled"!==e.attributeName||!(e.target instanceof HTMLFieldSetElement))continue;const t=n.getRegisteredElements(e.target);if(t)for(const i of t)i.formDisabledCallback&&i.formDisabledCallback(i.disabled||e.target.disabled)}}));function l(t){if(e.F in t)return t;class i extends t{constructor(){super(...arguments),this._internals=new a(this)}connectedCallback(){super.connectedCallback&&super.connectedCallback(),e.c(this).then((t=>{if(!t||!this.isConnected)return;this._internals._connect(t),this.formAssociatedCallback&&this.formAssociatedCallback(t);let e=this;for(;e.parentElement&&(e=e.parentElement,e!==t)&&!(e instanceof HTMLLegendElement);)if(e instanceof HTMLFieldSetElement){this._fieldSet=e;n.getRegisteredElements(e)||r.observe(e,{attributes:!0}),n.register(e,this);break}this.formDisabledCallback&&this.formDisabledCallback(this.disabled)}))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this._internals._disconnect(),this.formAssociatedCallback&&this.formAssociatedCallback(null),this._fieldSet&&(n.unregister(this._fieldSet,this),this._fieldSet=void 0)}get value(){return this._internals.getFormValue()}set value(t){this._internals.setFormValue(t),this.syncInputValidity(!1)}get form(){return this._internals.form}get name(){return this.getAttribute("name")||""}get disabled(){return this.hasAttribute("disabled")||!(!this._fieldSet||!this._fieldSet.disabled)}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled"),this.formDisabledCallback&&this.formDisabledCallback(t||!(!this._fieldSet||!this._fieldSet.disabled))}get type(){return this.localName}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}get willValidate(){return this._internals.willValidate}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}setCustomValidity(t){this._internals.setValidity({customError:!!t},t)}syncInputValidity(t=!0){var e;const i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("input:not(.faceplate-internal-input),textarea");if(!i)return;t&&this.setAttribute("faceplate-dirty","");let s={};if(this._internals.validity.customError){for(const t in i.validity)s[t]=i.validity[t];s.customError=!0}else s=i.validity;this._internals.setValidity(s,i.validationMessage||this._internals.validationMessage)}}return i[e.F]=!0,i}class o extends(l(t.s)){static get styles(){return t.i`:host{display:inline-block;position:relative}:host([aria-disabled=true]){cursor:not-allowed;opacity:.5}:host([faceplate-validity=invalid]){border-color:var(--color-danger-content)}.faceplate-internal-input{position:absolute;left:50%;bottom:0}`}get disabled(){return super.disabled}set disabled(t){super.disabled=t}constructor(){super(),this.ariaDisabled="false",this.addEventListener("focus",this.dispatchFocusin)}dispatchFocusin(){const t=new FocusEvent("focusin",{bubbles:!0});this.dispatchEvent(t)}render(){return t.x` ${this._internals.input} `}formDisabledCallback(t){this.ariaDisabled=t?"true":"false"}formResetCallback(){this.value=this.getAttribute("value"),this.removeAttribute("faceplate-dirty")}}t._([t.n({type:Boolean,reflect:!0})],o.prototype,"disabled",null),t._([t.n({type:String,attribute:"aria-disabled",reflect:!0})],o.prototype,"ariaDisabled",void 0);function d(t){return t<10?`0${t}`:t}return{F:class extends o{async firstUpdated(){const t=await e.c(this);t&&this.isConnected&&t.register(this)}},I:o,M:999,T:function(){return o},W:l,a:function(t){const[e,i,s]=t.split("-").map(Number);return new Date(e,i-1,s)},g:function(t){const[e,i,s]=Array.from(t).map((t=>parseInt(t?.value??"",10)));if(!s||!i||!e)return null;const a=new Date(e,i,0).getDate(),n=(new Date).getFullYear();return s<0||s>a||i<1||i>12||e<n-120||e>n-5?null:`${e}-${d(i)}-${d(s)}`}}}));
SML.dm("B8BAxqC_",["CVEbQKiO","D9dm-Sy6","D7lSuCop","Mh6HSk7W"],(async(t,e,a,i)=>{const r=t.e(class extends t.a{constructor(e){if(super(e),e.type!==t.t.PROPERTY&&e.type!==t.t.ATTRIBUTE&&e.type!==t.t.BOOLEAN_ATTRIBUTE)throw Error("The `live` directive is not allowed on child or event bindings");if(!t.j(e))throw Error("`live` bindings can only contain a single expression")}render(t){return t}update(e,[a]){if(a===t.T||a===t.A)return a;const i=e.element,r=e.name;if(e.type===t.t.PROPERTY){if(a===i[r])return t.T}else if(e.type===t.t.BOOLEAN_ATTRIBUTE){if(!!a===i.hasAttribute(r))return t.T}else if(e.type===t.t.ATTRIBUTE&&i.getAttribute(r)===a+"")return t.T;return t.b6(e),a}});class s{constructor(t,e){this._observedNames=new Set,this._previousStates=new Map,this._records=new Map,this._eventListener=t=>{this._processRecord(t.detail)},this._callCallback=()=>{this._records.size&&this._callback(this.takeRecords(),this)},this._callback=t,this.form=e.form}_processRecord(t){const e=!this._records.size,{input:a,message:i,name:r}=t;if(!this._observedNames.has(r))return;this._previousStates.get(r)!==i&&(this._records.set(r,{target:a,message:i,name:r}),this._previousStates.set(r,i),this._records.size&&e&&queueMicrotask(this._callCallback))}observe(t){if(this._observedNames.has(t))return;this._observedNames.add(t),1===this._observedNames.size&&this.form.addEventListener("_faceplate-validation-change",this._eventListener);const e=this.form.elements[t];!e||e instanceof HTMLOutputElement||Array.isArray(e)||this._processRecord({input:e,name:t,message:e.validationMessage})}disconnect(){this._observedNames.size&&(this._observedNames.clear(),this._previousStates.clear(),this._records.clear(),this.form.removeEventListener("_faceplate-validation-change",this._eventListener))}takeRecords(){const t=Array.from(this._records.values());return this._records=new Map,t}unobserve(t){this._observedNames.has(t)&&(this._observedNames.delete(t),this._previousStates.delete(t),this._records.delete(t),this._observedNames.size||this.disconnect())}}let n=class extends t.s{constructor(){super(...arguments),this.name="",this.level=null,this.placeholder="",this.ariaLive=null,this.message="",this.characterCount=Number.NEGATIVE_INFINITY,this.characterCountAriaLabel="",this.visuallyHiddenText="",this.isInputDirty=!0,this._message="",this.setIsDirtyByAttribute=t=>{this.isInputDirty=t.hasAttribute("faceplate-dirty")},this.onFormConnect=t=>{t?.addEventListener("faceplate-submit",(()=>{this.isInputDirty=!0})),t&&this.isConnected&&(this._observer=new s((t=>{for(const e of t)if(e.name===this.name){if(e.target instanceof i.F){this.setIsDirtyByAttribute(e.target);new MutationObserver((t=>{for(const e of t)"faceplate-dirty"===e.attributeName&&this.setIsDirtyByAttribute(e.target),"faceplate-validity"===e.attributeName&&this.toggleSuccessStyling(e.target)})).observe(e.target,{attributes:!0})}else this.isInputDirty=!0;this.setMessage(this.message||e.message,"valid"===e.target.getAttribute("faceplate-validity")?a.a4.success:a.a4.error)}}),{form:t}),this._observer.observe(this.name),this._observer.form.addEventListener("faceplate-alert",this._handleAlert))},this.associateForm=t=>{this.onFormConnect(t)},this._handleAlert=t=>{this.isInputDirty=!0;const{name:e,level:i,message:r}=t.detail;e===this.name&&i!==a.a4.error&&this.setMessage(r,i)},this.toggleSuccessStyling=t=>{this.isInputDirty&&("valid"===t.getAttribute("faceplate-validity")?this.shadowRoot?.getElementById("helper-text")?.classList.add("success"):this.shadowRoot?.getElementById("helper-text")?.classList.remove("success"))}}connectedCallback(){super.connectedCallback(),e.c(this).then(this.onFormConnect)}disconnectedCallback(){super.disconnectedCallback(),this._observer&&(this._observer.disconnect(),this._observer.form.removeEventListener("faceplate-alert",this._handleAlert))}setMessage(t,e){t&&void 0!==e?this.level=a.a4[e]:this.removeAttribute("level"),this._message=t||""}get textContent(){return this.shadowRoot?.firstElementChild?.textContent||""}get innerText(){return this.shadowRoot?.firstElementChild?.innerText||""}static get styles(){return t.i`:host{display:block;font-size:var(--font-small);color:var(--color-input-helper-text);line-height:var(--size-md);font-size:var(--font-small);box-sizing:border-box}.container{display:flex;justify-content:space-between;padding-top:var(--spacer-input-padding-top);line-height:var(--size-md);font-size:var(--font-small)}.success,:host([level=success]){color:var(--color-success-content)}.overflow-char-limit,:host([level=alert]),:host([level=critical]),:host([level=emergency]),:host([level=error]){color:var(--color-danger-content)}:host([level=warning]){color:var(--color-alert-caution)}:host([level=notice]){color:var(--color-success-content)}.pristine{color:var(--color-input-helper-text)}:host([character-count]) .character-count{margin-inline-start:var(--spacer-xs);flex-shrink:0}.empty{padding:0}`}render(){const e=this.characterCount>Number.NEGATIVE_INFINITY;return this.placeholder||this._message||e?t.x`<span aria-live="${t.l(this.ariaLive??void 0)}" class="${a.x({container:!0,pristine:!this.isInputDirty})}"> <span id="helper-text">${this.isInputDirty&&this._message?this._message:this.placeholder}</span> ${e?t.x`<span class="character-count ${this.characterCount<0?"overflow-char-limit":""}" aria-label="${t.l(this.characterCountAriaLabel)}">${this.characterCount}</span>`:void 0} </span> <faceplate-screen-reader-content aria-live="assertive">${this.visuallyHiddenText}</faceplate-screen-reader-content>`:t.x`<faceplate-screen-reader-content aria-live="polite">${this.visuallyHiddenText}</faceplate-screen-reader-content>`}};t._([t.n({type:String,reflect:!0})],n.prototype,"name",void 0),t._([t.n({type:String,reflect:!0})],n.prototype,"level",void 0),t._([t.n({type:String})],n.prototype,"placeholder",void 0),t._([t.n({type:String,reflect:!0,attribute:"aria-live"})],n.prototype,"ariaLive",void 0),t._([t.n({type:String,attribute:"message"})],n.prototype,"message",void 0),t._([t.n({type:Number,attribute:"character-count"})],n.prototype,"characterCount",void 0),t._([t.n({type:String,attribute:"character-count-aria-label"})],n.prototype,"characterCountAriaLabel",void 0),t._([t.n({type:String,attribute:"visually-hidden-text"})],n.prototype,"visuallyHiddenText",void 0),t._([t.b()],n.prototype,"isInputDirty",void 0),t._([t.b()],n.prototype,"_message",void 0),n=t._([t.c("faceplate-form-helper-text")],n);class l extends i.F{constructor(){super(...arguments),this.suffix="",this.value="",this.name="",this.placeholder="",this.required=!1,this.screenReaderContent="",this.novalidate=!1,this.helperTextLevel=null,this.helperTextPlaceholder="",this.helperTextAriaLive="polite",this.helperTextMessage="",this.hasLabel=!1,this.hasTrailingButton=!1,this.statefulInput=!1,this.reportedDirty=!1,this.hasValidationHelpers=!1,this.suppressInternalClicks=!1,this.validationMsg="",this.allowMaxLengthOverflow=!1,this.setFormValidationHelpers=t=>{t&&(t.addEventListener("faceplate-submit",this.setDirtyAttribute),this.helperText?.associateForm(t),this.hasValidationHelpers=!0)},this.setStatefulInputByValue=()=>{this.statefulInput=!this.isEmpty},this.inputContainer=e=>t.x` <span class="${a.x({"input-container":!0})}"> ${e} </span> `,this.labelTextWrapper=()=>{const e=t=>t&&t[0]?.textContent;return t.x` <span class="label-text inner-label" id="fp-input-label"><slot name="label" @slotchange="${t=>this.onSlotChange({event:t,property:"hasLabel",name:"label",hasChanged:e})}"></slot>${this.required?t.x`<span class="required-asterisk" aria-hidden="true">*</span>`:null}</span> `},this.setDirtyAttribute=()=>{this.setAttribute("faceplate-dirty","")},this.onSlotChange=({event:t,property:e,name:a,hasChanged:i})=>{t.target?.name===a&&(this[e]=i?i(t.target?.assignedElements()):t.target?.assignedNodes().length>0)}}async connectedCallback(){super.connectedCallback(),this.addEventListener("focus",this.onFocus.bind(this)),this.addEventListener("blur",this.onBlur.bind(this));const t=await e.c(this);this.setFormValidationHelpers(t)}disconnectedCallback(){super.disconnectedCallback(),this?.removeEventListener("focus",this.onFocus),this?.removeEventListener("blur",this.onBlur),this.form?.removeEventListener("faceplate-submit",this.setDirtyAttribute)}async firstUpdated(){super.firstUpdated(),this.calculateLabelPosition(),this.validateMaxLength()}updated(t){if(t.get("prefix")&&this.calculateLabelPosition(),void 0!==t.get("statefulInput")){const t=this.shadowRoot?.querySelector(".input-container")?.classList;this.statefulInput?t.add("stateful-input"):t.remove("stateful-input")}t.has("value")&&(super.value=this.value,this.setStatefulInputByValue())}get delegatedFocusElements(){return[this.innerInput]}static get styles(){return[super.styles,t.i`label{display:flex;position:relative}:host{outline:0;font-family:var(--font-sans);cursor:text}:host input,:host textarea{font:inherit;color:var(--color-neutral-content-strong);padding:0}.label-container{display:inline-flex;position:relative;height:var(--rem40);align-items:center;box-sizing:border-box}:host([appearance=bordered]) .label-container{background:var(--color-input-bordered);color:var(--color-input-bordered-text)}:host([appearance=secondary]) .label-container{background:var(--color-input-secondary);border-radius:var(--radius-md);outline:0;color:var(--color-input-secondary-text)}:host([appearance=secondary]) .label-container:hover{background:var(--color-input-secondary-hover)}:host([appearance=bordered]) .label-container:hover{background:var(--color-input-bordered-hover)}:host(:focus-within) .label-container{outline:1px auto var(--color-global-focus)}:host([faceplate-validity=invalid][faceplate-dirty]) .label-container{border-color:transparent;box-shadow:0 0 0 var(--rem2) var(--color-danger-content)}:host([faceplate-validity=valid][novalidate]) .label-container{border-color:transparent;box-shadow:none}:host .label-container,:host faceplate-form-helper-text{padding-inline-start:var(--spacer-md)}:host .label-container,:host faceplate-form-helper-text:not(.helper-text-without-label-with-trailing){padding-inline-end:var(--spacer-md)}:host([appearance=secondary]) .label-container{align-items:center}:host .label-container.with-trailing-button{padding-inline-end:var(--spacer-xs)}.label-container.interior-label{height:var(--rem56)}.input-container{font:var(--font-16-20-regular)}::slotted([slot=leadingIcon]),::slotted([slot=trailingIconButton]){color:var(--color-neutral-content-weak);display:inline-flex;align-items:center}:host([faceplate-validity=valid][faceplate-dirty]) .trailing-icon.valid{color:var(--color-success-background)}.required-asterisk,:host([faceplate-validity=invalid][faceplate-dirty]) .trailing-icon.invalid{color:var(--color-danger-content)}:host([faceplate-validity=valid][novalidate]) .trailing-icon.valid{display:none}.trailing-icon,::slotted([slot=trailingIcon]){margin-inline-start:var(--spacer-xs);flex-shrink:0}:host([disabled]){color:var(--color-neutral-content-disabled)}:host([faceplate-validity=invalid][faceplate-dirty]) .invalid,:host([faceplate-validity=valid][faceplate-dirty]) .valid{display:inline-block}.trailing-icon{display:none}:host .label-container.without-label faceplate-form-helper-text,:host([appearance=secondary]) .label-container.without-label{padding-top:var(--rem10);padding-bottom:var(--rem10)}:host([faceplate-validity=invalid]:not([disabled])[faceplate-dirty]) .label-text:not(.inner-label),:host([faceplate-validity=valid]:not([disabled])[faceplate-dirty]) .label-text:not(.inner-label){color:var(--color-label-default)}.label-text{position:absolute;pointer-events:none}:host([disabled]) .label-text:not(.inner-label){color:var(--color-neutral-content-disabled)}.stateful-input .label-text:not(.inner-label){clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.stateful-input .label-text.inner-label{transform:translate(calc(-1 * var(--left-label-position)),calc(-1 * (var(--rem16))));font-size:var(--size-sm);line-height:var(--rem16);white-space:nowrap}.label-container:not(.without-label) .input-container:not(.stateful-input) input::placeholder,.label-container:not(.without-label) .input-container:not(.stateful-input) textarea::placeholder{opacity:0}.label-container:not(.without-label) .input-container.stateful-input{transform:translateY(var(--spacer-xs))}.activated,.activated .label-text.inner-label{transition:all 150ms ease-out}.inner-label{inset-inline-start:var(--left-label-position)}.input-container:not(.stateful-input) .inner-label{transform:translateY(0);transition:transform 150ms ease}.hidden{display:none}.label-text:not(.inner-label){color:var(--color-label-default)}slot[name=clearButton]:not(.has-value){display:none}.input-boundary-box{display:flex;align-items:center}.input-boundary-box,.label-container{flex:1}.label-container:not(.without-label) .input-boundary-box{padding:var(--spacer-xs) 0}#trailing-icons-container{display:flex;align-items:center;gap:var(--spacer-xs);justify-content:flex-end}:host([persistent-trailing-icon]) #trailing-icons-general{flex-direction:row-reverse}.input-prefix,.input-suffix,.label-text{color:var(--color-label-default)}:host .without-label.with-trailing-button{padding-inline-end:var(--spacer-2xs)}.input-container{position:relative;transform:translateY(0);display:flex;align-items:center;width:100%;line-height:var(--rem20)}:host([faceplate-validity=invalid]:not([persistent-trailing-icon])[faceplate-dirty]) ::slotted([slot=trailingIconButton]){display:none}#trailing-icons-general{display:flex;align-items:center}#trailing-icons-validation{display:flex}:host(:not([faceplate-dirty])) #trailing-icons-validation{display:none}`]}get isEmpty(){return!(!this.innerInput?.value&&this.innerInput?.validity.badInput)&&!(this.innerInput?.value??this.value)}onFocus(){this.hasAttribute("faceplate-dirty")&&!this.reportedDirty&&(this.reportedDirty=!0),this.removeAttribute("faceplate-dirty"),this.shadowRoot?.querySelector(".input-container")?.classList.add("activated"),this.isEmpty&&(this.statefulInput=!0)}onBlur(){this.isEmpty&&(this.statefulInput=!1),this.reportedDirty&&this.setAttribute("faceplate-dirty","")}focus(){this.innerInput?.focus()}blur(){this.innerInput?.blur()}onChange(t){const e=t?.target;this.value=e?.value||"",this.dispatchEvent(new InputEvent("change",{bubbles:!0}))}onInput(t){const e=t?.target;this.value=e?.value||"",this.handleCharLimit?.(),this.validateMaxLength(),this.setStatefulInputByValue()}validateMaxLength(){if(this.allowMaxLengthOverflow&&this.maxLength){const t=this._internals.validationMessage===this.validationMsg,e=this.value.length>this.maxLength;!t&&e?this.setCustomValidity(this.validationMsg):t&&!e&&this.setCustomValidity("")}}handleCharLimit(){const t=this.maxLength&&this.value.length>=this.maxLength;this.helperText&&this.helperTextScreenReaderMsg&&(t?this.helperText.visuallyHiddenText=this.helperTextScreenReaderMsg:!t&&this.helperText.visuallyHiddenText&&(this.helperText.visuallyHiddenText=""))}async calculateLabelPosition(t=0){let e=0,a=0;const i=this.shadowRoot?.querySelector(".input-prefix");if(i){!getComputedStyle(this.shadowRoot?.host).getPropertyValue("--font-16-20-regular").trim().length&&t<5&&setTimeout((()=>{this.calculateLabelPosition(t+1)}),50),a=i.getBoundingClientRect().width;const r=getComputedStyle(this.shadowRoot?.querySelector(".input-prefix")).getPropertyValue("margin-inline-end");e+=a+parseFloat(r)}(this.shadowRoot?.querySelector("label")).style.setProperty("--left-label-position",`${e}px`)}onLabelClick(t){this.suppressInternalClicks&&"input"!==t.target.nodeName.toLowerCase()&&t.stopPropagation()}renderInput(e){let i;return this.characterCount&&(i=this.maxLength?this.maxLength-this.value.length:this.value.length),t.x`<label @click="${this.onLabelClick}"> <div class="${a.x({"label-container":!0,"interior-label":!0,"without-label":!this.hasLabel,"with-trailing-button":this.hasTrailingButton})}"> <span class="input-boundary-box"> <slot name="leadingIcon"></slot> ${this.inputContainer(t.x` ${this.prefix?t.x`<span class="input-prefix">${this.prefix}</span>`:void 0} ${this.labelTextWrapper()} ${e} ${this.suffix?t.x`<span class="input-suffix">${this.suffix}</span>`:void 0} `)} <span id="trailing-icons-container"> <span id="trailing-icons-validation"> ${t.aC({attributes:{className:"trailing-icon invalid"},size:t.q.Medium})} ${t.F({attributes:{className:"trailing-icon valid"},size:t.q.Medium})} </span> <span id="trailing-icons-general"> <slot name="trailingIconButton" @slotchange="${t=>this.onSlotChange({event:t,property:"hasTrailingButton",name:"trailingIconButton"})}"> </slot> <slot name="clearButton" class="${a.x({"has-value":!!this.value.length})}"></slot> </span> </span> </span> </div> </label> <faceplate-form-helper-text class="${a.x({"no-label":!this.hasLabel,"helper-text-without-label-with-trailing":!this.hasLabel&&this.hasTrailingButton})}" character-count="${t.l(i)}" name="${this.name}" aria-live="${t.l(this.helperTextAriaLive??void 0)}" message="${t.l(this.helperTextMessage)}" level="${t.l(this.helperTextLevel??void 0)}" placeholder="${this.helperTextPlaceholder}" character-count-aria-label="${t.l(this.characterCountAriaLabel)}"> </faceplate-form-helper-text>`}}return l.clearButton=(e={})=>a.k({attributes:{...e,type:"button"},appearance:"plain",size:a._.Small,leadingIcon:t.ag({attributes:{className:"trailing-icon"},size:t.q.Medium})}),t._([t.n({type:String})],l.prototype,"suffix",void 0),t._([t.n({type:String})],l.prototype,"value",void 0),t._([t.n({type:String})],l.prototype,"name",void 0),t._([t.n({type:String})],l.prototype,"placeholder",void 0),t._([t.n({type:Boolean})],l.prototype,"required",void 0),t._([t.n({type:String})],l.prototype,"screenReaderContent",void 0),t._([t.n({type:String})],l.prototype,"autocomplete",void 0),t._([t.n({type:String})],l.prototype,"inputmode",void 0),t._([t.n({type:Boolean})],l.prototype,"novalidate",void 0),t._([t.n({type:Number,attribute:"maxlength"})],l.prototype,"maxLength",void 0),t._([t.n({type:Number,attribute:"minlength"})],l.prototype,"minLength",void 0),t._([t.z("input,textarea")],l.prototype,"innerInput",void 0),t._([t.z("faceplate-form-helper-text")],l.prototype,"helperText",void 0),t._([t.n({type:String,reflect:!0,attribute:"helper-text-level"})],l.prototype,"helperTextLevel",void 0),t._([t.n({type:String,attribute:"helper-text-placeholder"})],l.prototype,"helperTextPlaceholder",void 0),t._([t.n({type:String,reflect:!0,attribute:"helper-text-aria-live"})],l.prototype,"helperTextAriaLive",void 0),t._([t.n({type:String,attribute:"helper-text-message"})],l.prototype,"helperTextMessage",void 0),t._([t.n({type:Boolean,attribute:"character-count"})],l.prototype,"characterCount",void 0),t._([t.n({type:String,attribute:"helper-text-screen-reader-msg"})],l.prototype,"helperTextScreenReaderMsg",void 0),t._([t.n({type:String,attribute:"character-count-aria-label"})],l.prototype,"characterCountAriaLabel",void 0),t._([t.b()],l.prototype,"hasLabel",void 0),t._([t.b()],l.prototype,"hasTrailingButton",void 0),t._([t.k({slot:"label"})],l.prototype,"labelSlot",void 0),t._([t.k({slot:"trailingIconButton"})],l.prototype,"trailingIconButtonSlot",void 0),t._([t.b()],l.prototype,"statefulInput",void 0),t._([t.n({type:Boolean,attribute:"suppress-internal-clicks"})],l.prototype,"suppressInternalClicks",void 0),t._([t.n({type:Boolean})],l.prototype,"readonly",void 0),t._([t.n({type:String,attribute:"validation-message"})],l.prototype,"validationMsg",void 0),t._([t.n({type:Boolean,attribute:"allow-max-length-overflow"})],l.prototype,"allowMaxLengthOverflow",void 0),{T:l,l:r}}));
SML.dm("BcR8gLw3",["CVEbQKiO","D7lSuCop","B8BAxqC_"],(async(e,t,r)=>{var i,a;!function(e){e.BORDERED="bordered",e.SECONDARY="secondary",e.PLAIN="plain"}(i||(i={})),function(e){e.COLLAPSED="collapsed",e.EXPANDED="expanded"}(a||(a={}));let n=class extends r.T{constructor(){super(...arguments),this.appearance=i.SECONDARY,this.size=a.COLLAPSED,this._textAreaContainerRef=t.aE()}static get styles(){return[super.styles,e.i`:host(){--trailing-icons-container:var(--rem32)}:host([resize]) .label-container{overflow:auto}.label-container:not(.without-label){padding-top:var(--spacer-xs);padding-bottom:var(--spacer-xs)}:host([resize]) textarea{height:100%;width:100%}:host([resize=both]) .label-container{resize:both}:host([resize=horizontal]) .label-container{resize:horizontal}:host([resize=vertical]) .label-container{resize:vertical}textarea{background:0 0;border:none;outline:0;overflow-y:auto;resize:none}:host([size=expanded]:not([rows])) .label-container{height:fit-content;min-height:var(--rem90)}:host(:not([rows])) textarea{min-height:var(--rem20,1.25rem);height:var(--rem20,1.25rem)}:host(:not([cols])) textarea{width:100%}.label-text{top:0}:host([appearance=bordered]) .label-container{border:1px solid var(--color-neutral-border)}:host([appearance=bordered]) .label-container:hover{border-color:var(--color-neutral-border-medium)}:host([appearance=bordered]) .label-container:hover,:host([appearance=plain]) .label-container:hover{background:var(--color-neutral-background-hover);border-radius:none}:host([appearance=plain]) .label-container{border-radius:0}.input-boundary-box,.input-container,:host .label-container,label{height:100%;width:100%;box-sizing:border-box}:host([size=expanded]) .input-container{height:calc(100% - var(--trailing-icon-container,0px))}.input-container{align-items:flex-start}:host .label-container{border-radius:var(--radius-md)}.input-boundary-box{flex-direction:column}:host(:not([size])) .input-boundary-box,:host([size=collapsed]) .input-boundary-box{flex-direction:row;min-height:var(--rem40);padding:var(--spacer-2xs) 0}:host([size=expanded]) #trailing-icons-container{width:100%;justify-content:flex-end}#trailing-icons-container{height:(--trailing-icons-container)}.text-area-wrapper{height:inherit;width:100%;min-height:var(--textarea-minheight,var(--rem20));display:flex}`]}updated(e){e.has("value")&&this.handleDynamicResize(),super.updated(e)}async handleDynamicResize(){if(!this.rows&&!this.cols){const{width:e}=this.innerTextArea.getBoundingClientRect();this.innerTextArea.style.overflow="hidden",this.innerTextArea.style.height="0",this.innerTextArea.style.width=`${e}px`;const t=`${this.innerTextArea?.scrollHeight}px`;this.innerTextArea.style.height=t,this.innerTextArea.style.removeProperty("overflow"),this.innerTextArea.style.removeProperty("width"),this._textAreaContainerRef?.value&&this._textAreaContainerRef.value.style.setProperty("--textarea-minheight",t)}}onInput(e){this.handleDynamicResize(),super.onInput(e)}render(){return super.renderInput(e.x` <div class="text-area-wrapper" ${t.aq(this._textAreaContainerRef)}> <textarea aria-labelledby="fp-input-label" style="${e.l(this.fontFamily?`font-family: ${this.fontFamily}`:void 0)}" class="${t.x({"no-label":!this.hasLabel})}" ?readonly="${this.readonly}" id="innerTextArea" rows="${e.l(this.rows)}" cols="${e.l(this.cols)}" @input="${this.onInput}" @change="${this.onChange}" .value="${r.l(this.value)}" name="${e.l(this.name)}" minlength="${e.l(this.minLength)}" maxlength="${e.l(this.allowMaxLengthOverflow?void 0:this.maxLength)}" placeholder="${e.l(0===this.placeholder.length?void 0:this.placeholder)}" ?disabled="${this.disabled}" ?required="${this.required}" autocomplete="${e.l(this.autocomplete)}" inputmode="${e.l(this.inputmode)}"></textarea> </div>`)}};return e._([e.n({type:Number})],n.prototype,"rows",void 0),e._([e.n({type:Number})],n.prototype,"cols",void 0),e._([e.n({type:String})],n.prototype,"resize",void 0),e._([e.z("#innerTextArea")],n.prototype,"innerTextArea",void 0),e._([e.n({type:String,reflect:!0})],n.prototype,"appearance",void 0),e._([e.n({type:String})],n.prototype,"size",void 0),e._([e.n({type:String,attribute:"font-family"})],n.prototype,"fontFamily",void 0),n=e._([e.c("faceplate-textarea-input")],n),{get F(){return n},get T(){return a},get a(){return i}}}));
SML.dm("BZWh9sVh",["CVEbQKiO","BcR8gLw3","D7lSuCop"],(async(e,t,a)=>{const i=e=>{if(!e)return!1;return e.getTime()+864e5>Date.now()},n=e=>{const t=new Date(e);return isNaN(t?.getTime?.())?null:t};let o=class extends e.s{constructor(){super(...arguments),this.subredditId="",this.prefixedSubredditName="",this.banner="",this.icon="",this.iconColor="",this.subredditDescription="",this.allowJoinRequests=!1,this.subredditType="restricted",this.isCommentingRestricted=!1,this.isPostingRestricted=!1,this.modMessageBody="",this.preventDefault=e=>{e.preventDefault()},this.hasPendingRequest=()=>i(this.lastJoinRequest),this.getStatusText=()=>{switch(!0){case"restricted"===this.subredditType&&this.isCommentingRestricted&&this.isPostingRestricted:return "This is a restricted community. Only approved members can contribute.";case"restricted"===this.subredditType&&this.isPostingRestricted:return "This is a restricted community. Only approved users can post, but you can still comment.";case"restricted"===this.subredditType&&this.isCommentingRestricted:return "This is a restricted community. Only approved users can comment, but you can still post.";case"private"===this.subredditType:default:return "This is a private community. Only approved members can view and contribute.";}},this.handleTextChange=e=>{this.modMessageBody=e.target.value},this.hide=()=>this.dialog?.hide(),this.showModal=()=>{var e;this.dialog?.showModal(),a.e(this,(e=this.subredditType,a.b({source:"content_gate",action:"view",noun:"modal"},{action_info:{setting_value:e}})))},this.requestClientGQL=a.v,this.requestToJoin=async()=>{if(!this.modMessageBody||!this.subredditId)return;var e;a.e(this,(e=this.subredditType,a.b({source:"content_gate",action:"click",noun:"request_to_join"},{action_info:{setting_value:e}})));const{data:t,errors:i}=await this.requestClientGQL({operation:a.O.SendMessageToSubreddit,variables:{input:{body:this.modMessageBody,subject:"[join] Request to join",subredditId:this.subredditId}}});t.sendMessageToSubreddit.ok&&!i.length?(this.allowJoinRequests=!1,await this.requestClientGQL({operation:a.O.UpdateContributorRequestTimestamp,variables:{input:{subredditId:this.subredditId,requestDatetime:(new Date).toUTCString()}}}),this.dispatchEvent(a.c("faceplate-alert",{level:a.a4.success,message:"Request to join has been sent"}))):this.dispatchEvent(a.c("faceplate-alert",{level:a.a4.error,cause:"uncategorized",message:"Request to join failed to send"}))},this.renderTemplate=()=>e.x`<div class="relative max-w-lg w-100 rounded-md overflow-hidden"> <faceplate-img class="h-[88px] w-full object-cover bg-secondary-background" src="${this.banner}"></faceplate-img> <div class="relative flex items-end gap-sm pl-lg -top-[35px] -mb-[35px]"> ${this.icon?e.x`<img loading="lazy" src="${this.icon}" alt="" class="border-solid border-ui-modalbackground border-md w-[80px] aspect-square rounded-full overflow-hidden">`:e.aB({size:e.q.ExtraLarge,attributes:{style:this.iconColor?`color: ${this.iconColor}`:void 0,className:"rounded-full w-[80px] h-[80px] border-neutral-background border-lg border-solid"}})} <h4 class="title text-18 font-bold mb-md bg-cover bg-no-repeat"> ${this.prefixedSubredditName} </h4> </div> ${this.open?e.A:a.k({appearance:"media",attributes:{className:"absolute top-md right-md ",onclick:this.hide},size:a._.Small,leadingIcon:e.C({size:e.q.Small})})} <div class="flex flex-col justify-center px-md"> ${this.isPrivate&&this.subredditDescription?e.x`<p class="description text-14 mt-sm mb-0">${this.subredditDescription}</p>`:e.A} <p class="status-text text-14 mt-sm font-bold">${this.getStatusText()}</p> ${this.allowJoinRequests?e.x`<faceplate-textarea-input size="expanded" appearance="${t.a.SECONDARY}" class="mb-sm" name="textarea" faceplate-focusable required .value="${this.modMessageBody}" @input="${this.handleTextChange}"> <span slot="label">${"Request to join"}</span> </faceplate-textarea-input>`:e.A} </div> <div class="flex justify-end gap-md p-md pt-0"> ${this.isPrivate?a.k({appearance:"secondary",attributes:{onclick:()=>{return a.e(this,(e=this.subredditType,a.b({source:"content_gate",action:"click",noun:"go_to_homepage_button"},{action_info:{setting_value:e}})));var e},href:"/"},children:"Go To Homepage"}):a.k({appearance:"secondary",attributes:{onclick:()=>{return a.e(this,(e=this.subredditType,a.b({source:"content_gate",action:"click",noun:"go_to_community_button"},{action_info:{setting_value:e}})));var e},href:`/${this.prefixedSubredditName}`},children:"Go To Community"})} ${this.allowJoinRequests?a.k({appearance:"primary",attributes:{onclick:this.requestToJoin,disabled:!this.modMessageBody},size:a._.Medium,children:"Send Request"}):a.k({appearance:"primary",attributes:{onclick:()=>{return a.e(this,(e=this.subredditType,a.b({source:"content_gate",action:"click",noun:"message_mods_button"},{action_info:{setting_value:e}})));var e},href:`/message/compose?to=${encodeURIComponent(this.prefixedSubredditName)}`},size:a._.Medium,children:"Message Mods"})} </div> </div>`}get isPrivate(){return"private"===this.subredditType}getBgImagePath(){const e=this.isLoggedIn?"home":"popular",t=a.i()?"dark":void 0,i=this.isDesktop?void 0:"mobile";return`${CLIENT_CONFIG.STATIC_BASE_URL}assets/feeds/${[e,t,i].filter(Boolean).join("-")}.jpg`}connectedCallback(){super.connectedCallback(),this.allowJoinRequests&&this.hasPendingRequest()&&(this.allowJoinRequests=!1),"private"===this.subredditType&&this.updateComplete.then((()=>{this?.dialog?.addEventListener("rpl-dialog:request-close",this.preventDefault),this?.dialog?.showModal()}))}disconnectedCallback(){super.disconnectedCallback(),"private"===this.subredditType&&this?.dialog?.removeEventListener("rpl-dialog:request-close",this.preventDefault),this?.dialog?.hide()}render(){return e.x`<rpl-dialog dialog-id="protected-community-modal" overlay-blur ?open="${this.open}" .litTemplateChildren="${this.renderTemplate()}"> </rpl-dialog>${"private"===this.subredditType&&this.open?e.x` <div class="blurred-bg h-screen-without-header w-100 bg-no-repeat bg-cover" style="background-image:url('${this.getBgImagePath()}')"> <div class="shade h-full w-full"></div> </div>`:e.A}`}};o.styles=[a.t],e._([e.n({type:String,attribute:"subreddit-id"})],o.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"prefixed-name"})],o.prototype,"prefixedSubredditName",void 0),e._([e.n({type:String,attribute:"banner"})],o.prototype,"banner",void 0),e._([e.n({type:String,attribute:"icon"})],o.prototype,"icon",void 0),e._([e.n({type:String,attribute:"icon-color"})],o.prototype,"iconColor",void 0),e._([e.n({type:String,attribute:"subreddit-description"})],o.prototype,"subredditDescription",void 0),e._([e.n({type:Boolean,attribute:"allow-join-requests",reflect:!0})],o.prototype,"allowJoinRequests",void 0),e._([e.n({type:String,attribute:"last-join-request",converter:{fromAttribute:n}})],o.prototype,"lastJoinRequest",void 0),e._([e.n({type:String,attribute:"subreddit-type"})],o.prototype,"subredditType",void 0),e._([e.n({type:Boolean,attribute:"is-commenting-restricted"})],o.prototype,"isCommentingRestricted",void 0),e._([e.n({type:Boolean,attribute:"is-posting-restricted"})],o.prototype,"isPostingRestricted",void 0),e._([e.n({type:Boolean})],o.prototype,"open",void 0),e._([e.n({type:Boolean})],o.prototype,"isLoggedIn",void 0),e._([e.n({type:Boolean})],o.prototype,"isDesktop",void 0),e._([e.b()],o.prototype,"modMessageBody",void 0),e._([e.z("rpl-dialog")],o.prototype,"dialog",void 0),o=e._([e.c("protected-community-modal")],o);let s=class extends e.s{constructor(){super(...arguments),this.appearance="primary",this.size=a._.Medium,this.unstyled=!1,this.hasPendingRequest=()=>i(this.lastJoinRequest),this.handleOpenModal=e=>{var t;this.hasPendingRequest()&&this.pendingLink||!this._modal||(e.preventDefault(),e.stopPropagation(),this._modal.showModal(),a.e(this,(t=this._modal.subredditType,a.b({source:"content_gate",action:"click",noun:"request_approval_button"},{action_info:{setting_value:t}}))))},this.handleKeydown=e=>{"Enter"!==e.key&&"Space"!==e.key||this.handleOpenModal(e)}}get _modal(){return document.querySelector("protected-community-modal")}render(){return this.unstyled?e.x`<slot @click="${this.handleOpenModal}" @keydown="${this.handleKeydown}" name="${e.l(this.hasPendingRequest()?"pending-request":void 0)}"></slot>`:a.k({appearance:this.appearance,size:this.size,attributes:{href:this.hasPendingRequest()&&this.pendingLink?this.pendingLink:void 0,disabled:this.disabledWhenPending&&this.hasPendingRequest(),onclick:this.handleOpenModal},children:e.x`<slot name="${e.l(this.hasPendingRequest()?"pending-request":void 0)}"></slot>`})}};s.styles=[a.t],e._([e.n({type:String})],s.prototype,"appearance",void 0),e._([e.n({type:String})],s.prototype,"size",void 0),e._([e.n({type:Boolean})],s.prototype,"unstyled",void 0),e._([e.n({type:Boolean,attribute:"disabled-when-pending"})],s.prototype,"disabledWhenPending",void 0),e._([e.n({type:String,attribute:"pending-link"})],s.prototype,"pendingLink",void 0),e._([e.n({type:String,attribute:"last-join-request",converter:{fromAttribute:n}})],s.prototype,"lastJoinRequest",void 0),s=e._([e.c("protected-community-modal-trigger")],s)}));
SML.dm("CK47trMR",["CVEbQKiO","D7lSuCop"],(async(t,e)=>{const i={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},n=(t,e,n)=>{const{container:o,margin:s,padding:r,position:l,variantFlipOrder:a,positionFlipOrder:p}={container:document.documentElement.getBoundingClientRect(),...i,...n},{left:c,top:h}=e.style;e.style.left="0",e.style.top="0";const u=t.getBoundingClientRect(),d=e.getBoundingClientRect(),m={t:u.top-d.height-s,b:u.bottom+s,r:u.right+s,l:u.left-d.width-s},f={vs:u.left,vm:u.left+u.width/2+-d.width/2,ve:u.left+u.width-d.width,hs:u.top,hm:u.bottom-u.height/2-d.height/2,he:u.bottom-d.height},[g,E="middle"]=l.split("-"),_=p[g],b=a[E],{top:y,left:v,bottom:w,right:S}=o;for(const t of _){const i="t"===t||"b"===t,n=m[t],[o,s]=i?["top","left"]:["left","top"],[l,a]=i?[d.height,d.width]:[d.width,d.height],[p,c]=i?[w,S]:[S,w],[h,u]=i?[y,v]:[v,y];if(!(n<h||n+l+r>p))for(const l of b){const p=f[(i?"v":"h")+l];if(!(p<u||p+a+r>c))return e.style[s]=p-d[s]+"px",e.style[o]=n-d[o]+"px",t+l}}return e.style.left=c,e.style.top=h,null};function o(t,e=50,i={leading:!0,trailing:!0}){i={leading:!0,trailing:!0,...i};let n,o,s,r=null,l=0;const a=function(){l=i.leading?Date.now():0,r=null,s=t.apply(n,o),r||(n=o=null)};return function(...p){const c=Date.now();l||!1!==i.leading||(l=c);const h=e-(c-l);return n=this,o=p,h<=0||h>e?(r&&(clearTimeout(r),r=null),l=c,s=t.apply(n,p),r||(n=o=null)):r||!1===i.trailing||(r=setTimeout(a,h)),s}}const s=["button","link","menuitem","tab","checkbox","combobox","gridcell","application","treeitem"];class r{set popperTrigger(t){this._popperTrigger=t}get popperTrigger(){if(this._popperTrigger)return this._popperTrigger;let t=this.host.shadowRoot?.querySelector("slot[faceplate-popper-trigger]")?.assignedElements()?.[0]??null;let e=0;const i=t=>t instanceof HTMLButtonElement||t instanceof HTMLAnchorElement||s.includes(t?.getAttribute("role")??"");if(i(t))return t;for(;t&&e<5;){if(t=t?.assignedElements?t?.assignedElements()?.[0]??null:t?.children[0]??null,i(t))return t;e++}return null}get popperContent(){return this.host.shadowRoot?.querySelector("[faceplate-popper-content]")?.querySelector("slot")?.assignedElements()?.[0]??null}constructor(e,{containerElement:i=document.documentElement,scrollContainerElement:n=t.cy().scrollContainerElement(),allowCloseByEvent:s=!0,...r}){this.status="closed",this._containerSize=null,this.containerSizeChanged=t=>{if(!this._containerSize)return!0;const e=this._containerSize;return Object.keys(t).some((i=>e[i]!==t[i]))},this.updateAriaStates=async(t=!1)=>{const e="open"===this.currentState.state,i="tooltip"===this.host.shadowRoot?.querySelector("[faceplate-popper-content]")?.getAttribute("role"),n="dialog"===this.host.shadowRoot?.querySelector("[faceplate-popper-content]")?.getAttribute("role"),o=this.popperTrigger,s=this.popperContent,r=!this._options.manualTriggerFocus&&!t&&!n&&"function"==typeof o?.focus;i||(t&&(o?.setAttribute("aria-haspopup",n?"dialog":"true"),s?.setAttribute("hidden","")),e?(s?.removeAttribute("hidden"),this.currentState.animationFinished&&await this.currentState.animationFinished,s?.openMenu?.()):(s?.setAttribute("hidden",""),s?.closeMenu?.(),r&&o?.focus()),o?.setAttribute("aria-expanded",`${e}`))},this.referenceInViewport=o((()=>{const{reference:t=null,containerElement:e=document.documentElement}=this._options;if("open"!==this.status)return!1;if(!t)return!1;const i=t.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||e.clientHeight)&&i.right<=(window.innerWidth||e.clientWidth)}),80),this.isOffscreenBottom=o((t=>{const e=t.popper?.getBoundingClientRect(),i=this._options.reference?.getBoundingClientRect();return!!e&&window.innerHeight-(i.bottom+e.height)<16}),80),this.getPosition=t=>{const e=t.position??"bottom";return"open"===this.status?e:this.popper&&this.isOffscreenBottom(t)&&e?.includes("bottom")?e.replace("bottom","top"):t.position},this.reposition=()=>{this.referenceInViewport()?this.updatePopper():this.close()},this.open=async()=>{if(this.popper){if("open"===this.status)return Promise.resolve(null)}else this.initialize();this.popperContent?.removeAttribute("hidden"),this.updateOptions({});const t=this.showElement(this._options.popper,!0);return this.setStatus("open",t),t?.finished??Promise.resolve(null)},this.close=async t=>{if(t&&!this._options.allowCloseByEvent)return Promise.resolve(null);if(t&&(t.preventDefault(),t.stopPropagation()),"open"!==this.status)return Promise.resolve(null);const e=this.hideElement(this._options.popper,!0);return this.setStatus("closed",e),e?.finished??Promise.resolve(null)},this.toggle=async t=>"open"!==this.status?this.open():this.close(t),this.updatePopper=t=>{if(!this.popper)return null;const e=this.actualPosition;let i=null;try{i=this.popper.update(t)}catch(t){return null}const n=a(i);return n!==e&&(this.setActualPosition(n),this.host.requestUpdate()),i},this.setStatus=(t,e)=>{this.status=t,this.statusAnimation=e,this.statusAnimation?.finished.then((()=>{this.updateAriaStates()}))},this.setActualPosition=t=>{this.actualPosition=t},this.handleContainerResize=o((()=>{if("open"!==this.status)return;const t=(this._options.containerElement??document.documentElement).getBoundingClientRect();this.containerSizeChanged(t)&&(this._containerSize=t,this.updatePopper({...this._options,container:t}))}),80),this.getKeyframes=(t,e="show",i)=>{try{return new KeyframeEffect(t,[{visibility:"hidden",opacity:"0"},{visibility:"visible",opacity:"1"}],{fill:"both",direction:"show"===e?"normal":"reverse",duration:i,easing:"ease-in-out"})}catch(i){return()=>{"show"===e?(t.style.visibility="visible",t.style.opacity="1"):(t.style.visibility="hidden",t.style.opacity="0")}}},(this.host=e).addController(this),this._options={...r,containerElement:i,scrollContainerElement:n,allowCloseByEvent:s},this.actualPosition=this._options.position||null}async hostConnected(){await this.host.updateComplete,this.updateAriaStates(!0)}initialize(){this._containerSize=(this._options.containerElement??document.documentElement).getBoundingClientRect(),this.popper=((t,e,i)=>{const o="object"!=typeof t||t instanceof HTMLElement?{reference:t,popper:e,...i}:t;return{update(t=o){const{reference:e,popper:i}=Object.assign(o,t);if(!i||!e)throw new Error("Popper- or reference-element missing.");return n(e,i,o)}}})({...this._options,container:this._containerSize}),this.resizeObserver=new ResizeObserver(this.handleContainerResize),this._options.containerElement&&this.resizeObserver.observe(this._options.containerElement);(this._options.scrollContainerElement??window).addEventListener("scroll",this.reposition),this.replaceElement(void 0,this._options.popper)}hostDisconnected(){this._options.containerElement&&this.resizeObserver?.unobserve(this._options.containerElement);(this._options.scrollContainerElement??window).removeEventListener("scroll",this.reposition)}getOptions(){return this._options}updateOptions({...t}){const e={...this._options,...t},i={...e};this.popper&&(this._containerSize=(e.containerElement??document.documentElement).getBoundingClientRect(),i.container=this._containerSize);const n=i.popperElementKey||"popperElement";!i.popper&&n in this.host&&(i.popper=this.host[n]);const o=i.referenceElementKey||"popperReferenceElement";!i.reference&&o in this.host&&(i.reference=this.host[o]),i.popper!==this._options.popper&&this.replaceElement(this._options.popper,i.popper),i.containerElement!==this._options.containerElement&&(this._options.containerElement&&(this.resizeObserver?.unobserve(this._options.containerElement),this._options.containerElement.removeEventListener("faceplate-close",this.close)),i.containerElement&&(this.resizeObserver?.observe(i.containerElement),i.containerElement.addEventListener("faceplate-close",this.close))),this._options=i,this.updatePopper({...this._options,position:this.getPosition(i)})}get currentState(){return{state:this.status,animationFinished:this.statusAnimation?.finished.then((()=>{}))??Promise.resolve()}}showElement(t,e=!0){if(t)return t.style.display="",this.updatePopper(),l(this.getKeyframes(t,"show",e?150:0))}hideElement(t,e="open"===this.status){if(!t)return;if("closed"===this.status)return void(t.style.display="none");const i=l(this.getKeyframes(t,"hide",e?150:0));return i?.finished.catch((()=>{})).then((()=>{"closed"===this.status&&(t.style.display="none"),i?.cancel()})),i}replaceElement(t,e){t&&(this.hideElement(t,!1),t.removeEventListener("faceplate-close",this.close)),e&&("open"===this.status?this.showElement(e,!1):this.hideElement(e,!1),e.addEventListener("faceplate-close",this.close))}}r.defaultPopperContentStyles=t.i`[faceplate-popper-content]{position:fixed;visibility:hidden;opacity:0}`;const l=t=>{if("function"==typeof t)return t();if(!t.target)return;t.target.getAnimations().forEach((t=>t.cancel()));const e=new Animation(t);return e.play(),e},a=t=>{if(!t)return null;const[e,i]=t,n=e?{t:"top",b:"bottom",l:"left",r:"right"}[e]:null,o=i?{s:"start",m:"middle",e:"end"}[i]:null;return n&&o?`${n}-${o}`:null},p="moderator";return{P:r,Q:"pageNumber",U:"user-flair-assign-modal",a:()=>e.b({source:p,action:"click",noun:"assign_flair_dialog"}),b:()=>e.b({source:p,action:"click",noun:"remove_assigned_userflair_confirm"}),c:()=>e.b({source:p,action:"click",noun:"user_search"}),d:()=>e.b({source:p,action:"click",noun:"assigned_flair_edit_dialog"}),e:"user-flair__user-delete",f:()=>e.b({source:p,action:"click",noun:"table_pagination"}),g:"user-flair__user-edit",h:"user-flair__user-delete-modal",i:"pageSize",j:"before",k:"after",l:"query",m:t=>e.b({source:p,action:"click",noun:"username_input"},{action_info:t}),n:()=>e.b({source:p,action:"click",noun:"assigned_flair_edit_save"}),o:()=>e.b({source:p,action:"click",noun:"assign_flair_confirm"}),r:()=>e.b({source:p,action:"click",noun:"remove_assigned_userflair_dialog"})}}));
SML.dm("DEQ-l4mm",["CVEbQKiO","CK47trMR","CCphb8vV"],(async(e,t,s)=>{let i=class extends e.s{constructor(){super(...arguments),this.position="bottom-middle",this.triggerEvent="click",this.disabled=!1,this.manualTriggerFocus=!1,this.containerElement=document.documentElement,this.scrollContainerElement=window,this.onopen=null,this.onclose=null,this.emitter=s.v(this),this._popperController=new t.P(this,{position:this.position,referenceElementKey:"referenceElement",popperElementKey:"_menu",containerElement:this.containerElement,scrollContainerElement:this.scrollContainerElement,manualTriggerFocus:this.manualTriggerFocus}),this._eventUsedMap=new WeakMap,this.updated=e=>{e.has("position")&&this._popperController.updateOptions({position:this.position}),e.has("manualTriggerFocus")&&this._popperController.updateOptions({manualTriggerFocus:this.manualTriggerFocus})},this.handleDocumentClick=e=>{if(!(e.target instanceof Element)||this.hidden)return;const t=e.target.closest('[slot="menu"]'),s=this._eventUsedMap.has(e);null!==t||s||this.close()},this.handleEscape=e=>{"Escape"===e.key&&this.close(e)},this.addListenersWhileOpened=()=>{document.addEventListener("click",this.handleDocumentClick),document.addEventListener("keydown",this.handleEscape)},this.cleanupListenersWhileOpened=()=>{document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("keydown",this.handleEscape)},this.show=e=>{this.hidden=!1,this.emitter.dispatch("open"),this._menu.style.pointerEvents="auto",this._popperController.currentState.animationFinished.then((()=>{this.addListenersWhileOpened(),this.emitter.dispatch("opened")})),this.onopen?.(e??new Event("faceplate-dropdown-menu-show"))},this.close=(e,t)=>{!0===t?.disableRestoreFocus&&this._popperController.updateOptions({manualTriggerFocus:!0}),this.cleanupListenersWhileOpened(),this.hidden=!0,this.emitter.dispatch("close"),this._menu.style.pointerEvents="none",this._popperController.currentState.animationFinished.then((()=>{this.emitter.dispatch("closed"),this._popperController.updateOptions({manualTriggerFocus:this.manualTriggerFocus})})),this.onclose?.(e??new Event("faceplate-dropdown-menu-open"))},this.toggle=e=>{this.hidden?this.show(e):this.close(e)},this.handleClick=this.disabledHandler((e=>{this._eventUsedMap.set(e,!0),"click"===this.triggerEvent&&(this.hidden?this.show(e):this.close(e))})),this.handleMouseenter=this.disabledHandler((e=>{"hover"===this.triggerEvent&&this.show(e)})),this.handleMouseleave=this.disabledHandler((e=>{"hover"===this.triggerEvent&&this.close(e)})),this.handleFocusOut=this.disabledHandler((e=>{!this.hidden&&e.relatedTarget instanceof HTMLElement&&!n(this,e.relatedTarget)&&this.close(e,{disableRestoreFocus:!0})}))}get referenceElement(){return this.shadowRoot?.querySelector("#trigger")?.assignedElements()[0]??this}static get styles(){return[e.i`:host{--faceplate-dropdown-menu-z-index:1000;display:flex}#menu{border-radius:var(--rem8);box-shadow:0 4px 8px 0 rgba(0,0,0,.1),0 6px 12px 0 rgba(0,0,0,.25);display:inline-flex;justify-content:center;overflow:hidden;width:max-content;z-index:var(--faceplate-dropdown-menu-z-index);outline-offset:-1px}`,t.P.defaultPopperContentStyles]}get hidden(){return"closed"===this._popperController.currentState.state}set hidden(e){!0===e?this._popperController.close():this._popperController.open()}connectedCallback(){super.connectedCallback(),this.classList.add("connected")}firstUpdated(){this._menu&&(this._menu.style.pointerEvents="none")}disconnectedCallback(){super.disconnectedCallback(),this.cleanupListenersWhileOpened()}disabledHandler(e){return t=>{this.disabled||e(t)}}render(){return e.x` <slot id="trigger" aria-describedby="menu" faceplate-popper-trigger aria-controls="menu" @click="${this.handleClick}" @mouseenter="${this.handleMouseenter}" @mouseleave="${this.handleMouseleave}" @focusin="${this.handleMouseenter}" @focusout="${this.handleMouseleave}"></slot> <article id="menu" faceplate-popper-content @focusout="${this.handleFocusOut}"> <slot name="menu"></slot> </article> `}};e._([e.n({type:String})],i.prototype,"position",void 0),e._([e.n({type:String,attribute:"trigger-event"})],i.prototype,"triggerEvent",void 0),e._([e.n({type:Boolean})],i.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"manual-trigger-focus"})],i.prototype,"manualTriggerFocus",void 0),e._([e.z("#menu")],i.prototype,"_menu",void 0),e._([e.z("#trigger")],i.prototype,"_trigger",void 0),i=e._([e.c("faceplate-dropdown-menu")],i);const n=(e,t)=>{if(!e||!t)return!1;if(e===t)return!0;if(0===e.childElementCount&&!(e instanceof HTMLSlotElement))return!1;if(e.contains(t))return!0;if(e instanceof HTMLSlotElement&&e.assignedElements().some((e=>n(e,t))))return!0;if(e instanceof Element&&e.shadowRoot&&n(e.shadowRoot,t))return!0;for(const s of e.querySelectorAll("slot"))if(s.assignedElements().some((e=>n(e,t))))return!0;return!1};return{get F(){return i},S:class{constructor(e){this.previousChar="",this.focusedIndex=-1,this.cancelUpdate=!1,this.hasOptionVisualFocus=!1,this.hasSelection=!1,this.searchString="",this.searchTimeoutId=null,this.initializeSelections=()=>{this.options.forEach((e=>{this.makeSelection({selected:e.selected,option:e})}))},this.dispatchChangeEvent=()=>{this.hasSelection=!0,this.host.dispatchEvent(new CustomEvent(`${this.host.nodeName.toLowerCase()}:change`,{composed:!0,bubbles:!0,detail:{target:this.host}}))},this.onBlur=e=>{this.options.includes(e.relatedTarget)||(this.closeDropdownMenu(),this.host.blur())},this.onClick=()=>{(this.host.multiple&&!this.hasOptionVisualFocus||!this.host.multiple)&&this.host.dropdownMenu?.toggle()},this.shouldSelectFocusedOption=()=>{const e=this.host.hasAttribute("autocomplete"),t=!!this.host.readonly;return(e||t)&&!this.hasSelection&&this.hasOptionVisualFocus},this.onMenuClose=()=>{if(this.cancelUpdate||this.shouldSelectFocusedOption()&&this.selectFocusedOption(),this.selectedIndex>=0)this.focusedIndex=this.selectedIndex;else{if(this.host.readonly&&this.cancelUpdate)return;this.visibleOptions[this.focusedIndex]?.visualFocus(!1)}this.hasOptionVisualFocus=!1},this.onMenuOpen=()=>{this.focusedIndex=this.selectedIndex>=0?this.selectedIndex:-1,this.host.readonly&&this.focusedIndex<0&&(this.focusedIndex=0),this.focusedIndex>=0&&this.visuallyFocusOption(this.focusedIndex),this.hasSelection=!1,this.cancelUpdate=!1},this.onFaceplateOptionSelect=e=>{if(e.stopImmediatePropagation(),e.defaultPrevented)return;const t=e,{option:s,selected:i,allowSingleDeselection:n}=t?.detail||{};s&&this.makeSelection({option:s,selected:i,allowSingleDeselection:n})},this.makeSelection=async({selected:e,option:t,allowSingleDeselection:s})=>{this.host.multiple?(t?.dispatchEvent(this.createUpdateEvent(e)),await(t?.updateComplete)):(!s&&e||s)&&(e&&this.singleSelectionCache!==t&&this.singleSelectionCache?.dispatchEvent(this.createUpdateEvent(!1)),t?.selected!==e&&(t?.dispatchEvent(this.createUpdateEvent(e)),await(t?.updateComplete)),e&&(this.singleSelectionCache=t),setTimeout(this.closeDropdownMenu)),this.dispatchChangeEvent(),this.cancelUpdate=!1,this.host.requestUpdate()},this.visuallyFocusNextOption=()=>{this.focusedIndex===this.visibleOptions.length-1&&(this.focusedIndex=-1),this.visuallyFocusOption(++this.focusedIndex),this.hasOptionVisualFocus=!0},this.visuallyFocusPrevOption=()=>{this.focusedIndex<=0&&(this.focusedIndex=this.visibleOptions.length),this.visuallyFocusOption(--this.focusedIndex),this.hasOptionVisualFocus=!0},this.focusNextMatchedOption=e=>{if("number"==typeof this.searchTimeoutId&&window.clearTimeout(this.searchTimeoutId),this.searchTimeoutId=setTimeout((()=>{this.previousChar=this.searchString,this.searchString=""}),500),this.searchString+=e,this.searchString===this.previousChar){let e=this.focusedIndex+1;for(let t=0;t<this.visibleOptions.length;t++){if(e>this.visibleOptions.length-1&&(e=0),this.visibleOptions[e]?.displayText?.toLowerCase().startsWith(this.searchString)){this.visuallyFocusOption(e),this.focusedIndex=e;break}e++}}else{const e=this.visibleOptions.findIndex(((e,t)=>t!==this.focusedIndex&&e.displayText?.toLowerCase().startsWith(this.searchString)));-1!==e&&(this.focusedIndex=e,this.visuallyFocusOption(this.focusedIndex))}this.previousChar=this.searchString},this.selectFocusedOption=()=>{if(this.focusedIndex<0)return;const e=this.visibleOptions[this.focusedIndex];this.makeSelection({selected:!e.selected,option:e})},this.visuallyFocusOption=e=>{this.currentFocusedOption&&this.currentFocusedOption?.visualFocus(!1),this.currentFocusedOption=this.visibleOptions[e],this.currentFocusedOption?.visualFocus(!0),this.currentFocusedOption?.scrollIntoView()},this.openDropdownMenu=()=>{!this.host.disabled&&this.host.dropdownMenu?.hidden&&this.host.dropdownMenu?.show()},this.closeDropdownMenu=()=>{this.host.dropdownMenu?.hidden||this.host.dropdownMenu?.close()},this.handleKeyBindings=e=>{switch(e.key){case"ArrowDown":if(this.host.dropdownMenu?.hidden)return void this.openDropdownMenu();e.altKey||this.visuallyFocusNextOption();break;case"ArrowUp":this.openDropdownMenu(),this.visuallyFocusPrevOption();break;case"Escape":this.cancelUpdate=!0,this.closeDropdownMenu(),e.stopPropagation();break;case"Enter":case"Tab":this.host.dropdownMenu?.hidden||this.selectFocusedOption();break;default:e.key.match("^\\w$")&&(this.openDropdownMenu(),(this.host.multiple||this.host.readonly||this.host.referenceElement instanceof HTMLButtonElement)&&this.focusNextMatchedOption(e.key))}},(this.host=e).addController(this)}async hostConnected(){await this.host.updateComplete,this.resizeObserver=new ResizeObserver((()=>{this.host.style.setProperty("--select-width",`${this.host.getBoundingClientRect().width}px`)})),this.resizeObserver?.observe(this.host),this.host.addEventListener("faceplate-option:select",this.onFaceplateOptionSelect),this.host.addEventListener("keydown",this.handleKeyBindings),this.host.addEventListener("faceplate-dropdown-menu:open",this.onMenuOpen),this.host.addEventListener("faceplate-dropdown-menu:closed",this.onMenuClose),this.host.addEventListener("click",this.onClick),this.host.addEventListener("blur",this.onBlur),this.initializeSelections(),this.host.dropdownMenu&&(this.host.dropdownMenu.triggerEvent=void 0)}hostDisconnected(){this.resizeObserver?.disconnect(),this.host.removeEventListener("keydown",this.handleKeyBindings),this.host.removeEventListener("faceplate-option:select",this.onFaceplateOptionSelect),this.host.removeEventListener("faceplate-dropdown-menu:open",this.onMenuOpen),this.host.removeEventListener("faceplate-dropdown-menu:closed",this.onMenuClose),this.host.removeEventListener("click",this.onClick),this.host.removeEventListener("blur",this.onBlur)}get selectedOptions(){return this.options.filter((e=>e.selected))}get options(){return this.host.options??[]}get selectedIndex(){return this.options.findIndex((e=>e.selected))}get visibleOptions(){return(this.host.options??[]).filter((e=>!e.hasAttribute("hidden")))}get value(){return this.selectedOptions[0]?.value||""}set value(e){if(e===this.value)return;const t=this.options.findIndex((t=>t.value===e));if(-1===t)this.singleSelectionCache?.dispatchEvent(this.createUpdateEvent(!1)),this.singleSelectionCache=null;else{const e=this.options[t];this.makeSelection({selected:t>=0,option:e})}}createUpdateEvent(e){return new CustomEvent("faceplate-option:update",{composed:!0,detail:{selected:e}})}getSelectedOptionsAsStr(){return this.selectedOptions.map((e=>e.displayText)).join(", ").trim()}}}}));
SML.dm("B_ByM_ya",["CVEbQKiO"],(async e=>{const t=["input","a","faceplate-checkbox-input","faceplate-radio-input","faceplate-switch-input "],s=({collection:e,activeIndex:s})=>{let o=0;for(const i of e){i.tabIndex=o===s?0:-1;for(const e of Array.from(i.children)){const i=e.querySelector(t.join(","));i&&i instanceof HTMLElement&&(i.tabIndex=o===s?0:-1)}o++}};let o=class extends e.s{constructor(){super(...arguments),this.disableAutoFocus=!1,this.ariarole="menu",this.activeIndex=0,this.firstUpdated=()=>{this.prevFocusedElement=document.activeElement,this.hasAttribute("hidden")?this.toggleItemsTabbable(!1):this.openMenu()},this.toggleItemsTabbable=(e=!0,{overrideActiveIndex:t}={})=>{s({collection:this.getFocusableListItems(),activeIndex:t??(e?0:-1)})},this.openMenu=async()=>{const e=this.getFocusableListItems().findIndex((e=>"true"===e.getAttribute("aria-selected")));this.toggleItemsTabbable(!0,{overrideActiveIndex:-1===e?void 0:e}),this.disableAutoFocus||(e>=0&&e!==this.activeIndex&&(this.activeIndex=e),this.getFocusableListItems()[this.activeIndex]?.focus())},this.closeMenu=()=>{this.toggleItemsTabbable(!1)},this.setFocus=e=>{this.getFocusableListItems()[e]?.focus(),this.activeIndex=e},this.onFocusNext=()=>{const e=this.activeIndex===this.getFocusableListItems().length-1?0:this.activeIndex+1;s({collection:this.getFocusableListItems(),activeIndex:e}),this.setFocus(e)},this.onFocusPrev=()=>{const e=0===this.activeIndex?this.getFocusableListItems().length-1:this.activeIndex-1;s({collection:this.getFocusableListItems(),activeIndex:e}),this.setFocus(e)},this.onKeyDown=e=>{switch(e.key){case"Escape":this.prevFocusedElement.focus(),this.onclose&&this.onclose(e);break;case"ArrowDown":case"ArrowRight":this.onFocusNext(),e.preventDefault();break;case"ArrowUp":case"ArrowLeft":this.onFocusPrev(),e.preventDefault()}}}static get styles(){return e.i`:host{background-color:var(--color-neutral-background-strong)}ul{padding:var(--spacing-sm) 0;margin:0}`}getFocusableListItems(){const e="li:not([list-item-group]):not([list-item-header])",t=this.shadowRoot.querySelector("slot"),s=[];for(const o of t.assignedElements({flatten:!0}))o?.matches(e)&&s.push(o),s.push(...Array.from(o.querySelectorAll(e)));return s.map((e=>e.firstElementChild))}render(){return e.x` <ul role="${this.ariarole}" @keydown="${this.onKeyDown}"> <slot></slot> </ul> `}};e._([e.n({type:Boolean,attribute:"disable-auto-focus"})],o.prototype,"disableAutoFocus",void 0),e._([e.n({type:String})],o.prototype,"ariarole",void 0),e._([e.b()],o.prototype,"activeIndex",void 0),o=e._([e.c("faceplate-menu")],o);const i=e.e(class extends e.a{constructor(){super(...arguments),this.key=e.A}render(e,t){return this.key=e,t}update(t,[s,o]){return s!==this.key&&(e.b6(t),this.key=s),o}});return{get F(){return o},i}}));
SML.dm("CA4X4T8a",["CVEbQKiO","D7lSuCop"],(async(t,e)=>{const i="-comment-rtjson-content",n="#text",s=t=>t.replace(/\n/g,"").replace(/\s+/g," ").trim(),o=({commentId:t,noPrefix:e})=>{let n=t.replace(i,"");return e&&(n=n.replace("t1_","")),n},r=({commentId:t,permalink:e,snippetData:i})=>t?`https://publish.reddit.com/embed?url=https://www.reddit.com${e.replace(/\/[^/]+(?=\/$)|\/$/,"")}comment/${o({commentId:t,noPrefix:!0})}?snippet=${i}`:`https://publish.reddit.com/embed?url=https://www.reddit.com${e}?snippet=${i}`,l=["TR","TH","TD","TABLE","TBODY","THEAD"],d=new Set(["H1","P"]);let a=class extends t.s{constructor(){super(...arguments),this.postId="",this.permalink="",this.topOffset=0,this.leftOffset=0,this.snippetData="",this.isTitleSelected=!1,this.isSelectionOutOfRange=!1,this.isFullTextSelected=!1,this.isComment=!1,this.clearSelection=t=>{if(2!==t.button&&t.target.getAttribute("postid")!==this.postId){const e=((t,e)=>{for(;t;){if(t.id&&(t.id.includes(`${e}-post-rtjson-content`)||t.id.includes(i)))return t;t=t.parentNode}return null})(t.target,this.postId);this.richTextContainer=e,getSelection()?.empty(),this.snippetData="",this.isTitleSelected=!1,this.isSelectionOutOfRange=!1,this.isFullTextSelected=!1}},this.handleEmbedClick=()=>{this.isComment&&this.richTextContainer?.id?open(r({commentId:this.richTextContainer?.id,permalink:this.permalink,snippetData:this.snippetData}),"RedditEmbed"):open(r({permalink:this.permalink,snippetData:this.snippetData}),"RedditEmbed"),this.sendClickTelemetry()},this.isTripleClickHandled=t=>3===t.detail,this.getChildTextNode=t=>{let e;const i=t.childNodes;for(let t=0;t<i.length;t++){const o=i[t];if(o.nodeName!==n)continue;0!==s(o.textContent||"").length&&(e=o)}return e},this.getCorrectSelection=t=>{const e=getSelection();if(this.isTripleClickHandled(t)&&e?.anchorNode?.nodeName&&d.has(e?.anchorNode?.nodeName)){const t=this.getChildTextNode(e.anchorNode),i=t?.textContent?.length||0;e.setBaseAndExtent(t,0,t,i)}return e},this.calculateSnippetData=t=>{if(this.shouldShowButton)return void this.clearSelection(t);this.isComment=Boolean(this.richTextContainer?.id&&this.richTextContainer.id.startsWith("t1")),this.snippetData="";const e=this.getCorrectSelection(t),i=s(e?.toString()||"");if(!e||!i?.length)return;const o=this.richTextContainer?s(this.richTextContainer.innerText):"",r=s(this.postTitleElement.innerText);this.richTextContainer&&i===o&&(this.isFullTextSelected=!0);const d=e?.anchorNode;if(d.parentNode?.nodeName&&l.includes(d.parentNode?.nodeName))return;const a=e.getRangeAt(0);d.parentNode===this.postTitleElement&&(this.isTitleSelected=!0),(this.isTitleSelected&&i.length>r.length||this.richTextContainer&&i.length>o.length)&&(this.isSelectionOutOfRange=!0);const c=this.isTitleSelected?this.postTitleElement?.getBoundingClientRect():this.richTextContainer?.getBoundingClientRect(),h=e?.getRangeAt(0).getBoundingClientRect();if(c&&h){if(this.topOffset=h.top+scrollY,this.leftOffset=h.left+h.width/2,(this.shadowRoot?.host).style.setProperty("--left-offset",`${this.leftOffset}px`),(this.shadowRoot?.host).style.setProperty("--top-offset",this.topOffset-32-4+"px"),this.isTitleSelected||this.isFullTextSelected)return void this.sendViewTelemetry();if(e.rangeCount>0){let t=-1;const e=Array.from((this.isComment?this.richTextContainer?.children[0].children:this.richTextContainer?.children)||[]).filter((t=>t.nodeName!==n));for(let i=0;i<e.length;i++){const n=e[i];if(a.intersectsNode(n)){t=i;break}}if(-1!==t&&i){const n=(({nodeText:t,selectedText:e})=>{if(!t||!e)return-1;const i=t.length,n=e.length,s=[];for(let t=0;t<=i;t++)s[t]=new Array(n+1).fill(0);let o=0,r=0;for(let l=1;l<=i;l++)for(let i=1;i<=n;i++)t[l-1]===e[i-1]&&(s[l][i]=s[l-1][i-1]+1,s[l][i]>o&&(o=s[l][i],r=l-1));const l=t.substring(r-o+1,r+1);return l?t.indexOf(l):-1})({nodeText:s(e[t].innerText),selectedText:i});t>-1&&n>-1&&i.length>0&&(this.snippetData=`${t}_${n}_${i.length}`,this.sendViewTelemetry())}}}},this.getEventDetails=()=>{const t={};return this.isComment&&this.richTextContainer?.id&&(t.comment={id:o({commentId:this.richTextContainer.id})}),t},this.sendViewTelemetry=()=>{const t=this.getEventDetails();this.dispatchEvent(e.c(e.cl,{details:t}))},this.sendClickTelemetry=()=>{const t=this.getEventDetails();this.dispatchEvent(e.c(e.cm,{details:t}))}}get shouldShowButton(){return(this.snippetData.length||this.isTitleSelected||this.isFullTextSelected)&&!this.isSelectionOutOfRange}connectedCallback(){super.connectedCallback();const t=document.getElementById(`post-title-${this.postId}`);t&&(this.postTitleElement=t),document.addEventListener("mousedown",this.clearSelection),document.addEventListener("mouseup",this.calculateSnippetData)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("mousedown",this.clearSelection),document.removeEventListener("mouseup",this.calculateSnippetData)}render(){return t.x` ${this.shouldShowButton?t.x` <div class="button-container bg-neutral-content-strong rounded-full shadow-sm flex"> ${e.k({appearance:"plainInverted",size:e._.Small,attributes:{onclick:this.handleEmbedClick},leadingIcon:t.ar(),children:"Embed"})} </div> `:""} `;}};a.styles=[t.i`.button-container{position:absolute;left:var(--left-offset);top:var(--top-offset);transform:translateX(-50%);z-index:1}`,e.t],t._([t.n({type:String})],a.prototype,"postId",void 0),t._([t.n({type:String})],a.prototype,"permalink",void 0),t._([t.b()],a.prototype,"topOffset",void 0),t._([t.b()],a.prototype,"leftOffset",void 0),t._([t.b()],a.prototype,"snippetData",void 0),t._([t.b()],a.prototype,"isTitleSelected",void 0),t._([t.b()],a.prototype,"isSelectionOutOfRange",void 0),t._([t.b()],a.prototype,"isFullTextSelected",void 0),t._([t.b()],a.prototype,"isComment",void 0),a=t._([t.c("embed-snippet-share-button")],a)}));
SML.dm("DnwTtnNv",["CVEbQKiO","D7lSuCop"],(async(t,s)=>{const e=t.s,o=new DOMParser;let d=class extends e{constructor(){super(...arguments),this.userId="",this.subredditId="",this.pubsub=new s.P(this),this.onUpdateFlairEvent=({html:t,subredditId:s,userId:e,isEnabled:d})=>{if(this.userId===e&&this.subredditId===s){const s=t&&d,e=s?t:'<span class="hidden"></span>',i=o.parseFromString(e,"text/html").body.firstChild;i&&(this.shadowRoot?.querySelector("slot")?.assignedElements({flatten:!0})[0].replaceWith(i),s?this.showHost():this.hideHost())}}}static get styles(){return t.i`:host{--display:flex;display:var(--display);overflow:hidden}`}onSlotChanged(t){const s=t.target?.assignedElements({flatten:!0});s?.some((t=>"SPAN"===t.nodeName&&t.classList.contains("hidden")))&&this.hideHost()}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(s.T.CommunityAuthorFlairUpdated,this.onUpdateFlairEvent)}hideHost(){(this.shadowRoot?.host).style.setProperty("--display","none")}showHost(){(this.shadowRoot?.host).style.setProperty("--display","flex")}render(){return t.x`<slot @slotchange="${this.onSlotChanged}"></slot>`}};t._([t.n()],d.prototype,"userId",void 0),t._([t.n()],d.prototype,"subredditId",void 0),d=t._([t.c("author-flair-event-handler")],d)}));
SML.dm("58f2cEWE",["D7lSuCop","CVEbQKiO"],(async(e,t)=>{const i=e=>e instanceof HTMLButtonElement||e instanceof HTMLAnchorElement||["button","link","menuitem","tab","checkbox","combobox","gridcell","application","treeitem"].includes(e?.getAttribute("role")??"");class n extends e.w{constructor(){super(...arguments),this._triggerElement=null,this.keydown=!1,this.dialogId="",this.noModal=!1,this.handleClick=()=>{this.keydown||this.sendActivatedEvent()},this.handleKeydown=e=>{"Enter"===e.key&&(this.keydown=!0)},this.handleKeyup=e=>{"Enter"===e.key&&!0===this.keydown&&(this.keydown=!1,this.sendActivatedEvent())},this.handleBlur=()=>{this.keydown=!1}}set triggerElement(t){const i=this._triggerElement?.getAttribute("aria-expanded")??!1,n=this._triggerElement,r=t;n&&(n?.removeAttribute("aria-haspopup"),n?.removeAttribute("aria-expanded"),n?.removeEventListener("click",this.handleClick),n?.removeEventListener("keydown",this.handleKeydown),n?.removeEventListener("keyup",this.handleKeyup),n?.addEventListener("blur",this.handleBlur)),r&&(this.action!==e.eR.Hide&&(r.setAttribute("aria-haspopup","dialog"),r.setAttribute("aria-expanded",`${i}`)),r.addEventListener("click",this.handleClick),r.addEventListener("keydown",this.handleKeydown),r.addEventListener("keyup",this.handleKeyup),r.addEventListener("blur",this.handleBlur),this._triggerElement=r)}get triggerElement(){return this._triggerElement}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),"action"===e&&(this.triggerElement=this._triggerElement)}addOpenAttributes(){this.triggerElement&&this.triggerElement.setAttribute("aria-expanded","true")}removeOpenAttributes(){this.triggerElement&&this.triggerElement.setAttribute("aria-expanded","false")}handleSlotChange(){this.triggerElement=((e,t=5)=>{let n=e??null,r=0;if(i(n))return n;for(;n&&r<t;){if(n=n?.assignedElements?n?.assignedElements()?.[0]??null:n?.children[0]??null,i(n))return n;r++}return null})(this.slottedElements?.[0]??null)}sendActivatedEvent(){if(this.triggerElement?.hasAttribute("disabled"))return;if(!this.dialogId)return void console.warn("No dialogId set on rpl-dialog-trigger, unable to trigger");const e={dialogId:this.dialogId,triggerElement:this,noModal:this.noModal,action:this.action};this.emitter.dispatch("trigger-clicked",{bubbles:!0,composed:!0,detail:e})}render(){return t.x`<slot @slotchange="${this.handleSlotChange}"></slot>`}}t._([t.n({type:String,reflect:!0,attribute:"dialog-id"})],n.prototype,"dialogId",void 0),t._([t.n({type:Boolean,reflect:!0,attribute:"no-modal"})],n.prototype,"noModal",void 0),t._([t.n({type:String,reflect:!0})],n.prototype,"action",void 0),t._([t.k()],n.prototype,"slottedElements",void 0);var r=t.i`:host{display:contents}`;let l=class extends n{};l.styles=r,l=t._([t.c("rpl-dialog-trigger")],l)}));
SML.dm("DZMRR9gi",["CVEbQKiO","B8BAxqC_","D7lSuCop","CCphb8vV"],(async(e,a,i,n)=>{var o;!function(e){e.BORDERED="bordered",e.SECONDARY="secondary"}(o||(o={}));let r=class extends a.T{constructor(){super(...arguments),this.prefix="",this.type="text",this.appearance=o.SECONDARY,this.persistentTrailingIcon=!1,this.withSelect=!1}static get styles(){return[super.styles,e.i`input{outline:0;background:0 0;border:none;width:100%}:host([appearance=bordered]) .label-container:not(.without-label) .input-container.stateful-input{transform:translateY(0)}::slotted([slot=leadingIcon]){margin-inline-end:var(--spacer-xs);display:flex}.input-prefix{margin-inline-end:var(--spacer-4xs)}.input-suffix{margin-inline-start:var(--spacer-4xs)}.input-prefix,.input-suffix{flex-shrink:0}:host([appearance=bordered]) .label-container{border-radius:20px 20px 0 0;align-items:flex-end;padding-bottom:var(--spacer-2xs)}:host([appearance=bordered]) .input-boundary-box{margin-bottom:var(--rem6);align-items:center;padding:0}:host .label-container.without-label{height:var(--rem40)}:host(:focus-within) .label-container:not(.with-trailing-button) ::slotted([slot=clearButton].has-value),:host([faceplate-validity=invalid]:not([disabled])[faceplate-dirty]) ::slotted([slot=clearButton].has-value){display:inline-block}`]}dispatchFocusin(){}render(){return super.renderInput(e.x`<input aria-labelledby="fp-input-label" ?readonly="${this.readonly}" type="${this.type}" pattern="${e.l(this.pattern)}" @input="${this.onInput}" @change="${this.onChange}" @mouseover="${e=>e.stopPropagation()}" .value="${a.l(this.value)}" name="${e.l(this.withSelect?void 0:this.name)}" minlength="${e.l(this.minLength)}" maxlength="${e.l(this.allowMaxLengthOverflow?void 0:this.maxLength)}" min="${e.l(this.min)}" max="${e.l(this.max)}" placeholder="${e.l(0===this.placeholder.length?void 0:this.placeholder)}" ?disabled="${this.disabled}" ?required="${this.required}" autocomplete="${e.l(this.autocomplete)}" inputmode="${e.l(this.inputmode)}" step="${e.l(this.step)}">`)}};e._([e.n({type:String})],r.prototype,"prefix",void 0),e._([e.n({type:String})],r.prototype,"type",void 0),e._([e.n({type:String})],r.prototype,"pattern",void 0),e._([e.n({converter:e=>"string"==typeof e&&"any"===e.toLowerCase()?"any":isNaN(e)?void 0:Number(e)})],r.prototype,"step",void 0),e._([e.n({type:Number})],r.prototype,"min",void 0),e._([e.n({type:Number})],r.prototype,"max",void 0),e._([e.n({type:String,reflect:!0})],r.prototype,"appearance",void 0),e._([e.n({type:Boolean,attribute:"persistent-trailing-icon"})],r.prototype,"persistentTrailingIcon",void 0),e._([e.n({type:Boolean,attribute:"with-select"})],r.prototype,"withSelect",void 0),r=e._([e.c("faceplate-text-input")],r);let t=n.c1({videoMinDimensionError:(e,a)=>`Videos must be at least ${e}x${a}`,videoMinRateError:e=>`Videos must have a bitrate of at least ${Math.floor(e)}KB/s`,videoCodecError:()=>"Unsupported video codec",videoIsTooShortError:e=>i.bH({one:`Videos must be at least ${e} second`,other:`Videos must be at least ${e} seconds`,count:e}),videoIsTooLongError:e=>i.bH({one:`Videos must be shorter than ${e} minute`,other:`Videos must be shorter than ${e} minutes`,count:e}),videoMaxSizeError:e=>`Videos must be ${e}GB or smaller`,videoMimetypeError:()=>"Upload an MP4 or MOV",imageMaxSizeError:e=>`Upload an image less than ${e}MB`,imageMaxSizeErrorKB:e=>`Upload an image less than ${e}KB`,gifMaxSizeError:e=>`Upload a GIF less than ${e}MB`,gifMaxSizeErrorKB:e=>`Upload a GIF less than${e}KB`,imageMaxDimensionError:(e,a)=>`Upload an image smaller than ${e}x${a}`,imageMinDimensionError:(e,a)=>`Upload an image at least ${e}x${a}`,imageOnlyGifsError:()=>"Upload a GIF",imageOnlyStaticImagesError:()=>"Upload a PNG, JPG, WEBP",imageStaticOrGifError:()=>"Upload a PNG, JPG, WEBP, or GIF",or:()=>"or ",imageTypeJoin:e=>`${s(e).reduce(((e,a,i,n)=>`${e}${d(i,n)}${$(i,n)}${a}`),"")}`,imageInvalidTypeErrorGeneric:()=>"Upload an image",imageInvalidTypeErrorSpecified:e=>`Upload a ${e}`});const s=e=>e.reduce(((e,a)=>{const i=n.bk.get(a)||a;return e.includes(i)?e:[...e,i]}),[]),d=(e,a)=>e>0?a.length>2?", ":" ":"",$=(e,a)=>a.length>1&&e===a.length-1?t.or():"",l=["image/jpeg","image/png","image/webp"],u=["image/gif"],m=[...l,...u],h=1024,I=1048576,c=20971520,p=104857600,N=e=>e.split(",").map((e=>e.trim())),P=e=>{const a="accept"in e?e.accept:void 0,{allowStaticImages:i=!1,allowAnimatedImages:n=!1}="allowStaticImages"in e?e:{};return{accept:a,allowStaticImages:i,allowAnimatedImages:n}};function G(e){const{accept:a,allowStaticImages:i,allowAnimatedImages:n}=P(e);if(a&&a?.includes("image/*"))return t.imageInvalidTypeErrorGeneric();if(a){const e=N(a);return t.imageInvalidTypeErrorSpecified(t.imageTypeJoin(e))}return n&&!i?t.imageOnlyGifsError():i&&!n?t.imageOnlyStaticImagesError():t.imageStaticOrGifError(a)}function b(e){const a=[],{accept:i,allowStaticImages:n,allowAnimatedImages:o}=P(e);return i?N(i):(n&&a.push(...l),o&&a.push(...u),a)}return{get F(){return r},S:m,get T(){return o},a:b,g:async function(e){const a=URL.createObjectURL(e),{width:i,height:n}=await function(e){return new Promise(((a,i)=>{const n=new Image;n.onload=()=>{a({width:n.width,height:n.height})},n.onerror=e=>{i(e)},n.src=e}))}(a);return{src:a,type:e.type,size:e.size,width:i,height:n}},get u(){return t},v:function(e,a){const{width:i,height:n,type:o,size:r}=e,{minImageDimension:s,maxImageDimension:d,maxImageFileSize:$=c,maxGifFileSize:l=p}=a,{accept:u,allowStaticImages:m,allowAnimatedImages:N}=P(a),k=b(a);if(!(k.includes(o)||k.includes("image/*")&&o.startsWith("image/")))return{valid:!1,error:G(u?{accept:u}:{allowStaticImages:m,allowAnimatedImages:N}),reason:"INVALID_IMAGE_TYPE_ERROR"};if(s&&(i<s||n<s))return{valid:!1,error:t.imageMinDimensionError(s,s),reason:"IMAGE_MIN_DIMENSION_ERROR"};if(d&&(i>d||n>d))return{valid:!1,error:t.imageMaxDimensionError(d,d),reason:"IMAGE_MAX_DIMENSION_ERROR"};if("image/gif"===o&&r>l){return{valid:!1,error:Math.floor(l/I)<1?t.gifMaxSizeErrorKB(Math.floor(l/h)):t.gifMaxSizeError(Math.floor(l/I)),reason:"IMAGE_SIZE_LIMIT_EXCEEDED_ERROR"}}if(o.startsWith("image/")&&"image/gif"!==o&&r>$){return{valid:!1,error:Math.floor($/I)<1?t.imageMaxSizeErrorKB(Math.floor($/h)):t.imageMaxSizeError(Math.floor($/I)),reason:"IMAGE_SIZE_LIMIT_EXCEEDED_ERROR"}}return{valid:!0,error:null}}}}));
SML.dm("BZ7lqt1T",["CVEbQKiO","D7lSuCop","D9dm-Sy6"],(async(t,e,i)=>{function n(t){if(i.a(t)&&(t.checked=t.hasAttribute("checked")),i.b(t))t.formResetCallback&&t.formResetCallback();else if(t instanceof HTMLInputElement)t.value=t.getAttribute("value")||"";else if(t instanceof HTMLTextAreaElement)t.value=t.textContent||"";else if(i.d(t))for(const e of t.options)e.selected=e.hasAttribute("selected");else t instanceof HTMLOutputElement&&(t.value=t.defaultValue)}function s(t){const i={};for(const n of t){const[t,s]=n;if(s instanceof File)throw e.dk(t);Object.prototype.hasOwnProperty.call(i,t)?Array.isArray(i[t])?i[t].push(s):i[t]=[i[t],s]:i[t]=s}return i}const a=(t,e=0)=>{if(6!==e)return t instanceof HTMLInputElement||t instanceof HTMLButtonElement?t:t?a(t.parentElement,e+1):void 0};function r(t){let i;document.activeElement&&document.activeElement!==document.body&&(i=e.dl(document.activeElement)),!i&&t&&t.target instanceof Element&&(i=function(t){var e;for(const i of null!==(e=t.composedPath())&&void 0!==e?e:[])if((i instanceof HTMLInputElement||i instanceof HTMLButtonElement)&&"submit"===i.type)return i}(t));const n=i instanceof HTMLButtonElement||i instanceof HTMLInputElement;if(i&&t&&!n&&(i=a(i.parentElement)),i)return(i instanceof HTMLInputElement||i instanceof HTMLButtonElement)&&"submit"===i.type?i:void 0}function o(t){return t instanceof HTMLElement&&Object.prototype.hasOwnProperty.call(t.dataset,"faceplateConstraint")}function l(t,i,n){return e.c("faceplate-alert",{level:e.a4.error,message:e.dq("Form submission failed"),meta:null==t?void 0:t.toString(),sourceElement:i,cause:n})}const c={[e.br.UrlEncoded]:e.dm,[e.br.JSON]:function(t){return JSON.stringify(s(t))},[e.br.FormData]:t=>t};let d=class extends t.s{constructor(){super(...arguments),this.accept="text/vnd.reddit.partial+html, application/json",this.enctype=e.br.UrlEncoded,this.action="",this.disabled=!1,this.method=e.b1.Post,this.target="",this.partialMode=e.g.Append,this.novalidate=!1,this.validationTrigger="focusout",this._events=new e.E(this),this.formSubmissionInProgress=!1,this.rulesDidChange=!1,this.focusedInputForValiditySinceLastSubmit=!1,this._shouldRebuildElements=!0,this._elements={},this._validationObserverCount=0,this._asyncInputOperations=0,this.requester=e.dn,this.encoders=c,this._handleInput=this._events.define("input",(()=>{this._shouldRebuildElements=!0})),this._handleFormSubmit=this._events.define("submit",(t=>{const e=t.target;if(!(e&&e instanceof HTMLFormElement))return;t.preventDefault();const i=r(t);this.submit(e.action,void 0,i)})),this._handleClick=this._events.define("click",(t=>{const e=r(t);e&&(t.preventDefault(),this.submit(this.action,void 0,e))})),this._handleFocusIn=this._events.define("focusin",(t=>{if(i.e(t.target)&&o(t.target))if(this.formSubmissionInProgress){const e=this;t.target.addEventListener("input",(function t(i){var n;e.validateElementAgainstRules(i.target)&&(null===(n=i.target)||void 0===n||n.removeEventListener("input",t))}))}else t.target.setCustomValidity("")})),this.configureValidation=()=>this.addEventListener(this.validationTrigger,(t=>{i.e(t.target)&&(o(t.target)&&this.validateElementAgainstRules(t.target),i.F in t.target.constructor&&t.target.syncInputValidity(),this.notifyObservers(t.target))})),this._handleFaceplateAlert=this._events.define("faceplate-alert",(t=>{const{level:i,name:n,message:s}=t.detail;i===e.a4.error&&n&&s&&this.invalidateFieldWithMessage(n,s)&&(t.target.remove(),t.stopPropagation())})),this.register=t=>{this.dispatchEvent(new CustomEvent("_faceplate-register-input",{detail:{target:t}}))},this._handleRegister=this._events.define("_faceplate-register-input",(t=>{var e;t.stopImmediatePropagation(),t.detail.register&&(null===(e=t.detail)||void 0===e||e.register(this)),this._shouldRebuildElements=!0;const{target:i}=t.detail;i.syncInputValidity(!1),this.notifyObservers(i)}))}updated(t){t.has("validationTrigger")&&(t.get("validationTrigger")&&this.removeEventListener(t.get("validationTrigger"),this.configureValidation),this.configureValidation())}get canSubmit(){return!(this.disabled||this.formSubmissionInProgress||this._asyncInputOperations>0)}get elements(){if(this._shouldRebuildElements){this._elements={};for(const t of this.recognizedInputs()){const{name:e}=t;if(e)if(e in this._elements){const n=this._elements[e];let s;Array.isArray(n)?(s=n,n.push(t)):(s=[n,t],s.value=i.g(n)&&n.checked?n.value:"",this._elements[e]=s),i.g(t)&&t.checked&&(s.value=t.value)}else this._elements[t.name]=t}this._shouldRebuildElements=!1}return this._elements}static get styles(){return t.i`:host{display:block;margin-bottom:1rem}`}render(){return t.x` <slot></slot> `}addEventListener(t,e,i){super.addEventListener(t,e,i),"_faceplate-validation-change"===t&&(this._validationObserverCount+=1)}removeEventListener(t,e,i){super.removeEventListener(t,e,i),"_faceplate-validation-change"===t&&(this._validationObserverCount-=1)}async disableUntil(t){this._asyncInputOperations+=1;try{await t}finally{this._asyncInputOperations-=1}}notifyObservers(t){if(this._validationObserverCount){const i=e.dp("_faceplate-validation-change",{bubbles:!0,cancelable:!1,composed:!1,detail:{input:t,message:t.validationMessage,name:t.name}});this.dispatchEvent(i)}}invalidateFieldWithMessage(t,e){const n=this.querySelector(`[name="${t}"]`);return!!i.e(n)&&(n.setCustomValidity(e),n.setAttribute("faceplate-dirty",""),this.notifyObservers(n),e&&n.addEventListener("input",(function t(){n.setCustomValidity(""),n.removeEventListener("input",t)})),e&&!this.focusedInputForValiditySinceLastSubmit&&(this.focusedInputForValiditySinceLastSubmit=!0,this.reportFieldValidity(n)),!0)}reportFieldValidity(t){const i=t.reportValidity();if(!i&&null===t.offsetParent){const i=e.c("faceplate-alert",{level:e.a4.error,message:e.dq("Validation error on hidden input"),meta:`"${t.name}": ${t.validationMessage}`,sourceElement:this.tagName,cause:"faceplate-form-input-validation-failure"});this.dispatchEvent(i)}return i}get targetElement(){return this.target&&document.querySelector(this.target)||this}get isValid(){let t=!0;const e=r(),n=!(this.novalidate||e&&e.hasAttribute("formnovalidate"));for(const e of this.recognizedInputs())if(i.e(e)){if(e.disabled)continue;if(e.matches(":disabled"))continue;if(n&&(this.validateElementAgainstRules(e),!e.checkValidity())){t=!1;break}}return t}async submit(i=this.action,n,s){var a,r,o,c;if(!this.canSubmit)return;this.formSubmissionInProgress=!0,this.focusedInputForValiditySinceLastSubmit=!1;try{const f=e.c("faceplate-submit");if(this.dispatchEvent(f),f.defaultPrevented)return;const p=this.buildRequest(n,s);if(!p)return;if("dialog"===p.method){const t=this.closest("faceplate-dialog");if(!t)throw new Error("Unable to find parent faceplate-dialog element to close with form submission");return t.close(p.body)}let m=this.enctype;if(s&&s.hasAttribute("formenctype")&&(m=s.getAttribute("formenctype")),"log"===p.method){const t=this.encoders[m];return console.log(t?t(p.body):p.body)}s&&s.hasAttribute("formaction")&&(i=s.getAttribute("formaction"));const g={enctype:m,encoders:this.encoders,credentials:this.credentials};try{for(var d,u=!0,h=t.h(this.requester(i,p,g));!(a=(d=await h.next()).done);){c=d.value,u=!1;try{const t=c;if("faceplate-error"===t.type){const e=l(t.detail,this.tagName,"faceplate-form-fetch-failure");this.dispatchEvent(e);break}if(this.dispatchEvent(t),"faceplate-response"===t.type){await this.handleResponse(t.detail.response);break}}finally{u=!0}}}catch(t){r={error:t}}finally{try{u||a||!(o=h.return)||await o.call(h)}finally{if(r)throw r.error}}}catch(t){const e=l(t,this.tagName,"faceplate-form-submission-uncaught-error");this.dispatchEvent(e)}finally{return void(this.formSubmissionInProgress=!1)}}validateElementAgainstRules(t){var n;if(!o(t))return!0;if(this.rulesDidChange){const t=e.c("faceplate-form-constraints-changed");this.dispatchEvent(t),this.rulesDidChange=!1}t.setCustomValidity("");const s=i.h.getRegisteredElements(this);if(!s)return!0;const a=null===(n=t.dataset.faceplateConstraint)||void 0===n?void 0:n.split(" ");if(!a||!a.length)return!0;for(const e of a){const i=s.get(e);if(!i){console.warn(`Skipping validation against unknown rule "${e}"`);continue}const n=t.value;if(null!==n&&!i.validate(n))return t.setCustomValidity(i.message),!1}return!0}*elementsIterator(){yield*this.recognizedInputs()}recognizedInputs(){let t=new Set;for(const e of[...this.querySelectorAll("*")].filter(i.e))t.add(e);const e=this.querySelectorAll("output");for(let i=0;i<e.length;i++)t.add(e[i]);const n=i.j.getRegisteredElements(this);return n&&(t=new Set([...t,...n])),t}reset(){for(const t of this.recognizedInputs())n(t)}buildRequest(t,n){const s=new FormData;!n&&arguments.length<3&&(n=r());const a=!(this.novalidate||n&&n.hasAttribute("formnovalidate"));for(const t of this.recognizedInputs())if(i.e(t)){if(t.disabled)continue;if(t.matches(":disabled"))continue;if(a&&(this.validateElementAgainstRules(t),!this.reportFieldValidity(t)))return null;if(i.a(t)&&!t.checked)continue;const{name:e,value:n}=t;if(null===n)continue;if(n instanceof FormData){for(const t of n)s.append(t[0],t[1]);continue}if(!e)continue;if(i.d(t)&&t.multiple)for(const i of t.options)i.selected&&s.append(e,i.value);else if(t instanceof HTMLInputElement&&"file"===t.type){const i=t.files;if(i)for(const t of i)s.append(e,t)}else s.append(e,n)}if(t)for(const e of t)s.append(e.name,e.value);let o=this.method;return n&&(n.name&&n.value&&s.append(n.name,n.value),n.hasAttribute("formmethod")&&(o=e.dr(n.getAttribute("formmethod")))),{body:s,method:o.toLowerCase(),headers:{Accept:this.accept}}}async handleResponse(t){const i=e.cT(t);if("text/vnd.reddit.partial+html"===i){const i=await t.text(),n=this.targetElement;e.aC(i,n,this.partialMode)}else if("application/json"===i&&t.status>=400){const i=await t.json();if("object"==typeof(n=i)&&n&&Object.prototype.hasOwnProperty.call(n,"title")&&Object.prototype.hasOwnProperty.call(n,"message")){const n=e.c("faceplate-alert",{level:e.a4.error,name:i.title,message:e.dq("Form responded with error"),meta:i.message,sourceElement:this.tagName,cause:`faceplate-form-response-error-${t.status}`});this.dispatchEvent(n)}}else"text/html"===i&&t.redirected&&(window.location.href=t.url);var n}};return t._([t.n({type:String})],d.prototype,"accept",void 0),t._([t.n({type:String})],d.prototype,"enctype",void 0),t._([t.n({type:String})],d.prototype,"action",void 0),t._([t.n({type:Boolean,reflect:!0})],d.prototype,"disabled",void 0),t._([t.n({converter:e.dr,reflect:!0})],d.prototype,"method",void 0),t._([t.n({type:String})],d.prototype,"target",void 0),t._([t.n({type:String,attribute:"partial-mode"})],d.prototype,"partialMode",void 0),t._([t.n({type:String})],d.prototype,"novalidate",void 0),t._([t.n({type:String})],d.prototype,"credentials",void 0),t._([t.n({type:String,attribute:"validation-trigger"})],d.prototype,"validationTrigger",void 0),d=t._([t.c("faceplate-form")],d),i.r(d),{get F(){return d},c:s}}));
SML.dm("BAeMrwFj",["CVEbQKiO","BcR8gLw3","D7lSuCop","CITAGWir","DZMRR9gi","BZ7lqt1T"],(async(e,t,a)=>{const s=()=>a.b({source:"content_gate",action:"click",noun:"continue"});let o=class extends(a.d(e.s)){constructor(){super(...arguments),this.country="",this.subredditName="",this.subredditId="",this.showMessageModeModal=!1,this.messageModsType="request",this.modMessageTextArea=a.aE(),this.modSubjectText=a.aE(),this.setPrefGatedOptIn=async()=>{if(this.trackEvent(s()),this.isLoggedIn&&this.subredditName.length)try{await a.v({operation:a.O.OptInToGatedSubreddit,variables:{input:{subredditName:this.subredditName}}})}catch(e){window.console.error(e)}finally{this.reload()}else this.setCookie(a.cJ)},this.setPrefQuarantinedOptIn=async()=>{if(this.trackEvent(s()),this.isLoggedIn&&this.subredditName.length)try{await a.v({operation:a.O.UpdateSubredditQuarantineOptInState,variables:{input:{optInState:a.cK.OptedOut,subredditId:this.subredditId}}})}catch(e){window.console.error(e)}finally{this.reload()}else await this.setCookie(a.cL),this.reload()},this.setNsfwAllowed=async()=>{if(this.isLoggedIn){const{data:e}=await a.v({operation:a.O.UpdateProfileSettings,variables:{input:{isNsfw:!0}}});e.updateProfileSettings?.ok&&this.reload()}else this.setCookie(a.J)},this.onCancelModModal=()=>{this.showMessageModeModal=!1},this.messageMod=async()=>{this.showMessageModeModal=!0,this.messageModsType="message"},this.requestToJoin=async()=>{this.showMessageModeModal=!0,this.messageModsType="request",this.trackEvent(a.b({source:"content_gate",action:"click",noun:"request_to_join_button"}))},this.sendMessageToMods=async()=>{const e=this.modMessageTextArea.value?.value||"",t=this.modSubjectText.value?.value||"Request to join";if(e.length){const{data:s}=await a.v({operation:a.O.SendMessageToSubreddit,variables:{input:{body:e,subject:`[join] ${t}`,subredditId:this.subredditId}}});if(s.sendMessageToSubreddit.ok){if("request"===this.messageModsType){const{data:e}=await a.v({operation:a.O.UpdateContributorRequestTimestamp,variables:{input:{requestDatetime:(new Date).toISOString(),subredditId:this.subredditId}}});if(e.updateLastContributorRequestTimestamp?.ok)return this.trackEvent(a.b({source:"content_gate",action:"click",noun:"request_to_join_submit"})),this.reload()}this.showMessageModeModal=!1}}}}reload(){window.location.reload()}initializeSlottedElements(){this.shadowRoot.querySelector('[slot="secondaryButton"]')?.assignedNodes({flatten:!0}).forEach((e=>{const t=e;"gated-action-button"===t.id&&(this.gatedButton=t),"nsfw-action-button"===t.id&&(this.nsfwButton=t),"quarantine-action-button"===t.id&&(this.quarantineButton=t),"private-mod-action-button"===t.id&&(this.privateModeButton=t)})),this.shadowRoot.querySelector('[slot="tertiaryButton"]')?.assignedNodes({flatten:!0}).forEach((e=>{const t=e;"private-join-action-button"===t.id&&(this.privateRequestToJoinButton=t)}))}addEventListenerToSlottedElements(){this.gatedButton?.addEventListener("click",this.setPrefGatedOptIn),this.nsfwButton?.addEventListener("click",this.setNsfwAllowed),this.quarantineButton?.addEventListener("click",this.setPrefQuarantinedOptIn),this.privateModeButton?.addEventListener("click",this.messageMod),this.privateRequestToJoinButton?.addEventListener("click",this.requestToJoin)}removeEventListenerFromSlottedElements(){this.gatedButton?.removeEventListener("click",this.setPrefGatedOptIn),this.nsfwButton?.removeEventListener("click",this.setNsfwAllowed),this.quarantineButton?.removeEventListener("click",this.setPrefQuarantinedOptIn),this.privateModeButton?.removeEventListener("click",this.messageMod),this.privateRequestToJoinButton?.removeEventListener("click",this.requestToJoin)}firstUpdated(){this.initializeSlottedElements(),this.addEventListenerToSlottedElements()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListenerFromSlottedElements()}setCookie(e){a.G({country:this.country,name:e,value:"true",options:a.H}),this.reload()}getBgImagePath(){const e=this.isLoggedIn?"home":"popular",t=a.i()?"dark":void 0,s=this.isDesktop?void 0:"mobile";return`${CLIENT_CONFIG.STATIC_BASE_URL}assets/feeds/${[e,t,s].filter(Boolean).join("-")}.jpg`}renderModForm(){return e.x`<faceplate-form class="w-full"> <p class="mb-md"> ${"message"===this.messageModsType?"Send A Private Message":"Write a short message to the moderators explaining why you want to join."} </p> ${"message"===this.messageModsType?e.x`<faceplate-text-input ${a.aq(this.modSubjectText)} ?novalidate="${!0}" maxLength="${100}" class="mb-md w-100"> <span slot="label">${"Subject"}</span></faceplate-text-input>`:""} <faceplate-textarea-input class="w-full" ${a.aq(this.modMessageTextArea)} size="${t.T.EXPANDED}" appearance="${t.a.SECONDARY}" name="textarea" maxLength="${1e4}" ?novalidate="${!0}"> <span slot="label">${"Message to moderators"}</span> </faceplate-textarea-input> </faceplate-form>`;}renderModModal(){return e.x`<faceplate-modal open class="fixed top-1/2 -translate-y-1/2 w-[500px]"> <div slot="closeButton"> ${a.k({appearance:"secondary",attributes:{onclick:this.onCancelModModal},leadingIcon:e.C({size:e.q.Medium}),size:a._.Medium})} </div> <div slot="titleGraphic" class="flex"> ${"message"===this.messageModsType?e.aD({size:e.q.ExtraLarge}):e.aE({size:e.q.ExtraLarge})} </div> <div slot="title"> ${"message"===this.messageModsType?"Message Mods":"Request to join"} </div> <div slot="primaryButton" ,> ${a.k({appearance:"primary",attributes:{className:"w-100",onclick:this.sendMessageToMods},children:"Send Message"})} </div> <div slot="secondaryButton" ,> ${a.k({appearance:"secondary",attributes:{className:"w-100",onclick:this.onCancelModModal},children:"Cancel"})} </div> ${this.renderModForm()} </faceplate-modal>`;}render(){return e.x`<main> ${this.showMessageModeModal?this.renderModModal():e.x`<faceplate-modal open class="fixed top-1/2 -translate-y-1/2"> <slot name="titleGraphic" slot="titleGraphic"></slot> <slot name="title" slot="title"></slot> <slot name="closeButton" slot="closeButton"></slot> <slot name="primaryButton" slot="primaryButton"></slot> <slot name="secondaryButton" slot="secondaryButton"></slot> <slot name="tertiaryButton" slot="tertiaryButton"></slot> <slot></slot> </faceplate-modal> `} <div class="blurred-bg h-full w-full bg-no-repeat bg-cover" style="background-image:url('${this.getBgImagePath()}')"> <div class="shade h-full w-full"></div> </div> </main> `}};o.styles=[e.i`main{height:calc(100vh - var(--shreddit-header-height));width:100vw}faceplate-modal{max-width:min(90%,656px)}.blurred-bg{filter:blur(10px)}.blurred-bg .shade{background-color:rgba(0,0,0,.7)}`,a.t],e._([e.n({type:String})],o.prototype,"country",void 0),e._([e.n({type:String})],o.prototype,"subredditName",void 0),e._([e.n({type:String})],o.prototype,"subredditId",void 0),e._([e.n({type:Boolean})],o.prototype,"isDesktop",void 0),e._([e.n({type:Boolean})],o.prototype,"isLoggedIn",void 0),e._([e.b()],o.prototype,"showMessageModeModal",void 0),e._([e.b()],o.prototype,"messageModsType",void 0),o=e._([e.c("guard-community-modal")],o)}));
SML.dm("Bjyg-LJd",["CVEbQKiO","D7lSuCop"],(async(s,e)=>{const t="data-chat-channel-recommendations-element-dismiss",n="click";let i=class extends(e.W(s.s)){constructor(){super(...arguments),this.onDismiss=s=>{this.parentNode?.removeChild(this),s.stopPropagation(),e.U(e.X.Dismiss,e.V.ChatChannelsOnPdp)}}connectedCallback(){super.connectedCallback(),this.addDismissHandlers()}disconnectedCallback(){super.disconnectedCallback(),this.removeDismissHandlers()}addDismissHandlers(){this.querySelector(`[${t}]`)?.addEventListener(n,this.onDismiss)}removeDismissHandlers(){this.querySelector(`[${t}]`)?.removeEventListener(n,this.onDismiss)}render(){return s.x`<slot></slot>`}};i.styles=[e.t],i=s._([s.c("chat-channel-recommendations-wrapper")],i)}));
SML.dm("xsszdj8W",["D7lSuCop","CVEbQKiO","CU4mObWU","CCphb8vV"],(async(e,t,i,o)=>{const s=(e,t,{parentBoundary:i=document.documentElement,root:a=document,cache:n=new Set})=>{const r=a.elementsFromPoint(e,t),h=[];for(const e of r)if(!n.has(e)){if(!o.a6(i,e))break;h.push(e),n.add(e)}const l=[];for(const i of h)i.shadowRoot&&l.push(...s(e,t,{parentBoundary:i,root:i.shadowRoot,cache:n}));return[...h,...l]};class a{get inSwipe(){return this._inSwipe}set inSwipe(e){this._inSwipe!==e&&(this._inSwipe=e,this.host.requestUpdate("inSwipe",!this._inSwipe))}constructor(e,{recognitionThreshold:t=10,mouseSupport:i=!1}={recognitionThreshold:10,mouseSupport:!1}){this.host=e,this.mouseSupport=!1,this.rafId=null,this._inSwipe=!1,this.protectScrollInterference=!0,this.recognitionThreshold=t,this.mouseSupport=i}clearRaf(){this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null)}addListeners(e){this.gesture=new i.T(e,{mouseSupport:this.mouseSupport}),this.gesture.on("panstart",this.handleTouchStart.bind(this)),this.gesture.on("panmove",this.handleTouchMove.bind(this)),this.gesture.on("panend",this.handleTouchEnd.bind(this))}removeListeners(){this.gesture?.destroy()}reset(){const e=this.gesture?.element;e&&(this.removeListeners(),this.addListeners(e))}handleTouchStart(e){this.clearRaf(),this.gesture&&this.host.handleSwipeMayStart?.(this.gesture)}handleTouchMove(t){if(this.clearRaf(),!this.gesture)return;const i=(this.gesture.touchMoveY??0)<=0;if(!this.inSwipe&&Math.abs((this.gesture.touchStartY??0)-(this.gesture.touchEndY??0))>this.recognitionThreshold){if(this.protectScrollInterference){const[o,a]=n(t),r=s(o,a,{parentBoundary:this.gesture.element}).filter((t=>t instanceof HTMLElement&&e.hb(t)));if(i&&r.some((t=>!e.hc(t)))||!i&&r.some((t=>!e.hd(t))))return this.reset()}!1!==this.host.handleSwipeWillStart?.({...this.gesture,swipeDirection:i?"up":"down"})?(this.inSwipe=!0,this.host.handleSwipeProgress?.({...this.gesture,swipeDirection:i?"up":"down"})):this.reset()}this.inSwipe&&this.gesture&&(this.rafId=requestAnimationFrame((()=>{this.host.handleSwipeProgress?.({...this.gesture,swipeDirection:i?"up":"down"})})))}handleTouchEnd(e){this.gesture&&(this.clearRaf(),this.inSwipe=!1,this.host.handleSwipeEnd?.(this.gesture))}disableScrollInterferenceProtection(){this.protectScrollInterference=!1}enableScrollInterferenceProtection(){this.protectScrollInterference=!0}}const n=e=>e instanceof MouseEvent?[e.clientX,e.clientY]:[e.touches[0].clientX,e.touches[0].clientY],r="expanded",h="normal",l="docked";var d=t.i`${e.y}:host{--transition-duration:250ms;display:contents}.dialog{--bottom-sheet-docked-height:'auto';--bottom-sheet-normal-height:'auto';--bottom-sheet-height:var(--bottom-sheet-normal-height)}.dialog{--bottom-sheet-expanded-height:85vh}@supports (height:95dvh){.dialog{--bottom-sheet-expanded-height:95dvh}}.dialog.state-normal{--bottom-sheet-height:1fr}.dialog.state-docked{--bottom-sheet-height:var(--bottom-sheet-docked-height)}.dialog.state-expanded{--bottom-sheet-height:var(--bottom-sheet-expanded-height)}.dialog{display:flex;align-items:center;justify-content:center;position:fixed;inset:0;z-index:var(--z-index-dialog,1000);user-select:none;pointer-events:none;width:100vw}.dialog-panel{display:grid;grid-template-rows:auto var(--bottom-sheet-height);grid-auto-flow:column;position:fixed;z-index:2;bottom:0;right:0;touch-action:none;transform:translateY(100%);max-height:var(--bottom-sheet-expanded-height);width:100%;background-color:var(--color-ui-modalbackground);border-start-start-radius:var(--radius-md);border-start-end-radius:var(--radius-md);box-shadow:var(--boxshadow-modal);transition:--bottom-sheet-height var(--transition-duration) ease,grid-template-rows var(--transition-duration) ease,transform var(--transition-duration) ease}.dialog.reflect-gesture .dialog-panel{grid-template-rows:auto var(--bottom-sheet-forced-height);transition:none}.dialog-variant-plain .dialog-panel{max-width:100%;max-height:100%;background-color:transparent;border-radius:initial;box-shadow:initial}.dialog-panel:focus{outline:0}.dialog-open{user-select:auto}.dialog-open .dialog-overlay,.dialog-open .dialog-panel{pointer-events:auto}.dialog-open .dialog-panel{opacity:1;transform:translateY(0)}.dialog-overlay{position:fixed;inset:0;background-color:rgba(0,0,0,.5)}.dialog-overlay-blur{backdrop-filter:blur(var(--dialog-backdrop-blur, 4px))}.dialog-overlay-no-modal{display:none}.handle-container{display:flex;justify-content:center;align-items:flex-end;width:100%}.handle-container-inside{--handle-color:var(--color-neutral-border);padding-top:var(--rem8);padding-bottom:var(--rem4)}.handle-container-outside{--handle-color:var(--color-global-white);padding-bottom:var(--rem8);padding-top:var(--rem4);position:relative;top:-16px}.handle{display:block;background:var(--handle-color);width:var(--rem48);height:var(--rem4);border-radius:10000rem}`;let c=class extends e.he{constructor(){super(...arguments),this.resizeController=new e.hf(this,{callback:()=>this.updateDimensions,elements:{slottedElement:()=>this.slottedElement,styledDialogChildWithHeader:()=>this.styledDialogChildWithHeader,panel:()=>this.panelRef.value}}),this.gestureController=new a(this,{recognitionThreshold:10}),this.slottedElement=null,this.styledDialogChildWithHeader=null,this.handleContainer=e.aE(),this.animationNames={show:"bottomSheet.show",hide:"bottomSheet.hide",denyClose:"bottomSheet.denyClose",denyExpand:"bottomSheet.denyExpand",overlayShow:"bottomSheet.overlay.show",overlayHide:"bottomSheet.overlay.hide"},this.openState=h,this.dockable=!1,this.expandable=!1,this.handleDockButtonClicked=e=>{e.stopPropagation(),this.open&&(this.isDocked?this.undock():this.dock())},this.updateDimensions=async e=>{const t=this.slottedElement;t&&e.some((e=>e.target===t))&&this.slottedElement&&this.styledDialogChildWithHeader&&this.updateDockedHeight(),this.requestUpdate(),this.emitter.dispatch("resize")}}get isDocked(){return this.openState===l}get isExpanded(){return this.openState===r}get isNormal(){return this.openState===h}addOpenListeners(){super.addOpenListeners(),this.resizeController.observeAllElements(),this.portalContainer.addEventListener("rpl-modal-card:dock-button-clicked",this.handleDockButtonClicked),this.panelRef.value&&this.gestureController.addListeners(this.panelRef.value)}removeOpenListeners(){super.removeOpenListeners(),this.resizeController.unobserveAllElements(),this.gestureController.removeListeners(),this.portalContainer.removeEventListener("rpl-modal-card:dock-button-clicked",this.handleDockButtonClicked)}willUpdate(e){return e.has("dockable")&&!this.dockable&&this.isDocked&&(this.dockable=!0),e.has("expandable")&&!this.expandable&&this.isExpanded&&(this.expandable=!0),e.has("openState")&&this.isExpanded&&!this.expandable&&(this.openState=e.get("openState")??h),e.has("openState")&&this.isDocked&&!this.dockable&&(this.openState=e.get("openState")??h),(e.get("openState")||e.get("dockable"))&&this.styledDialogChildren.size>0&&this.styledDialogChildren.forEach((e=>{e.dockable=this.dockable,e.docked=this.isDocked})),e.has("openState")&&(this.isDocked?this.gestureController.disableScrollInterferenceProtection():this.gestureController.enableScrollInterferenceProtection()),super.willUpdate(e)}getCachedHeightContainer(e){return["forced","forcedInitial"].includes(e)?this.panelRef.value:this.dialogRef.value}setCachedHeight(e,t){this.getCachedHeightContainer(e)?.style.setProperty(p[e],t)}getCachedHeight(e){const t=this.getCachedHeightContainer(e);return t?getComputedStyle(t).getPropertyValue(p[e])??"auto":"auto"}async updateDockedHeight(){if(!this.styledDialogChildWithHeader)return;await e.hg(this.styledDialogChildWithHeader);const t=this.styledDialogChildWithHeader.headerHeight,i=this.handleContainer.value?.clientHeight??16;t&&this.setCachedHeight("docked",`${t+i}px`)}async expand(){if(!this.open||!this.expandable||this.isExpanded||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:r}})||(this.openState=r)}async collapse(){if(!this.open||!this.isExpanded||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:h}})||(this.openState=h)}async dock(){if(!this.open||!this.dockable||this.isDocked||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:l}})||(this.openState=l)}async undock(){if(!this.open||!this.isDocked||!this.panelRef.value)return;!this.emitter.dispatch("open-state-changed",{cancelable:!0,detail:{openState:h}})||(this.openState=h)}handleSwipeMayStart(){this.setCachedHeight("forcedInitial",`${this.panelRef?.value?.clientHeight}px`),this.setCachedHeight("forced",`var(${p.forcedInitial})`)}handleSwipeWillStart({swipeDirection:e}){return!("down"===e&&this.blocking&&!this.isExpanded||"up"===e&&!this.expandable)}handleSwipeProgress({swipeDirection:e,touchMoveY:t}){null===t||this.isExpanded&&"up"===e||this.setCachedHeight("forced",`calc(var(${p.forcedInitial}) - ${t??0}px)`)}handleSwipeEnd({touchMoveY:t,thresholdY:i}){if(!this.open||null==t)return;const o=t>=i,s=t<=-i;if(o&&this.isExpanded)this.collapse();else if(o&&this.isNormal)this.requestClose("gesture");else if(s&&this.isDocked)this.undock();else if(s&&this.isNormal&&this.expandable)this.expand();else if(s&&!this.isExpanded&&!this.expandable&&this.panelRef.value){const{keyframes:t,options:i}=e.bZ(this,this.animationNames.denyExpand);e.b_(this.panelRef.value,t,i)}}handleSlotChange(e){this.styledDialogChildWithHeader=null,this.slottedElement=this.portalContainer.firstElementChild,this.slottedElement&&this.resizeController.replaceObservedElement("slottedElement")}handleDialogChildConnected(t){t.appearance="bottom-sheet",t.dockable=this.dockable,t.docked="docked"===this.openState,e.hh(t)&&"headerHeight"in t&&(this.styledDialogChildWithHeader=t,this.resizeController.replaceObservedElement("styledDialogChildWithHeader"),this.updateDockedHeight())}handleDialogChildDisconnected(e){}renderDialogBaseClasses(){return{"reflect-gesture":this.gestureController.inSwipe,[`state-${this.openState}`]:!0}}renderTopOfDialog(){return t.x`<div class="${e.x({"handle-container":!0,["handle-container-"+(this.open&&this.modal.disableFocusTrap?"inside":"outside")]:!0})}" part="handle-container" ${e.aq(this.handleContainer)}> <div class="handle"></div> </div>`}};c.styles=d,t._([t.n({type:String,reflect:!0,attribute:"open-state"})],c.prototype,"openState",void 0),t._([t.n({type:Boolean,reflect:!0})],c.prototype,"dockable",void 0),t._([t.n({type:Boolean,reflect:!0})],c.prototype,"expandable",void 0),c=t._([t.c("rpl-bottom-sheet")],c);const p={forced:"--bottom-sheet-forced-height",forcedInitial:"--bottom-sheet-forced-initial-height",currentHeight:"--bottom-sheet-current-height",[l]:"--bottom-sheet-docked-height"},u=250;return e.bW("bottomSheet.show",{keyframes:[{opacity:0,transform:"translateY(100%)"},{opacity:1,transform:"translateY(0%)"}],options:{duration:u,easing:"ease"}}),e.bW("bottomSheet.hide",{keyframes:[{opacity:1,transform:"translateY(0%)",maxHeight:"var(--bottom-sheet-forced-height)"},{opacity:0,transform:"translateY(100%)",maxHeight:"var(--bottom-sheet-forced-height)"}],options:{duration:u,easing:"ease"}}),e.bW("bottomSheet.denyClose",{keyframes:[{transform:"translateY(0%)"},{transform:"translateY(4%)"},{transform:"translateY(0%)"}],options:{duration:u,easing:"ease-in"}}),e.bW("bottomSheet.denyExpand",{keyframes:[{height:"var(--bottom-sheet-forced-height)"},{height:"var(--bottom-sheet-height)",transform:"translateY(0%)",offset:.2},{height:"var(--bottom-sheet-height)",transform:"translateY(4%)",offset:.5},{height:"var(--bottom-sheet-height)",transform:"translateY(0%)"}],options:{duration:375,easing:"ease-in"}}),e.bW("bottomSheet.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:u}}),e.bW("bottomSheet.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:u}}),{get R(){return c}}}));
SML.dm("BPaL2p2o",["CVEbQKiO","D7lSuCop","DlFJW-AA","DsV3drw0","Cx0Ea5Jz","B011DCe8"],(async(t,e,i,s,o)=>{let r=class extends t.s{constructor(){super(...arguments),this.postId="",this.viewContext=s.P.AggregateFeed,this.viewType=e.a3.CardView,this.showFullContent=!1,this.isUpdatingPostBody=!1,this.pubsub=new e.P(this),this.onPostUpdateAction=({postId:t,action:i,value:r})=>{if(this.postId===t)switch(i){case o.a.edit:this.editController?.setEditing(r);break;case o.a.updatePostBodyPending:this.isUpdatingPostBody=r;break;case o.a.updateContent:this.dispatchEvent(e.c(s.c,{postId:t})),this.editController?.resetEditing()}},this.revealTruncatedContent=()=>{this.querySelector(`#${this.postId}-overflow-cover`)?.classList?.add(s.C),this.readMoreButton?.classList?.remove(s.r),this.readMoreButton?.classList?.add(s.C);const t=this.querySelector(`#${this.postId}-post-rtjson-content`);t?.classList?.remove(...s.t.split(" "))},this.handleClickReadMore=()=>{this.revealTruncatedContent(),this.dispatchEvent(e.c(s.R,{postId:this.postId}))}}get isPDP(){return s.i(this.viewContext)}get readMoreButton(){return this.querySelector(`#${this.postId}-read-more-button`)}connectedCallback(){this.pubsub.subscribe(e.T.PostUpdated,this.onPostUpdateAction),this.readMoreButton?.addEventListener("click",this.handleClickReadMore),i.g()&&this.initEditTools(),super.connectedCallback()}disconnectedCallback(){this.readMoreButton?.removeEventListener("click",this.handleClickReadMore),super.disconnectedCallback()}checkPostEditMode(){const t=new URLSearchParams(window.location.search);if(t.get(o.c)){this.pubsub.publish(e.T.PostUpdated,{postId:this.postId,action:o.a.edit,value:!0}),t.delete(o.c);const i=t.toString(),s=window.location.pathname+(i.length?"?":"")+i;window.history.replaceState({},document.title,s)}}async initEditTools(){const{EditController:t}=await Promise.resolve().then((function(){return d}));this.editController=new t(this,{getPostId:()=>this.postId,getViewContext:()=>this.viewContext});const{PartialUpdateController:e}=await SML.di("./CyMCBzyA.js",import.meta.url,"CyMCBzyA");this.partialUpdateController=new e(this,{getPostId:()=>this.postId,getViewContext:()=>this.viewContext,getViewType:()=>this.viewType,getSubredditPrefixedName:()=>this.subredditPrefixedName}),this.checkPostEditMode()}handleTextBodySlotChange(t){this.showFullContent||requestAnimationFrame((()=>this.hideContentOverflow()))}hideContentOverflow(){const t=this.querySelector(`#${this.postId}-post-rtjson-content`);if(!t)return;const e=this.querySelector(".post-content")||this.querySelector('div[slot="text-body"]'),i=e?.querySelectorAll("faceplate-img"),o=.2*window.innerHeight,r=(i?.length||0)*o,n=this.getMaxTextBodyHeight(t.clientHeight);t.scrollHeight+r>n&&(this.shouldContTruncate()?(this.querySelector(`#${this.postId}-overflow-cover`)?.classList?.remove(s.C),this.readMoreButton?.classList?.remove(s.C),this.readMoreButton?.classList?.add(s.r)):this.revealTruncatedContent())}getMaxTextBodyHeight(t){return this.isPDP?Math.max(t,253):208}shouldContTruncate(){return function({readMoreExperimentName:t,readMoreExperimentVariant:i,readMoreExperimentVersion:s}={}){return!i||(e.ek({experimentName:t??"",variant:i,experimentVersion:s??""}).catch((()=>{})),"none"!==i)}(this.readMoreButton?.dataset)}render(){if(this.isUpdatingPostBody)return t.x` <faceplate-shimmer class="h-[200px] w-full px-md xs:px-0" shape="pill"></faceplate-shimmer> `;if(this.editController?.isEditing)return this.editController?.renderEditor();return t.x`<slot @slotchange="${this.handleTextBodySlotChange}" name="${"text-body"}"></slot>`}};r.styles=[e.t],t._([t.n({type:String,attribute:"post-id"})],r.prototype,"postId",void 0),t._([t.n({type:String,attribute:"view-context"})],r.prototype,"viewContext",void 0),t._([t.n({type:String,attribute:"view-type"})],r.prototype,"viewType",void 0),t._([t.n({type:String,attribute:"subreddit-prefixed-name"})],r.prototype,"subredditPrefixedName",void 0),t._([t.n({type:Boolean,attribute:"show-full-content"})],r.prototype,"showFullContent",void 0),t._([t.b()],r.prototype,"isUpdatingPostBody",void 0),r=t._([t.c("shreddit-post-text-body")],r);const n="fetch-post-edit";var d=Object.freeze({__proto__:null,EditController:class{get postId(){return this.args.getPostId()}get viewContext(){return this.args.getViewContext()}constructor(i,s){this.host=i,this.args=s,this._isEligibleForPartialUpdate=!1,this._renderedPartial=!1,this.isEditing=!1,this.setEditing=t=>{this._isEligibleForPartialUpdate&&(t&&!this._renderedPartial?this.host.dispatchEvent(new CustomEvent(n)):this.host.requestUpdate(),this.isEditing=t)},this.resetEditing=()=>{this.isEditing=!1,this._renderedPartial=!1},this.getAndRenderPostEditPartial=async()=>{e.p(e.T.PostUpdated,{postId:this.postId,action:o.a.updatePostBodyPending,value:!0});const t=`/svc/shreddit/edit-post/${this.postId}`,i=await this._partialRequest.request(t),s=await(i?.text());if(s){const t=(new DOMParser).parseFromString(s,"text/html").querySelector('[slot="post-editor"]');t?.innerHTML&&(e.aC(s,this.host,e.g.Append),this._renderedPartial=!0)}e.p(e.T.PostUpdated,{postId:this.postId,action:o.a.updatePostBodyPending,value:!1})},this.renderEditor=()=>t.x`<slot name="post-editor"></slot> `,this._partialRequest=new e.aB(i),i.addController(this)}hostConnected(){this._isEligibleForPartialUpdate=this.viewContext===s.P.CommentsPage,this._isEligibleForPartialUpdate&&this.host.addEventListener(n,this.getAndRenderPostEditPartial)}hostDisconnected(){this._isEligibleForPartialUpdate&&this.host.removeEventListener(n,this.getAndRenderPostEditPartial)}},FetchPostEditEvent:n})}));
SML.dm("63udUS_-",["CVEbQKiO","D7lSuCop","DlFJW-AA","DiR4G0LH","CkKql46U","CITAGWir","CW-W37sd","BIEmYQmK","rtVjLspA","ccIdaLiK","CTD6cIv6","B011DCe8","D102GxTJ","BZWh9sVh","DEQ-l4mm","B_ByM_ya","CA4X4T8a","DnwTtnNv","58f2cEWE","BAeMrwFj","Bjyg-LJd","xsszdj8W","BPaL2p2o","CCphb8vV","D_QMHsXc","Cq9O5zpS","DlWm-1vG","Cx0Ea5Jz","Bj8wOYTD","C6s1R5yD","KzHvibf8","n2VAdrRK","CU4mObWU","CLkam3rl","Bw4iLYyr","DsV3drw0","BR8SLhNF","CXdNNYNO","BcR8gLw3","B8BAxqC_","D9dm-Sy6","Mh6HSk7W","CK47trMR","DZMRR9gi","BZ7lqt1T"],(async(E,T,t)=>{let D=class extends E.s{constructor(){super(...arguments),this.replaceItselfWithChildren=()=>{this.replaceWith(...this.childNodes)}}render(){return E.x`<div class="mx-md xs:mx-0"> <div class="items-center justify-between flex flex-row py-sm px-md w-100 bg-neutral-background border-neutral-border rounded-2 border-solid border box-border"> <div> ${E.O({size:E.q.Medium,attributes:{className:"align-middle mr-2xs"}})} <span class="text-neutral-content-weak"> ${"Posted by a blocked account"} </span> </div> ${T.k({appearance:"secondary",size:T._.Small,attributes:{rel:"nofollow",id:"primary-button",onclick:this.replaceItselfWithChildren},children:"View Post"})} </div> </div>`;}};D.styles=[T.t],D=E._([E.c("shreddit-blocked-post-content")],D),SML.di("./DohuPq-E.js",import.meta.url,"DohuPq-E").then((function(E){return E.f})),SML.di("./CGytz8Wq.js",import.meta.url,"CGytz8Wq"),SML.di("./C7H6Jti6.js",import.meta.url,"C7H6Jti6"),"enabled"===window.CLIENT_EXPERIMENTS?.shreddit_pdp_no_mod_js_lo?t.g()&&SML.di("./D9-84fIt.js",import.meta.url,"D9-84fIt"):SML.di("./D9-84fIt.js",import.meta.url,"D9-84fIt")}));
SML.dm("BYDFL-1r",["CVEbQKiO","CCphb8vV","D7lSuCop"],(async(t,e)=>{function o(t,e,o){return!0===(null==o?void 0:o.short)?t.toLocaleDateString(e,{month:"short",day:"numeric"}):t.toLocaleString(e,null==o?void 0:o.options)}const r={options:{dateStyle:"full",timeStyle:"long"}};let i=class extends t.s{constructor(){super(...arguments),this.ts="",this.date=new Date,this.short=!1,this.locale=""}getLocale(){return this.locale||e.bE()}createRenderRoot(){return this}render(){const e=this.getLocale(),i=o(this.date,e,r),s=this.formatOptions?{options:this.formatOptions}:{short:this.short},n=o(this.date,e,s);return t.x`<time datetime="${this.date.toISOString()}" title="${i}">${n}</time>`}};return t._([t.n({type:String})],i.prototype,"ts",void 0),t._([t.n({attribute:"ts",converter:t=>e.bF(t||"")})],i.prototype,"date",void 0),t._([t.n({type:Boolean})],i.prototype,"short",void 0),t._([t.n({type:String})],i.prototype,"locale",void 0),t._([t.n({type:Object})],i.prototype,"formatOptions",void 0),i=t._([t.c("faceplate-date")],i),{f:o}}));
SML.dm("B7NvqZE0",["CVEbQKiO","CCphb8vV","D7lSuCop"],(async(t,e)=>{let o=class extends t.s{constructor(){super(),this.ts="",this.short=!1,this.format="",this.locale="",this.date=new Date(this.ts)}getLocale(){return this.locale.length?this.locale:e.bE()}createRenderRoot(){return this}render(){const o=e.bL(this.getLocale(),{dateStyle:"full",timeStyle:"long"}).format(this.date),r={short:this.short,format:this.format.length?this.format:void 0},i=e.bM(this.date,this.getLocale(),r);return t.x` <time datetime="${this.date.toISOString()}" title="${o}">${i}</time> `}};t._([t.n({type:String})],o.prototype,"ts",void 0),t._([t.n({attribute:"ts",converter:t=>e.bF(t||"")})],o.prototype,"date",void 0),t._([t.n({type:Boolean})],o.prototype,"short",void 0),t._([t.n({type:String})],o.prototype,"format",void 0),t._([t.n({type:String})],o.prototype,"locale",void 0),o=t._([t.c("faceplate-timeago")],o)}));
SML.dm("C7H6Jti6",["CVEbQKiO","CK47trMR","CCphb8vV","D7lSuCop"],(async(t,e,o)=>{let i=class extends t.s{constructor(){super(...arguments),this.position="bottom",this.mouseEnterDelay=750,this.triggerEvent="hover",this.appearance="neutral",this.emitter=o.v(this),this._timeoutID=null,this._popperController=new e.P(this,{position:this.position,variantFlipOrder:{start:"s",middle:"m",end:"e"},referenceElementKey:"referenceElement",popperElementKey:"_tooltip"}),this._eventUsedMap=new WeakMap,this.updated=t=>{t.has("position")&&this._popperController.updateOptions({position:this.position})},this.handleDocumentClick=t=>{if(!(t.target instanceof HTMLElement)||this.hidden)return;if(t.target.closest(this.tagName.toLowerCase())===this)return;this._eventUsedMap.has(t)||this.close()},this.handleEscape=t=>{"Escape"===t.key&&this.close()},this.addListenersWhileOpened=()=>{document.addEventListener("click",this.handleDocumentClick),document.addEventListener("keydown",this.handleEscape)},this.cleanupListenersWhileOpened=()=>{document.removeEventListener("click",this.handleDocumentClick),document.removeEventListener("keydown",this.handleEscape)}}get referenceElement(){return this.triggers[0]??this}static get styles(){return[t.i`:host{display:inline-block;position:relative;color:var(--tooltip-content)}:host([appearance=neutral]){--tooltip-background:var(--color-tooltip-bg-neutral);--tooltip-content:var(--color-tooltip-text-neutral)}:host([appearance=inverted]){--tooltip-background:var(--color-tooltip-bg-inverted);--tooltip-content:var(--color-tooltip-text-inverted)}:host([appearance=primary]){--tooltip-background:var(--color-tooltip-bg-primary);--tooltip-content:var(--color-tooltip-text-primary)}#faceplate-tooltip{font:var(--font-12-16-semibold);background-color:var(--tooltip-background);color:var(--tooltip-content);border-radius:.25rem;box-shadow:var(--boxshadow-tooltip);justify-content:center;align-items:center;padding:.5rem;display:inline-flex;width:max-content;isolation:isolate;z-index:var(--faceplate-tooltip-z-index,1)}article{display:flex;gap:.375rem}#faceplate-tooltip::after{display:block;content:'';width:8px;height:8px;position:absolute;background-color:var(--tooltip-background)}#faceplate-tooltip[position=bottom-end]::after,#faceplate-tooltip[position=bottom-start]::after,#faceplate-tooltip[position=top-end]::after,#faceplate-tooltip[position=top-start]::after{--max-arrow-x-travel-tooltip:calc(var(--tooltip-width, 2rem) - 1rem);--max-arrow-x-travel-target:calc(var(--target-width, 1rem) / 2);--max-arrow-x-distance:max(
            min(var(--max-arrow-x-travel-target), var(--max-arrow-x-travel-tooltip)),
            0.5rem
          )}#faceplate-tooltip[position=bottom-start]::after,#faceplate-tooltip[position=top-start]::after{inset-inline-start:var(--max-arrow-x-distance)}#faceplate-tooltip[position=bottom-end]::after,#faceplate-tooltip[position=top-end]::after{inset-inline-end:var(--max-arrow-x-distance)}#faceplate-tooltip[position=left-end]::after,#faceplate-tooltip[position=left-start]::after,#faceplate-tooltip[position=right-end]::after,#faceplate-tooltip[position=right-start]::after{--max-arrow-y-travel-tooltip:calc(var(--tooltip-height, 2rem) - 1rem);--max-arrow-y-travel-target:calc(var(--target-height, 2rem) / 2);--max-arrow-y-distance:max(
            min(var(--max-arrow-y-travel-target), var(--max-arrow-y-travel-tooltip)),
            0.5rem
          )}#faceplate-tooltip[position=left-start]::after,#faceplate-tooltip[position=right-start]::after{top:var(--max-arrow-y-distance)}#faceplate-tooltip[position=left-end]::after,#faceplate-tooltip[position=right-end]::after{bottom:var(--max-arrow-y-distance)}#faceplate-tooltip[position|=bottom]::after{top:0;transform:translateY(-50%) rotate(45deg);box-shadow:-1px -1px 2px rgba(0,0,0,.05)}#faceplate-tooltip[position|=top]::after{bottom:0;transform:translateY(50%) rotate(45deg);box-shadow:1px 1px 2px rgba(0,0,0,.05)}#faceplate-tooltip[position|=right]::after{inset-inline-start:0;transform:translateX(-38%) rotate(45deg);box-shadow:-2px 0 2px rgba(0,0,0,.05)}#faceplate-tooltip[position|=left]::after{inset-inline-end:0;transform:translateX(38%) rotate(45deg);box-shadow:0 -2px 2px rgba(0,0,0,.05)}#faceplate-tooltip[position^=auto]::after{display:none}`,e.P.defaultPopperContentStyles]}get hidden(){return"closed"===this._popperController.currentState.state}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this.cleanupListenersWhileOpened()}updateCustomProperties(){if("faceplate-tooltip"!==this.tagName.toLocaleLowerCase())return;const{clientHeight:t=null,clientWidth:e=null}=this.referenceElement,{clientHeight:o=null,clientWidth:i=null}=this._tooltip;t&&e&&o&&i&&(this.style.setProperty("--target-width",`${Math.round(e)}px`),this.style.setProperty("--target-height",`${Math.round(t)}px`),this.style.setProperty("--tooltip-width",`${Math.round(i)}px`),this.style.setProperty("--tooltip-height",`${Math.round(o)}px`))}show(){this.emitter.dispatch("open"),this.updateCustomProperties(),this._popperController.open().then((()=>{this.hidden||(this.addListenersWhileOpened(),this.emitter.dispatch("opened"))}))}close(){return this.cleanupListenersWhileOpened(),this.emitter.dispatch("close"),this._popperController.close().then((()=>{this.hidden&&this.emitter.dispatch("closed")}))}handleClick(t){this._eventUsedMap.set(t,!0),"click"===this.triggerEvent&&(this.hidden?this.show():this.close())}handleMouseenter(){"hover"===this.triggerEvent&&(this.cleanupTooltips(),this._timeoutID=window.setTimeout((()=>{this.querySelector(":focus, :hover")&&this.show()}),this.mouseEnterDelay))}handleMouseleave(){this.close(),this.cleanupTooltips()}cleanupTooltips(){this._timeoutID&&(window.clearTimeout(this._timeoutID),this._timeoutID=null)}render(){const e=this._popperController.actualPosition||this.position;return t.x` <slot name="trigger" aria-describedby="faceplate-tooltip" faceplate-popper-trigger @click="${this.handleClick}" @mouseenter="${this.handleMouseenter}" @mouseleave="${this.handleMouseleave}" @focusin="${this.handleMouseenter}" @focusout="${this.handleMouseleave}"></slot> <article id="faceplate-tooltip" role="tooltip" position="${e}" faceplate-popper-content> <slot class="icon" name="icon"></slot> <span> <slot></slot> </span> </article> `}};return t._([t.n({type:String})],i.prototype,"position",void 0),t._([t.n({type:Number,attribute:"enter-delay"})],i.prototype,"mouseEnterDelay",void 0),t._([t.n({type:String,attribute:"trigger-event"})],i.prototype,"triggerEvent",void 0),t._([t.n({type:String,reflect:!0})],i.prototype,"appearance",void 0),t._([t.v({slot:"trigger",flatten:!0})],i.prototype,"triggers",void 0),t._([t.v({slot:"icon",flatten:!0})],i.prototype,"icons",void 0),t._([t.z("#faceplate-tooltip")],i.prototype,"_tooltip",void 0),i=t._([t.c("faceplate-tooltip")],i),{get FaceplateTooltip(){return i}}}));
SML.dm("DJsOQMvU",["Bj8wOYTD"],(async e=>{var i;!function(e){e.addRemovalReason="add_removal_reason",e.distinguishAsMod="distinguish_as_mod",e.distinguishAsAdmin="distinguish_as_admin",e.sticky="sticky",e.lock="lock",e.approve="approve",e.remove="remove",e.removeAsSpam="remove_as_spam",e.confirmRemoval="confirm_removal",e.approveOptimistic="approve_optimistic",e.removeOptimistic="remove_optimistic",e.removeAsSpamOptimistic="remove_as_spam_optimistic",e.confirmRemovalOptimistic="confirm_removal_optimistic",e.ignoreReports="ignore_reports",e.edit="edit",e.snoozeReporter="snooze_reporter",e.unsnoozeReporter="unsnooze_reporter"}(i||(i={}));const o={[e.M.Distinguish]:i.distinguishAsMod,[e.M.Undistinguish]:i.distinguishAsMod,[e.M.Lock]:i.lock,[e.M.Unlock]:i.lock,[e.M.Sticky]:i.sticky,[e.M.Unsticky]:i.sticky,[e.M.AddRemovalReason]:i.addRemovalReason,[e.M.ApproveContent]:i.approve,[e.M.RemoveContent]:i.remove,[e.M.RemoveContentAsSpam]:i.removeAsSpam,[e.M.ConfirmRemoval]:i.confirmRemoval,[e.M.IgnoreReports]:i.ignoreReports,[e.M.UnignoreReports]:i.ignoreReports,[e.M.SnoozeReporter]:i.snoozeReporter,[e.M.UnsnoozeReporter]:i.unsnoozeReporter,[e.A.Distinguish]:i.distinguishAsAdmin,[e.A.Undistinguish]:i.distinguishAsAdmin,[e.M.ApproveContentOptimistic]:i.approveOptimistic,[e.M.RemoveContentOptimistic]:i.removeOptimistic,[e.M.RemoveContentAsSpamOptimistic]:i.removeAsSpamOptimistic,[e.M.ConfirmRemovalOptimistic]:i.confirmRemovalOptimistic};var t,s;return function(e){e.Preview="preview",e.Pdp="pdp"}(t||(t={})),function(e){e.CommentPreviewUnit="CommentPreviewUnit",e.CommentTree="CommentTree"}(s||(s={})),{get C(){return i},S:o}}));
SML.dm("Bgpq8Ukm",["D7lSuCop","DsV3drw0"],(async(E,R)=>{const D=R=>R===E.a2.ModApproved,e=R=>R===E.a2.AdminApproved,o=R=>R===E.a2.ModRemoved||R===E.a2.ModSpammed,M=R=>R===E.a2.AdminRemoved||R===E.a2.AdminSpammed;var P;!function(E){E.UNMODERATED="UNMODERATED",E.APPROVED="APPROVED",E.REMOVED="REMOVED",E.SPAM="SPAM",E.REPORTED="REPORTED",E.FILTERED="FILTERED"}(P||(P={}));const d=(E,R)=>(E===P.FILTERED||R)&&E!==P.APPROVED&&E!==P.REMOVED;return{get M(){return P},a:d,b:(D,e)=>(D===R.P.ModQueue||D===R.P.ModQueueAll)&&e===E.a3.ModQueueCompactView,c:E=>[P.REPORTED,P.FILTERED,P.UNMODERATED,P.REMOVED,P.SPAM].includes(E),d:E=>[P.APPROVED,P.UNMODERATED,P.REPORTED].includes(E),e:({moderationState:E,isSpamFilteredPost:R,isRemoved:D,isPromotedPost:e})=>(d(E,R)||!D)&&!e,f:({isPromotedPost:E})=>!E,h:E=>D(E)||e(E)||o(E)||M(E),i:E=>D(E)||e(E),s:(E,R,D,e)=>E===P.REMOVED&&!e&&!R&&!d(E,D)}}));
SML.dm("UeyFDWWE",["CVEbQKiO","D7lSuCop"],(async(e,t)=>{const a="plain",n="plain-weak",s="secondary",r="bordered",l="media",m="plain",o={[t._.ExtraSmall]:e.q.ExtraSmall,[t._.Small]:e.q.Small,[t._.Medium]:e.q.Medium,[t._.Large]:e.q.Medium},d={xs:"px-sm",sm:"px-sm",md:"px-sm",lg:"px-xs"},i={xs:"text-12",sm:"text-12",md:"text-12",lg:"text-14"},c={xs:"var(--size-button-sm-h)",sm:"var(--size-button-sm-h)",md:"var(--size-button-md-h)",lg:"var(--size-button-md-h)"},u={xs:"var(--font-button-sm)",sm:"var(--font-button-sm)",md:"var(--font-button-sm)",lg:"var(--font-button-md)"},b={[a]:"button-plain",[n]:"button-plain-weak",[s]:"button-secondary",[r]:"button-bordered-cab",[l]:"button-media-cab"},p=e=>{const{attributes:t,size:a,appearance:n,selected:s}=e;return[t?.className||"",a?`${i[a]}`:"",b[n??m],s?"button-activated":"","inline-flex items-center"].join(" ")};return{A:b,B:c,I:o,c:({attributes:a,children:n,size:s=t._.Medium,selected:r,appearance:l=m,leadingIcon:o,screenReaderContent:i,role:b})=>{let x=`flex ${t.a9[s]}`;n&&o&&(x+=" me-[var(--rem6)]");const{html:E,createElement:$}=e.g(),_=E`<span class="flex items-center"> ${o?E`<span class="${x}">${o}</span>`:void 0} ${n?E`<span> ${n} </span>`:void 0} </span> ${i?E`<faceplate-screen-reader-content> ${i} </faceplate-screen-reader-content>`:""}`,v=a?.href,f="bordered"===l?"border-sm":"border-md";return $(null!=v?"a":"button",{...a,role:b??a?.role,style:`height: ${c[s]}; font: ${u[s]}`,className:`button ${f} ${p({appearance:l,size:s,attributes:a,selected:r})}\n       ${d[s]}\n      `,rpl:!0},_)},g:p}}));
SML.dm("B05atAPk",["D7lSuCop"],(async o=>{var e;!function(o){o.Comment="t1",o.Profile="t2",o.Post="t3",o.Message="t4",o.Subreddit="t5",o.Trophy="t6"}(e||(e={}));const n=o=>{const n=o.split("_").shift();return Object.values(e).includes(n)?n:void 0},t=o=>n(o)===e.Comment,r=o=>n(o)===e.Post,i="new_awards";function a({thingId:o,awardId:e,groupId:n,subredditId:i,postId:a,pageType:c,paneName:s,position:u,recipientId:d,isAnonymous:m,hasMessage:_,awardPrice:l,topAwardIconUrl:p,animatedAwardIconUrls:f,reason:w,correlationId:b,postType:g,postScore:y,score:I,numberComments:h,referrerCorrelationId:v}){const T={new_award:{}};return e&&(T.new_award.id=e),n&&(T.new_award.group_id=n),d&&(T.new_award.recipient_id=d),null!=m&&(T.new_award.is_anonymous=m),null!=_&&(T.new_award.has_message=_),void 0!==l&&(T.new_award.listing_price=l),p&&(T.new_award.top_award_icon_url=p),f&&(T.new_award.animated_awards_ids=f),i&&(T.subreddit={id:i}),o&&(r(o)?T.post={id:o,type:g,score:I,number_comments:h}:t(o)&&(T.comment={id:o,score:I},a&&(T.post={id:a,type:g,score:y,number_comments:h}))),(c||s||u||w)&&(T.action_info={...c&&{page_type:c},...s&&{pane_name:s},...u&&{position:u},...w&&{reason:w}}),b&&(T.correlation_id=b),v&&(T.feed={referrer_correlation_id:v}),T}const c=async(o=document,e=5e3,n=100)=>{const t=Date.now(),r=o=>{const e=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,null);let n=e.nextNode();for(;n;){if(n instanceof Element&&n.shadowRoot){const o=i(n.shadowRoot);if(o)return o}n=e.nextNode()}return null},i=o=>{const e=o.querySelector('textarea[name="message"]');return e instanceof HTMLTextAreaElement?e:r(o)};return new Promise((i=>{const a=()=>{const c=(()=>{const e=o.querySelector("rs-message-composer");return e?.input?e.input:r(o)})();c?i(c):Date.now()-t>e?i(null):setTimeout(a,n)};a()}))};return{N:i,get T(){return e},a:t,b:function(e){return o.b({source:i,action:"view",noun:"leaderboard_tile"},a(e))},c:a,d:function(e){const n=o.hj();return o.b({source:i,action:"click",noun:"entry_point"},a({...e,pageType:o.z(),...n&&{referrerCorrelationId:n}}))},e:function(e){return o.b({source:i,action:"view",noun:"award_info"},a(e))},f:async(o,e=c)=>{const n=await e();n&&(o?(n.value="",n.focus()):setTimeout((()=>{n.focus()}),1e3))},g:function(e){return o.b({source:i,action:"view",noun:"gold_info"},a(e))},h:(e,n)=>o.b({source:"moderator",action:"highlight",noun:"post"},{post:{id:e},...n?{action_info:{page_type:n}}:{}}),i:r,j:function(e){return o.b({source:i,action:"click",noun:"overflow_menu"},a(e))},k:function(e){return o.b({source:i,action:"view",noun:"leaderboard"},a(e))},l:function(e,n){return o.b({source:i,action:"click",noun:`leaderboard_${n}`},a(e))},m:function(e){return o.b({source:i,action:"filter",noun:"leaderboard"},a(e))},n:function(e){return o.b({source:i,action:o.ad.Click,noun:"confirm_award_option"},a(e))},o:function(e){return o.b({source:i,action:o.ad.View,noun:"award_options_sheet"},a(e))},p:(e,n,t)=>o.b({source:"removal_reasons",action:"click",noun:"submit"},{mod_action:{removalreason:e},action_info:{reason:n},subreddit:{id:t?.subredditId},post:{id:t?.postId??""},comment:{id:t?.commentId}}),q:()=>o.b({source:"removal_reasons",action:"click",noun:"cancel"}),r:e=>{const{authorId:n,subredditId:i,postId:a,commentId:c,subredditName:s,thingId:u,action:d,noun:m="removal_reasons_flow",type:_,reason:l,isLocked:p,sendAs:f,notificationMethod:w}=e;return o.b({source:"moderator",action:d,noun:m},{user:{id:n},subreddit:{id:i,name:s},post:{id:a??""},comment:{id:c},action_info:{source_name:"removal_reasons",type:_,reason:l},mod_action:{removalreason:{is_locked:p,send_as:f,notify:w}},...u&&r(u)&&{post:{id:u}},...u&&t(u)&&{comment:{id:u}}})},s:function(e){return o.b({source:i,action:o.ad.Click,noun:"award_option"},a(e))},t:n,u:(e,n)=>o.b({source:"moderator",action:"unhighlight",noun:"post"},{post:{id:e},...n?{action_info:{page_type:n}}:{}}),v:function(e,{isSuccessful:n}){const t=n?"completed_fe":"failed_fe";return o.b({source:i,action:"award_given",noun:t},a(e))},w:()=>o.b({source:"post",action:"click",noun:"ignore_reports"}),x:()=>o.b({source:"post",action:"click",noun:"restore_reports"}),y:()=>o.b({source:"comment",action:"click",noun:"ignore_reports"}),z:()=>o.b({source:"comment",action:"click",noun:"restore_reports"})}}));
SML.dm("Ct0GBREL",["Bj8wOYTD","D7lSuCop"],(async(a,o)=>{var r;!function(a){a.approve="approve",a.remove="remove",a.confirmRemoval="confirm_removal"}(r||(r={}));const t={[a.M.ApproveContent]:r.approve,[a.M.ConfirmRemoval]:r.confirmRemoval,[a.M.RemoveContent]:r.remove};let e=o.v;return{get A(){return r},M:class{async modBulkApprove(a){const{data:r}=await e({operation:o.O.ModBulkApprove,variables:{input:{ids:a}}});return r.modApproveBulk}async modBulkRemove(a,r=!1){const{data:t}=await e({operation:o.O.ModBulkRemove,variables:{input:{ids:a,isSpam:r}}});return t.modRemoveBulk}async modBulkRemoveAsSpam(a){const{data:r}=await e({operation:o.O.ModBulkRemove,variables:{input:{ids:a,isSpam:!0}}});return r.modRemoveBulk}async modBulkIgnore(a){const{data:r}=await e({operation:o.O.ModBulkIgnore,variables:{input:{ids:a}}});return r.modIgnoreBulk}async modBulkLock(a){const{data:r}=await e({operation:o.O.ModBulkLock,variables:{input:{ids:a}}});return r.modLockBulk}async modBulkMarkNSFW(a){const{data:r}=await e({operation:o.O.ModBulkMarkNSFW,variables:{input:{ids:a}}});return r.modMarkNsfwBulk}async modBulkMarkSpoiler(a){const{data:r}=await e({operation:o.O.ModBulkMarkSpoiler,variables:{input:{ids:a}}});return r.modMarkSpoilerBulk}async modBulkUnignore(a){const{data:r}=await e({operation:o.O.ModBulkUnignore,variables:{input:{ids:a}}});return r.modUnignoreBulk}async modBulkUnlock(a){const{data:r}=await e({operation:o.O.ModBulkUnlock,variables:{input:{ids:a}}});return r.modUnlockBulk}async modBulkUnmarkNSFW(a){const{data:r}=await e({operation:o.O.ModBulkUnmarkNSFW,variables:{input:{ids:a}}});return r.modUnmarkNsfwBulk}async modBulkUnmarkSpoiler(a){const{data:r}=await e({operation:o.O.ModBulkUnmarkSpoiler,variables:{input:{ids:a}}});return r.modUnmarkSpoilerBulk}async modBulkUpdatePostFlair(a,r,t,n){const{data:i}=await e({operation:o.O.ModBulkUpdatePostFlair,variables:{input:{postIds:a,cssClassId:r,flairTemplateId:t,text:n}}});return i.modUpdatePostFlairBulk}},S:t}}));
SML.dm("B4Pgp3Rp",["D7lSuCop","B05atAPk","CCphb8vV","Ct0GBREL","DJsOQMvU","Cx0Ea5Jz"],(async(t,e,E,T,a,n)=>{function r(T){switch(!0){case E.f(T):return t.M.Award;case e.a(T):return t.M.Comment;case e.i(T):return t.M.Post;default:return null}}return{g:function(t){return t.closest("[mod-tools-host]")},i:r,p:function(e,E,M){switch(r(e)){case t.M.Award:E in T.S&&t.p(t.T.AwardOnContentUpdated,{awardOnContentId:e,action:T.S[E],value:M});break;case t.M.Comment:E in a.S&&t.p(t.T.CommentUpdated,{commentId:e,action:a.S[E],value:M});break;case t.M.Post:(n.P.includes(E)||E in n.S)&&t.p(t.T.PostUpdated,{postId:e,action:n.S[E],value:M});break}}}}));
SML.dm("ahl9RE2R",["CVEbQKiO","D7lSuCop","DJsOQMvU","Bj8wOYTD","Cx0Ea5Jz","Bgpq8Ukm","UeyFDWWE","CCphb8vV","B05atAPk","B4Pgp3Rp","C7H6Jti6"],(async(t,e,a,i,s,o,n,r,d,l)=>{let c=class extends t.s{constructor(){super(...arguments),this.buttonAppearance="secondary",this.buttonSize=e._.Small,this.showFullButtons=!1,this.screeenReaderContent="",this.thingId="",this.smartEscalationsTracking=!1,this.isLargerThanSmallWindow=!0,this._handleModActionClick=t=>{this.dataModAction===i.M.AddRemovalReason&&t.stopPropagation(),this.dataModAction&&(this.dispatchEvent(e.c(this.dataModAction)),t.target&&this.noun&&e.e(t.target,e.b({source:"moderator",action:"click",noun:this.noun})))},this.mediaWatcher=null,this.handleMediaChange=t=>{this.isLargerThanSmallWindow=t.matches},this.renderWithTooltip=()=>t.x`<faceplate-tooltip appearance="inverted" position="top"> ${this.renderButton()} <slot name="text"></slot> </faceplate-tooltip>`,this.renderButton=()=>{const a=r.a4()?n.c:e.k,i=this.smartEscalationsTracking?t.x`<ac-track trigger="click" target="prev" san="moderator|click|remove" data-faceplate-tracking-context="${JSON.stringify({action_info:{source_name:"smart-escalations"},...(this.thingId&&d.i(this.thingId) && {post:{id:this.thingId}}),...(this.thingId&&d.a(this.thingId) && {comment:{id:this.thingId}})})}"></ac-track>`:"";return t.x`${a({appearance:this.buttonAppearance,attributes:{onclick:this._handleModActionClick,className:"relative",slot:"trigger","aria-label":this.screeenReaderContent},size:this.buttonSize,children:this.showFullButtons&&this.isLargerThanSmallWindow?t.x` <span> ${i} <slot name="text"></slot> </span> `:"",leadingIcon:this.showFullButtons&&this.isLargerThanSmallWindow?"":t.x` <span class="flex justify-center items-center"> <slot name="icon"></slot> </span> `})} ${i}`}}connectedCallback(){super.connectedCallback(),this.showFullButtons&&(this.mediaWatcher=window.matchMedia("(min-width: 768px)"),this.mediaWatcher.addEventListener("change",this.handleMediaChange))}disconnectedCallback(){super.disconnectedCallback(),this.mediaWatcher?.removeEventListener("change",this.handleMediaChange)}render(){return this.showFullButtons?this.renderButton():this.renderWithTooltip()}};c.styles=[e.t],t._([t.n({type:String,attribute:"data-mod-action"})],c.prototype,"dataModAction",void 0),t._([t.n({type:String,attribute:"event-noun"})],c.prototype,"noun",void 0),t._([t.n({type:String,attribute:"button-appearance"})],c.prototype,"buttonAppearance",void 0),t._([t.n({type:String,attribute:"button-size"})],c.prototype,"buttonSize",void 0),t._([t.n({type:Boolean,attribute:"show-full-buttons"})],c.prototype,"showFullButtons",void 0),t._([t.n({type:String,attribute:"screen-reader-content"})],c.prototype,"screeenReaderContent",void 0),t._([t.n({type:String,attribute:"thing-id"})],c.prototype,"thingId",void 0),t._([t.n({type:Boolean,attribute:"smart-escalations-tracking"})],c.prototype,"smartEscalationsTracking",void 0),t._([t.b()],c.prototype,"isLargerThanSmallWindow",void 0),c=t._([t.c("mod-action-button")],c);let h=class extends t.s{constructor(){super(...arguments),this.iconOnly=!1,this.pubsub=new e.P(this),this.handleCommentUpdate=({commentId:t,action:e,value:i})=>{if(t===this.thingId)switch(e){case a.C.addRemovalReason:this.hasRemovalReason=Boolean(i);break;case a.C.approve:case a.C.approveOptimistic:this.hasRemovalReason=!0,this.isRemoved=!1;break;case a.C.remove:case a.C.removeAsSpam:case a.C.removeOptimistic:case a.C.removeAsSpamOptimistic:case a.C.confirmRemovalOptimistic:this.hasRemovalReason=!1,this.isRemoved=!0}},this.handlePostUpdate=({postId:t,action:e,value:a})=>{if(t===this.thingId)switch(e){case s.a.addRemovalReason:this.hasRemovalReason=Boolean(a);break;case s.a.approve:case s.a.approveOptimistic:this.hasRemovalReason=!0,this.isRemoved=!1;break;case s.a.remove:case s.a.removeAsSpam:case s.a.removeOptimistic:case s.a.removeAsSpamOptimistic:case s.a.confirmRemovalOptimistic:this.isRemoved=!0,this.hasRemovalReason=!1}},this.updateModVerdict=t=>{const e=this.closest('[slot="mod-verdict"]');t&&this.isRemoved?e?.setAttribute("show-removal-reason-cta",""):e?.removeAttribute("show-removal-reason-cta")},this.shouldShowCta=()=>{const t=this.isRemoved?o.M.REMOVED:o.M.UNMODERATED;return o.s(t,!!this.hasRemovalReason,!!this.isContentSpamFilteredPost,this.isProfilePost)}}connectedCallback(){super.connectedCallback();const t=l.g(this);this.resizeObserver=new ResizeObserver((t=>{for(const e of t)e.contentRect.width<500?this.iconOnly=!0:this.iconOnly=!1})),t&&this.resizeObserver.observe(t),this.pubsub.subscribe(e.T.CommentUpdated,this.handleCommentUpdate),this.pubsub.subscribe(e.T.PostUpdated,this.handlePostUpdate),this.updateModVerdict(!this.hasRemovalReason)}disconnectedCallback(){super.disconnectedCallback();const t=l.g(this);t&&this.resizeObserver.unobserve(t),this.resizeObserver.disconnect()}updated(t){super.updated(t),t.has("hasRemovalReason")&&this.updateModVerdict(!this.hasRemovalReason)}render(){return this.hasRemovalReason||!this.shouldShowCta()?t.A:t.x` <mod-action-button screen-reader-content="${"Add removal reason"}" data-mod-action="${i.M.AddRemovalReason}" button-appearance="secondary" ?show-full-buttons="${!0}"> <span slot="icon" class="flex justify-center"> ${t.am({attributes:{"aria-hidden":"true"},size:t.q.Small})} </span> <span slot="text" class="flex"> ${this.iconOnly?t.am({attributes:{"aria-hidden":"true"},size:t.q.Small}):"Add removal reason"} </span> </mod-action-button> `;}};h.styles=[e.t],t._([t.n({type:String,attribute:"thing-id"})],h.prototype,"thingId",void 0),t._([t.n({type:Boolean,attribute:"has-removal-reason"})],h.prototype,"hasRemovalReason",void 0),t._([t.b()],h.prototype,"iconOnly",void 0),t._([t.n({type:Boolean,attribute:"is-removed"})],h.prototype,"isRemoved",void 0),t._([t.n({type:Boolean,attribute:"is-content-spam-filtered-post"})],h.prototype,"isContentSpamFilteredPost",void 0),t._([t.n({type:Boolean,attribute:"is-profile-post"})],h.prototype,"isProfilePost",void 0),h=t._([t.c("responsive-add-removal-reason-cta")],h)}));
SML.dm("CK9FveTr",["CVEbQKiO"],(async e=>{var t;!function(e){e.Small="sm",e.Medium="md"}(t||(t={}));const n=e=>{let t;return"boolean"==typeof e&&(t=e?"true":"false"),t},a=t=>{const{attributes:n,trailingSlot:a,selected:s,liRole:i}=t,{html:o,createElement:c}=e.g(),{role:d,tabindex:p,"aria-disabled":u,"aria-selected":g,...x}=n||{},m=o`${r(t)} ${l(a)}`;return c("li",{...x,className:`relative list-none mt-0 ${n?.className||""}`,rpl:!0,rplSelected:s,role:i||"presentation"},m)},r=a=>{const{anchorAttributes:r,appearance:l,description:o,disabled:c,href:d,innerClassName_DO_NOT_USE:p,label:u,leadingAvatar:g,leadingIcon:x,noXPadding:m=!1,onClick:b,selected:$,size:f=t.Medium,trailingSlot:h,attributes:y,suppressHoverStyles:v=!1}=a,k=!$&&a.hasTransparentBackground,{html:_,createElement:S,ifDefined:w}=e.g(),{role:E,tabindex:N}=y??{},I=Boolean(N??y?.onclick??a.onClick),j=I?parseInt(N??"0"):void 0,O=!v&&(null!=d||I),T=e=>{return t=e,O?t:"";var t},B=["flex justify-between relative",(m?"px-xs -mx-xs":"px-md")+" gap-[0.5rem]","danger"===l?$?"text-danger-content":`text-danger-content ${T("hover:text-danger-content-hover")}`:$?"text-secondary-onBackground":`text-secondary ${T("hover:text-secondary-hover")}`,`${k?"":$?`bg-neutral-background-selected ${T("hover:bg-neutral-background-selected")}`:`${T("active:bg-interactive-pressed")}`} ${T("hover:bg-neutral-background-hover")}`,`${T("hover:no-underline")}`,`${T("cursor-pointer")}`,c?"opacity-60 pointer-events-none":"",f===t.Medium?"py-xs":"py-2xs"," -outline-offset-1",p].join(" "),D=_` <span class="flex items-center gap-xs min-w-0 shrink"> ${x?_` <span class="flex shrink-0 items-center justify-center h-xl w-xl text-20 leading-4"> ${x} </span>`:void 0} ${g?_`<span class="flex shrink-0 items-center justify-center h-xl w-xl"> <span class="text-20 leading-4">${g}</span> </span>`:void 0} <span class="flex flex-col justify-center min-w-0 shrink py-[var(--rem6)]"> <span class="text-14">${u}</span> <span class="text-12 text-secondary-weak">${o}</span> </span> </span> ${i(h)} `;return d?S("a",{...r,role:E,href:d,tabindex:j,onclick:b,className:`${B} ${r?.className?r.className:""} no-underline`,style:`padding-inline-end: ${s(a)}`},D):_`<div aria-disabled="${w(n(c)||y?.["aria-disabled"])}" aria-selected="${w(n($)||y?.["aria-selected"])}" role="${w(E)}" tabindex="${w(j)}" class="${B}" @click="${b}" @keydown="${e=>{"Enter"!==e.code&&"Space"!==e.code||!b||b(e)}}" style="padding-inline-end:${s(a)}"> ${D} </div>`};function s({trailingSlot:e}){if("object"!=typeof e||!("type"in e))return"16px";switch(e.type){case"iconButton":return"58px";case"switchInput":return"80px";default:return"16px"}}const l=t=>{if("object"!=typeof t||!("type"in t))return null;const{html:n}=e.g();return n`<div class="absolute top-1/2" style="inset-inline-end:${function(e){if("object"!=typeof e||!("type"in e))return"16px";switch(e.type){case"iconButton":return"10px";case"switchInput":return"8px";default:return"16px"}}(t)};transform:translateY(-50%)"> ${t.content} </div>`},i=t=>{if("object"==typeof t&&"type"in t)return null;const{html:n}=e.g();return n`<span class="flex items-center shrink-0"> <span class="flex items-center justify-center h-lg">${t}</span> </span>`},o={label:{"list-item":"","group-label":"text-12 text-secondary-weak tracking-widest",title:"text-16 text-neutral-content-strong"},trailingIcon:{"list-item":"","group-label":"text-secondary-weak",title:"text-neutral-content-strong"}};return{D:1,get L(){return t},T:"table-pagination__paginate-previous",a:({appearance:n="list-item",attributes:r,innerClassName_DO_NOT_USE:s,label:l,leadingIcon:i,noXPadding:c})=>{const{html:d}=e.g();return a({attributes:{...r,tabindex:"-1"},hasTransparentBackground:!0,innerClassName_DO_NOT_USE:s,label:d`<span class="${o.label[n]}">${l}</span>`,leadingIcon:i,size:t.Small,trailingSlot:e.M({attributes:{className:o.trailingIcon[n]}}),noXPadding:c})},b:25,c:"table-pagination__paginate-next",d:"table-pagination__page-size-updated",e:({attributes:t,contentId:n,content:a,header:r,hasLeadingBorder:s,isInitiallyOpen:l=!0})=>{const{html:i,createElement:o}=e.g();return o("faceplate-expandable-section-helper",{...t,booleanOpen:l,rpl:!0},i`<details ?open="${l}" class="p-0 m-0 bg-transparent border-none rounded-none"> <summary aria-controls="${n}" aria-expanded="${l}" class="font-normal"> ${r} </summary> <faceplate-auto-height-animator class="block" ?open="${l}"> <div faceplate-auto-height-animator-content id="${n}" style="${s?"border-left: 1px solid var(--color-neutral-border-weak); margin-left: 28px;":""}"> ${a} </div> </faceplate-auto-height-animator> </details>`)},l:a}}));
SML.dm("jayrQzpw",["DsV3drw0"],(async e=>({H:new Set([e.P.SubredditFeed,e.P.CommentsPage,e.P.ModQueue,e.P.ModQueueAll,e.P.ModLog])})));
SML.dm("D5N4FxiB",["CVEbQKiO","D7lSuCop"],(async(r,a)=>{const n={Neutral:"neutral",Success:"success",Warning:"warning",Danger:"danger",Alert:"alert",Plain:"plain",Disabled:"disabled"};class o extends a.w{constructor(){super(...arguments),this.appearance=n.Neutral,this.outline=!1,this._hasContent=!1}render(){return r.x`<span class="container"> <slot class="${a.x({"with-content":this._hasContent,"without-content":!this._hasContent})}" @slotchange="${r=>{this._hasContent=!!r.target.assignedNodes().length}}"></slot> </span>`}}r._([r.n({type:String,reflect:!0})],o.prototype,"appearance",void 0),r._([r.n({type:Boolean})],o.prototype,"outline",void 0),r._([r.b()],o.prototype,"_hasContent",void 0);var e=r.i`${a.y}:host{border-radius:var(--radius-full);display:inline-flex}.with-content{min-width:inherit;min-height:var(--size-md);display:inline-block}.without-content{width:inherit;height:var(--size-xs)}.container{font-weight:600;display:inline-block;font-size:var(--rem10);text-align:center;padding:0 var(--spacer-2xs);line-height:var(--rem16);min-width:var(--size-xs);min-height:var(--size-xs)}:host([outline]){border:solid var(--line-md) var(--color-neutral-background)}:host([appearance=warning]){background:var(--color-warning-background);color:var(--color-neutral-background)}:host([appearance=alert]){background:var(--color-global-orangered);color:var(--color-primary-onBackground)}:host([appearance=danger]){background:var(--color-danger-background);color:var(--color-primary-onBackground)}:host([appearance=success]){background:var(--color-success-background);color:var(--color-primary-onBackground)}:host([appearance=neutral]){background:var(--color-neutral-content);color:var(--color-neutral-background)}:host([appearance=plain]){background:var(--color-neutral-background);color:var(--color-neutral-content)}:host([appearance=disabled]){background:var(--color-interactive-content-disabled);color:var(--color-neutral-background)}`;let t=class extends o{};return t.styles=e,t=r._([r.c("rpl-badge")],t),{R:n}}));
SML.dm("v9RaKRju",["D7lSuCop","CITAGWir","Dk5NGh_Q","CCphb8vV","B4Pgp3Rp","B05atAPk","Bj8wOYTD","B6r1xcS1","Ct0GBREL","F3ts0RLu","CVEbQKiO","B_ByM_ya","BZ7lqt1T","D9dm-Sy6","DJsOQMvU","Cx0Ea5Jz","DsV3drw0","B7jsX14Z","BMNJiqQ9","AhHXxeIZ","BC8XSJYX","LCU6ttla","fB-I7_yx","DEQ-l4mm","CK47trMR","Mh6HSk7W","DZMRR9gi","B8BAxqC_","B_2AnPg8","GpA9mJze","B92R8McT","CGytz8Wq","BcR8gLw3","DdIwQUSk","CK9FveTr"],(async(e,a,r,n,t,o,i,s,l)=>{const m=(a,r,n)=>{const t=n===e.M.Post;switch(a){case i.M.MarkSpoiler:return r?t?"Post has been marked spoiler.":"Comment has been marked spoiler.":t?"There was an error marking the post spoiler. Please try again.":"There was an error marking the comment spoiler. Please try again.";case i.M.UnmarkSpoiler:return r?t?"Post has been unmarked spoiler.":"Comment has been unmarked spoiler.":"There was an error unmarking the post spoiler. Please try again.";case i.M.MarkNsfw:return r?t?"Post has been marked nsfw.":"Comment has been marked nsfw.":t?"There was an error marking the post nsfw. Please try again.":"There was an error marking the comment nsfw. Please try again.";case i.M.UnmarkNsfw:return r?t?"Post has been unmarked nsfw.":"Comment has been unmarked nsfw.":"There was an error unmarking the post nsfw. Please try again.";case i.M.IgnoreReports:return r?t?"Reports ignored and post approved.":"Reports ignored and comment approved.":t?"There was an error ignoring the post's reports. Please try again.":"There was an error ignoring the comment's reports. Please try again.";case i.M.UnignoreReports:return r?t?"Reports unignored.":"Reports successfully restored.":t?"There was an error unignoring the post's reports. Please try again.":"There was an error unignoring the comment's reports. Please try again.";case i.M.Distinguish:return r?t?"Post is marked as distinguished.":"Comment is marked as distinguished.":t?"There was an error distinguishing the post. Please try again.":"There was an error distinguishing the comment. Please try again.";case i.M.Undistinguish:return r?t?"Post is marked as undistinguished.":"Comment is marked as undistinguished.":t?"There was an error undistinguishing the post. Please try again.":"There was an error undistinguishing the comment. Please try again.";case i.M.Sticky:return r?t?"Post has been stickied.":"Comment has been stickied.":t?"There was an error stickying the post. Please try again.":"There was an error stickying the comment. Please try again.";case i.M.Unsticky:return r?t?"Post has been unstickied.":"Comment has been unstickied.":t?"There was an error unstickying the post. Please try again.":"There was an error unstickying the comment. Please try again.";case i.M.Lock:return r?t?"Post has been locked.":"Comment has been locked.":t?"There was an error locking the post. Please try again.":"There was an error locking the comment. Please try again.";case i.M.Unlock:return r?t?"Post has been unlocked.":"Comment has been unlocked.":t?"There was an error unlocking the post. Please try again.":"There was an error unlocking the comment. Please try again.";case i.M.ApproveContent:if(r)switch(n){case e.M.Award:return "Award approved.";case e.M.Comment:return "Comment approved.";case e.M.Post:return "Post approved.";default:return""}switch(n){case e.M.Award:return "There was an error approving the award. Please try again.";case e.M.Comment:return "There was an error approving the comment. Please try again.";case e.M.Post:return "There was an error approving the post. Please try again.";default:return""}case i.M.ConfirmRemoval:case i.M.RemoveContent:if(r)switch(n){case e.M.Award:return "Award removed.";case e.M.Comment:return "Comment removed.";case e.M.Post:return "Post removed.";default:return""}switch(n){case e.M.Award:return "There was an error removing the award. Please try again.";case e.M.Comment:return "There was an error removing the comment. Please try again.";case e.M.Post:return "There was an error removing the post. Please try again.";default:return""}case i.A.Distinguish:return r?t?"Post is marked as distinguished as admin.":"Comment is marked as distinguished as admin.":t?"There was an error distinguishing the post as admin. Please try again.":"There was an error distinguishing the comment as admin. Please try again.";case i.A.Undistinguish:return r?t?"Post is marked as undistinguished as admin.":"Comment is marked as undistinguished as admin.":t?"There was an error undistinguishing the post as admin. Please try again.":"There was an error undistinguishing the comment as admin. Please try again.";case i.M.RemoveHighlightedPost:return r?"Highlight removed":"There was an error removing the post from community highlights. Please try again.";default:return""}};return {ModActionsController:class{constructor(n,{getThingIdFn:m,focusChatTextareaFn:u}){this.publishEvent=(e,a)=>{t.p(this._getThingId(),e,a)},this.modActionMenuClickEvent=a=>{let r="",n="";switch(this.itemType){case e.M.Award:r="awardOnContentId",n="award";break;case e.M.Comment:r="commentId",n="comment";break;case e.M.Post:default:r="postId",n="post"}return e.b({source:"moderator",action:"click",noun:a},{[r]:this._getThingId(),[n]:{id:this._getThingId()},action_info:{reason:this.modPartialPath}})},this._getHandleReportToggle=a=>async()=>{const r=a===i.M.IgnoreReports,n=r?o.w:o.x,t=r?o.y:o.z;e.e(this._host,this.isPost?n():t());try{const e=[this._getThingId()],n=await(r?this.modBulkActions.modBulkIgnore(e):this.modBulkActions.modBulkUnignore(e));if(!n?.ok)throw new Error("Operation failed");return this.publishEvent(a,r),this.showSuccessToast(a),r}catch{return this.showErrorToast(a),!r}},this._getHandleDistinguishToggle=a=>async()=>{const r=a===i.M.Distinguish,n=r?"distinguish_as_mod":"undistinguish_as_mod";e.e(this._host,this.modActionMenuClickEvent(n));let t=!0;this.publishEvent(a,r);try{const n=await this.updateDistinguishState(r?e.f$.ModDistinguished:e.f$.None);if(!n?.ok)throw new Error("Operation failed");this.showSuccessToast(a)}catch{this.publishEvent(a,!r),this.showErrorToast(a),t=!1}return this._host.requestUpdate(),t?r:!r},this._getHandleStickyToggle=a=>async()=>{const r=a===i.M.Sticky,n=r?"sticky":"unsticky";e.e(this._host,this.modActionMenuClickEvent(n));let t=!0;this.publishEvent(a,r);try{const e=await this.updateStickyState(r);if(!e?.ok)throw new Error("Operation failed");this.showSuccessToast(a)}catch{this.publishEvent(a,!r),this.showErrorToast(a),t=!1}return this._host.requestUpdate(),t?r:!r},this._getHandleLockedToggle=a=>async()=>{const r=a===i.M.Lock,n=r?"lock":"unlock";e.e(this._host,this.modActionMenuClickEvent(n));let t=!0;this.publishEvent(a,r);try{let n;if(this.isPost){const e=[this._getThingId()];n=await(r?this.modBulkActions.modBulkLock(e):this.modBulkActions.modBulkUnlock(e))}else n=await this.updateLockedState(r?e.hR.Locked:e.hR.None);if(!n?.ok)throw new Error("Operation failed");this.showSuccessToast(a)}catch{this.publishEvent(a,!r),this.showErrorToast(a),t=!1}return this._host.requestUpdate(),t?r:!r},this._getHandleMarkNsfwToggle=a=>async()=>{let r=!0;const n=a===i.M.MarkNsfw;if(!this.isPost)return!n;const t=n?"mark_nsfw":"unmark_nsfw";e.e(this._host,this.modActionMenuClickEvent(t));const o=[this._getThingId()],s=await(n?this.modBulkActions.modBulkMarkNSFW(o):this.modBulkActions.modBulkUnmarkNSFW(o));return s?.ok?(this.showSuccessToast(a),this.publishEvent("isPostNsfw",n)):(this.showErrorToast(a),r=!1),this._host.requestUpdate(),r?n:!n},this._getHandleMarkSpoilerToggle=a=>async()=>{let r=!0;const n=a===i.M.MarkSpoiler;if(!this.isPost)return!n;const t=n?"mark_spoiler":"unmark_spoiler";e.e(this._host,this.modActionMenuClickEvent(t));const o=[this._getThingId()],s=await(n?this.modBulkActions.modBulkMarkSpoiler(o):this.modBulkActions.modBulkUnmarkSpoiler(o));return s?.ok?(this.showSuccessToast(a),this.publishEvent("isPostSpoiler",n)):(this.showErrorToast(a),r=!1),this._host.requestUpdate(),r?n:!n},this.handleApproveContentOptimistic=()=>{this.publishEvent(i.M.ApproveContentOptimistic,!0)},this._getHandleModApproval=a=>async()=>{this.handleApproveContentOptimistic(),e.e(this._host,this.modActionMenuClickEvent("approve"));try{const e=await this.modBulkActions.modBulkApprove([this._getThingId()]);return e?.ok?(this.publishEvent(a,!0),this._resetAddRemovalReasonForm(),!0):(this.showErrorToast(a),!1)}catch{return this.showErrorToast(a),!1}},this._getShareToModChat=e=>async e=>(await this._focusChatTextarea(),!0),this._getViewChatThread=e=>async e=>(await this._focusChatTextarea(!0),!0),this.handleRemoveContentOptimistic=()=>{this.publishEvent(i.M.RemoveContentOptimistic,!0)},this.handleRemoveContentAsSpamOptimistic=()=>{this.publishEvent(i.M.RemoveContentAsSpamOptimistic,!0)},this.handleConfirmRemovalOptimistic=()=>{this.publishEvent(i.M.ConfirmRemovalOptimistic,!0)},this._getHandleModRemoval=a=>async()=>{switch(a){case i.M.RemoveContent:this.handleRemoveContentOptimistic();break;case i.M.RemoveContentAsSpam:this.handleRemoveContentAsSpamOptimistic();break;case i.M.ConfirmRemoval:this.handleConfirmRemovalOptimistic()}const r=a===i.M.RemoveContentAsSpam;let n=a===i.M.ConfirmRemoval?"confirm_removal":"remove";a===i.M.RemoveContentAsSpam&&(n="spam"),e.e(this._host,this.modActionMenuClickEvent(n));try{const e=await this.modBulkActions.modBulkRemove([this._getThingId()],r);return e?.ok?(this.publishEvent(a,!0),this.dispatchRequestReload(),!0):(this.showErrorToast(a),!1)}catch{return this.showErrorToast(a),!1}},this._getHandleOpenEditPostFlairModal=()=>async()=>{const a=this._getThingId();if(a){e.e(this._host,this.modActionMenuClickEvent("flair")),await this._activateFeature({name:e.hS,queryParams:{isLoggedin:!0,selectedIds:a},renderMode:e.g.Contents});const r=document.getElementById(s.g(a));r?.showModal()}},this._getHandleAddToHighlights=()=>async()=>{const a=this._getThingId();a&&(await this._activateFeature({name:e.dz,routeParams:{postId:a},renderMode:e.g.Contents}))},this._getHandleRemoveFromHighlights=()=>async()=>{const a=this._getThingId();if(a){this.publishEvent(i.M.RemoveHighlightedPost,!1);try{await this.removeHighlightedPost(a),this.showSuccessToast(i.M.RemoveHighlightedPost),e.e(this._host,o.u(a,e.z())),e.p(e.T.ReloadHighlights)}catch(e){this.showErrorToast(i.M.RemoveHighlightedPost),this.publishEvent(i.M.RemoveHighlightedPost,!0)}}},this._resetAddRemovalReasonForm=()=>{this._host.dispatchEvent(new r.A(""))},this.handleIgnoreReports=this._getHandleReportToggle(i.M.IgnoreReports),this.handleUnignoreReports=this._getHandleReportToggle(i.M.UnignoreReports),this.handleDistinguish=this._getHandleDistinguishToggle(i.M.Distinguish),this.handleUndistinguish=this._getHandleDistinguishToggle(i.M.Undistinguish),this.handleSticky=this._getHandleStickyToggle(i.M.Sticky),this.handleUnsticky=this._getHandleStickyToggle(i.M.Unsticky),this.handleUpdateHighlightedPost=this._getHandleAddToHighlights(),this.handleRemoveHighlightedPost=this._getHandleRemoveFromHighlights(),this.handleLock=this._getHandleLockedToggle(i.M.Lock),this.handleUnlock=this._getHandleLockedToggle(i.M.Unlock),this.handleMarkNsfw=this._getHandleMarkNsfwToggle(i.M.MarkNsfw),this.handleUnmarkNsfw=this._getHandleMarkNsfwToggle(i.M.UnmarkNsfw),this.handleMarkSpoiler=this._getHandleMarkSpoilerToggle(i.M.MarkSpoiler),this.handleUnmarkSpoiler=this._getHandleMarkSpoilerToggle(i.M.UnmarkSpoiler),this.handleConfirmRemoval=this._getHandleModRemoval(i.M.ConfirmRemoval),this.handleRemoveContent=this._getHandleModRemoval(i.M.RemoveContent),this.handleRemoveContentAsSpam=this._getHandleModRemoval(i.M.RemoveContentAsSpam),this.handleApproveContent=this._getHandleModApproval(i.M.ApproveContent),this.handleShareToModChat=this._getShareToModChat(i.M.ShareToModChat),this.handleViewChatThread=this._getViewChatThread(i.M.ViewChatThread),this.handleOpenEditPostFlairModal=this._getHandleOpenEditPostFlairModal(),this.handleSnoozeReporter=()=>{},this.handleUnsnoozeReporter=()=>{},this.handleAddRemovalReason=()=>{this._host.dispatchEvent(new r.A(this._getThingId())),e.e(this._host,this.modActionMenuClickEvent("add_removal_reason"))},this.handleAdjustCrowdControl=()=>{this._host.dispatchEvent(e.c(a.O,{postId:this._getThingId()}))},this.handleRemoveContentMenu=()=>this._getHandleModRemoval(i.M.RemoveContent)(),this._activateFeature=async a=>e.f(a),this._getThingId=m,this._host=n,this._focusChatTextarea=u??o.f,this.modBulkActions=new l.M,this._host?.addController(this)}get isPost(){return this.itemType===e.M.Post}get itemType(){return t.i(this._getThingId())}get modPartialPath(){switch(this.itemType){case e.M.Award:case e.M.Comment:case e.M.Post:return this.itemType.toLowerCase();default:return""}}hostConnected(){Object.keys(i.M).forEach((e=>{this._host.addEventListener(i.M[e],this[`handle${e}`])}))}hostDisconnected(){Object.keys(i.M).forEach((e=>{this._host.removeEventListener(i.M[e],this[`handle${e}`])}))}dispatchFaceplateAlertEvent(a,r,n=""){const t=e.c("faceplate-alert",{level:a,message:r,sourceElement:`modqueue-${this.itemType?.toLowerCase()}`,cause:n});this._host.dispatchEvent(t)}showSuccessToast(a){this.itemType&&this.dispatchFaceplateAlertEvent(e.a4.success,m(a,!0,this.itemType),`success-${a}`)}showErrorToast(a){this.itemType&&this.dispatchFaceplateAlertEvent(e.a4.error,m(a,!1,this.itemType),`failed-${a}`)}dispatchRequestReload(){this.itemType===e.M.Comment&&this._host.dispatchEvent(new CustomEvent("reload-shreddit-comment",{bubbles:!0,composed:!0}))}async updateDistinguishState(a){if(this.isPost){const r={input:{postId:this._getThingId(),distinguishType:a,distinguishState:a===e.f$.None?e.g2.None:e.g2.Distinguished}},{data:n}=await e.v({operation:e.O.UpdatePostDistinguishedState,variables:r});return n?.updatePostDistinguishState}{const r={input:{commentId:this._getThingId(),distinguishType:a,distinguishState:a===e.f$.None?e.hT.None:e.hT.Distinguished}},{data:n}=await e.v({operation:e.O.UpdateCommentDistinguishedState,variables:r});return n?.updateCommentDistinguishState}}async updateStickyState(a){if(this.isPost){const r={input:{postId:this._getThingId(),sticky:a,toProfile:!1}},{data:n}=await e.v({operation:e.O.UpdatePostStickyState,variables:r});return n?.updatePostStickyState}{const r={input:{commentId:this._getThingId(),sticky:a}},{data:n}=await e.v({operation:e.O.UpdateCommentStickyState,variables:r});return n?.updateCommentStickyState}}async updateLockedState(a){if(this.isPost){const r={input:{postId:this._getThingId(),lockedState:a}},{data:n}=await e.v({operation:e.O.UpdatePostLockedState,variables:r});return n?.updatePostLockedState}{const r={input:{commentId:this._getThingId(),lockedState:a}},{data:n}=await e.v({operation:e.O.UpdateCommentLockedState,variables:r});return n?.updateCommentLockedState}}async removeHighlightedPost(e){return n.b7({postId:e})}}};}));
SML.dm("kExRqc7d",["D7lSuCop","CVEbQKiO","CU4mObWU"],(async(t,e,i)=>{const s="var(--bottom-sheet-max-height)";let o=class extends e.s{constructor(){super(...arguments),this.open=!1,this.blocking=!1,this.docked=!1,this.focusManager=new t.ar(this,this),this.inFocusTrap=!1,this._isModal=!1,this._isExpanded=!1,this._isExpandable=!1,this._isDockable=!1,this._gesture=new i.T(this,{mouseSupport:!1}),this._cachedHeight="auto",this._dockedHeight="auto",this._cachedHeightAtTouchStartPx=0,this._rafID=null,this._mutationObserver=void 0,this.show=t=>{this._isModal=!1,this._isExpanded=(t&&"expanded"in t&&t.expanded)??!1,this._isExpandable=t?.expandable??!1,this._isDockable=t?.dockable??!1,this.open=!0,this._isExpandable&&(this._gesture.on("panstart",this._onTouchStart),this._gesture.on("panmove",this._onTouchMove),this._gesture.on("panend",this._onTouchEnd)),this._isExpanded?this._content.style.height=s:""!==this._content.style.height&&"auto"!==this._content.style.height||(this._cachedHeight=this._content.clientHeight+"px",this._content.style.height=this._cachedHeight),this._dockedHeight=this._headerElements[0]?this._headerElements[0].clientHeight-1+"px":"auto",this._mutationObserver||this._connectMutationObserver()},this.showModal=e=>{if(this.open)throw new Error('The element already has an "open" attribute, and therefore cannot be opened modally');t.gn.add(this),this.show(e),this._isModal=!0,t.gi.add(this)},this.close=()=>{const e=t.c("faceplate-close");this.dispatchEvent(e),e.defaultPrevented||(this.open=!1,this._isExpanded=!1,this.inFocusTrap&&(t.gi.remove(this),t.gn.remove(this)),this._isExpandable&&(this._gesture.off("panstart",this._onTouchStart),this._gesture.off("panmove",this._onTouchMove),this._gesture.off("panend",this._onTouchEnd)),this._content.style.height=this._cachedHeight)},this.expand=()=>{if(this.open&&this._isExpandable&&!this._isExpanded){const e=t.c("faceplate-expand");if(this.dispatchEvent(e),e.defaultPrevented)return;this._cancelRAF(),this._content.style.height=s,this.docked=!1,this._isExpanded=!0}},this.collapse=()=>{if(this.open&&this._isExpandable&&this._isExpanded){const e=t.c("faceplate-collapse");if(this.dispatchEvent(e),e.defaultPrevented)return;this._cancelRAF(),this._content.style.height=this._cachedHeight,this.docked=!1,this._isExpanded=!1}},this.dock=()=>{if(!this.open||!this._isDockable||this.docked)return;const e=t.c("faceplate-dock");this.dispatchEvent(e),e.defaultPrevented||(this._cancelRAF(),this._content.style.height=this._dockedHeight,this.docked=!0)},this.undock=()=>{if(!this.open||!this._isDockable||!this.docked)return;const e=this._isExpandable&&this._isExpanded?s:this._cachedHeight,i=t.c("faceplate-undock");this.dispatchEvent(i),i.defaultPrevented||(this._cancelRAF(),this._content.style.height=e,this.docked=!1)},this.recalculateCachedHeight=()=>{const e=this._cachedHeight;this._content.style.height="auto";const i=this._content.clientHeight+"px";this._cachedHeight=i,this._isDockable&&this.docked?this._content.style.height=this._dockedHeight:this._isExpandable&&this._isExpanded?this._content.style.height=s:(this._content.style.height=e,window.requestAnimationFrame((()=>{this._content.style.height=i,this._cancelRAF()})));const o=t.c("__TEST-ONLY_bottom-sheet-recalculation",{cachedHeight:this._cachedHeight,dockedHeight:this._dockedHeight,expandedHeight:s});this.dispatchEvent(o)},this._onTouchStart=()=>{this._cancelRAF(),this._content.style.transitionDuration="0ms",this._cachedHeightAtTouchStartPx=this._content.clientHeight},this._onTouchMove=()=>{this._cancelRAF(),this._isExpanded&&(this._gesture.touchMoveY??0)<=0||(this._rafID=window.requestAnimationFrame((()=>{null!=this._gesture.touchMoveY&&(this._content.style.height=this._cachedHeightAtTouchStartPx-this._gesture.touchMoveY+"px")})))},this._onTouchEnd=()=>{if(this._cancelRAF(),this._content.style.transitionDuration="300ms",!this.open||null==this._gesture.touchMoveY)return;const t=this._gesture.touchMoveY>=this._gesture.thresholdY,e=this._gesture.touchMoveY<=-this._gesture.thresholdY;t?this._isExpanded?this.collapse():this._closeIfNotBlocked():e?this._isExpanded||this.expand():this._isExpanded?this._content.style.height=s:this._content.style.height=this._cachedHeight},this._cancelRAF=()=>{this._rafID&&(window.cancelAnimationFrame(this._rafID),this._rafID=null)},this._renderHandle=()=>this._isExpandable?e.x`<div id="handle" class="${this._isModal?"out":"in"}"></div>`:null,this._handleBackDropKeyUp=t=>{"Enter"===t.key&&this._closeIfNotBlocked()},this._closeIfNotBlocked=()=>{this.blocking||this.close()},this.render=()=>e.x` <div id="backdrop" part="backdrop" class="${this._isModal&&this.open?"blocker":""}" @click="${this._closeIfNotBlocked}" @keyup="${this._handleBackDropKeyUp}"></div> <div id="content" part="content" role="${e.l(this.open?"dialog":void 0)}" aria-label="${e.l(this.label??void 0)}" aria-modal="${e.l(this.open&&this._isModal?"true":void 0)}"> ${this._renderHandle()} <slot name="header"></slot> <slot></slot> </div> `}static get styles(){return e.i`:host{--bottom-sheet-max-height:85vh}@supports (height:95dvh){:host{--bottom-sheet-max-height:95dvh}}:host{position:fixed;bottom:0;inset-inline-start:0;opacity:0;transition-duration:.3s;transition-property:visibility,opacity;transition-timing-function:ease;visibility:hidden;pointer-events:none}:host([open]){opacity:1;z-index:2;visibility:visible}:host([open])>#content{pointer-events:auto;transform:translateY(0)}:host>#backdrop{position:fixed;--backdrop-position-value:-100%;inset-inline:var(--backdrop-position-value) var(--backdrop-position-value);top:var(--backdrop-position-value);bottom:var(--backdrop-position-value)}:host>#backdrop.blocker{background:var(--color-scrim);pointer-events:auto}:host>#content{align-items:center;background:var(--color-ui-modalbackground);bottom:0;border-start-start-radius:var(--rem12);border-start-end-radius:var(--rem12);box-shadow:var(--boxshadow-modal);box-sizing:border-box;display:flex;flex-direction:column;inset-inline-start:0;position:fixed;touch-action:none;transform:translateY(100%);transition-duration:.3s;transition-property:height,transform;transition-timing-function:ease;width:100vw;max-height:var(--bottom-sheet-max-height)}:host>slot:not([name]){align-items:center;display:flex;flex-direction:column;gap:var(--spacer-sm)}#handle{position:absolute;top:0;inset-inline-start:50%;transform:translateX(-50%);height:var(--rem4);width:var(--rem48);border-radius:var(--rem4)}#handle.in{top:var(--spacer-xs);background-color:var(--color-neutral-border)}#handle.out{top:calc(-1 * var(--spacer-xs));background-color:var(--color-global-white)}`}disconnectedCallback(){super.disconnectedCallback(),this._gesture.destroy(),t.gi.remove(this),t.gn.remove(this),this._mutationObserver?.disconnect()}_connectMutationObserver(){this._mutationObserver=new MutationObserver((()=>{window.requestAnimationFrame(this.recalculateCachedHeight)})),this._mutationObserver.observe(this,{characterData:!0,childList:!0,attributes:!1,subtree:!0})}};e._([e.n({type:Boolean,reflect:!0})],o.prototype,"open",void 0),e._([e.n({type:Boolean})],o.prototype,"blocking",void 0),e._([e.n({type:Boolean,reflect:!0})],o.prototype,"docked",void 0),e._([e.n({type:String,attribute:"ariaLabel"})],o.prototype,"label",void 0),e._([e.z("#content")],o.prototype,"_content",void 0),e._([e.k({slot:"header"})],o.prototype,"_headerElements",void 0),o=e._([e.c("faceplate-bottom-sheet")],o)}));
SML.dm("CBZc9Xo3",["CVEbQKiO"],(async e=>{let t=class extends e.s{constructor(){super(...arguments),this.hasDivider=!1,this.render=()=>e.x` <slot name="leading"></slot> <slot></slot> <slot name="trailing"></slot> `}static get styles(){return e.i`:host{align-items:center;box-sizing:border-box;display:flex;font-weight:700;height:var(--rem64);min-height:var(--rem64);padding:0 var(--spacer-md);position:relative;width:100%}:host([has-divider])::after{border-bottom:1px solid var(--color-neutral-border);bottom:0;content:'';position:absolute;inset-inline-end:var(--spacer-md);inset-inline-start:var(--spacer-md)}:host>slot:not([name]){display:flex;flex-grow:1;padding:0 var(--spacer-sm);font-size:1rem}`}};e._([e.n({type:Boolean,reflect:!0,attribute:"has-divider"})],t.prototype,"hasDivider",void 0),t=e._([e.c("faceplate-bottom-sheet-header")],t)}));
SML.dm("DK2COEsH",["CVEbQKiO"],(async e=>{let l=class extends e.s{constructor(){super(...arguments),this.handleScroll=()=>{this.dropdownMenu?.[0]?.close()}}connectedCallback(){super.connectedCallback(),document.querySelector('[slot="pdp-panel"]')?.addEventListener("scroll",this.handleScroll),document.querySelector('[slot="mod-queue-feed"]')?.addEventListener("scroll",this.handleScroll)}disconnectedCallback(){super.disconnectedCallback(),document.querySelector('[slot="pdp-panel"]')?.removeEventListener("scroll",this.handleScroll),document.querySelector('[slot="mod-queue-feed"]')?.removeEventListener("scroll",this.handleScroll)}render(){return e.x`<slot></slot>`}};e._([e.k({slot:"",selector:"faceplate-dropdown-menu"})],l.prototype,"dropdownMenu",void 0),l=e._([e.c("mod-dropdown-closer")],l)}));
SML.dm("likT9J3g",["CVEbQKiO"],(async e=>{var n,t;!function(e){e.Regular="regular",e.Semibold="semibold"}(n||(n={})),function(e){e.Small="sm",e.Medium="md",e.Large="lg"}(t||(t={})),t.Small,e.q.ExtraSmall,t.Medium,e.q.Small,t.Large,e.q.Medium;const a={sm:"text-12",md:"text-14",lg:"text-16"},i={always:"underline",hover:"hover:underline",none:"no-underline hover:no-underline"},r={primary:"",secondary:"text-secondary-plain hover:text-secondary-plain-hover no-visited visited:text-secondary-plain","plain-weak":"text-secondary-plain-weak hover:text-secondary-plain-hover no-visited visited:text-secondary-plain-weak",media:"text-media-onbackground no-visited visited:text-media-onbackground",inverted:"text-inverted-secondary-plain hover:text-inverted-secondary-plain-hover no-visited visited:text-neutral-background-weak"};return{get A(){return t},a:({attributes:n,children:t,fontWeight:d="regular",size:s,suppressVisitedStyle:o=!1,underline:l="hover",visited:m,appearance:c="primary",trailingIcon:u})=>{const{html:v,createElement:p}=e.g(),g=v`${t}${u?v`<span class="ms-2xs align-middle">${u}</span>`:""}`,x=`${n?.className||""} a cursor-pointer\n  ${c?r[c]:""}\n  ${s?a[s]:""}\n  ${"semibold"===d?"font-semibold":""}\n  ${o?"no-visited":""}\n  ${l?i[l]:""}\n  ${m?"visited":""}`;return p("a",{...n,rpl:!0,className:x},g)},get b(){return n}}}));
SML.dm("CGzEIBwW",[],(async()=>{const t=t=>{let r=t.title??"";return t.text&&(r.length&&(r+="\n\n"),r+=t.text),t.url&&(r.length&&(r+="\n\n"),r+=t.url),r};var r;!function(t){t[t.NativeShare=0]="NativeShare",t[t.Clipboard=1]="Clipboard"}(r||(r={}));var a=async(a,e=!0,n=t)=>{if("function"==typeof window.navigator.share&&!e){try{await window.navigator.share(a)}catch(t){}return r.NativeShare}try{await navigator.clipboard.writeText(n(a))}catch(t){}return r.Clipboard};return{get S(){return r},get s(){return a}}}));
SML.dm("LCU6ttla",["CVEbQKiO","D7lSuCop"],(async(t,e)=>{const o=Math.min,n=Math.max,i=Math.round,r=Math.floor,a=t=>({x:t,y:t}),s={left:"right",right:"left",bottom:"top",top:"bottom"},l={start:"end",end:"start"};function c(t,e,i){return n(t,o(e,i))}function p(t,e){return"function"==typeof t?t(e):t}function f(t){return t.split("-")[0]}function h(t){return t.split("-")[1]}function u(t){return"x"===t?"y":"x"}function d(t){return"y"===t?"height":"width"}function m(t){return["top","bottom"].includes(f(t))?"y":"x"}function y(t){return u(m(t))}function g(t){return t.replace(/start|end/g,(t=>l[t]))}function v(t){return t.replace(/left|right|bottom|top/g,(t=>s[t]))}function b(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function w(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function x(t,e,o){let{reference:n,floating:i}=t;const r=m(e),a=y(e),s=d(a),l=f(e),c="y"===r,p=n.x+n.width/2-i.width/2,u=n.y+n.height/2-i.height/2,g=n[s]/2-i[s]/2;let v;switch(l){case"top":v={x:p,y:n.y-i.height};break;case"bottom":v={x:p,y:n.y+n.height};break;case"right":v={x:n.x+n.width,y:u};break;case"left":v={x:n.x-i.width,y:u};break;default:v={x:n.x,y:n.y}}switch(h(e)){case"start":v[a]-=g*(o&&c?-1:1);break;case"end":v[a]+=g*(o&&c?-1:1)}return v}async function E(t,e){var o;void 0===e&&(e={});const{x:n,y:i,platform:r,rects:a,elements:s,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:u=!1,padding:d=0}=p(e,t),m=b(d),y=s[u?"floating"===h?"reference":"floating":h],g=w(await r.getClippingRect({element:null==(o=await(null==r.isElement?void 0:r.isElement(y)))||o?y:y.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:l})),v="floating"===h?{...a.floating,x:n,y:i}:a.reference,x=await(null==r.getOffsetParent?void 0:r.getOffsetParent(s.floating)),E=await(null==r.isElement?void 0:r.isElement(x))&&await(null==r.getScale?void 0:r.getScale(x))||{x:1,y:1},P=w(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:x,strategy:l}):v);return{top:(g.top-P.top+m.top)/E.y,bottom:(P.bottom-g.bottom+m.bottom)/E.y,left:(g.left-P.left+m.left)/E.x,right:(P.right-g.right+m.right)/E.x}}const P=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var o,n;const{placement:i,middlewareData:r,rects:a,initialPlacement:s,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:b,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:P=!0,...R}=p(t,e);if(null!=(o=r.arrow)&&o.alignmentOffset)return{};const S=f(i),T=f(s)===s,z=await(null==l.isRTL?void 0:l.isRTL(c.floating)),L=b||(T||!P?[v(s)]:function(t){const e=v(t);return[g(t),e,g(e)]}(s));b||"none"===x||L.push(...function(t,e,o,n){const i=h(t);let r=function(t,e,o){const n=["left","right"],i=["right","left"],r=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return o?e?i:n:e?n:i;case"left":case"right":return e?r:a;default:return[]}}(f(t),"start"===o,n);return i&&(r=r.map((t=>t+"-"+i)),e&&(r=r.concat(r.map(g)))),r}(s,P,x,z));const A=[s,...L],O=await E(e,R),_=[];let k=(null==(n=r.flip)?void 0:n.overflows)||[];if(u&&_.push(O[S]),m){const t=function(t,e,o){void 0===o&&(o=!1);const n=h(t),i=y(t),r=d(i);let a="x"===i?n===(o?"end":"start")?"right":"left":"start"===n?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=v(a)),[a,v(a)]}(i,a,z);_.push(O[t[0]],O[t[1]])}if(k=[...k,{placement:i,overflows:_}],!_.every((t=>t<=0))){var C,B;const t=((null==(C=r.flip)?void 0:C.index)||0)+1,e=A[t];if(e)return{data:{index:t,overflows:k},reset:{placement:e}};let o=null==(B=k.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:B.placement;if(!o)switch(w){case"bestFit":{var D;const t=null==(D=k.map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:D[0];t&&(o=t);break}case"initialPlacement":o=s}if(i!==o)return{reset:{placement:o}}}return{}}}};const R=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var o,n;const{x:i,y:r,placement:a,middlewareData:s}=e,l=await async function(t,e){const{placement:o,platform:n,elements:i}=t,r=await(null==n.isRTL?void 0:n.isRTL(i.floating)),a=f(o),s=h(o),l="y"===m(o),c=["left","top"].includes(a)?-1:1,u=r&&l?-1:1,d=p(e,t);let{mainAxis:y,crossAxis:g,alignmentAxis:v}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return s&&"number"==typeof v&&(g="end"===s?-1*v:v),l?{x:g*u,y:y*c}:{x:y*c,y:g*u}}(e,t);return a===(null==(o=s.offset)?void 0:o.placement)&&null!=(n=s.arrow)&&n.alignmentOffset?{}:{x:i+l.x,y:r+l.y,data:{...l,placement:a}}}}},S=function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(e){const{placement:i,rects:r,platform:a,elements:s}=e,{apply:l=()=>{},...c}=p(t,e),u=await E(e,c),d=f(i),y=h(i),g="y"===m(i),{width:v,height:b}=r.floating;let w,x;"top"===d||"bottom"===d?(w=d,x=y===(await(null==a.isRTL?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(x=d,w="end"===y?"top":"bottom");const P=b-u[w],R=v-u[x],S=!e.middlewareData.shift;let T=P,z=R;if(g){const t=v-u.left-u.right;z=y||S?o(R,t):t}else{const t=b-u.top-u.bottom;T=y||S?o(P,t):t}if(S&&!y){const t=n(u.left,0),e=n(u.right,0),o=n(u.top,0),i=n(u.bottom,0);g?z=v-2*(0!==t||0!==e?t+e:n(u.left,u.right)):T=b-2*(0!==o||0!==i?o+i:n(u.top,u.bottom))}await l({...e,availableWidth:z,availableHeight:T});const L=await a.getDimensions(s.floating);return v!==L.width||b!==L.height?{reset:{rects:!0}}:{}}}};function T(t){return A(t)?(t.nodeName||"").toLowerCase():"#document"}function z(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function L(t){var e;return null==(e=(A(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function A(t){return t instanceof Node||t instanceof z(t).Node}function O(t){return t instanceof Element||t instanceof z(t).Element}function _(t){return t instanceof HTMLElement||t instanceof z(t).HTMLElement}function k(t){return"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof z(t).ShadowRoot)}function C(t){const{overflow:e,overflowX:o,overflowY:n,display:i}=N(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+o)&&!["inline","contents"].includes(i)}function B(t){return["table","td","th"].includes(T(t))}function D(t){const e=$(),o=N(t);return"none"!==o.transform||"none"!==o.perspective||!!o.containerType&&"normal"!==o.containerType||!e&&!!o.backdropFilter&&"none"!==o.backdropFilter||!e&&!!o.filter&&"none"!==o.filter||["transform","perspective","filter"].some((t=>(o.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(o.contain||"").includes(t)))}function $(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function F(t){return["html","body","#document"].includes(T(t))}function N(t){return z(t).getComputedStyle(t)}function H(t){return O(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function M(t){if("html"===T(t))return t;const e=t.assignedSlot||t.parentNode||k(t)&&t.host||L(t);return k(e)?e.host:e}function W(t){const e=M(t);return F(e)?t.ownerDocument?t.ownerDocument.body:t.body:_(e)&&C(e)?e:W(e)}function j(t,e,o){var n;void 0===e&&(e=[]),void 0===o&&(o=!0);const i=W(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),a=z(i);return r?e.concat(a,a.visualViewport||[],C(i)?i:[],a.frameElement&&o?j(a.frameElement):[]):e.concat(i,j(i,[],o))}function V(t){const e=N(t);let o=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=_(t),a=r?t.offsetWidth:o,s=r?t.offsetHeight:n,l=i(o)!==a||i(n)!==s;return l&&(o=a,n=s),{width:o,height:n,$:l}}function I(t){return O(t)?t:t.contextElement}function q(t){const e=I(t);if(!_(e))return a(1);const o=e.getBoundingClientRect(),{width:n,height:r,$:s}=V(e);let l=(s?i(o.width):o.width)/n,c=(s?i(o.height):o.height)/r;return l&&Number.isFinite(l)||(l=1),c&&Number.isFinite(c)||(c=1),{x:l,y:c}}const Y=a(0);function U(t){const e=z(t);return $()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Y}function X(t,e,o,n){void 0===e&&(e=!1),void 0===o&&(o=!1);const i=t.getBoundingClientRect(),r=I(t);let s=a(1);e&&(n?O(n)&&(s=q(n)):s=q(t));const l=function(t,e,o){return void 0===e&&(e=!1),!(!o||e&&o!==z(t))&&e}(r,o,n)?U(r):a(0);let c=(i.left+l.x)/s.x,p=(i.top+l.y)/s.y,f=i.width/s.x,h=i.height/s.y;if(r){const t=z(r),e=n&&O(n)?z(n):n;let o=t.frameElement;for(;o&&n&&e!==t;){const t=q(o),e=o.getBoundingClientRect(),n=N(o),i=e.left+(o.clientLeft+parseFloat(n.paddingLeft))*t.x,r=e.top+(o.clientTop+parseFloat(n.paddingTop))*t.y;c*=t.x,p*=t.y,f*=t.x,h*=t.y,c+=i,p+=r,o=z(o).frameElement}}return w({width:f,height:h,x:c,y:p})}function G(t){return X(L(t)).left+H(t).scrollLeft}function J(t,e,o){let i;if("viewport"===e)i=function(t,e){const o=z(t),n=L(t),i=o.visualViewport;let r=n.clientWidth,a=n.clientHeight,s=0,l=0;if(i){r=i.width,a=i.height;const t=$();(!t||t&&"fixed"===e)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:r,height:a,x:s,y:l}}(t,o);else if("document"===e)i=function(t){const e=L(t),o=H(t),i=t.ownerDocument.body,r=n(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=n(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-o.scrollLeft+G(t);const l=-o.scrollTop;return"rtl"===N(i).direction&&(s+=n(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:s,y:l}}(L(t));else if(O(e))i=function(t,e){const o=X(t,!0,"fixed"===e),n=o.top+t.clientTop,i=o.left+t.clientLeft,r=_(t)?q(t):a(1);return{width:t.clientWidth*r.x,height:t.clientHeight*r.y,x:i*r.x,y:n*r.y}}(e,o);else{const o=U(t);i={...e,x:e.x-o.x,y:e.y-o.y}}return w(i)}function K(t,e){const o=M(t);return!(o===e||!O(o)||F(o))&&("fixed"===N(o).position||K(o,e))}function Q(t,e,o){const n=_(e),i=L(e),r="fixed"===o,s=X(t,!0,r,e);let l={scrollLeft:0,scrollTop:0};const c=a(0);if(n||!n&&!r)if(("body"!==T(e)||C(i))&&(l=H(e)),n){const t=X(e,!0,r,e);c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}else i&&(c.x=G(i));return{x:s.left+l.scrollLeft-c.x,y:s.top+l.scrollTop-c.y,width:s.width,height:s.height}}function Z(t,e){return _(t)&&"fixed"!==N(t).position?e?e(t):t.offsetParent:null}function tt(t,e){const o=z(t);if(!_(t))return o;let n=Z(t,e);for(;n&&B(n)&&"static"===N(n).position;)n=Z(n,e);return n&&("html"===T(n)||"body"===T(n)&&"static"===N(n).position&&!D(n))?o:n||function(t){let e=M(t);for(;_(e)&&!F(e);){if(D(e))return e;e=M(e)}return null}(t)||o}const et={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:n}=t;const i=_(o),r=L(o);if(o===r)return e;let s={scrollLeft:0,scrollTop:0},l=a(1);const c=a(0);if((i||!i&&"fixed"!==n)&&(("body"!==T(o)||C(r))&&(s=H(o)),_(o))){const t=X(o);l=q(o),c.x=t.x+o.clientLeft,c.y=t.y+o.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-s.scrollLeft*l.x+c.x,y:e.y*l.y-s.scrollTop*l.y+c.y}},getDocumentElement:L,getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:r,strategy:a}=t;const s=[..."clippingAncestors"===i?function(t,e){const o=e.get(t);if(o)return o;let n=j(t,[],!1).filter((t=>O(t)&&"body"!==T(t))),i=null;const r="fixed"===N(t).position;let a=r?M(t):t;for(;O(a)&&!F(a);){const e=N(a),o=D(a);o||"fixed"!==e.position||(i=null),(r?!o&&!i:!o&&"static"===e.position&&i&&["absolute","fixed"].includes(i.position)||C(a)&&!o&&K(t,a))?n=n.filter((t=>t!==a)):i=e,a=M(a)}return e.set(t,n),n}(e,this._c):[].concat(i),r],l=s[0],c=s.reduce(((t,i)=>{const r=J(e,i,a);return t.top=n(r.top,t.top),t.right=o(r.right,t.right),t.bottom=o(r.bottom,t.bottom),t.left=n(r.left,t.left),t}),J(e,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:tt,getElementRects:async function(t){let{reference:e,floating:o,strategy:n}=t;const i=this.getOffsetParent||tt,r=this.getDimensions;return{reference:Q(e,await i(o),n),floating:{x:0,y:0,...await r(o)}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){return V(t)},getScale:q,isElement:O,isRTL:function(t){return"rtl"===N(t).direction}};function ot(t,e,i,a){void 0===a&&(a={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:p="function"==typeof IntersectionObserver,animationFrame:f=!1}=a,h=I(t),u=s||l?[...h?j(h):[],...j(e)]:[];u.forEach((t=>{s&&t.addEventListener("scroll",i,{passive:!0}),l&&t.addEventListener("resize",i)}));const d=h&&p?function(t,e){let i,a=null;const s=L(t);function l(){clearTimeout(i),a&&a.disconnect(),a=null}return function c(p,f){void 0===p&&(p=!1),void 0===f&&(f=1),l();const{left:h,top:u,width:d,height:m}=t.getBoundingClientRect();if(p||e(),!d||!m)return;const y={rootMargin:-r(u)+"px "+-r(s.clientWidth-(h+d))+"px "+-r(s.clientHeight-(u+m))+"px "+-r(h)+"px",threshold:n(0,o(1,f))||1};let g=!0;function v(t){const e=t[0].intersectionRatio;if(e!==f){if(!g)return c();e?c(!1,e):i=setTimeout((()=>{c(!1,1e-7)}),100)}g=!1}try{a=new IntersectionObserver(v,{...y,root:s.ownerDocument})}catch(t){a=new IntersectionObserver(v,y)}a.observe(t)}(!0),l}(h,i):null;let m,y=-1,g=null;c&&(g=new ResizeObserver((t=>{let[o]=t;o&&o.target===h&&g&&(g.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame((()=>{g&&g.observe(e)}))),i()})),h&&!f&&g.observe(h),g.observe(e));let v=f?X(t):null;return f&&function e(){const o=X(t);!v||o.x===v.x&&o.y===v.y&&o.width===v.width&&o.height===v.height||i();v=o,m=requestAnimationFrame(e)}(),i(),()=>{u.forEach((t=>{s&&t.removeEventListener("scroll",i),l&&t.removeEventListener("resize",i)})),d&&d(),g&&g.disconnect(),g=null,f&&cancelAnimationFrame(m)}}const nt=(t,e,o)=>{const n=new Map,i={platform:et,...o},r={...i.platform,_c:n};return(async(t,e,o)=>{const{placement:n="bottom",strategy:i="absolute",middleware:r=[],platform:a}=o,s=r.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:p,y:f}=x(c,n,l),h=n,u={},d=0;for(let o=0;o<s.length;o++){const{name:r,fn:m}=s[o],{x:y,y:g,data:v,reset:b}=await m({x:p,y:f,initialPlacement:n,placement:h,strategy:i,middlewareData:u,rects:c,platform:a,elements:{reference:t,floating:e}});p=null!=y?y:p,f=null!=g?g:f,u={...u,[r]:{...u[r],...v}},b&&d<=50&&(d++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await a.getElementRects({reference:t,floating:e,strategy:i}):b.rects),({x:p,y:f}=x(c,h,l))),o=-1)}return{x:p,y:f,placement:h,strategy:i,middlewareData:u}})(t,e,{...i,platform:r})};function it(t){return function(t){for(let e=t;e;e=rt(e))if(e instanceof Element&&"none"===getComputedStyle(e).display)return null;for(let e=rt(t);e;e=rt(e)){if(!(e instanceof Element))continue;const t=getComputedStyle(e);if("contents"!==t.display){if("static"!==t.position||"none"!==t.filter)return e;if("BODY"===e.tagName)return e}}return null}(t)}function rt(t){return t.assignedSlot?t.assignedSlot:t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}var at=t.i`${e.y}:host{--arrow-color:var(--color-neutral-background-strong);--arrow-size:6px;--arrow-size-diagonal:calc(var(--arrow-size) * 0.7071);--arrow-padding-offset:calc(var(--arrow-size-diagonal) - var(--arrow-size));display:contents}.popup{position:absolute;isolation:isolate;max-width:var(--auto-size-available-width,none);max-height:var(--auto-size-available-height,none)}.popup--fixed{position:fixed}.popup:not(.popup--active){display:none}.popup--arrow{position:absolute;width:calc(var(--arrow-size-diagonal) * 2);height:calc(var(--arrow-size-diagonal) * 2);rotate:45deg;background:var(--arrow-color)}.popup-safe-area:not(.popup-safe-area--visible){display:none}.popup-safe-area{position:fixed;z-index:calc(var(--faceplate-tooltip-z-index,1) - 1);inset:0;clip-path:polygon(var(--safe-area-top-left-x,0) var(--safe-area-top-left-y,0),var(--safe-area-top-right-x,0) var(--safe-area-top-right-y,0),var(--safe-area-bottom-right-x,0) var(--safe-area-bottom-right-y,0),var(--safe-area-bottom-left-x,0) var(--safe-area-bottom-left-y,0))}`;const st={Top:"top",TopStart:"top-start",TopEnd:"top-end",Bottom:"bottom",BottomStart:"bottom-start",BottomEnd:"bottom-end",Right:"right",RightStart:"right-start",RightEnd:"right-end",Left:"left",LeftStart:"left-start",LeftEnd:"left-end"},lt="anchor";class ct extends e.w{constructor(){super(...arguments),this.anchorEl=null,this.active=!1,this.placement=st.Top,this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement=lt,this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0,this.safeArea=!1,this.updateSafeArea=()=>{if(!this.safeArea||!this.anchorEl)return;const t=this.anchorEl.getBoundingClientRect(),e=this.popup.getBoundingClientRect();let o=0,n=0,i=0,r=0,a=0,s=0,l=0,c=0;this.placement.includes("top")||this.placement.includes("bottom")?t.top<e.top?(o=t.left,n=t.bottom,i=t.right,r=t.bottom,a=e.left,s=e.top,l=e.right,c=e.top):(o=e.left,n=e.bottom,i=e.right,r=e.bottom,a=t.left,s=t.top,l=t.right,c=t.top):t.left<e.left?(o=t.right,n=t.top,i=e.left,r=e.top,a=t.right,s=t.bottom,l=e.left,c=e.bottom):(o=e.right,n=e.top,i=t.left,r=t.top,a=e.right,s=e.bottom,l=t.left,c=t.bottom),this.style.setProperty("--safe-area-top-left-x",`${o}px`),this.style.setProperty("--safe-area-top-left-y",`${n}px`),this.style.setProperty("--safe-area-top-right-x",`${i}px`),this.style.setProperty("--safe-area-top-right-y",`${r}px`),this.style.setProperty("--safe-area-bottom-left-x",`${a}px`),this.style.setProperty("--safe-area-bottom-left-y",`${s}px`),this.style.setProperty("--safe-area-bottom-right-x",`${l}px`),this.style.setProperty("--safe-area-bottom-right-y",`${c}px`)}}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){super.disconnectedCallback(),this.stop()}async updated(t){super.updated(t),t.has("active")&&(this.active?this.start():this.stop()),t.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&"string"==typeof this.anchor){const t=this.getRootNode();this.anchorEl=t.getElementById(this.anchor)}else this.anchor instanceof Element||null!==(t=this.anchor)&&"object"==typeof t&&"getBoundingClientRect"in t?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');var t;this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),this.anchorEl&&this.start()}start(){this.anchorEl&&(this.cleanup=ot(this.anchorEl,this.popup,(()=>{this.reposition()})))}async stop(){return new Promise((t=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame((()=>t()))):t()}))}reposition(){if(!this.active||!this.anchorEl)return;const t=[R({mainAxis:this.distance,crossAxis:this.skidding})];var e;this.sync?t.push(S({apply:({rects:t})=>{const e="width"===this.sync||"both"===this.sync,o="height"===this.sync||"both"===this.sync;this.popup.style.width=e?`${t.reference.width}px`:"",this.popup.style.height=o?`${t.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&t.push(P({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:"best-fit"===this.flipFallbackStrategy?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&t.push((void 0===(e={boundary:this.shiftBoundary,padding:this.shiftPadding})&&(e={}),{name:"shift",options:e,async fn(t){const{x:o,y:n,placement:i}=t,{mainAxis:r=!0,crossAxis:a=!1,limiter:s={fn:t=>{let{x:e,y:o}=t;return{x:e,y:o}}},...l}=p(e,t),h={x:o,y:n},d=await E(t,l),y=m(f(i)),g=u(y);let v=h[g],b=h[y];if(r){const t="y"===g?"bottom":"right";v=c(v+d["y"===g?"top":"left"],v,v-d[t])}if(a){const t="y"===y?"bottom":"right";b=c(b+d["y"===y?"top":"left"],b,b-d[t])}const w=s.fn({...t,[g]:v,[y]:b});return{...w,data:{x:w.x-o,y:w.y-n}}}})),this.autoSize?t.push(S({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:t,availableHeight:e})=>{"vertical"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-height",`${e}px`):this.style.removeProperty("--auto-size-available-height"),"horizontal"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-width",`${t}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&t.push((t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:s,elements:l,middlewareData:f}=e,{element:u,padding:m=0}=p(t,e)||{};if(null==u)return{};const g=b(m),v={x:n,y:i},w=y(r),x=d(w),E=await s.getDimensions(u),P="y"===w,R=P?"top":"left",S=P?"bottom":"right",T=P?"clientHeight":"clientWidth",z=a.reference[x]+a.reference[w]-v[w]-a.floating[x],L=v[w]-a.reference[w],A=await(null==s.getOffsetParent?void 0:s.getOffsetParent(u));let O=A?A[T]:0;O&&await(null==s.isElement?void 0:s.isElement(A))||(O=l.floating[T]||a.floating[x]);const _=z/2-L/2,k=O/2-E[x]/2-1,C=o(g[R],k),B=o(g[S],k),D=C,$=O-E[x]-B,F=O/2-E[x]/2+_,N=c(D,F,$),H=!f.arrow&&null!=h(r)&&F!=N&&a.reference[x]/2-(F<D?C:B)-E[x]/2<0,M=H?F<D?F-D:F-$:0;return{[w]:v[w]+M,data:{[w]:N,centerOffset:F-N-M,...H&&{alignmentOffset:M}},reset:H}}}))({element:this.arrowEl,padding:this.arrowPadding}));const n="absolute"===this.strategy?t=>et.getOffsetParent(t,it):et.getOffsetParent;nt(this.anchorEl,this.popup,{placement:this.placement,middleware:t,strategy:this.strategy,platform:{...et,getOffsetParent:n}}).then((({x:t,y:e,middlewareData:o,placement:n})=>{const i="rtl"===getComputedStyle(this).direction,r={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]];if(this.setAttribute("data-current-placement",n),Object.assign(this.popup.style,{left:`${t}px`,top:`${e}px`}),!this.arrow)return;const a=o.arrow.x,s=o.arrow.y;let l="",c="",p="",f="";if("start"===this.arrowPlacement){const t="number"==typeof a?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";l="number"==typeof s?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",c=i?t:"",f=i?"":t}else if("end"===this.arrowPlacement){const t="number"==typeof a?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";c=i?"":t,f=i?t:"",p="number"==typeof s?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else"center"===this.arrowPlacement?(f="number"==typeof a?"calc(50% - var(--arrow-size-diagonal))":"",l="number"==typeof s?"calc(50% - var(--arrow-size-diagonal))":""):(f="number"==typeof a?`${a}px`:"",l="number"==typeof s?`${s}px`:"");Object.assign(this.arrowEl.style,{top:l,right:c,bottom:p,left:f,[r]:"calc(var(--arrow-size-diagonal) * -1)"})})),requestAnimationFrame((()=>this.updateSafeArea())),this.emitter.dispatch("reposition")}render(){return t.x` <slot name="anchor" @slotchange="${this.handleAnchorChange}"></slot> <span part="safe-area" class="${e.x({"popup-safe-area":!0,"popup-safe-area--visible":this.safeArea&&this.active})}"></span> <div part="popup" class="${e.x({popup:!0,"popup--active":this.active,"popup--fixed":"fixed"===this.strategy,"popup--has-arrow":this.arrow})}"> <slot></slot> ${this.arrow?t.x`<div part="arrow" class="popup--arrow" role="presentation"></div>`:""} </div> `}}ct.styles=at,t._([t.z(".popup")],ct.prototype,"popup",void 0),t._([t.z(".popup--arrow")],ct.prototype,"arrowEl",void 0),t._([t.n()],ct.prototype,"anchor",void 0),t._([t.n({type:Boolean,reflect:!0})],ct.prototype,"active",void 0),t._([t.n({reflect:!0})],ct.prototype,"placement",void 0),t._([t.n({reflect:!0})],ct.prototype,"strategy",void 0),t._([t.n({type:Number})],ct.prototype,"distance",void 0),t._([t.n({type:Number})],ct.prototype,"skidding",void 0),t._([t.n({type:Boolean})],ct.prototype,"arrow",void 0),t._([t.n({attribute:"arrow-placement"})],ct.prototype,"arrowPlacement",void 0),t._([t.n({attribute:"arrow-padding",type:Number})],ct.prototype,"arrowPadding",void 0),t._([t.n({type:Boolean})],ct.prototype,"flip",void 0),t._([t.n({attribute:"flip-fallback-placements",converter:{fromAttribute:t=>t.split(" ").map((t=>t.trim())).filter((t=>""!==t))}})],ct.prototype,"flipFallbackPlacements",void 0),t._([t.n({attribute:"flip-fallback-strategy"})],ct.prototype,"flipFallbackStrategy",void 0),t._([t.n({type:Object})],ct.prototype,"flipBoundary",void 0),t._([t.n({attribute:"flip-padding",type:Number})],ct.prototype,"flipPadding",void 0),t._([t.n({type:Boolean})],ct.prototype,"shift",void 0),t._([t.n({type:Object})],ct.prototype,"shiftBoundary",void 0),t._([t.n({attribute:"shift-padding",type:Number})],ct.prototype,"shiftPadding",void 0),t._([t.n({attribute:"auto-size"})],ct.prototype,"autoSize",void 0),t._([t.n()],ct.prototype,"sync",void 0),t._([t.n({type:Object})],ct.prototype,"autoSizeBoundary",void 0),t._([t.n({attribute:"auto-size-padding",type:Number})],ct.prototype,"autoSizePadding",void 0),t._([t.n({attribute:"safe-area",type:Boolean})],ct.prototype,"safeArea",void 0);let pt=class extends ct{};return pt=t._([t.c("rpl-popper")],pt),{P:st}}));
SML.dm("BC8XSJYX",["CVEbQKiO","D7lSuCop","CCphb8vV","LCU6ttla"],(async(e,t,i,o)=>{const s={Neutral:"neutral",Inverted:"inverted",Primary:"primary"};class n extends t.w{constructor(){super(...arguments),this.contentSlotRef=t.aE(),this.defaultSlotRef=t.aE(),this.bodyRef=t.aE(),this.popperRef=t.aE(),this.interactionController=new i.a5(this,{isInteractedWith:e=>e.open,hoverDelayStart:e=>t.bX(getComputedStyle(e).getPropertyValue("--show-delay")),hoverDelayEnd:e=>t.bX(getComputedStyle(e).getPropertyValue("--hide-delay"))}),this.appearance=s.Neutral,this.content="",this.placement=o.P.Top,this.disabled=!1,this.distance=4,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1,this.noAnimate=!1,this.eventUsedMap=new WeakMap,this.handleDocumentKeyDown=e=>{"Escape"===e.key&&(e.stopPropagation(),this.hide())},this.handleDocumentClick=e=>{if(!(e.target instanceof HTMLElement)||this.hidden)return;this.eventUsedMap.has(e)||i.a6(this,e.target)||this.hide()}}disconnectedCallback(){document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick)}willUpdate(e){e.has("open")&&this.hasUpdated&&this.handleOpenChange(),e.has("disabled")&&this.handleDisabledChange(),(e.has("content")||e.has("distance")||e.has("hoist")||e.has("placement")||e.has("skidding"))&&this.handleOptionsChange()}firstUpdated(){this.bodyRef.value&&(this.bodyRef.value.hidden=!this.open),this.open&&(document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick),this.popperRef.value&&(this.popperRef.value.active=!0,this.popperRef.value.reposition()))}startInteraction(e){this.eventUsedMap.set(e,!0),this.show()}finishInteraction(e){this.eventUsedMap.set(e,!0),this.hide()}async handleOpenChange(){if(!this.disabled&&this.contentSlotRef.value&&this.bodyRef.value&&this.popperRef.value)if(this.open){this.emitter.dispatch("show"),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick),await t.bY(this.bodyRef.value),this.bodyRef.value.hidden=!1,this.popperRef.value.active=!0;const{keyframes:e,options:i}=t.bZ(this,"tooltip.show");await t.b_(this.popperRef.value.popup,e,i),this.popperRef.value.reposition(),this.emitter.dispatch("after-show")}else{this.emitter.dispatch("hide"),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick),await t.bY(this.bodyRef.value);const{keyframes:e,options:i}=t.bZ(this,"tooltip.hide");await t.b_(this.popperRef.value.popup,e,i),this.popperRef.value.active=!1,this.bodyRef.value.hidden=!0,this.emitter.dispatch("after-hide")}}async handleOptionsChange(){this.hasUpdated&&this.popperRef.value&&(await this.updateComplete,this.popperRef.value.reposition())}handleDisabledChange(){this.disabled&&this.open&&this.hide()}async show(){if(!this.open)return this.open=!0,t.b$(this,this.emitter.eventId("after-show"))}async hide(){if(this.open)return this.open=!1,t.b$(this,this.emitter.eventId("after-hide"))}render(){return e.x` <rpl-popper part="popper" exportparts="
          popup:popper--popup,
          arrow:popper--arrow
        " class="${t.x({tooltip:!0,"tooltip--open":this.open})}" placement="${this.placement}" distance="${this.distance}" skidding="${this.skidding}" strategy="${this.hoist?"fixed":"absolute"}" flip shift arrow safe-area @mouseenter="${this.interactionController.handleMouseEnter}" @mouseleave="${this.interactionController.handleMouseLeave}" @mousedown="${this.interactionController.handleMouseDown}" @mouseup="${this.interactionController.handleMouseUp}" @focusin="${this.interactionController.handleFocus}" @focusout="${this.interactionController.handleBlur}" ${t.aq(this.popperRef)}> <slot slot="anchor" aria-describedby="tooltip" @click="${this.interactionController.handleClick}" ${t.aq(this.defaultSlotRef)}></slot> <div part="body" id="tooltip" class="tooltip-body" role="tooltip" aria-live="${this.open?"polite":"off"}" ${t.aq(this.bodyRef)}> <slot name="content" ${t.aq(this.contentSlotRef)}>${this.content}</slot> <slot name="shortcut"></slot> </div> </rpl-popper> `}}return e._([e.n({type:String,reflect:!0})],n.prototype,"appearance",void 0),e._([e.n()],n.prototype,"content",void 0),e._([e.n()],n.prototype,"placement",void 0),e._([e.n({type:Boolean,reflect:!0})],n.prototype,"disabled",void 0),e._([e.n({type:Number})],n.prototype,"distance",void 0),e._([e.n({type:Boolean,reflect:!0})],n.prototype,"open",void 0),e._([e.n({type:Number})],n.prototype,"skidding",void 0),e._([e.n()],n.prototype,"trigger",void 0),e._([e.n({type:Boolean})],n.prototype,"hoist",void 0),e._([e.n({type:Boolean,attribute:"no-animate"})],n.prototype,"noAnimate",void 0),t.bW("tooltip.show",{keyframes:[{visibility:"visible",opacity:0,scale:.8},{opacity:1,scale:1}],options:{duration:150,easing:"ease"}}),t.bW("tooltip.hide",{keyframes:[{scale:1},{opacity:0,scale:.8}],options:{duration:150,easing:"ease"}}),{T:n,a:s}}));
SML.dm("AhHXxeIZ",["D7lSuCop","CVEbQKiO","BC8XSJYX","CCphb8vV","LCU6ttla"],(async(o,r,t)=>{var a=r.i`${o.y}:host{--max-width:20rem;--hide-delay:0ms;--show-delay:750ms;display:contents}:host,:host([appearance=neutral]){--rpl-tooltip-code-background-color:var(--color-neutral-background-hover);--rpl-tooltip-background-color:var(--color-neutral-background);--rpl-tooltip-color:var(--color-neutral-content-strong)}:host([appearance=inverted]){--rpl-tooltip-code-background-color:var(--color-inverted-neutral-background-hover);--rpl-tooltip-background-color:var(--color-inverted-neutral-background);--rpl-tooltip-color:var(--color-inverted-neutral-content-strong)}:host([appearance=primary]){--rpl-tooltip-background-color:var(--color-tooltip-bg-primary);--rpl-tooltip-color:var(--color-tooltip-text-primary)}.tooltip{--arrow-size:var(--rpl-tooltip-arrow-size, 4px);--arrow-color:var(--rpl-tooltip-background-color)}.tooltip[placement^=top]::part(arrow){box-shadow:1px 1px 2px rgba(0,0,0,.05)}.tooltip[placement^=bottom]::part(arrow){box-shadow:-1px -1px 2px rgba(0,0,0,.05)}.tooltip[placement^=left]::part(arrow){box-shadow:0 -2px 2px rgba(0,0,0,.05)}.tooltip[placement^=right]::part(arrow){box-shadow:-2px 0 2px rgba(0,0,0,.05)}.tooltip::part(popup){z-index:var(--rpl-z-index-tooltip,var(--faceplate-tooltip-z-index,1))}.tooltip[placement^=top]::part(popup){transform-origin:bottom}.tooltip[placement^=bottom]::part(popup){transform-origin:top}.tooltip[placement^=left]::part(popup){transform-origin:right}.tooltip[placement^=right]::part(popup){transform-origin:left}.tooltip-body{display:flex;justify-content:center;align-items:center;width:max-content;max-width:var(--max-width);border-radius:var(--rpl-tooltip-border-radius,.25rem);box-shadow:var(--rpl-tooltip-box-shadow,var(--boxshadow-tooltip));background-color:var(--rpl-tooltip-background-color);font:var(--rpl-tooltip-font,var(--font-12-16-semibold));color:var(--rpl-tooltip-color);padding:var(--rpl-tooltip-padding,.5rem);pointer-events:none;user-select:none;-webkit-user-select:none;gap:var(--rem4)}::slotted([slot=shortcut]),::slotted(code[slot=shortcut]){font:var(--rpl-tooltip-font,var(--font-12-16-semibold))!important;color:var(--rpl-tooltip-color)!important;background-color:var(--rpl-tooltip-code-background-color)!important;border:none!important;border-radius:calc(var(--rpl-tooltip-border-radius,.25rem) - var(--rem2))!important;padding:var(--rem4)!important}`;let p=class extends t.T{};return p.styles=a,p=r._([r.c("rpl-tooltip")],p),{get R(){return p}}}));
SML.dm("ClF_poCN",["D7lSuCop"],(async e=>{const t=new Set([e.aa.BrandMention,e.aa.ProfileAccountStats,e.aa.ProfileComments,e.aa.ProfileDashboard,e.aa.ProfileDownvoted,e.aa.ProfileHidden,e.aa.ProfileOverview,e.aa.ProfilePerformance,e.aa.ProfilePerformanceComments,e.aa.ProfilePosts,e.aa.ProfileRelatedKeywords,e.aa.ProfileSaved,e.aa.ProfileSubmitted,e.aa.ProfileTrendingConvoDetails,e.aa.ProfileCommunityFinder,e.aa.ProfileTrendingConvos,e.aa.ProfileUpvoted,e.aa.ProfileTrendMonitoring,e.aa.ProductCommunitiesPage,e.aa.ProductInsights,e.aa.ProductInsightDetailsPage,e.aa.ProductMentionsFeedPage,e.aa.ArticleDetails,e.aa.ArticleFeed,e.aa.ArticleInsights,e.aa.PublisherCommunities]),a=[e.aa.ProfileOverview,e.aa.ProfilePosts,e.aa.ProfileSaved,e.aa.ProfileUpvoted,e.aa.ProfileDownvoted,e.aa.ProfileHidden];var o;Array.from(t),function(e){e[e.Hour=0]="Hour",e[e.Day=1]="Day",e[e.Month=2]="Month",e[e.Year=3]="Year"}(o||(o={}));const n=e=>({unit:o.Day,value:-e}),s=e=>({unit:o.Month,value:-e});var r,i;!function(e){e[e.Yesterday=0]="Yesterday",e[e.LastWeek=1]="LastWeek",e[e.LastMonth=2]="LastMonth",e[e.Last3Months=3]="Last3Months",e[e.Last6Months=4]="Last6Months",e[e.LastYear=5]="LastYear"}(r||(r={})),function(e){e.Yesterday="day",e.LastWeek="week",e.LastMonth="month",e.Last3Months="last-3-months",e.Last6Months="last-6-months",e.LastYear="year"}(i||(i={})),new Set([i.LastWeek,i.LastMonth,i.Last3Months]),o.Day;const d={[r.LastWeek]:i.LastWeek,[r.LastMonth]:i.LastMonth,[r.Last3Months]:i.Last3Months,[r.Last6Months]:i.Last6Months},f=[{type:r.LastWeek,value:d[r.LastWeek],offset:n(7)},{type:r.LastMonth,value:d[r.LastMonth],offset:n(30)},{type:r.Last3Months,value:d[r.Last3Months],offset:s(3)},{type:r.Last6Months,value:d[r.Last6Months],offset:s(6)}],l=new Map(f.map((({value:e,offset:t})=>[e,t]))),h=i.LastMonth;var M;l.get(h),i.LastWeek,e.fF.Week,i.LastMonth,e.fF.Month,i.Last3Months,e.fF.Months_3,i.Last6Months,e.fF.Months_6,i.LastYear,e.fF.Month,i.Yesterday,e.fF.Month,i.Yesterday,e.fG.Day,i.LastWeek,e.fG.Week,i.LastMonth,e.fG.Month,i.Last3Months,e.fG.Months_3,i.Last6Months,e.fG.Months_3,i.LastYear,e.fG.Months_3,function(e){e.ProfileCreation="profile_creation_step",e.VerifyEmail="verify_email_step"}(M||(M={}));return{A:"reddit-pro-account-stats-content-id",D:"profile-dashboard-performance-overview-content",O:"overview-box-value",P:"profile-active-subreddits-modal",get R(){return i},S:"REDDIT_PRO_SHARE_BUTTON_COACHMARK",T:"trend-monitoring-add-keyword-modal",a:"profile-contributions-modal",b:h,c:"t",d:"reddit_pro_recommended_keywords",e:"reddit-pro-recommended-keywords",get f(){return o},g:"/profiles",h:"trend-monitoring-manage-keywords-modal",i:e=>t.has(e),j:"delete-keyword-confirmation-modal",k:"reddit_pro_onboarding",l:"profile-creation-add-description-event",m:"submit-profile-creation",n:"profile-creation-submit-event",o:"profile-creation-complete-event",get p(){return M},q:"profile-followers-modal",r:a,s:f,t:"REDDIT_PRO_PROFILE_PIN_POST_COACHMARK"}}));
SML.dm("GpA9mJze",["CVEbQKiO","D7lSuCop","BC8XSJYX","LCU6ttla","CCphb8vV"],(async(r,o,a,t)=>{class e extends a.T{constructor(){super(...arguments),this.variant="plain",this.placement=t.P.Bottom,this.disabled=!1,this.label="",this.distance=8,this.animationNames={show:"coachmark.show",hide:"coachmark.hide",denyClose:"coachmark.denyClose",overlayShow:"coachmark.overlay.show",overlayHide:"coachmark.overlay.hide"}}connectedCallback(){super.connectedCallback(),this.addEventListener("rpl-coachmark-card:close-button-clicked",this.hide)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("rpl-coachmark-card:close-button-clicked",this.hide)}render(){return r.x` <rpl-popper ?active="${this.open}" strategy="${this.hoist?"fixed":"absolute"}" .anchor="${this.anchor}" flip shift arrow safe-area distance="${this.distance}" skidding="${this.skidding}" placement="${r.l(this.placement)}" exportparts="
          popup:popper--popup,
          arrow:popper--arrow
        " class="${o.x({coachmark:!0,"coachmark--open":this.open})}" ${o.aq(this.popperRef)}> <slot slot="anchor" ${o.aq(this.defaultSlotRef)}></slot> <slot name="content" ${o.aq(this.bodyRef)} ${o.aq(this.contentSlotRef)}></slot> </rpl-popper> `}}r._([r.n({type:String,reflect:!0})],e.prototype,"variant",void 0),r._([r.n({type:String,reflect:!0})],e.prototype,"placement",void 0),r._([r.n({type:Boolean,reflect:!0})],e.prototype,"disabled",void 0),r._([r.n({type:String,reflect:!0})],e.prototype,"label",void 0),r._([r.n()],e.prototype,"anchor",void 0);var p=r.i`${o.y}:host{--transition-duration:250ms;display:contents}:host,:host([appearance=neutral]){--rpl-coachmark-background-color:var(--color-neutral-background);--rpl-coachmark-color:var(--color-neutral-content-strong)}:host([appearance=inverted]){--rpl-coachmark-background-color:var(--color-inverted-neutral-background);--rpl-coachmark-color:var(--color-inverted-neutral-content-strong)}.coachmark{--arrow-size:var(--rpl-coachmark-arrow-size, 4px);--arrow-color:var(--rpl-coachmark-background-color)}rpl-popper{--arrow-size:8px}rpl-popper[placement^=top]::part(arrow){box-shadow:1px 1px 2px rgba(0,0,0,.05)}rpl-popper[placement^=bottom]::part(arrow){box-shadow:-1px -1px 2px rgba(0,0,0,.05)}rpl-popper[placement^=left]::part(arrow){box-shadow:0 -2px 2px rgba(0,0,0,.05)}rpl-popper[placement^=right]::part(arrow){box-shadow:-2px 0 2px rgba(0,0,0,.05)}rpl-popper::part(popup){z-index:var(--rpl-z-index-tooltip,var(--faceplate-tooltip-z-index,1))}rpl-popper[placement^=top]::part(popup){transform-origin:bottom}rpl-popper[placement^=bottom]::part(popup){transform-origin:top}rpl-popper[placement^=left]::part(popup){transform-origin:right}rpl-popper[placement^=right]::part(popup){transform-origin:left}`;let c=class extends e{};return c.styles=p,c=r._([r.c("rpl-coachmark")],c),{get RPLCoachmark(){return c}}}));
SML.dm("B92R8McT",["CVEbQKiO","CCphb8vV","D7lSuCop"],(async(t,e,o)=>{const a="title-icon",s="close-button",l="primary-button",n="secondary-button",r="tertiary-button";class i extends o.w{constructor(){super(...arguments),this.appearance="neutral",this.autoClose=!1,this.emitCloseButtonClickEvent=()=>{this.emitter.dispatch("close-button-clicked",{bubbles:!0,composed:!0})},this.handleCloseButtonClick=t=>{t.stopPropagation(),this.autoClose&&this.emitCloseButtonClickEvent()},this.handleCloseButtonKeydown=t=>{this.autoClose&&"Enter"===t.key&&this.emitCloseButtonClickEvent()}}render(){const o=e.z(this,a),i=e.z(this,s),d=e.z(this,l),c=e.z(this,n),m=e.z(this,r),p=d||c||m;return t.x`<div> <slot name="${"title-graphic"}"></slot> <div class="main"> <div class="content"> <div class="title-row"> <slot name="${a}" class="${o?"has-slotted":""}"></slot> <slot name="${"title"}"></slot> <slot name="${s}" part="close-button" class="${i?"has-slotted":""}" @click="${this.handleCloseButtonClick}" @keydown="${this.handleCloseButtonKeydown}"></slot> </div> <div class="body"><slot></slot></div> </div> <div class="footer ${p?"has-slotted":""}"> <slot name="${r}" class="${m?"has-slotted":""}"></slot> <div class="footer-right"> <slot name="${n}"></slot> <slot name="${l}"></slot> </div> </div> </div> </div>`}}t._([t.n({type:String,reflect:!0})],i.prototype,"appearance",void 0),t._([t.n({type:Boolean,reflect:!0,attribute:"auto-close"})],i.prototype,"autoClose",void 0);var d=t.i`${o.y}:host{display:flex;flex-direction:column;border-radius:var(--rem16);overflow:hidden;box-shadow:var(--boxshadow-modal);gap:var(--rem8);background-color:var(--color-neutral-background);color:var(--color-neutral-content-strong)}:host([appearance=inverted]){background-color:var(--color-inverted-neutral-background);color:var(--color-inverted-neutral-content-strong)}.main{display:flex;flex-direction:column;padding:var(--rem8) var(--rem8) var(--rem8) var(--rem16)}slot[name=title-graphic]{display:flex}.title-row{display:flex}.body{padding-inline-end:var(--rem8)}slot[name=title-icon].has-slotted{display:flex;padding-top:var(--rem8);padding-inline-end:var(--rem12)}slot[name=title]{display:flex;align-items:center;flex-grow:1;flex-shrink:1;min-width:0;overflow:hidden;font-size:var(--rem14);font-weight:700}slot:not([name]){white-space:wrap}slot[name=close-button].has-slotted{display:flex;padding-inline-start:var(--rem4)}slot[name=primary-button]{display:flex;padding-inline-end:var(--rem8)}slot[name=tertiary-button].has-slotted{font-size:var(--rem12);flex-shrink:1;min-width:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding-inline-end:var(--rem8)}.footer{display:flex;align-items:center;justify-content:end;padding-inline-end:var(--rem8)}.footer.has-slotted{padding-top:var(--rem8)}.footer:has(slot[name=tertiary-button].has-slotted){justify-content:space-between}.footer-right{display:flex}`;let c=class extends i{};return c.styles=d,c=t._([t.c("rpl-coachmark-card")],c),{get RPLCoachmarkCard(){return c}}}));
SML.dm("DJy2jSvu",["CVEbQKiO","D7lSuCop","likT9J3g","UeyFDWWE","CK9FveTr","CGzEIBwW","ClF_poCN","CCphb8vV","LCU6ttla","B05atAPk","AhHXxeIZ","GpA9mJze","B92R8McT","BC8XSJYX","DEQ-l4mm"],(async(e,t,i,a,o,r,n,s,l,c)=>{let p=t.f;const h=async(e,i=!1)=>{try{return await p({name:t.df,renderMode:t.g.Contents,queryParams:{postId:e,isEditMode:i?"true":"false"}}),!0}catch{return!1}},u="share-menu-template",d="share-menu-copy-link-option",m="share-menu-crosspost-option",k="share-menu-embed-option",T="share-dropdown-menu",E=e=>({target:t,placement:i})=>I({...e,target:t,placement:i??e.placement}),S=({content:i,experienceName:a,source:o})=>e.x`<rpl-coachmark-card auto-close appearance="inverted" slot="content" class="${"whitespace-nowrap"}"> ${(({experienceName:i,source:a})=>{const o='closest([slot="close-button"])';return e.x` ${t.k({attributes:{type:"button","aria-label":"Close",slot:"close-button"},appearance:"plainInverted",leadingIcon:e.C({size:e.q.Small}),size:t._.Small})} <ac-track san="${a}|click|close_button" trigger-elem="${o}"> </ac-track> ${b({action:t.X.Dismiss,experienceName:i,triggerElem:o})} `})({experienceName:a,source:o})} <span slot="title" class="font-[500]">${i}</span> <ac-track trigger="view" san="${o}|view|card"></ac-track> ${b({action:t.X.View,experienceName:a,trigger:"view"})} </rpl-coachmark-card> `,b=({action:e,experienceName:i,trigger:a,triggerElem:o})=>s.ao({operation:t.O.StoreUxtargetingAction,trigger:a,triggerElem:o,variables:{input:{action:e,eligibleExperience:{experienceName:i,experience:t.V.StringIdExperience}}}}),I=({content:i,experienceName:a,placement:o,source:r,target:n})=>e.x` <rpl-coachmark open no-animate trigger="manual" appearance="inverted" placement="${e.l(o)}" id="reddit-pro-coachmark" label="${i}"> ${(({experienceName:i,target:a,source:o})=>e.x` <span> ${a} <ac-call target="closest(#reddit-pro-coachmark)" method="hide()"> </ac-call> <ac-track san="${o}|click|target"></ac-track> ${b({action:t.X.Click,experienceName:i})} </span> `)({experienceName:a,source:r,target:n})} ${S({content:i,experienceName:a,source:r})} </rpl-coachmark> `,N=E({experienceName:n.S,content:"Share your favorite content to your profile",source:"reddit_pro_share_menu_coachmark",placement:l.P.Top}),f=({source:e,noun:i})=>t.b({source:e||"share",action:"click",noun:i}),_=({source:e}={})=>f({source:e,noun:"share_crosspost"}),C=({source:e}={})=>f({source:e,noun:"share_profile_crosspost"}),L=()=>t.b({source:"comment",action:"click",noun:"share_as_post"},{action_info:{reason:"share_sheet"}}),g=Symbol("mixins/with-share");const D=(e,t,i)=>{const a=["click","keydown"],o=e.querySelector(`.${t}`);for(const e of a)o?.addEventListener(e,i)};return {C:"comment-share-menu-template",E:k,S:u,W:function(n){if(t.d4(n,g))return n;const s=n;class l extends s{constructor(){super(...arguments),this.permalink="",this.sourceId="",this.source=void 0,this.isCrosspostable=!1,this.isEmbeddable=!1,this.disabled=!1,this.isDesktopViewport=!1,this.hideButtonText=!1,this.hideButtonIcon=!1,this.shouldAllowPropagation=!1,this.shareMenuFeatureName=t.av,this.shareMenuTemplateId=u,this.translationLanguage="",this.showShareMenuProfileCoachmark=!1,this.isShareMenuInitiated=!1,this.showPostAssignModal=h,this.isShareDropdownOpened=!1,this.activateShareMenuFeature=()=>{const e={};return this.isCrosspostable&&(e.isCrosspostable=!0,this.sourceId&&(e.postId=this.sourceId)),this.isEmbeddable&&(e.isEmbeddable=!0),t.f({name:this.shareMenuFeatureName,queryParams:e,renderMode:t.g.Contents})},this.isAllowedEvent=e=>!e||(e instanceof PointerEvent||e instanceof MouseEvent||["Enter"," "].includes(e.key)),this.handleMobileShareClick=async e=>{this.isAllowedEvent(e)&&(await this._copyLink())},this.handleDesktopShareClick=async e=>{if(!this.isAllowedEvent(e))return;if(this.isShareMenuInitiated)return;let t=!1;try{t=Boolean(await this.activateShareMenuFeature())}catch(t){return void this.handleCopyLinkClick(e)}const i=document.querySelector(`#${this.shareMenuTemplateId}`)?.content;if(!i)return void this.handleCopyLinkClick(e);const a=this.getShareDropdownMenus();a?.length&&(a.forEach((e=>{if(e.querySelector("faceplate-menu"))return;const a=i.cloneNode(!0);e.appendChild(a),D(e,d,this.handleCopyLinkClick),D(e,m,this.handleCrosspostClick),D(e,k,this.handleEmbedClick),D(e,"klp-copy-link",this.handleKlpCopyLinkClick),D(e,"share-menu-profile-crosspost-option",this.handleProfileCrosspostClick),t&&e.show?.()})),t&&this.handleShareDropdownOpen(),this.isShareMenuInitiated=!0)},this.handleShareDropdownOpen=()=>{this.isShareDropdownOpened||(this.isShareDropdownOpened=!0,t.e(this,(({source:e}={})=>t.b({source:e||"share",action:"view",noun:"custom_share_sheet"}))({source:this.source})))},this.handleShareDropdownClose=()=>{this.isShareDropdownOpened=!1,t.e(this,(({source:e}={})=>t.b({source:e||"share",action:"dismiss",noun:"custom_share_sheet"}))({source:this.source}))},this.getShareDropdownMenus=()=>{const e=this.shadowRoot?.querySelectorAll(`.${T}`);if(e?.length)return e;const t=this.querySelectorAll(`faceplate-dropdown-menu.${T}`);if(t?.length)return t;const i=this.querySelectorAll("slot");for(const e of i){const t=e.assignedElements?.();if(t?.length){const e=Array.from(t).find((e=>e.classList?.contains(T)||e.querySelector(`.${T}`)));if(e)return[e.classList?.contains(T)?e:e.querySelector(`.${T}`)]}}},this.closeShareMenu=()=>{this.getShareDropdownMenus()?.forEach((e=>e.close?.()))},this.handleCopyLinkClick=async e=>{this.shouldAllowPropagation||e?.stopPropagation(),this.isAllowedEvent(e)&&(t.e(this,(({source:e}={})=>f({source:e,noun:"copy_link"}))({source:this.source})),this.closeShareMenu(),await this._copyLink())},this.handleKlpCopyLinkClick=async e=>{this.isAllowedEvent(e)&&(this.closeShareMenu(),await this._copyLink())},this.handleKlpNotUsefulClick=e=>{this.isAllowedEvent(e)&&this._notUseful()},this.handleKlpUsefulClick=e=>{this.isAllowedEvent(e)&&this._useful()},this.handleCrosspostClick=e=>{const i=c.a(this.sourceId)?L:_;this._handlePostComposerClick(e,`${t.dg.CrosspostSourceId}=${this.sourceId}`,i)},this.handleProfileCrosspostClick=async e=>{(await this.showPostAssignModal(this.sourceId))||this._handlePostComposerClick(e,`${t.dg.CrosspostSourceId}=${this.sourceId}&${t.dg.CrosspostTarget}=profile`,C)},this.handleEmbedClick=e=>{e.stopPropagation(),this.isAllowedEvent(e)&&(t.e(this,(({source:e}={})=>f({source:e,noun:"embed"}))({source:this.source})),this.closeShareMenu(),window.open(`https://publish.reddit.com/embed?url=https://www.reddit.com${this.permalink}`,"RedditEmbed"))},this._handlePostComposerClick=(e,i,a)=>{e.stopPropagation(),this.isAllowedEvent(e)&&(t.e(this,a({source:this.source})),this.closeShareMenu(),window.open(`/submit?${i}`,"_blank"))},this._copyLink=async()=>{if(!this.permalink||!location.origin)return;const e={url:this._buildShareUrl(location.origin,this.permalink)};if(r.S.Clipboard===(await r.s(e,this.isDesktopViewport))){const e=t.c("faceplate-alert",{level:t.a4.success,message:"Link copied"});this.dispatchEvent(e)}},this._notUseful=()=>{const e=t.c("faceplate-alert",{level:t.a4.notice,message:"Thanks for letting us know"});this.dispatchEvent(e)},this._useful=()=>{const e=t.c("faceplate-alert",{level:t.a4.notice,message:"Thanks for letting us know"});this.dispatchEvent(e)},this._buildShareUrl=(e,t)=>{const i=t.includes("?"),a=t.includes("tl=");return e+t+this._getShareQueryParams({source:this.source,term:"1",permalinkHasQuery:i,permalinkHasTlQuery:a})},this._getShareQueryParams=({permalinkHasQuery:e=!1,permalinkHasTlQuery:t=!1,source:i="share",term:a})=>{const o=this._getShareUTMParams({source:i,term:a}),r=t?"":this._getShareTranslationLanguageQueryParams();return e?`&${o}${r}`:`?${o}${r}`},this._getShareTranslationLanguageQueryParams=()=>this.translationLanguage?`&share_tl=${this.translationLanguage}`:"",this._getShareUTMParams=({source:e="share",term:i})=>{const a=t.aU();return`utm_source=${e}&utm_medium=${a}&utm_name=${a}css&utm_term=${i}&utm_content=share_button`},this.renderShareDropdown=({handleShareClick:o,size:r=t._.Small,appearance:n="plain",attributes:s={},shareButtonText:l})=>{const c=l||"Share",p="link"===n,h=e.x` <faceplate-dropdown-menu class="${T} relative ${p?"inline":""}" position="bottom-start" .onopen="${this.isDesktopViewport?this.handleShareDropdownOpen:void 0}" .onclose="${this.isDesktopViewport?this.handleShareDropdownClose:void 0}"> ${p?i.a({attributes:{onclick:o,onkeydown:o,...s},children:this.hideButtonText?void 0:c,suppressVisitedStyle:!0}):a.c({size:r,appearance:n,attributes:{type:"button",onclick:o,onkeydown:o,...s},leadingIcon:this.hideButtonIcon?void 0:e.b5({size:a.I[r],attributes:{className:"icon-share","aria-hidden":"true"}}),screenReaderContent:this.hideButtonText?c:void 0,children:this.hideButtonText?void 0:c})} </faceplate-dropdown-menu>`;return this.showShareMenuProfileCoachmark?N({target:h}):h},this.renderOnlyShareButton=({handleShareClick:i,size:o=t._.Small,appearance:r="plain",attributes:n={},showFullButtons:s=!1})=>{const l="Copy link",c="link"===r;return e.x` ${c?e.A:a.c({size:o,appearance:r,attributes:{type:"button",onclick:i,onkeydown:i,...n,className:`${n.className} relative`,"aria-label":l},children:e.x` <span class="justify-center ${s?"flex s:hidden":"flex"}">${e.ac({size:e.q.Small})}</span> <span class="${s?"hidden s:flex":"hidden"}"> ${l} </span> `})}`},this.renderOnlyShareMenuItem=({handleShareClick:t,menuSize:i=o.L.Medium})=>{const a="Copy link";return o.l({leadingIcon:e.ac(),label:a,size:i,onClick:t})}}}return l[g]=!0,e._([e.n({type:String})],l.prototype,"permalink",void 0),e._([e.n({type:String,attribute:"source-id"})],l.prototype,"sourceId",void 0),e._([e.n({type:String,attribute:"source"})],l.prototype,"source",void 0),e._([e.n({type:Boolean,attribute:"is-crosspostable"})],l.prototype,"isCrosspostable",void 0),e._([e.n({type:Boolean,attribute:"is-embeddable"})],l.prototype,"isEmbeddable",void 0),e._([e.n({type:Boolean})],l.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"is-desktop-viewport"})],l.prototype,"isDesktopViewport",void 0),e._([e.n({type:Boolean,attribute:"hide-button-text"})],l.prototype,"hideButtonText",void 0),e._([e.n({type:Boolean,attribute:"hide-button-icon"})],l.prototype,"hideButtonIcon",void 0),e._([e.n({type:Boolean,attribute:"should-allow-propagation"})],l.prototype,"shouldAllowPropagation",void 0),e._([e.n({type:String,attribute:"share-menu-feature-name"})],l.prototype,"shareMenuFeatureName",void 0),e._([e.n({type:String,attribute:"share-menu-template-id"})],l.prototype,"shareMenuTemplateId",void 0),e._([e.n({type:String,attribute:"translation-language"})],l.prototype,"translationLanguage",void 0),e._([e.n({type:Boolean,attribute:"show-share-menu-profile-coachmark"})],l.prototype,"showShareMenuProfileCoachmark",void 0),l},a:T,b:d,c:m,d:E,s:h};}));
SML.dm("CHD_ZF_V",["CVEbQKiO","D7lSuCop","CK9FveTr","DJy2jSvu","CCphb8vV"],(async(t,e,s,i,n)=>{const o=i.W(t.s);let a=class extends o{constructor(){super(...arguments),this.permalink="",this.disabled=!1,this.isDesktopViewport=!1,this.isListItem=!1,this.ssr=!1,this.shareMenuFeatureName=e.aS,this.shareMenuTemplateId=i.C,this.useButton=!1,this.useMenu=!1,this.showFullButtons=!1,this.menuSize=s.L.Medium}static get styles(){return[e.t,e.j("/*\n * :host and button.share-button-list-item is necessary to increase specificity to override the default styles of the button\n */\n:host button.share-button-list-item {\n  padding: 0;\n  height: 2rem !important;\n  border: none;\n  border-radius: 0;\n  color: var(--color-secondary);\n  background-color: transparent;\n  /*\n   * This CSS was added to fix the flex gap spacing when re-styling the share button component as a list item in the comment action overflow menu.\n   * It needs to be added here as we cannot otherwise directly target the span's styling.\n   */\n}\n:host button.share-button-list-item > span.flex {\n  font-weight: normal;\n}\n:host button.share-button-list-item > span.flex > span:first-child {\n  width: 2rem;\n  display: flex;\n  justify-content: center;\n  margin-right: 0.5rem;\n}\n")]}handleCommentShareClick(t){this.isAllowedEvent(t)&&(!this.isListItem&&this.isDesktopViewport?this.handleCommentDesktopShareClick(t):this.handleCommentMobileShareClick(t),this.ssr&&(this.isShareDropdownOpened?this.handleShareDropdownClose():this.handleShareDropdownOpen()))}handleCommentDesktopShareClick(t){e.e(this,n.H()),this.handleDesktopShareClick(t)}handleCommentMobileShareClick(t){e.e(this,n.J()),this.handleMobileShareClick(t)}render(){return this.ssr?t.x`<slot name="ssr-share-button" @click="${this.handleCommentShareClick}" @keydown="${this.handleCommentShareClick}"></slot>`:this.useMenu?this.renderOnlyShareMenuItem({handleShareClick:this.handleCommentShareClick,menuSize:this.menuSize}):this.useButton?this.renderOnlyShareButton({handleShareClick:this.handleCommentShareClick,attributes:{disabled:this.disabled,className:"font-semibold"},showFullButtons:this.showFullButtons}):this.renderShareDropdown({handleShareClick:this.handleCommentShareClick,size:this.isListItem?e._.Large:e._.Small,appearance:this.isListItem?"plain":"plain-weak",attributes:{disabled:this.disabled,className:this.isListItem?"share-button-list-item w-full":"font-semibold"}})}};t._([t.n({type:String})],a.prototype,"permalink",void 0),t._([t.n({type:Boolean})],a.prototype,"disabled",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],a.prototype,"isDesktopViewport",void 0),t._([t.n({type:Boolean,attribute:"is-list-item"})],a.prototype,"isListItem",void 0),t._([t.n({type:Boolean,attribute:"ssr"})],a.prototype,"ssr",void 0),t._([t.n({type:String,attribute:"share-menu-feature-name"})],a.prototype,"shareMenuFeatureName",void 0),t._([t.n({type:String,attribute:"share-menu-template-id"})],a.prototype,"shareMenuTemplateId",void 0),t._([t.n({type:Boolean,attribute:"use-button"})],a.prototype,"useButton",void 0),t._([t.n({type:Boolean,attribute:"use-menu"})],a.prototype,"useMenu",void 0),t._([t.n({type:Boolean,attribute:"show-full-buttons"})],a.prototype,"showFullButtons",void 0),t._([t.n({type:String})],a.prototype,"menuSize",void 0),a=t._([t.c("shreddit-comment-share-button")],a)}));
SML.dm("DR8kbffm",["CVEbQKiO","D7lSuCop","CK9FveTr","DJy2jSvu"],(async(t,e,s,i)=>{const o=i.W(t.s);let a=class extends o{constructor(){super(...arguments),this.shareButtonText="",this.permalink="",this.size=e._.Medium,this.menuSize=s.L.Medium,this.buttonClass="",this.isDesktopViewport=!1,this.ssr=!1,this.appearance="secondary",this.shareMenuFeatureName=e.av,this.shareMenuTemplateId=i.S,this.useButton=!1,this.useMenu=!1,this.showFullButtons=!1,this.translationLanguage=""}static get styles(){return[e.t]}handlePostShareClick(t){this.isAllowedEvent(t)&&(this.isDesktopViewport?this.handleDesktopShareClick(t):this.handleMobileShareClick(t),this.ssr&&(this.isShareDropdownOpened?this.handleShareDropdownClose():this.handleShareDropdownOpen()))}render(){return this.ssr?t.x`<slot name="ssr-share-button" @click="${this.handlePostShareClick}" @keydown="${this.handlePostShareClick}"></slot>`:this.useMenu?this.renderOnlyShareMenuItem({handleShareClick:this.handlePostShareClick,menuSize:this.menuSize,attributes:{className:this.buttonClass}}):this.useButton?this.renderOnlyShareButton({handleShareClick:this.handlePostShareClick,size:this.size,attributes:{className:this.buttonClass},showFullButtons:this.showFullButtons}):this.renderShareDropdown({handleShareClick:this.handlePostShareClick,appearance:this.appearance,size:this.size,shareButtonText:this.shareButtonText,attributes:{className:this.buttonClass}})}};t._([t.n({type:String,attribute:"share-button-text"})],a.prototype,"shareButtonText",void 0),t._([t.n({type:String})],a.prototype,"permalink",void 0),t._([t.n({type:String})],a.prototype,"size",void 0),t._([t.n({type:String})],a.prototype,"menuSize",void 0),t._([t.n({type:String,attribute:"button-class"})],a.prototype,"buttonClass",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],a.prototype,"isDesktopViewport",void 0),t._([t.n({type:Boolean,attribute:"ssr"})],a.prototype,"ssr",void 0),t._([t.n({type:String})],a.prototype,"appearance",void 0),t._([t.n({type:String,attribute:"share-menu-feature-name"})],a.prototype,"shareMenuFeatureName",void 0),t._([t.n({type:String,attribute:"share-menu-template-id"})],a.prototype,"shareMenuTemplateId",void 0),t._([t.n({type:Boolean,attribute:"use-button"})],a.prototype,"useButton",void 0),t._([t.n({type:Boolean,attribute:"use-menu"})],a.prototype,"useMenu",void 0),t._([t.n({type:Boolean,attribute:"show-full-buttons"})],a.prototype,"showFullButtons",void 0),t._([t.n({type:String})],a.prototype,"translationLanguage",void 0),a=t._([t.c("shreddit-post-share-button")],a)}));
SML.dm("Caoa8uoZ",["D7lSuCop","CCphb8vV","CVEbQKiO"],(async(e,t)=>{class i extends HTMLElement{constructor(){super(),this.childAnchor=null,this.chatUrl=null,this.mobilePermalink=null,this.handleAnchorClick=async e=>{if(!this.chatUrl)return;if(e.preventDefault(),this.mobilePermalink){const e=new URL(this.mobilePermalink,window.location.href).searchParams.get("r"),i=document.querySelector(`faceplate-modal[name="${t.cu}"]`),r=i?.querySelector("a.app-link");if(r?.href){const t=new URL(r.href);e&&t.searchParams.set("r",e),t.searchParams.set("$android_deeplink_path",`reddit${this.mobilePermalink}`),t.searchParams.set("$deeplink_path",this.mobilePermalink),t.searchParams.set("$og_redirect",`${CLIENT_CONFIG.ORIGIN}${this.mobilePermalink}`),t.searchParams.set("base_url",this.mobilePermalink),r.setAttribute("href",t.toString())}return void this.dispatchEvent(new CustomEvent(t.cu,{bubbles:!0}))}let i=document.querySelector("reddit-chat-host");i||(await this.activateFeature(),i=document.querySelector("reddit-chat-host")),i.openChatUrl(this.chatUrl)}}async activateFeature(){try{await e.f({name:e.c5})}catch(t){if(!t.message?.endsWith(`${e.c5} not found`))throw t}}connectedCallback(){const e=this.querySelector(":scope > a, :scope > li > a"),i=e?.href;this.mobilePermalink=this.getAttribute("permalink");((e,i=!1)=>!!e&&(e.startsWith(t.bx)||e.startsWith(t.ct)||i&&e.startsWith("/c/")))(i||this.mobilePermalink||void 0,!!this.mobilePermalink)&&(this.childAnchor=e,!i&&this.mobilePermalink?this.chatUrl=this.mobilePermalink:i&&i.startsWith(t.bx)?this.chatUrl="/"+i.replace(t.bx,""):i&&(this.chatUrl="/"+i.replace(t.ct,"")),this.childAnchor?.addEventListener("click",this.handleAnchorClick))}disconnectedCallback(){this.childAnchor?.removeEventListener("click",this.handleAnchorClick)}}return customElements.define("reddit-chat-anchor",i),{a:e=>`${t.bx}room/${e}`,g:(e,i)=>`${t.bx}room/${e}/event/${i}`}}));
SML.dm("B_-LCs5H",["CVEbQKiO","D7lSuCop","CK9FveTr","UeyFDWWE","jayrQzpw","D5N4FxiB","DsV3drw0","Bgpq8Ukm","v9RaKRju","Caoa8uoZ","LCU6ttla","BC8XSJYX","B05atAPk","DEQ-l4mm","B_ByM_ya","kExRqc7d","CBZc9Xo3","DK2COEsH","CHD_ZF_V","DR8kbffm","AhHXxeIZ","B92R8McT","GpA9mJze"],(async(e,t,a,i,o,n,r,s,d,l,h,m,c)=>{const u="modQueue",p="modQueueChat",g="overflow",I="inline";let k=class extends e.s{constructor(){super(...arguments),this.location=I,this.viewContext=void 0,this.COACHMARK_LABELS={[u]:"NEW! Chat about items in the queue",[p]:"Jump back in",[g]:"NEW! Chat about content",[I]:"Jump back in"},this.COACHMARK_BODY={[u]:"Share content in the queue directly with your mod team",[p]:"Get back to chat threads from the queue",[g]:"Share content directly with your mod team",[I]:"Get back to chat threads from the content"},this.COACHMARK_POSITION={[u]:h.P.Top,[p]:h.P.Top,[g]:h.P.Left,[I]:h.P.Left},this.LOCAL_STORAGE_KEYS={[u]:t.L.ShareToModChatCoachMarkMQSeen,[p]:t.L.ShareToModChatCoachMarkMQChatSeen,[g]:t.L.ShareToModChatCoachMarkOverflowSeen,[I]:t.L.ShareToModChatCoachMarkInlineSeen},this._showShareToModChatBanner=!t.l.getItem(this.getLocalStorageKey()),this.closeCoachmark=()=>{this._showShareToModChatBanner=!1}}getLocalStorageKey(){return this.LOCAL_STORAGE_KEYS[this.location]}connectedCallback(){super.connectedCallback();const e=t.l.getItem(this.getLocalStorageKey());this.location===g&&this.viewContext&&[r.P.ModQueue,r.P.ModQueueAll].includes(this.viewContext)||e?this._showShareToModChatBanner=!1:(t.l.setItem(this.getLocalStorageKey(),"true"),this._showShareToModChatBanner=!0)}disconnectedCallback(){super.disconnectedCallback()}render(){return e.x`<rpl-coachmark placement="${this.COACHMARK_POSITION[this.location]}" appearance="${m.a.Inverted}" ?open="${this._showShareToModChatBanner}"> <slot></slot> <rpl-coachmark-card slot="content" aria-live="polite" appearance="${m.a.Inverted}" class="w-[220px]"> <div slot="title" class="pt-xs pb-2xs"> <div>${this.COACHMARK_LABELS[this.location]}</div> </div> ${t.k({attributes:{className:"close-btn",slot:"close-button",onclick:e=>{e.stopPropagation(),this.closeCoachmark()}},appearance:"plainInverted",size:t._.Small,leadingIcon:e.C({size:e.q.Small})})} <div class="text-12 w-[170px] mb-sm">${this.COACHMARK_BODY[this.location]}</div> </rpl-coachmark-card> </rpl-coachmark>`}};k.styles=[t.t],e._([e.n({type:String,attribute:"location"})],k.prototype,"location",void 0),e._([e.n({type:String,attribute:"view-context"})],k.prototype,"viewContext",void 0),e._([e.b()],k.prototype,"_showShareToModChatBanner",void 0),k=e._([e.c("share-to-mod-chat-coachmark")],k);const N=e.s;class R extends N{constructor(){super(...arguments),this.size=a.L.Medium,this.appearance="content-action",this.viewContext=r.P.CommentsPage,this.feedViewType=t.a3.ModQueueCompactView,this.itemState=s.M.UNMODERATED,this.verdict=void 0,this.isCurrentUserAuthor=!1,this.isDeleted=!1,this.isRemoved=!1,this.isModModeEnabled=!1,this.isAdmin=!1,this.isLocked=!1,this.isStickied=!1,this.isHighlighted=!1,this.isReportingIgnored=!1,this.areHighlightsEnabled=!1,this.hasReports=!1,this.hasRemovalReason=!1,this.isProfilePost=!1,this.isPromotedPost=!1,this.isSpamFilteredPost=!1,this.isDesktop=!1,this.permalink="",this.isContentLevelModsCommsEnabled=!1,this.modContentDiscussionContext=void 0,this.isFeedNoApproveEnabled=!1,this.focusChatTextareaFn=c.f,this.pubsub=new t.P(this),this.modActionsController=new d.ModActionsController(this,{getThingIdFn:()=>this.thingId||""}),this.getListItemClickHandler=e=>()=>(this.dropdownMenu?.close(),e())}get isPost(){return r.f(this.thingId||"")}get shouldAlwaysShowAction(){return!this.isModModeEnabled&&!this.isOnModqueuePage}shouldAlwaysShowApproveAction(){return this.shouldAlwaysShowAction||this.isModVerdictVisible&&this.itemState!==s.M.APPROVED&&this.shouldShowActionInMenu}shouldAlwaysShowRemoveAction(){return this.shouldAlwaysShowAction||this.isModVerdictVisible&&this.itemState!==s.M.REMOVED&&this.shouldShowActionInMenu}get isOnModqueuePage(){return this.viewContext===r.P.ModQueue||this.viewContext===r.P.ModQueueAll}get isApproved(){return this.itemState===s.M.APPROVED}get shouldShowConfirmRemoval(){return s.a(this.itemState,this.isSpamFilteredPost)}get shouldShowActionInMenu(){return!s.b(this.viewContext,this.feedViewType)||"hover-menu"===this.appearance}get isDistinguishable(){return this.isCurrentUserAuthor&&!this.isDeleted}get isStickyable(){return!(this.viewContext===r.P.ProfileFeed||this.viewContext===r.P.ProfileFeed2||this.isDeleted)}get isModVerdictVisible(){return s.h(this.verdict??null)&&!this.hasReports&&this.itemState!==s.M.FILTERED}renderApproveAction(){return this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.itemState===s.M.UNMODERATED||this.shouldAlwaysShowApproveAction()&&s.c(this.itemState)?a.l({leadingIcon:e.a0(),label:"Approve",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleApproveContent)}):null;}renderRemoveAction(){return this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.itemState===s.M.UNMODERATED||this.shouldAlwaysShowRemoveAction()&&s.d(this.itemState)?a.l({leadingIcon:e.C(),label:"Remove",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveContent)}):null;}renderConfirmRemovalAction(){return this.shouldAlwaysShowRemoveAction()&&this.shouldShowConfirmRemoval?a.l({leadingIcon:e.bw(),label:"Confirm Removal",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleConfirmRemoval)}):null;}renderSpamAction(){return s.e({moderationState:this.itemState,isSpamFilteredPost:this.isSpamFilteredPost,isRemoved:this.isRemoved,isPromotedPost:this.isPromotedPost})&&this.shouldShowActionInMenu?a.l({leadingIcon:e.bx(),label:"Mark as Spam",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveContentAsSpam)}):null;}renderShareToModChatAction(t){if(!s.f({isPromotedPost:this.isPromotedPost})||!this.shouldShowActionInMenu||!t?.modChatChannel||t?.modContentDiscussion)return null;const i=t?.modContentDiscussion?`${l.g(t.modContentDiscussion.chatChannel?.roomId,t.modContentDiscussion.chatMessage?.id)}/thread`:l.a(t?.modChatChannel?.roomId);return e.x` <faceplate-tracker source="moderator" action="click" noun="${t?.eventContext?.noun}" data-faceplate-tracking-context="${JSON.stringify({subreddit:{id:t?.eventContext?.subredditId,name:t?.eventContext?.subredditName},action_info:{setting_value:t?.eventContext?.roomId},post:{id:t?.eventContext?.postId},...(t?.eventContext?.commentId && {comment:{id:t?.eventContext?.commentId}})})}"> <reddit-chat-anchor> <a href="${i}?draft=${encodeURIComponent("https://www.reddit.com"+this.permalink)}" class="no-underline"> ${a.l({leadingIcon:e.aU(),trailingSlot:e.x` <rpl-badge appearance="${n.R.Alert}">NEW</rpl-badge>`,label:"Share to mod chat",size:this.size,onClick:async()=>{t.modContentDiscussion||(await this.focusChatTextareaFn())}})} </a> </reddit-chat-anchor> </faceplate-tracker>`;}renderIgnoreReportsAction(){return this.isReportingIgnored||!this.hasReports?null:a.l({leadingIcon:e.by(),label:"Ignore reports and approve",size:this.size,onClick:this.getListItemClickHandler((()=>{this.modActionsController.handleIgnoreReports(),this.modActionsController.handleApproveContent()}))});}renderUnignoreReportsAction(){return this.isReportingIgnored?a.l({leadingIcon:e.bz(),label:"Unignore reports",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnignoreReports)}):null;}renderAddRemovalReasonAction(){return s.s(this.itemState,this.hasRemovalReason,this.isSpamFilteredPost,this.isProfilePost)&&this.shouldShowActionInMenu?a.l({leadingIcon:e.am(),label:"Add Removal Reason",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleAddRemovalReason)}):null;}renderDistinguishAction(){return this.isDistinguishable&&this.distinguishedAs!==t.b0.Moderator?a.l({leadingIcon:e.bA(),label:"Show mod label",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleDistinguish)}):null;}renderUndistinguishAction(){return this.isDistinguishable&&this.distinguishedAs===t.b0.Moderator?a.l({leadingIcon:e.bB(),label:"Hide mod label",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUndistinguish)}):null;}renderStickyAction(t){return!this.isStickyable||this.isStickied||!this.shouldShowActionInMenu||this.areHighlightsEnabled||this.isPromotedPost?null:a.l({leadingIcon:e.bC(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleSticky)})}renderUnstickyAction(t){return this.isStickyable&&this.isStickied&&this.shouldShowActionInMenu&&!this.areHighlightsEnabled&&!this.isPromotedPost?a.l({leadingIcon:e.aG(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnsticky)}):null}renderAddToHighlightsAction(){return this.isStickyable&&this.shouldShowActionInMenu&&this.areHighlightsEnabled&&o.H.has(this.viewContext)&&!this.isHighlighted?a.l({leadingIcon:e.bC(),label:"Add to highlights",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUpdateHighlightedPost)}):null;}renderRemoveFromHighlightsAction(){return this.isStickyable&&this.shouldShowActionInMenu&&this.areHighlightsEnabled&&o.H.has(this.viewContext)&&this.isHighlighted?a.l({leadingIcon:e.aG(),label:"Remove from highlights",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleRemoveHighlightedPost)}):null;}renderLockAction(t){return this.isLocked||!this.shouldShowActionInMenu?null:a.l({leadingIcon:e.bD(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleLock)})}renderUnlockAction(t){return this.isLocked&&this.shouldShowActionInMenu?a.l({leadingIcon:e.aF(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnlock)}):null}renderEditPostFlairAction(t){return!this.shouldShowActionInMenu||this.isPromotedPost||this.isDeleted?null:a.l({leadingIcon:e.aX(),label:t,size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleOpenEditPostFlairModal)})}renderCopyLinkAction(){return"hover-menu"!==this.appearance?null:this.isPost?e.x`<shreddit-post-share-button use-menu ?is-desktop-viewport="${this.isDesktop}" permalink="${this.permalink}"></shreddit-post-share-button>`:e.x`<shreddit-comment-share-button use-menu ?is-desktop-viewport="${this.isDesktop}" permalink="${this.permalink}"></shreddit-comment-share-button>`}closeModal(){this.bottomSheetMenu?.close()}openModal(){this.bottomSheetMenu?.showModal()}renderMenuTrigger(){const a={leadingIcon:e.bl({size:e.q.Small}),screenReaderContent:"Moderation actions menu",appearance:"secondary",attributes:{type:"button",onclick:()=>{this.openModal()},slot:"trigger"},size:t._.Small};return e.x` <faceplate-tracker source="moderator" action="click" noun="mod_shield_menu"> ${"hover-menu"===this.appearance?t.k({...a,appearance:"secondary"}):i.c({...a,appearance:"plain"})} </faceplate-tracker> `}renderMobileActionsMenu(a){return e.x` ${this.renderMenuTrigger()} <faceplate-bottom-sheet> <faceplate-bottom-sheet-header slot="header" has-divider> <span slot="trailing" @click="${this.closeModal}"> ${t.k({attributes:{"aria-label":"Close"},appearance:"secondary",leadingIcon:e.C({size:e.q.Small}),size:t._.Small})}</span> <span>${"Mod actions"}</span> </faceplate-bottom-sheet-header> <faceplate-menu class="w-full nd:hidden" @click="${this.closeModal}"> ${a} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-bottom-sheet> `;}renderActionsMenu(t){return this.isContentLevelModsCommsEnabled&&!this.modContentDiscussionContext?.modContentDiscussion?e.x` <mod-dropdown-closer> <share-to-mod-chat-coachmark location="${g}" view-context="${this.viewContext}"> <faceplate-dropdown-menu position="bottom-end"> ${this.renderMenuTrigger()} <faceplate-menu slot="menu" class="max-w-xs nd:hidden max-h-[432px] overflow-y-auto overflow-x-hidden styled-scrollbars"> ${t} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-dropdown-menu> </share-to-mod-chat-coachmark> </mod-dropdown-closer>`:e.x` <mod-dropdown-closer> <faceplate-dropdown-menu position="bottom-end"> ${this.renderMenuTrigger()} <faceplate-menu slot="menu" class="max-w-xs max-h-[432px] overflow-y-auto overflow-x-hidden styled-scrollbars"> ${t} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-dropdown-menu> </mod-dropdown-closer>`}render(){if(this.viewContext===r.P.AggregateFeed)return e.A;const t=this.renderActions();return 0===t.length||t.every((e=>null===e))?e.x``:this.isDesktop?this.renderActionsMenu(t):this.renderMobileActionsMenu(t)}}return R.styles=[t.t],e._([e.n({type:String,attribute:"thing-id"})],R.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"user-id"})],R.prototype,"userId",void 0),e._([e.n({type:String})],R.prototype,"size",void 0),e._([e.n({type:String})],R.prototype,"appearance",void 0),e._([e.n({type:String,attribute:"view-context"})],R.prototype,"viewContext",void 0),e._([e.n({type:String,attribute:"feed-view-type"})],R.prototype,"feedViewType",void 0),e._([e.n({type:String,attribute:"item-state",reflect:!0})],R.prototype,"itemState",void 0),e._([e.n({type:String,attribute:"distinguished-as"})],R.prototype,"distinguishedAs",void 0),e._([e.n({type:String,attribute:"verdict"})],R.prototype,"verdict",void 0),e._([e.n({type:String,attribute:"verdict-by"})],R.prototype,"verdictBy",void 0),e._([e.n({type:Boolean,attribute:"current-user-author"})],R.prototype,"isCurrentUserAuthor",void 0),e._([e.n({type:Boolean,attribute:"deleted"})],R.prototype,"isDeleted",void 0),e._([e.n({type:Boolean,attribute:"removed"})],R.prototype,"isRemoved",void 0),e._([e.n({type:Boolean,attribute:"mod-mode"})],R.prototype,"isModModeEnabled",void 0),e._([e.n({type:Boolean,attribute:"is-admin"})],R.prototype,"isAdmin",void 0),e._([e.n({type:Boolean,attribute:"locked"})],R.prototype,"isLocked",void 0),e._([e.n({type:Boolean,attribute:"stickied"})],R.prototype,"isStickied",void 0),e._([e.n({type:Boolean,attribute:"highlighted"})],R.prototype,"isHighlighted",void 0),e._([e.n({type:Boolean,attribute:"reporting-ignored"})],R.prototype,"isReportingIgnored",void 0),e._([e.n({type:Boolean,attribute:"highlights-enabled"})],R.prototype,"areHighlightsEnabled",void 0),e._([e.n({type:Boolean,attribute:"has-reports"})],R.prototype,"hasReports",void 0),e._([e.n({type:Boolean,attribute:"has-removal-reason"})],R.prototype,"hasRemovalReason",void 0),e._([e.n({type:Boolean,attribute:"is-profile-post"})],R.prototype,"isProfilePost",void 0),e._([e.n({type:Boolean,attribute:"is-promoted-post"})],R.prototype,"isPromotedPost",void 0),e._([e.n({type:Boolean,attribute:"is-spam-filtered-post"})],R.prototype,"isSpamFilteredPost",void 0),e._([e.n({type:Boolean,attribute:"is-desktop"})],R.prototype,"isDesktop",void 0),e._([e.n({type:String,attribute:"permalink"})],R.prototype,"permalink",void 0),e._([e.n({type:Boolean,attribute:"is-content-level-mods-comms-enabled"})],R.prototype,"isContentLevelModsCommsEnabled",void 0),e._([e.n({type:Object,attribute:"mod-content-discussion-context"})],R.prototype,"modContentDiscussionContext",void 0),e._([e.n({type:Boolean,attribute:"is-feed-no-approve-enabled"})],R.prototype,"isFeedNoApproveEnabled",void 0),e._([e.n({attribute:!1})],R.prototype,"focusChatTextareaFn",void 0),e._([e.z("faceplate-dropdown-menu")],R.prototype,"dropdownMenu",void 0),e._([e.z("faceplate-bottom-sheet")],R.prototype,"bottomSheetMenu",void 0),{M:R}}));
SML.dm("DB19i69m",["CVEbQKiO","D7lSuCop","DJsOQMvU","Bgpq8Ukm","B_-LCs5H","B05atAPk","CCphb8vV","B4Pgp3Rp","jayrQzpw","Ct0GBREL","Bj8wOYTD","DsV3drw0","Cx0Ea5Jz","Caoa8uoZ","CK9FveTr","ahl9RE2R","CHD_ZF_V","DR8kbffm"],(async(e,t,i,o,n,a,s,r,l,d,m,h,c,u,p)=>{let k=class extends n.M{constructor(){super(...arguments),this.hasParent=!1,this.pubsub=new t.P(this),this.handleCommentUpdate=({commentId:e,action:n,value:a})=>{if(e===this.thingId)switch(n){case i.C.lock:this.isLocked=Boolean(a);break;case i.C.sticky:this.isStickied=Boolean(a);break;case i.C.distinguishAsMod:this.distinguishedAs=a?t.b0.Moderator:void 0;break;case i.C.distinguishAsAdmin:this.distinguishedAs=a?t.b0.Admin:void 0;break;case i.C.approve:case i.C.approveOptimistic:this.isRemoved=!1,this.hasRemovalReason=!1,this.verdict=t.a2.ModApproved,this.itemState=o.M.APPROVED,this.hasReports=!1;break;case i.C.remove:case i.C.removeAsSpam:case i.C.confirmRemoval:case i.C.removeOptimistic:case i.C.removeAsSpamOptimistic:case i.C.confirmRemovalOptimistic:this.isRemoved=!0,this.verdict=t.a2.ModRemoved,this.itemState=o.M.REMOVED,this.hasReports=!1;break;case i.C.addRemovalReason:this.hasRemovalReason=Boolean(a);break;case i.C.ignoreReports:this.isReportingIgnored=Boolean(a),a&&(this.isRemoved=!1,this.verdict=t.a2.ModApproved,this.itemState=o.M.APPROVED)}}}get isStickyable(){return super.isStickyable&&this.isCurrentUserAuthor&&!this.hasParent}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.CommentUpdated,this.handleCommentUpdate)}renderActions(){return [this.renderConfirmRemovalAction(),this.renderApproveAction(),this.renderRemoveAction(),this.isContentLevelModsCommsEnabled?this.renderShareToModChatAction(this.modContentDiscussionContext):null,this.renderSpamAction(),this.renderIgnoreReportsAction(),this.renderUnignoreReportsAction(),this.renderAddRemovalReasonAction(),this.renderDistinguishAction(),this.renderUndistinguishAction(),this.renderStickyAction("Sticky comment"),this.renderUnstickyAction("Unsticky comment"),this.renderLockAction("Lock comment"),this.renderUnlockAction("Unlock comment"),this.renderCopyLinkAction()];}};e._([e.n({type:Boolean,attribute:"has-parent"})],k.prototype,"hasParent",void 0),k=e._([e.c("shreddit-comment-mod-actions-menu")],k);let N=class extends e.s{constructor(){super(...arguments),this.feedViewType=t.a3.ModQueueCompactView,this.viewContext=h.P.CommentsPage,this.itemState=o.M.UNMODERATED,this.hasReports=!1,this.isModMode=!1,this.isRemoved=!1,this.isDeleted=!1,this.isLocked=!1,this.isStickied=!1,this.isHighlighted=!1,this.isCurrentUserAuthor=!1,this.hasParent=!1,this.isIconOnly=!1,this.hasRemovalReason=!1,this.permalink="",this.isDesktopViewport=!1,this.isSpamFilteredPost=!1,this.isProfilePost=!1,this.isPromotedPost=!1,this.hasFlairPermissions=!1,this.areHighlightsEnabled=!1,this.hideInlineActions=!1,this.isSmartEscalations=!1,this.isContentLevelModsCommsEnabled=!1,this.modContentDiscussionContext=void 0,this.isFeedNoApproveEnabled=!1,this.focusChatTextareaFn=a.f,this.moderationState=o.M.UNMODERATED,this.pubsub=new t.P(this),this._handleThingUpdate=e=>{let t="";if("awardOnContentId"in e?t=e.awardOnContentId:"commentId"in e?t=e.commentId:"postId"in e&&(t=e.postId),t!==this.thingId)return;const{value:n}=e;switch(e.action){case c.a.approve:case i.C.approve:case d.A.approve:case i.C.approveOptimistic:this.hasRemovalReason=!1,this.isRemoved=!1,this.moderationState=o.M.APPROVED;break;case c.a.remove:case c.a.removeAsSpam:case c.a.confirmRemoval:case i.C.remove:case i.C.removeAsSpam:case i.C.confirmRemoval:case d.A.remove:case d.A.confirmRemoval:case i.C.removeOptimistic:case i.C.removeAsSpamOptimistic:case i.C.confirmRemovalOptimistic:this.isRemoved=!0,this.moderationState=o.M.REMOVED;break;case c.a.addRemovalReason:case i.C.addRemovalReason:this.hasRemovalReason=!0;break;case c.a.updateHighlightedPost:this.isHighlighted=n;break;case c.a.lock:case i.C.lock:this.isLocked=n;break;case c.a.delete:this.isDeleted=n;break;case c.a.sticky:case i.C.sticky:this.isStickied=n}}}get itemType(){return this.thingId?r.i(this.thingId):null}get isPost(){return this.itemType===t.M.Post}get isCompactView(){return this.feedViewType===t.a3.CompactView}get isOnModqueuePage(){return this.viewContext===h.P.ModQueue||this.viewContext===h.P.ModQueueAll}get isApproved(){return this.moderationState===o.M.APPROVED}get shouldShowConfirmRemoval(){return o.a(this.moderationState,this.isSpamFilteredPost)}get shouldShowActionInline(){return o.b(this.viewContext,this.feedViewType)&&!this.isIconOnly&&!this.hideInlineActions}get isStickyable(){const e=!(this.viewContext===h.P.ProfileFeed||this.viewContext===h.P.ProfileFeed2),t=this.isCurrentUserAuthor&&!this.hasParent;return this.isPost?e:e&&t}get itemTopic(){switch(this.itemType){case t.M.Award:return t.T.AwardOnContentUpdated;case t.M.Comment:return t.T.CommentUpdated;case t.M.Post:return t.T.PostUpdated;default:return null}}connectedCallback(){super.connectedCallback(),this.moderationState=this.itemState,this.itemTopic&&this.pubsub.subscribe(this.itemTopic,this._handleThingUpdate)}getApproveButtonAppearance(){const e=s.a4()?"bordered":"secondary";return this.isCompactView?e:this.shouldShowConfirmRemoval||this.hasReports?"primary":(this.moderationState,o.M.REMOVED,e)}renderApproveAction(){return (this.isModMode||this.isOnModqueuePage)&&o.c(this.moderationState)?this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.moderationState===o.M.UNMODERATED?null:e.x` <mod-action-button screen-reader-content="${"Approve content"}" data-mod-action="${m.M.ApproveContent}" button-appearance="${this.getApproveButtonAppearance()}" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${e.a0({attributes:{"aria-hidden":"true"},size:e.q.Small})}</span> <span slot="text">${"Approve"}</span> </mod-action-button> `:null;}renderRemoveAction(){return (this.isModMode||this.isOnModqueuePage)&&o.d(this.moderationState)?this.isFeedNoApproveEnabled&&!this.isOnModqueuePage&&this.moderationState===o.M.UNMODERATED?null:e.x` <mod-action-button screen-reader-content="${"Remove content"}" data-mod-action="${m.M.RemoveContent}" button-appearance="${s.a4()?"bordered":"secondary"}" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${e.C({attributes:{"aria-hidden":"true"},size:e.q.Small})}</span> <span slot="text"> ${"Remove"} </span> </mod-action-button> `:null;}renderConfirmRemovalAction(){return (this.isModMode||this.isOnModqueuePage)&&this.shouldShowConfirmRemoval?e.x` <mod-action-button screen-reader-content="${"Confirm Removal"}" data-mod-action="${m.M.ConfirmRemoval}" button-appearance="${s.a4()?"bordered":"secondary"}" ?show-full-buttons="${!this.isIconOnly}" thing-id="${e.l(this.thingId)}" ?smart-escalations-tracking="${this.isSmartEscalations}"> <span slot="icon" class="flex justify-center">${e.C({attributes:{"aria-hidden":"true"},size:e.q.Small})}</span> <span slot="text"> ${"Confirm Removal"} </span> </mod-action-button> `:null;}renderSpamAction(){return o.e({moderationState:this.moderationState,isSpamFilteredPost:this.isSpamFilteredPost,isRemoved:this.isRemoved,isPromotedPost:this.isPromotedPost})&&this.shouldShowActionInline?e.x` <mod-action-button screen-reader-content="${"Remove content as spam"}" data-mod-action="${m.M.RemoveContentAsSpam}" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${e.bx({attributes:{"aria-hidden":"true"},size:e.q.Small})}</span> <span slot="text"> ${"Spam"} </span> </mod-action-button> `:null;}renderShareToModChatAction(){if(!o.f({isPromotedPost:this.isPromotedPost})||!this.isContentLevelModsCommsEnabled||!this.modContentDiscussionContext?.modChatChannel||!this.isOnModqueuePage||this.isOnModqueuePage&&!this.shouldShowActionInline&&!this.modContentDiscussionContext.modContentDiscussion)return null;let t=this.modContentDiscussionContext?.modContentDiscussion?`${u.g(this.modContentDiscussionContext.modContentDiscussion.chatChannel?.roomId,this.modContentDiscussionContext.modContentDiscussion.chatMessage?.id)}/thread`:u.a(this.modContentDiscussionContext?.modChatChannel?.roomId);this.modContentDiscussionContext?.modContentDiscussion||(t+=`?draft=${encodeURIComponent("https://www.reddit.com"+this.permalink)}`);const i=this.modContentDiscussionContext?.modContentDiscussion?m.M.ViewChatThread:m.M.ShareToModChat,n=this.modContentDiscussionContext?.modContentDiscussion?"Open chat thread":"Share to mod chat",a=this.modContentDiscussionContext?.modContentDiscussion?"Open chat thread":"Share to mod chat";return e.x` <faceplate-tracker source="moderator" action="click" noun="${this.modContentDiscussionContext?.eventContext?.noun}" data-faceplate-tracking-context="${JSON.stringify({subreddit:{id:this.modContentDiscussionContext?.eventContext?.subredditId,name:this.modContentDiscussionContext?.eventContext?.subredditName},post:{id:this.modContentDiscussionContext?.eventContext?.postId},...(this.modContentDiscussionContext?.eventContext?.roomId && {chat:{id:this.modContentDiscussionContext?.eventContext?.roomId}}),...(this.modContentDiscussionContext?.eventContext?.commentId && {comment:{id:this.modContentDiscussionContext?.eventContext?.commentId}})})}" slot="mod-share-to-mod-chat"> <share-to-mod-chat-coachmark location="${this.modContentDiscussionContext?.modContentDiscussion?"modQueueChat":"modQueue"}" view-context="${this.viewContext}"> <reddit-chat-anchor> <a href="${t}"> <div class="relative"> <mod-action-button screen-reader-content="${n}" button-appearance="plain" data-mod-action="${i}"> <span slot="icon" class="flex justify-center"> ${e.aU({attributes:{"aria-hidden":"true"},size:e.q.Small})} </span> <span slot="text"> ${a} </span> </mod-action-button> </div> </a> </reddit-chat-anchor> </share-to-mod-chat-coachmark> </faceplate-tracker> `;}renderFlairAction(){return this.isPost&&this.shouldShowActionInline?e.x` <mod-action-button screen-reader-content="${"Open post flair modal"}" data-mod-action="${m.M.OpenEditPostFlairModal}" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center">${e.aX({attributes:{"aria-hidden":"true"},size:e.q.Small})}</span> <span slot="text"> ${"Flair"} </span> </mod-action-button>`:null;}renderAddRemovalReasonAction(){return (this.isModMode||this.isOnModqueuePage)&&this.itemType!==t.M.Award&&o.s(this.moderationState,this.hasRemovalReason,this.isSpamFilteredPost,this.isProfilePost)?e.x` <mod-action-button screen-reader-content="${"Add removal reason"}" data-mod-action="${m.M.AddRemovalReason}" button-appearance="${s.a4()?"bordered":"secondary"}" ?show-full-buttons="${!0}"> <span slot="icon" class="flex justify-center">${e.am({attributes:{"aria-hidden":"true"},size:e.q.Small})}</span> <span slot="text"> ${"Add removal reason"} </span> </mod-action-button> ${this.isIconOnly?e.x`<div class="separator"></div>`:null} `:null;}renderCopyLinkAction(){return this.shouldShowActionInline?this.isPost?e.x`<shreddit-post-share-button ?use-button="${!0}" ?is-desktop-viewport="${this.isDesktopViewport}" permalink="${this.permalink}" size="${t._.Small}" ?show-full-buttons="${!this.isIconOnly}"></shreddit-post-share-button>`:e.x`<shreddit-comment-share-button slot="comment-share" ?use-button="${!0}" ?is-desktop-viewport="${this.isDesktopViewport}" permalink="${this.permalink}" ?show-full-buttons="${!this.isIconOnly}"></shreddit-comment-share-button>`:null}renderLockAction(){if(!this.shouldShowActionInline||this.isLocked)return null;const t="Lock";return e.x` <mod-action-button screen-reader-content="${t}" data-mod-action="${m.M.Lock}" event-noun="lock" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.bD({attributes:{"aria-hidden":"true"},size:e.q.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderUnlockAction(){if(!this.shouldShowActionInline||!this.isLocked)return null;const t="Unlock";return e.x` <mod-action-button screen-reader-content="${t}" data-mod-action="${m.M.Unlock}" event-noun="unlock" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.aF({attributes:{"aria-hidden":"true"},size:e.q.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderStickyAction(){if(!this.isStickyable||!this.shouldShowActionInline||this.isStickied||this.areHighlightsEnabled)return null;const t="Sticky";return e.x` <mod-action-button screen-reader-content="${t}" data-mod-action="${m.M.Sticky}" event-noun="sticky" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.bC({attributes:{"aria-hidden":"true"},size:e.q.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderUnstickyAction(){if(!this.isStickyable||!this.shouldShowActionInline||!this.isStickied||this.areHighlightsEnabled)return null;const t="Unsticky";return e.x` <mod-action-button screen-reader-content="${t}" data-mod-action="${m.M.Unsticky}" event-noun="unsticky" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.aG({attributes:{"aria-hidden":"true"},size:e.q.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderAddToHighlightsAction(){if(!this.isStickyable||!this.shouldShowActionInline||!this.areHighlightsEnabled||!l.H.has(this.viewContext)||this.isHighlighted)return null;const t="Add to highlights";return e.x` <mod-action-button screen-reader-content="${t}" data-mod-action="${m.M.UpdateHighlightedPost}" event-noun="highlight" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.bC({attributes:{"aria-hidden":"true"},size:e.q.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}renderRemoveFromHighlightsAction(){if(!(this.isStickyable&&this.shouldShowActionInline&&this.areHighlightsEnabled&&l.H.has(this.viewContext)&&this.isHighlighted))return null;const t="Remove from highlights";return e.x` <mod-action-button screen-reader-content="${t}" data-mod-action="${m.M.RemoveHighlightedPost}" event-noun="unhighlight" button-appearance="plain" ?show-full-buttons="${!this.isIconOnly}"> <span slot="icon" class="flex justify-center"> ${e.aG({attributes:{"aria-hidden":"true"},size:e.q.Small})} </span> <span slot="text"> ${t} </span> </mod-action-button>`}render(){return e.x` ${this.renderAddRemovalReasonAction()} ${this.renderApproveAction()} ${this.renderRemoveAction()} ${this.renderConfirmRemovalAction()} ${this.renderShareToModChatAction()} ${this.renderSpamAction()} ${this.renderFlairAction()} ${this.renderLockAction()} ${this.renderUnlockAction()} ${this.renderCopyLinkAction()} ${this.renderStickyAction()} ${this.renderUnstickyAction()} ${this.renderAddToHighlightsAction()} ${this.renderRemoveFromHighlightsAction()} `}};N.styles=[t.t,e.i`:host{display:flex;gap:var(--spacer-xs)}.separator{border-left:1px solid rgb(0,0,0,.1);width:1px;height:32px}`],e._([e.n({type:String,attribute:"thing-id"})],N.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"feed-view-type"})],N.prototype,"feedViewType",void 0),e._([e.n({type:String,attribute:"view-context"})],N.prototype,"viewContext",void 0),e._([e.n({type:String,attribute:"item-state"})],N.prototype,"itemState",void 0),e._([e.n({type:Boolean,attribute:"has-reports"})],N.prototype,"hasReports",void 0),e._([e.n({type:Boolean,attribute:"mod-mode"})],N.prototype,"isModMode",void 0),e._([e.n({type:Boolean,attribute:"removed"})],N.prototype,"isRemoved",void 0),e._([e.n({type:Boolean,attribute:"deleted"})],N.prototype,"isDeleted",void 0),e._([e.n({type:Boolean,attribute:"locked"})],N.prototype,"isLocked",void 0),e._([e.n({type:Boolean,attribute:"stickied"})],N.prototype,"isStickied",void 0),e._([e.n({type:Boolean,attribute:"highlighted"})],N.prototype,"isHighlighted",void 0),e._([e.n({type:Boolean,attribute:"current-user-author"})],N.prototype,"isCurrentUserAuthor",void 0),e._([e.n({type:Boolean,attribute:"has-parent"})],N.prototype,"hasParent",void 0),e._([e.n({type:Boolean,attribute:"icon-only"})],N.prototype,"isIconOnly",void 0),e._([e.n({type:Boolean,attribute:"has-removal-reason"})],N.prototype,"hasRemovalReason",void 0),e._([e.n({type:String,attribute:"permalink"})],N.prototype,"permalink",void 0),e._([e.n({type:Boolean,attribute:"is-desktop-viewport"})],N.prototype,"isDesktopViewport",void 0),e._([e.n({type:Boolean,attribute:"is-spam-filtered-post"})],N.prototype,"isSpamFilteredPost",void 0),e._([e.n({type:Boolean,attribute:"is-profile-post"})],N.prototype,"isProfilePost",void 0),e._([e.n({type:Boolean,attribute:"is-promoted-post"})],N.prototype,"isPromotedPost",void 0),e._([e.n({type:Boolean,attribute:"has-flair-permissions"})],N.prototype,"hasFlairPermissions",void 0),e._([e.n({type:Boolean,attribute:"highlights-enabled"})],N.prototype,"areHighlightsEnabled",void 0),e._([e.n({type:Boolean,attribute:"hide-inline-actions"})],N.prototype,"hideInlineActions",void 0),e._([e.n({type:Boolean,attribute:"smart-escalations"})],N.prototype,"isSmartEscalations",void 0),e._([e.n({type:Boolean,attribute:"is-content-level-mods-comms-enabled"})],N.prototype,"isContentLevelModsCommsEnabled",void 0),e._([e.n({type:Object,attribute:"mod-content-discussion-context"})],N.prototype,"modContentDiscussionContext",void 0),e._([e.n({type:Boolean,attribute:"is-feed-no-approve-enabled"})],N.prototype,"isFeedNoApproveEnabled",void 0),e._([e.n({attribute:!1})],N.prototype,"focusChatTextareaFn",void 0),e._([e.b()],N.prototype,"moderationState",void 0),N=e._([e.c("shreddit-mod-inline-actions")],N);let R=class extends n.M{constructor(){super(...arguments),this.isNsfw=!1,this.isSpoiler=!1,this.pubsub=new t.P(this),this._handlePostUpdate=({postId:e,action:i,value:n})=>{if(e===this.thingId)switch(i){case c.a.lock:this.isLocked=Boolean(n);break;case c.a.sticky:this.isStickied=Boolean(n);break;case c.a.updateHighlightedPost:this.isHighlighted=Boolean(n);break;case c.a.distinguishAsMod:this.distinguishedAs=n?t.b0.Moderator:void 0;break;case c.a.approveOptimistic:case c.a.approve:this.isRemoved=!1,this.hasRemovalReason=!1,this.verdict=t.a2.ModApproved,this.itemState=o.M.APPROVED,this.hasReports=!1,this.requestUpdate();break;case c.a.remove:case c.a.removeAsSpam:case c.a.confirmRemoval:case c.a.removeOptimistic:case c.a.removeAsSpamOptimistic:case c.a.confirmRemovalOptimistic:this.isRemoved=!0,this.verdict=t.a2.ModRemoved,this.itemState=o.M.REMOVED,this.hasReports=!1;break;case c.a.addRemovalReason:this.hasRemovalReason=Boolean(n);break;case c.a.markAsNsfw:this.isNsfw=Boolean(n);break;case c.a.markAsSpoiler:this.isSpoiler=Boolean(n);break;case c.a.ignoreReports:this.isReportingIgnored=Boolean(n),n&&(this.isRemoved=!1,this.verdict=t.a2.ModApproved,this.itemState=o.M.APPROVED)}}}get isStickyable(){return super.isStickyable}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.PostUpdated,this._handlePostUpdate)}renderMarkAsNsfwAction(){return this.isDeleted||this.isNsfw?null:p.l({leadingIcon:e.bR(),label:"Add NSFW tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleMarkNsfw)});}renderUnmarkAsNsfwAction(){return this.isDeleted||!this.isNsfw?null:p.l({leadingIcon:e.a8(),label:"Remove NSFW tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnmarkNsfw)});}renderMarkAsSpoilerAction(){return this.isDeleted||this.isSpoiler?null:p.l({leadingIcon:e.av(),label:"Add spoiler tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleMarkSpoiler)});}renderUnmarkAsSpoilerAction(){return this.isDeleted||!this.isSpoiler?null:p.l({leadingIcon:e.K(),label:"Remove spoiler tag",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleUnmarkSpoiler)});}renderAdjustCrowdControlAction(){return this.isPromotedPost?null:p.l({leadingIcon:e.bS(),label:"Adjust crowd control",size:this.size,onClick:this.getListItemClickHandler(this.modActionsController.handleAdjustCrowdControl)});}renderActions(){return [this.renderConfirmRemovalAction(),this.renderApproveAction(),this.renderRemoveAction(),this.isContentLevelModsCommsEnabled?this.renderShareToModChatAction(this.modContentDiscussionContext):null,this.renderSpamAction(),this.renderIgnoreReportsAction(),this.renderUnignoreReportsAction(),this.renderAddRemovalReasonAction(),this.renderDistinguishAction(),this.renderUndistinguishAction(),this.renderStickyAction("Sticky post"),this.renderUnstickyAction("Unsticky post"),this.renderAddToHighlightsAction(),this.renderRemoveFromHighlightsAction(),this.renderLockAction("Lock comments"),this.renderUnlockAction("Unlock comments"),this.renderEditPostFlairAction("Edit post flair"),this.renderMarkAsNsfwAction(),this.renderUnmarkAsNsfwAction(),this.renderMarkAsSpoilerAction(),this.renderUnmarkAsSpoilerAction(),this.renderAdjustCrowdControlAction(),this.renderCopyLinkAction()];}};e._([e.n({type:Boolean,attribute:"nsfw"})],R.prototype,"isNsfw",void 0),e._([e.n({type:Boolean,attribute:"spoiler"})],R.prototype,"isSpoiler",void 0),R=e._([e.c("shreddit-post-mod-actions-menu")],R)}));
SML.dm("BMNJiqQ9",["CVEbQKiO"],(async a=>{const{svg:c}=a.g();return{P:"pagination__change-page",c:a.w(c`<path d="M4.21 9.95c-.31 0-.61-.12-.85-.35L.58 6.82a.706.706 0 010-.99c.27-.27.72-.27.99 0l2.64 2.64 6.22-6.22c.27-.27.72-.27.99 0s.27.72 0 .99L5.06 9.6c-.23.23-.54.35-.85.35z"></path>`,"0 0 12 12","checkmark-12")}}));
SML.dm("B7jsX14Z",["D7lSuCop","CVEbQKiO","BMNJiqQ9"],(async(r,e,o)=>{var l=e.i`${r.y}a,button{background:0 0;border-radius:inherit;color:inherit;border:none;padding:0;margin:inherit;font:inherit;cursor:pointer;outline:inherit;display:inherit;width:inherit;height:inherit;text-decoration:none}a:focus-visible,button:focus-visible{outline:2px solid var(--color-global-focus)}`;class i extends r.w{constructor(){super(...arguments),this.disabled=!1,this.selected=!1}renderLeadingContent(){return e.x`<slot name="leading"></slot> `}renderTrailingContent(){return e.x`<slot name="trailing"></slot> `}handleDisabledLinkClick(r){this.disabled&&(r.preventDefault(),r.stopPropagation())}render(){const r=e.x`${this.renderLeadingContent()} <slot></slot> ${this.renderTrailingContent()}`;return this.href?e.x`<a href="${this.href}" aria-disabled="${this.disabled?"true":"false"}" aria-pressed="${this.selected}" @click="${this.handleDisabledLinkClick}">${r}</a>`:e.x`<button ?disabled="${this.disabled}" aria-pressed="${this.selected}"> ${r} </button>`}}i.styles=l,e._([e.n({type:Boolean})],i.prototype,"disabled",void 0),e._([e.n({type:Boolean,reflect:!0})],i.prototype,"selected",void 0),e._([e.n({type:String})],i.prototype,"href",void 0);var t=e.i`${r.y}:host{display:inline-flex;border:1px solid transparent;cursor:pointer}.container{display:inherit;align-items:center}slot:not([name]){display:inline-flex;line-height:var(--rem16);font-size:var(--rem12)}`;class a extends i{}a.styles=[i.styles,t];var c=e.i`${r.y}.checkmark-icon,::slotted([slot=leading]){display:inline-flex;margin-inline-end:var(--spacer-xs)}a,button{padding:calc(var(--spacer-xs) - var(--rem1))}:host([appearance=bordered]){--rpl-filter-chip-border-color:var(--color-neutral-border);--rpl-filter-chip-text-color:var(--color-secondary-plain);--rpl-filter-chip-disabled-background-color:var(--color-interactive-content-disabled);--rpl-filter-chip-disabled-text-color:var(--color-interactive-content-disabled);--rpl-filter-chip-disabled-border-color:var(--color-neutral-border-weak);--rpl-filter-chip-selected-background-color:var(--color-secondary-background-selected);--rpl-filter-chip-selected-border-color:var(--color-neutral-border);--rpl-filter-chip-hover-background-color:var(--color-secondary-background-hover)}:host([appearance=media]){--rpl-filter-chip-border-color:var(--color-media-border-weak);--rpl-filter-chip-background-color:var(--color-media-background);--rpl-filter-chip-text-color:var(--color-media-onbackground);--rpl-filter-chip-disabled-text-color:var(--color-media-onbackground-disabled);--rpl-filter-chip-disabled-background-color:var(--color-media-background);--rpl-filter-chip-disabled-border-color:var(--color-media-border-weak);--rpl-filter-chip-hover-background-color:var(--color-media-background-hover);--rpl-filter-chip-selected-background-color:var(--color-media-background-selected);--rpl-filter-chip-selected-border-color:var(--color-media-border-selected)}:host{border:1px solid var(--rpl-filter-chip-border-color);color:var(--rpl-filter-chip-text-color);background:var(--rpl-filter-chip-background-color);border-radius:var(--rem8);font-weight:600}:host(.hover:not([disabled])),:host(:hover:not([disabled])){background:var(--rpl-filter-chip-hover-background-color)}:host([selected]){--rpl-filter-chip-background-color:var(--rpl-filter-chip-selected-background-color);--rpl-filter-chip-border-color:var(--rpl-filter-chip-selected-border-color)}:host([disabled]){--rpl-filter-chip-background-color:var(--rpl-filter-chip-disabled-background-color);--rpl-filter-chip-border-color:var(--rpl-filter-chip-disabled-border-color);--rpl-filter-chip-text-color:var(--rpl-filter-chip-disabled-text-color)}`;const d="bordered";let n=class extends a{constructor(){super(...arguments),this.appearance=d}static get styles(){return[a.styles,c]}renderLeadingContent(){return this.selected?o.c({size:e.I.Small,attributes:{className:"checkmark-icon"}}):super.renderLeadingContent()}};e._([e.n({type:String})],n.prototype,"appearance",void 0),n=e._([e.c("rpl-filter-chip")],n)}));
SML.dm("fB-I7_yx",["CVEbQKiO","D9dm-Sy6","D7lSuCop","DEQ-l4mm","Mh6HSk7W","DZMRR9gi","B_ByM_ya"],(async(e,t,i,a,l,r)=>{let s=class extends l.F{constructor(){super(...arguments),this.appearance=r.T.SECONDARY,this.label="",this.clearable=!1,this.multiple=!1,this.required=!1,this.helperTextLevel=null,this.helperTextPlaceholder="",this.helperTextAriaLive="polite",this.helperTextMessage="",this.readonly=!1,this.inputRef=i.aE(),this._selectController=new a.S(this),this.focus=()=>{this.inputRef.value?.focus()},this.syncInputValidation=(e=!1)=>{const t=this.options.map((e=>e.value)),i=this.inputRef?.value?.value,a=this.value||this.arbitrary&&i||!this.arbitrary&&t.includes(i);if(this.required&&!a){const t=this.inputRef?.value?._internals.validationMessage;this.dropdownMenu?.hidden&&t&&(e?this.form?.invalidateFieldWithMessage(this.name,t):this.setCustomValidity(t))}else this.form?.invalidateFieldWithMessage(this.name,"")},this.resetFaceplateDirty=()=>{this.removeAttribute("faceplate-dirty")},this.matchOptionsToInput=e=>{if(this.autocomplete&&!this.multiple){const t=e.currentTarget?.value;this.options.forEach((e=>{const i=e.displayText?.toLowerCase().trim();if(this.onFilterOption?this.onFilterOption?.(t,e):i?.startsWith(t.toLowerCase())){if(!t)return e.removeAttribute("hidden"),void(e.matchedText="");e.hasAttribute("hidden")&&e.removeAttribute("hidden"),e.matchedText=e.displayText?.slice(0,t.length)}else e.setAttribute("hidden","")})),this._selectController.focusedIndex=0}},this.clear=e=>{e.preventDefault(),e.stopPropagation(),this._selectController.selectedOptions.forEach((e=>{e.resetSelection()})),this.inputRef.value&&(this.inputRef.value.value="")},this.handleKeyBindings=e=>{this.readonly||this.multiple?e.preventDefault():"Backspace"!==e.key||this.multiple||(this._selectController.value="")},this.getTextField=()=>e.x`<faceplate-text-input ?disabled="${this.disabled}" novalidate ${i.aq(this.inputRef)} appearance="${this.appearance}" role="combobox" aria-controls="menu" aria-expanded="${!this.hidden}" id="trigger" faceplate-popper-trigger aria-label="${this.label}" value="${this._selectController.getSelectedOptionsAsStr()}" ?required="${this.required}" @input="${this.matchOptionsToInput}" suppress-internal-clicks persistent-trailing-icon with-select helper-text-aria-live="${e.l(this.helperTextAriaLive??void 0)}" helper-text-message="${e.l(this.helperTextMessage)}" helper-text-level="${e.l(this.helperTextLevel??void 0)}" helper-text-placeholder="${e.l(this.helperTextPlaceholder)}" helper-text-screen-reader-msg="${e.l(this.helperTextScreenReaderMsg)}" aria-autocomplete="list" name="${this.name}"> <span slot="label">${this.label}</span> <slot name="clearButton" slot="clearButton" @click="${this.clear}"></slot> <span slot="trailingIconButton">${e.N({attributes:{"aria-hidden":"true"}})}</span> </faceplate-text-input>`}get referenceElement(){return this.inputRef.value}get selectedOptions(){return this._selectController.selectedOptions}get selectedIndex(){return this._selectController.selectedIndex}get value(){return this._selectController.value}set value(e){e!==this.value&&(this._selectController.value=e)}connectedCallback(){super.connectedCallback(),this.addEventListener("focus",this.resetFaceplateDirty),this.addEventListener("keydown",this.handleKeyBindings)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("focus",this.resetFaceplateDirty),this.removeEventListener("keydown",this.handleKeyBindings)}async firstUpdated(){super.firstUpdated(),this.setupValidationSync()}async setupValidationSync(){const e=await t.c(this);e&&this.isConnected&&(this.inputRef.value?.hasValidationHelpers||this.inputRef.value?.setFormValidationHelpers(e),this.syncInputValidation(),this.addEventListener(e.validationTrigger,(()=>this.syncInputValidation(!0))),e.addEventListener("faceplate-submit",(()=>this.syncInputValidation(!0))))}static get styles(){return e.i`:host{display:inline-block}:host([disabled]){cursor:not-allowed}faceplate-text-input{flex:1}:host([readonly]){caret-color:transparent}faceplate-menu{height:var(--faceplate-select-menu-height,auto);width:var(--faceplate-select-menu-width,auto);max-height:var(--faceplate-select-menu-max-height,auto);max-width:var(--faceplate-select-menu-max-width,auto);overflow:auto}`}render(){return e.x` <faceplate-dropdown-menu ?disabled="${this.disabled}" position="bottom-start" manual-trigger-focus> ${this.getTextField()} <faceplate-menu part="menu" slot="menu" id="menu" ariarole="listbox" faceplate-popper-content disable-auto-focus> <slot></slot> </faceplate-menu> </faceplate-dropdown-menu> `}};e._([e.n({type:String})],s.prototype,"appearance",void 0),e._([e.n({type:String})],s.prototype,"label",void 0),e._([e.n({type:Boolean})],s.prototype,"clearable",void 0),e._([e.n({type:Boolean})],s.prototype,"multiple",void 0),e._([e.n({type:Boolean})],s.prototype,"required",void 0),e._([e.n({type:String})],s.prototype,"autocomplete",void 0),e._([e.n({type:Boolean})],s.prototype,"arbitrary",void 0),e._([e.n({type:String,reflect:!0,attribute:"helper-text-level"})],s.prototype,"helperTextLevel",void 0),e._([e.n({type:String,attribute:"helper-text-placeholder"})],s.prototype,"helperTextPlaceholder",void 0),e._([e.n({type:String,reflect:!0,attribute:"helper-text-aria-live"})],s.prototype,"helperTextAriaLive",void 0),e._([e.n({type:String,attribute:"helper-text-message"})],s.prototype,"helperTextMessage",void 0),e._([e.n({type:String,attribute:"helper-text-screen-reader-msg"})],s.prototype,"helperTextScreenReaderMsg",void 0),e._([e.n()],s.prototype,"onFilterOption",void 0),e._([e.n({type:Boolean})],s.prototype,"readonly",void 0),e._([e.k()],s.prototype,"options",void 0),e._([e.k({selector:"faceplate-option:not([hidden])"})],s.prototype,"visibleOptions",void 0),e._([e.k()],s.prototype,"triggerSlot",void 0),e._([e.z("faceplate-dropdown-menu")],s.prototype,"dropdownMenu",void 0),s=e._([e.c("faceplate-select-text-input")],s)}));
SML.dm("B_2AnPg8",["CVEbQKiO","CCphb8vV"],(async(e,t)=>{class s extends(function(e){var t;return(t=class extends e{}).VERSION="unreleased",t}(e.s)){}let i=class extends s{constructor(){super(...arguments),this.selected=!1,this.disabled=!1,this.current=!1,this.emitter=t.v(this),this.trustedUpdate=!1,this.handleSelection=e=>{e.stopPropagation(),this.disabled||this.dispatchSelectRequest(!this.selected)},this.onClick=e=>{this.handleSelection(e)},this.dispatchSelectRequest=(e=this.selected,t)=>{this.emitter.dispatch("select",{bubbles:!0,composed:!0,detail:{option:this,selected:e,allowSingleDeselection:t}})},this.resetSelection=()=>{this.matchedText="",this.removeAttribute("hidden"),this.selected=!1,this.dispatchSelectRequest()},this.visualFocus=e=>{this.current=e}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick),this.addEventListener(this.emitter.eventId("update"),this.onUpdateFromSelect),this.setAttribute("role","option")}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick),this.removeEventListener(this.emitter.eventId("update"),this.onUpdateFromSelect)}updated(e){e.has("selected")&&this.setAttribute("aria-selected",`${this.selected}`),e.has("disabled")&&this.setAttribute("tabindex",this.disabled?"-1":"0"),this.trustedUpdate&&(this.trustedUpdate=!1)}willUpdate(e){e.has("selected")&&!this.trustedUpdate&&this.dispatchSelectRequest(this.selected,!0)}onUpdateFromSelect(e){const{selected:t}=e.detail??{};t!==this.selected&&(this.selected=t,this.trustedUpdate=!0)}static get styles(){return e.i`:host{color:var(--color-secondary-plain);cursor:pointer;display:flex;align-items:center;gap:var(--spacer-xs);padding:var(--spacer-xs);min-width:var(--select-width, 'auto');box-sizing:border-box;outline-offset:-1px}:host([hidden]){display:none}:host(:hover){background:var(--color-neutral-background-strong-hover)}:host([selected]){background:var(--color-neutral-background-selected)}:host([current]){outline:1px auto var(--color-global-focus)}:host([disabled]){color:var(--color-interactive-content-disabled);pointer-events:none}slot[name=leading]{width:var(--size-xl);height:var(--size-xl);align-items:center}::slotted([slot=leading]){display:inline-flex}slot:not([name]){display:inline-block;width:100%;line-height:var(--rem20)}.matched-text{font-weight:700}`}render(){const t=this.matchedText?.length||0;return e.x`<slot name="leading"></slot> <slot> <span class="matched-text">${this.matchedText}</span><span>${this.displayText?.slice(t)}</span> </slot> <span>${this.selected?e.F():e.A}</span>`}};e._([e.n({type:Boolean})],i.prototype,"selected",void 0),e._([e.n({type:Boolean})],i.prototype,"disabled",void 0),e._([e.n({type:String})],i.prototype,"value",void 0),e._([e.n({type:String,attribute:"matched-text",reflect:!0})],i.prototype,"matchedText",void 0),e._([e.n({type:String,attribute:"display-text"})],i.prototype,"displayText",void 0),e._([e.n({type:Boolean,reflect:!0})],i.prototype,"current",void 0),e._([e.v({flatten:!0})],i.prototype,"defaultSlot",void 0),i=e._([e.c("faceplate-option")],i)}));
SML.dm("CGytz8Wq",["CVEbQKiO"],(async t=>{var e;!function(t){t.Error="error",t.Success="success",t.Incomplete="incomplete"}(e||(e={}));const s=o(16);function r(t,e){return t-e/100*t}function o(t){return 2*Math.PI*t}let a=class extends t.s{constructor(){super(...arguments),this.value=0,this.status=e.Incomplete}static get styles(){return t.i`:host{--loader-size-base:var(--rem40);display:inline-block;position:relative}:host([status=incomplete]){color:var(--color-neutral-content,var(--color-tone-1))}:host([status=success]){color:var(--color-success-content,var(--color-alert-positive))}:host([status=error]){color:var(--color-danger-content,var(--color-alert-negative))}svg{height:var(--loader-size,var(--loader-size-base));width:var(--loader-size,var(--loader-size-base));fill:none;stroke-width:8;display:block}.bg{stroke:var(--color-neutral-content-disabled,var(--color-tone-3))}.track{stroke:currentColor;transition:.35s stroke-dashoffset;transform:rotate(-90deg);transform-origin:50% 50%}.icon{position:absolute;inset-inline-start:50%;top:50%;transform:translate(-50%,-50%)}::slotted([slot=error]),::slotted([slot=success]){display:flex}`}render(){const o=this.status===e.Success;return t.x` <svg viewBox="0 0 40 40" class="loader" xmlns="http://www.w3.org/2000/svg"> <circle class="bg" cx="20" cy="20" r="${16}"></circle> <circle class="track ${this.status}" cx="20" cy="20" r="${16}" stroke-dasharray="${s} ${s}" stroke-dashoffset="${r(s,o?100:this.value)}"></circle> </svg> <div class="icon"> <slot name="${this.status}"></slot> </div> `}};return t._([t.n({type:Number})],a.prototype,"value",void 0),t._([t.n({type:String,reflect:!0})],a.prototype,"status",void 0),a=t._([t.c("faceplate-progress")],a),{get FaceplateProgress(){return a},get ProgressState(){return e},calcCircumference:o,calcStokeDashOffset:r}}));
SML.dm("DdIwQUSk",[],(async()=>{var e,n;return function(e){e.READY="ready",e.EMPTY="empty"}(e||(e={})),function(e){e.SUCCESS="success"}(n||(n={})),{get R(){return n},get S(){return e}}}));
SML.dm("Dk5NGh_Q",["CVEbQKiO","D7lSuCop","CCphb8vV","B05atAPk","B_ByM_ya","BZ7lqt1T","D9dm-Sy6","DJsOQMvU","Cx0Ea5Jz","DsV3drw0","AhHXxeIZ","LCU6ttla","BC8XSJYX","Mh6HSk7W","DdIwQUSk","B7jsX14Z","fB-I7_yx","B_2AnPg8","GpA9mJze","B92R8McT","CITAGWir","CGytz8Wq","BcR8gLw3","Bj8wOYTD","BMNJiqQ9","DEQ-l4mm","CK47trMR","DZMRR9gi","B8BAxqC_"],(async(e,a,t,i,n,o,s,r,l,d,m,u,c,p,h)=>{const g="dont-notify-tooltip-close",v="removal-reason-input-changed",{svg:N}=e.g(),R=e.w(N`<path d="M15.11 8.7l-1.63-.34c-.93-.19-1.65-.91-1.84-1.84l-.34-1.63c-.23-1.12-1.16-1.87-2.3-1.87s-2.07.75-2.3 1.87l-.34 1.63c-.19.93-.92 1.65-1.84 1.84l-1.63.34c-1.12.23-1.87 1.16-1.87 2.3s.75 2.07 1.87 2.3l1.63.34c.93.19 1.65.91 1.84 1.84l.34 1.63c.23 1.12 1.16 1.87 2.3 1.87s2.07-.75 2.3-1.87l.34-1.63c.19-.93.92-1.65 1.84-1.84l1.63-.34c1.12-.23 1.87-1.16 1.87-2.3s-.75-2.07-1.87-2.3zm-.37 2.84l-1.63.34c-1.63.34-2.9 1.61-3.24 3.24l-.34 1.63c-.08.4-.4.44-.54.44s-.46-.04-.54-.44l-.34-1.63a4.178 4.178 0 00-3.24-3.24l-1.63-.34c-.39-.08-.44-.4-.44-.54s.04-.46.44-.54l1.63-.34c1.63-.34 2.9-1.61 3.24-3.24l.34-1.63c.08-.4.4-.44.54-.44s.46.04.54.44l.34 1.63c.34 1.63 1.61 2.9 3.24 3.24l1.63.34c.39.08.44.4.44.54s-.04.46-.44.54zM18 3.1h-1.1V2c0-.5-.4-.9-.9-.9s-.9.4-.9.9v1.1H14c-.5 0-.9.4-.9.9s.4.9.9.9h1.1V6c0 .5.4.9.9.9s.9-.4.9-.9V4.9H18c.5 0 .9-.4.9-.9s-.4-.9-.9-.9z"></path>`,"0 0 20 20","ai");var b=e.y("ai-outline",R);class I extends CustomEvent{constructor(e){super(I.eventName,{detail:e,bubbles:!0,composed:!0})}}I.eventName="select-suggested-removal-reason";let k=class extends e.s{constructor(){super(...arguments),this.reasons=[],this.suggestions=[],this.eventContext={}}getReasonNumber(e){const a=this.reasons.findIndex((a=>a.id===e));return a>=0?a+1:0}getSelectedChip(){return this.shadowRoot?.querySelector('rpl-filter-chip[name="removal-reason-suggestion"][selected]')??null}render(){return e.x` <div class="my-xs w-fit"> ${b({size:e.q.ExtraSmall})} ${"Suggested"} <rpl-tooltip appearance="inverted" trigger="hover focus" placement="right" @click="${e=>e.preventDefault()}"> ${e.aP({size:e.q.ExtraSmall})} <span slot="content" class="pointer-events-auto"> ${"Suggestions based on the content, your rules, and your removal reasons."} <a href="https://support.reddithelp.com/hc/articles/15484471320980-Saved-Responses" target="_blank" class="text-inverted-neutral-content-strong" @click="${e=>e.stopPropagation()}"> ${"Learn more"} </a> </span> </rpl-tooltip> <div class="flex flex-col gap-xs mt-xs"> ${this.suggestions.map((a=>{const t=this.getReasonNumber(a.id);return e.x` <faceplate-tracker source="moderator" action="click" noun="removal_reason_recommendation" data-faceplate-tracking-context="${JSON.stringify({action_info:{reason:a.id},subreddit:{id:this.eventContext.subredditId},post:{id:this.eventContext.postId},comment:{id:this.eventContext.commentId}})}" @click="${e=>{e.preventDefault(),e.stopPropagation()}}"> <rpl-filter-chip name="removal-reason-suggestion" class="max-w-fit" appearance="bordered" data-removal-reason-id="${a.id}" ?selected="${this.value===a.id}" @click="${()=>{this.dispatchEvent(new I({reasonId:a.id}))}}">${t?`${t}. `:""}${a.title}</rpl-filter-chip> </faceplate-tracker> `}))} </div> </div> `;}};k.styles=[a.t],e._([e.n({type:Array})],k.prototype,"reasons",void 0),e._([e.n({type:Array})],k.prototype,"suggestions",void 0),e._([e.n({type:Object,attribute:"event-context"})],k.prototype,"eventContext",void 0),e._([e.n()],k.prototype,"value",void 0),k=e._([e.c("removal-reason-suggestions")],k);let f=class extends e.s{constructor(){super(...arguments),this._showCoachmark=!localStorage.getItem(this.getLocalStorageKey()),this.closeCoachmark=e=>{e.stopPropagation(),this._showCoachmark=!1},this.handleLearnMore=e=>{e.stopPropagation(),window.open("https://support.reddithelp.com/hc/articles/15484471320980-Saved-Responses","_blank")}}getLocalStorageKey(){return a.L.RemovalReasonSuggestionsCoachmarkSeen}connectedCallback(){super.connectedCallback();localStorage.getItem(this.getLocalStorageKey())?this._showCoachmark=!1:(localStorage.setItem(this.getLocalStorageKey(),"true"),this._showCoachmark=!0)}disconnectedCallback(){super.disconnectedCallback()}render(){return e.x`<rpl-coachmark placement="${u.P.Bottom}" appearance="${c.a.Inverted}" ?open="${this._showCoachmark}" class="w-[270px]"> <slot></slot> <rpl-coachmark-card slot="content" aria-live="polite" appearance="${c.a.Inverted}" class="w-[270px]"> <div slot="title" class="pt-xs pb-2xs"> <div> ${"Save time with suggested removal reasons"} </div> </div> ${a.k({attributes:{className:"close-btn",slot:"close-button",onclick:e=>{e.stopPropagation(),this.closeCoachmark(e)}},appearance:"plainInverted",size:a._.Small,leadingIcon:e.C({size:e.q.Small})})} <div class="text-12 mb-sm"> ${"Based on the content, your rules, and your removal reasons, well suggest the most likely removal reasons."} </div> ${a.k({attributes:{slot:"secondary-button",onclick:this.handleLearnMore},children:"Learn More",appearance:"plainInverted",size:a._.Small})} ${a.k({attributes:{slot:"primary-button",onclick:this.closeCoachmark},children:"Got It",appearance:"plainInverted",size:a._.Small})} </rpl-coachmark-card> </rpl-coachmark>`;}};f.styles=[a.t],e._([e.b()],f.prototype,"_showCoachmark",void 0),f=e._([e.c("removal-reason-suggestions-coachmark")],f);class T extends p.F{constructor(){super(...arguments),this.isInputDirty=!1,this.required=!1,this.handleSubmit=()=>{this.isInputDirty=!0},this.handleInvalid=e=>{e.preventDefault()}}get value(){const e=this._internals.getFormValue();return e?e.toString():null}set value(e){e!==this.value&&(this._internals.setFormValue(e),this.updateValidity(),this.dispatchEvent(new CustomEvent(v,{detail:{value:e},bubbles:!0})))}connectedCallback(){super.connectedCallback(),s.c(this).then((e=>{e?.addEventListener("faceplate-submit",this.handleSubmit)})),this.addEventListener("invalid",this.handleInvalid),this.updateValidity()}disconnectedCallback(){super.disconnectedCallback(),this.form?.removeEventListener("faceplate-submit",this.handleSubmit),this.removeEventListener("invalid",this.handleInvalid)}updateValidity(){this.required&&!this.value?this._internals.setValidity({valueMissing:!0},this.getValueMissingValidationMessage()):this._internals.setValidity(),this.requestUpdate()}getValueMissingValidationMessage(){return""}renderValidationState(){return this.isInputDirty&&this.validationMessage?e.x`<span class="text-12 text-danger-content px-md">${this.validationMessage}</span>`:null}}e._([e.b()],T.prototype,"isInputDirty",void 0),e._([e.n({type:Boolean})],T.prototype,"required",void 0);class E extends CustomEvent{constructor(e){super(E.eventName,{detail:e,bubbles:!0,composed:!0})}}E.eventName="select-removal-reason";let S=class extends T{constructor(){super(...arguments),this.isSitewide=!1,this.selectedRemovalReason=this.value,this.handleSelectSuggestedRemovalReason=e=>{this.selectReasonById(e.detail.reasonId,!1)},this.handleSelect=e=>{const a=e.target;this.selectReasonById(a.value)}}get displayText(){return this.reasons?.find((e=>e.id===this.value))?.title||""}static get styles(){return[a.t,e.i`:host{display:flex;flex-direction:column}`]}getValueMissingValidationMessage(){return "Removal reason is required.";}getPlatformRuleOption(){return {id:"default-removal-reason",title:"Breaking platform rules",message:""};}selectReasonById(e,a=!0){const t=(this.includePlatformRuleOption?[...(this.reasons || []),this.getPlatformRuleOption()]:this.reasons||[]).find((a=>a.id===e));t&&this.selectedRemovalReason!==t.id&&(this.selectedRemovalReason=t.id,this.value=t.id,this.dispatchEvent(new E({...t,isSitewide:this.isSitewide,trackEvent:a})))}getDropdownPlaceholder(){return this.isSitewide?"Select a platform rule":"Select a removal reason";}connectedCallback(){super.connectedCallback(),this.addEventListener(I.eventName,this.handleSelectSuggestedRemovalReason)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(I.eventName,this.handleSelectSuggestedRemovalReason)}render(){return e.x` <label class="text-16 text-neutral-content-strong"> ${super.render()} </label> <faceplate-select-text-input label="${this.getDropdownPlaceholder()}" value="${this.selectedRemovalReason}" readonly="readonly" style="--faceplate-select-menu-max-height:350px;-faceplate-select-menu-max-width:80vw" @faceplate-select-text-input:change="${this.handleSelect}"> ${this.reasons?.map(((a,t)=>e.x`<faceplate-option value="${a.id}" display-text="${a.title}" ?selected="${a.id===this.selectedRemovalReason}"><span slot="leading" class="whitespace-nowrap text-16">${t+1}</span></faceplate-option>`))} ${this.includePlatformRuleOption&&e.x`<faceplate-option value="default-removal-reason" display-text="${this.getPlatformRuleOption().title}"></faceplate-option>`} ${this.includeAddRemovalReasonOption&&e.x`<faceplate-option value="add-removal-reason"> <slot name="link"></slot> </faceplate-option>`} </faceplate-select-text-input> ${this.renderValidationState()} ${this.removalReasonSuggestionsContext?.predictedRemovalSavedResponses&&this.removalReasonSuggestionsContext?.predictedRemovalSavedResponses.length>0?e.x` <removal-reason-suggestions-coachmark> <removal-reason-suggestions class="block w-fit" reasons="${JSON.stringify(this.reasons)}" suggestions="${JSON.stringify(this.removalReasonSuggestionsContext.predictedRemovalSavedResponses)}" event-context="${JSON.stringify(this.removalReasonSuggestionsContext.eventContext)}" value="${this.selectedRemovalReason}"></removal-reason-suggestions> </removal-reason-suggestions-coachmark> `:""} `}};e._([e.n({type:Array})],S.prototype,"reasons",void 0),e._([e.n({type:Boolean,attribute:"is-sitewide"})],S.prototype,"isSitewide",void 0),e._([e.n({type:Boolean,attribute:"include-platform-rule-option"})],S.prototype,"includePlatformRuleOption",void 0),e._([e.n({type:Boolean,attribute:"include-add-removal-reason-option"})],S.prototype,"includeAddRemovalReasonOption",void 0),e._([e.n({type:Object,attribute:"removal-reason-suggestions-context"})],S.prototype,"removalReasonSuggestionsContext",void 0),e._([e.b()],S.prototype,"selectedRemovalReason",void 0),S=e._([e.c("removal-reason-input")],S);let y=class extends m.R{constructor(){super(),this.tooltipVisible=!1,this.trigger="manual",this.placement="top",this.appearance="neutral"}connectedCallback(){super.connectedCallback(),this.initializeTooltip(),this.addEventListener(g,this.hideTooltip)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(g,this.hideTooltip)}async initializeTooltip(){a.l.getItem(a.L.RemovalReasonDontNotifyDismissed)||setTimeout((()=>this.showTooltip()),750)}showTooltip(){this.show()}hideTooltip(e){e.stopPropagation(),a.l.setItem(a.L.RemovalReasonDontNotifyDismissed,"true"),this.hide()}};e._([e.b()],y.prototype,"tooltipVisible",void 0),y=e._([e.c("dont-notify-tooltip")],y);let z=class extends e.s{constructor(){super(...arguments),this.isAIModEnabledForSubreddit=!1}handleClose(){this.dispatchEvent(new CustomEvent(g,{bubbles:!0}))}render(){return e.x` <div class="pointer-events-auto py-xs pl-xs w-[200px]"> <div class="flex flex-row"> <div> <div class="text-14 font-bold text-neutral-content-strong"> ${"Don't want to notify?"} </div> <div class="text-12 font-normal text-neutral-content-strong"> ${this.isAIModEnabledForSubreddit?"Use removal reasons to train automations and track mod actions without notifying users.":"Use removal reasons to track mod actions without notifying users."} </div> </div> ${a.k({appearance:"secondary",leadingIcon:e.C({size:e.q.Small}),size:a._.Small,screenReaderContent:"Close tooltip",attributes:{type:"button",className:"flex-shrink-0 -mt-xs",onclick:this.handleClose}})} </div> <div class="flex justify-end mt-md"> ${a.k({appearance:"plain",size:a._.Small,children:"Okay",attributes:{type:"button",onclick:this.handleClose}})} </div> </div> `;}};var L;z.styles=[a.t],e._([e.n({type:Boolean,attribute:"is-ai-mod-enabled-for-subreddit"})],z.prototype,"isAIModEnabledForSubreddit",void 0),z=e._([e.c("dont-notify-tooltip-content")],z),function(e){e.Comment="Comment",e.Modmail="Modmail",e.DontNotify="DontNotify"}(L||(L={}));let C=class extends T{constructor(){super(...arguments),this.isModmailAllowed=!1,this.isAIModEnabledForSubreddit=!1}static get styles(){return[a.t,e.i`:host{display:flex;flex-direction:column;gap:var(--spacer-xs)}`]}connectedCallback(){super.connectedCallback(),this.value=L.Comment}getValueMissingValidationMessage(){return "Please select the notification method.";}render(){return e.x` <label class="text-16 text-neutral-content-strong"> ${this._internals.input} ${"Notify user via"} </label> <div class="flex flex-row gap-xs"> ${a.k({appearance:"bordered",children:"Comment",leadingIcon:e.aV({size:e.q.Small}),selected:this.value===L.Comment,attributes:{type:"button",onclick:()=>{this.value=L.Comment,this.requestUpdate()}}})} ${this.isModmailAllowed?a.k({appearance:"bordered",children:"Mod Mail",leadingIcon:e.aD({size:e.q.Small}),selected:this.value===L.Modmail,attributes:{type:"button",onclick:()=>{this.value=L.Modmail,this.requestUpdate()}}}):e.A} <dont-notify-tooltip> ${a.k({appearance:"bordered",children:"Don't Notify",leadingIcon:e.c5({size:e.q.Small}),selected:this.value===L.DontNotify,attributes:{type:"button",onclick:()=>{this.value=L.DontNotify,this.requestUpdate()}}})} <dont-notify-tooltip-content ?is-ai-mod-enabled-for-subreddit="${this.isAIModEnabledForSubreddit}" slot="content"></dont-notify-tooltip-content> </dont-notify-tooltip> </div> ${this.renderValidationState()} `;}};var M;e._([e.n({type:Boolean,attribute:"is-mod-mail-allowed"})],C.prototype,"isModmailAllowed",void 0),e._([e.n({type:Boolean,attribute:"is-ai-mod-enabled-for-subreddit"})],C.prototype,"isAIModEnabledForSubreddit",void 0),C=e._([e.c("removal-reason-notification-method")],C),function(e){e.User="User",e.Mod="Mod"}(M||(M={}));let O=class extends T{static get styles(){return[a.t,e.i`:host{display:flex;flex-direction:column;gap:var(--spacer-xs)}`]}connectedCallback(){super.connectedCallback(),this.value=M.Mod}getValueMissingValidationMessage(){return "Please select the notification sender.";}render(){return e.x` <label class="text-16 text-neutral-content-strong"> ${this._internals.input} ${"Send message as"} </label> <div class="flex flex-row gap-xs"> ${a.k({appearance:"bordered",children:"Mod Team",leadingIcon:e.x`<slot name="mod-icon"></slot>`,selected:this.value===M.Mod&&!this.disabled,attributes:{type:"button",disabled:this.disabled,onclick:()=>{this.value=M.Mod,this.requestUpdate()}}})} ${a.k({appearance:"bordered",children:this.user,leadingIcon:e.x`<slot name="user-icon"></slot>`,selected:this.value===M.User&&!this.disabled,attributes:{type:"button",disabled:this.disabled,onclick:()=>{this.value=M.User,this.requestUpdate()}}})} </div> ${this.renderValidationState()} `;}};e._([e.n()],O.prototype,"user",void 0),O=e._([e.c("removal-reason-notification-sender")],O);class D extends CustomEvent{constructor(e){super(D.eventName,{bubbles:!0,composed:!0,cancelable:!0,detail:e})}}D.eventName="mod-removal-reason-added";class A extends CustomEvent{constructor(e){super(A.eventName,{bubbles:!0,composed:!0,cancelable:!0,detail:e})}}A.eventName="removal-reason-form-element-clicked";let P=class extends o.F{constructor(){super(),this._eventController=new a.E(this),this.handleFormElementClicked=e=>{e.target?.name&&this.dispatchEvent(new A({formElement:e.target.name}))},this.handleRemovalReasonInputChanged=e=>{if(e.target instanceof C){const a=e.target.value!==L.DontNotify;this.toggleNotificationSender(a),this.toggleMessageInput(a)}e.target instanceof S&&"removal-reason"===e.target.name&&this.toggleDefaultPolicyInput("default-removal-reason"===e.target.value)},this.convertFormDataToGql=e=>{const a=e.get("notification-method"),t=e.get("notification-sender"),i={reasonId:this.getRemovalReasonId(e),type:this.parseRemovalReasonMessageType(a,t),message:a===L.DontNotify?null:e.get("message"),isLockComment:e.has("lock")},n=e.get("modNote")||void 0,o={itemId:e.get("thing")?.toString()||"",removalReason:i,modNote:n};return this.lastSubmittedData=o,JSON.stringify({...o,csrf_token:e.get("csrf_token")})},this.encoders={...this.encoders,"application/json":this.convertFormDataToGql}}connectedCallback(){super.connectedCallback(),this._eventController.define(v,this.handleRemovalReasonInputChanged),this._eventController.define("click",this.handleFormElementClicked)}toggleNotificationSender(e){const a=this.elements["notification-sender"];a&&(e?a.removeAttribute("disabled"):a.setAttribute("disabled",""))}toggleField(e,a){e&&(a?(e.classList.remove("hidden"),e.setAttribute("required","")):(e.classList.add("hidden"),e.removeAttribute("required")))}toggleMessageInput(e){const a=this.elements.message;a&&this.toggleField(a,e)}toggleDefaultPolicyInput(e){const a=this.elements["default-removal-reason"];a&&this.toggleField(a,e)}showError(){const e={level:a.a4.error,message:"Something went wrong",cause:a.a_.QueryBadResponse};this.dispatchEvent(a.c("faceplate-alert",e))}async handleResponse(e){if(!e.ok)return this.dispatchEvent(a.c(H.eventName)),this.showError();try{const t=await e.text(),i={level:a.a4.success,message:"Removal reason added"},n=this.lastSubmittedData?.itemId||"";if(d.f(n)){const e={postId:n,action:l.a.addRemovalReason,value:!0};a.p(a.T.PostUpdated,e)}else{const e={commentId:n,action:r.C.addRemovalReason,value:!0};a.p(a.T.CommentUpdated,e)}if(t){const e={parentThingId:n,body:t};a.p(a.T.CommentCreated,e)}this.dispatchEvent(a.c(H.eventName)),this.dispatchEvent(a.c("faceplate-alert",i)),this.lastSubmittedData&&this.dispatchEvent(new D(this.lastSubmittedData))}catch{this.showError()}}parseRemovalReasonMessageType(e,t){return e===L.Comment?t===M.Mod?a.fa.CommentAsSubreddit:a.fa.CommentAsMod:e===L.Modmail?t===M.Mod?a.fa.MessageAsSubreddit:a.fa.MessageAsMod:null}getRemovalReasonId(e){const a=e.get("removal-reason");return"default-removal-reason"===a?e.get("default-removal-reason"):a}};P=e._([e.c("removal-reason-form")],P),s.r(P);const _={"removal-reason":"subreddit_removal_reason","default-removal-reason":"default_removal_reason",message:"message_to_user","notification-method":"notification_method","notification-sender":"notification_sender",modNote:"mod_note"};class j extends CustomEvent{constructor(e){super(j.eventName,{detail:e,bubbles:!0,composed:!0})}}j.eventName="mod-add-removal-reason-show-modal";class H extends CustomEvent{constructor(){super(H.eventName)}}H.eventName="mod-add-removal-reason-toggle-loading";let U=class extends e.s{constructor(){super(...arguments),this.pubsub=new a.P(this),this.getInputValue=e=>this.removalReasonForm?.querySelector(`input[name="${e}"]`)?.value,this.buildAndTrackEvent=e=>{const t={action:"click",...e,authorId:this.getInputValue("authorId"),subredditId:this.getInputValue("subredditId"),subredditName:this.subredditName,thingId:this.thingId};a.e(this,i.r(t))},this.firstUpdated=()=>{this.isSmartEscalationsCommunityRulesEnabled&&this.updateComplete.then((()=>{this.primaryButton?.addEventListener("click",(()=>{this.removalReasonForm?.isValid&&(this.toggleButtonLoadingIndicator(),this.initSmartEscalations())}))}))},this.handleAddRemovalReasonEvent=({detail:e})=>{""!==e?this.show(e):this.thingId=void 0},this.handleFormElementClicked=e=>{const a={type:_[e.detail.formElement]||e.detail.formElement},t=this.removalReasonForm?.elements[e.detail.formElement]?.value||this.getInputValue(e.detail.formElement);if("lock"===e.detail.formElement&&(a.isLocked="on"===t),"notification-method"===e.detail.formElement){if(!t)return;a.notificationMethod=t}if("notification-sender"===e.detail.formElement){if(!t)return;a.sendAs=t}this.buildAndTrackEvent(a)},this.handleSelectRemovalReason=async e=>{const a=this.removalReasonInput?.removalReasonSuggestionsContext;e.detail.trackEvent&&this.buildAndTrackEvent({type:e.detail.isSitewide?"default_removal_reason":"subreddit_removal_reason",reason:e.detail.id,noun:"removal_reason_select",subredditId:a?.eventContext?.subredditId,postId:a?.eventContext?.postId,commentId:a?.eventContext?.commentId});const t=this.removalReasonForm,i=this.shadowRoot?.querySelector("faceplate-textarea-input");i&&e.detail.message&&(i.value=await this.renderRemovalReasonMessage(e.detail.id,e.detail.message),await i.updateComplete,i.syncInputValidity(),t?.notifyObservers(i))},this.renderRemovalReasonMessage=async(e,a)=>{try{return await this.renderRemovalReasonAsSavedResponseTemplate(e)}catch{return a}},this.renderSavedResponseTemplateBySubredditId=t.bg,this.renderRemovalReasonAsSavedResponseTemplate=e=>this.renderSavedResponseTemplateBySubredditId({responseId:e,subredditId:this.getInputValue("subredditId")||"",contentId:this.thingId}),this.handleAddedRemovalReason=e=>{let t=function(e){let t;t=e.type===a.fa.CommentAsMod||e.type===a.fa.CommentAsSubreddit?"comment":e.type===a.fa.MessageAsMod||e.type===a.fa.MessageAsSubreddit?"modmail":"no message";const i=e.type===a.fa.CommentAsSubreddit||e.type===a.fa.MessageAsSubreddit?"subreddit":"self";return{is_locked:e.isLockComment,notify:t,send_as:i}}(e.detail.removalReason);const n=this.removalReasonInput?.removalReasonSuggestionsContext?.predictedRemovalSavedResponses?.map((e=>e.id));n&&(t={...t,suggestion_list:n}),a.e(this,i.p(t,this.removalReasonInput?.value??void 0,this.removalReasonInput?.removalReasonSuggestionsContext?.eventContext)),this.isSmartEscalationsCommunityRulesEnabled&&!this.isExpandSuggestedActionsEnabled?(this.buildAndTrackEvent({type:"submit_button",reason:"default-removal-reason"===this.removalReasonInput?.value?this.defaultRemovalReasonInput?.value??void 0:this.removalReasonInput?.value??void 0,notificationMethod:this.removalReasonForm?.elements["notification-method"]?.value,sendAs:this.removalReasonForm?.elements["notification-sender"]?.value,isLocked:"on"===this.getInputValue("lock"),modNote:this.getInputValue("modNote"),message:this.getInputValue("message")}),this.pubsub.publish(a.T.RemovalReasonStatus,{status:h.R.SUCCESS})):this.close()},this.handleCancel=e=>{e.stopImmediatePropagation(),this.buildAndTrackEvent({type:"close_button"}),a.e(this,i.q()),this.close()},this.toggleButtonLoadingIndicator=()=>{this.primaryButton?.querySelector("faceplate-progress")?.classList.toggle("hidden"),this.primaryButton?.querySelector("span.submit-button-content")?.classList.toggle("opacity-0")},this.showHideSubmitButton=()=>{this.removalReasonInput?this.primaryButton?.classList.remove("hidden"):this.primaryButton?.classList.add("hidden")},this.close=()=>{this.modal?.open&&(this.modal?.close(),document.body.style.overflow="auto",document.body.style.pointerEvents="auto")},this.initSmartEscalations=()=>{const e=this.getInputValue("authorId"),t=this.getInputValue("subredditId"),i=e&&t&&this.thingId;i&&this.pubsub.publish(a.T.SmartEscalationsInit,{thingId:this.thingId,authorId:e,subredditId:t,removalReasonId:(this.defaultRemovalReasonInput?.value||this.removalReasonInput?.value)??"",removalReasonDisplayText:(this.defaultRemovalReasonInput?.displayText||this.removalReasonInput?.displayText)??""}),!i&&this.close()}}get removalReasonInput(){return this.shadowRoot?.querySelector('[name="removal-reason"]')}get defaultRemovalReasonInput(){return this.shadowRoot?.querySelector('[name="default-removal-reason"]')}get removalReasonForm(){return this.shadowRoot?.querySelector("removal-reason-form")}get primaryButton(){return this.shadowRoot?.querySelector('faceplate-modal [slot=primaryButton] button[type="submit"]')}get selectedSuggestionValue(){const e=this.removalReasonInput?.shadowRoot?.querySelector("removal-reason-suggestions"),a=e?.getSelectedChip();return a?.dataset.removalReasonId}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(a.T.AddRemovalReasonClose,this.close,!1),this.addEventListener(E.eventName,this.handleSelectRemovalReason),this.addEventListener(D.eventName,this.handleAddedRemovalReason),this.addEventListener(H.eventName,this.toggleButtonLoadingIndicator),this.addEventListener(A.eventName,this.handleFormElementClicked),window.addEventListener(j.eventName,this.handleAddRemovalReasonEvent)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener(j.eventName,this.handleAddRemovalReasonEvent),this.removeEventListener(E.eventName,this.handleSelectRemovalReason),this.removeEventListener(D.eventName,this.handleAddedRemovalReason),this.removeEventListener(H.eventName,this.toggleButtonLoadingIndicator),this.addEventListener(A.eventName,this.handleFormElementClicked)}async show(e){e&&(this.thingId=e,await this.updateComplete),this.modal?.showModal(),await(this.partial?.load()),this.buildAndTrackEvent({action:"view"}),this.primaryButton?.querySelector("faceplate-progress")?.classList.add("hidden"),this.primaryButton?.querySelector("span.submit-button-content")?.classList.remove("opacity-0"),this.showHideSubmitButton()}render(){return e.x` <removal-reason-form class="mb-0" enctype="application/json" method="POST" action="/svc/shreddit/mod/removal-reason"> <faceplate-modal class="max-w-[540px] w-[90v w] z-30"> <div slot="closeButton"> ${a.k({appearance:"secondary",leadingIcon:e.C({size:e.q.Small}),size:a._.Small,attributes:{type:"button",onclick:this.handleCancel}})} </div> <input type="hidden" name="thing" value="${this.thingId}"> ${n.i(this.thingId,e.x` <faceplate-partial class="w-100" src="/svc/shreddit/removal-reason-form/${this.thingId}" loading="${a.o.Programmatic}"> <div class="w-100 h-4xl flex items-center justify-center"> <faceplate-progress value="20" class="animate-spin"></faceplate-progress> </div> </faceplate-partial> `)} <div slot="primaryButton"> ${a.k({children:e.x`<faceplate-progress value="20" class="animate-spin loading-icon hidden absolute left-0 right-0 m-auto w-[16px]" style="--loader-size:1rem"></faceplate-progress> <span class="submit-button-content"> ${"Submit"}</span>`,appearance:"primary",attributes:{type:"submit",className:"w-100 relative"}})} </div> <div slot="secondaryButton"> ${a.k({children:"Cancel",appearance:"plain",attributes:{className:"w-100",type:"button",onclick:this.handleCancel}})} </div> </faceplate-modal> </removal-reason-form> `;}};return U.styles=[a.t],e._([e.n({type:Boolean,attribute:"is-smart-escalations-community-rules-enabled"})],U.prototype,"isSmartEscalationsCommunityRulesEnabled",void 0),e._([e.n({type:Boolean,attribute:"is-expand-suggested-actions-enabled"})],U.prototype,"isExpandSuggestedActionsEnabled",void 0),e._([e.n({type:String})],U.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"subreddit-name"})],U.prototype,"subredditName",void 0),e._([e.z("faceplate-modal")],U.prototype,"modal",void 0),e._([e.z("faceplate-partial")],U.prototype,"partial",void 0),U=e._([e.c("add-removal-reason-modal")],U),{A:j}}));
SML.dm("B6r1xcS1",["D7lSuCop"],(async t=>{const e=/(\.|\/\/)(reddit\.com|snoo\.dev|redditstatic\.com|redd\.it|redditmedia\.com)$/;class i extends t.a${constructor(e,i){super(e),this.events=new t.E(this,(()=>this._host)),this.handleMouseClick=(t,e)=>{if(t.isLinkClickHandled)return;const i=t.composedPath();for(const n of i){if(!(n instanceof HTMLAnchorElement))continue;const i=n.getAttribute("href")||"";if(this.isOutboundUrl(i))return this.trackOutboundLinkClick(i,e),void(t.isLinkClickHandled=!0)}},this.events.define("click",(t=>{this.handleMouseClick(t,i())}))}isOutboundUrl(t){if(t.startsWith("/"))return!1;try{return null==new URL(t).origin.match(e)}catch(t){return!1}}trackOutboundLinkClick(t,e){this._host.trackEvent(this.outboundLinkClickEvent(t,e))}outboundLinkClickEvent(e,i){return t.b({source:"link",action:"click",noun:"outbound_link"},{outbound:{url:e},action_info:{page_type:i.pageType},...i.postId?{post:{id:i.postId}}:{},...i.subredditId?{subreddit:{id:i.subredditId}}:{},...i.commentId?{comment:{id:i.commentId}}:{}})}}var n,r;!function(t){t.FocusSearchBar="focusSearchBar",t.RegisterAuth="registerAuth",t.UpvoteAuth="upvoteAuth"}(n||(n={})),function(t){t.Sort="sort",t.Filter="filter",t.EntityFilterId="entityFilterId",t.InlineRefresh="inline-refresh",t.SctTopLevelComment="sct-top-level-comment",t.ForceLegacySCT="force-legacy-sct"}(r||(r={}));return{get M(){return n},O:i,get P(){return r},R:"right-rail-entity-panel-root",S:"#subreddit-right-rail-tabs",a:"remove-flair",b:"pdp-chained-right-rail-related-posts",g:function(t){return`update-post-flair-modal-${t}`}}}));
SML.dm("F3ts0RLu",["CVEbQKiO","D7lSuCop","CK9FveTr","DEQ-l4mm","B_ByM_ya","CK47trMR","CCphb8vV"],(async(t,a,e)=>{const i=t.s;let o=class extends i{constructor(){super(...arguments),this.hasRemovalReasonAdded=!1,this._feedbackSubmitted=!1,this._trackingContext={}}get reportKey(){return`post-guidance-feedback-${this.reportId}`}getShredditPostData(){const t=this.getRootNode();if(t instanceof ShadowRoot){const a=t.host;if(a&&"SHREDDIT-POST"===a.tagName)return{id:a.id,postTitle:a.getAttribute("post-title"),contentHref:a.getAttribute("content-href"),authorId:a.getAttribute("author-id")}}return null}connectedCallback(){super.connectedCallback(),this._feedbackSubmitted="true"===sessionStorage.getItem(this.reportKey);const t=this.getShredditPostData();t&&(this._trackingContext={action_info:{post_id:t.id,post_title:t.postTitle,post_url:t.contentHref,author_id:t.authorId}})}handleFeedbackSubmit(t){if(t.target&&t.target instanceof HTMLElement){const e=t.target.closest("button"),i="yes"===e?.value,o=a.b({source:"moderator",action:"click",noun:i?"filter_is_correct":"filter_is_incorrect",...this._trackingContext});a.e(this,o),this._feedbackSubmitted=!0,sessionStorage.setItem(this.reportKey,"true")}}handleFeedbackUndo(){this._feedbackSubmitted=!1;const t=a.b({source:"moderator",action:"click",noun:"undo_filter",...this._trackingContext});a.e(this,t),sessionStorage.removeItem(this.reportKey)}renderFeedbackForm(){return t.x`<div class="border border-solid border-neutral-border p-sm flex flex-col gap-xs rounded-2 flex-1"> <div class="text-14 w-full"> ${"Was this automation accurate?"} </div> <div class="flex gap-2xs"> ${a.k({children:"Yes",appearance:"bordered",attributes:{type:"button",onclick:this.handleFeedbackSubmit,value:"yes"}})} ${a.k({children:"No",appearance:"bordered",attributes:{type:"button",onclick:this.handleFeedbackSubmit,value:"no"}})} </div> </div>`;}renderFeedbackSubmitted(){return t.x` <div class="border border-solid border-neutral-border p-sm flex flex-row gap-xs rounded-2 flex-1 items-center"> <div class="text-14 w-full"> ${"Got it. You helped train your automation."} </div> <faceplate-dropdown-menu id="post-guidance-feedback-dropdown-menu"> ${a.k({appearance:"plain",attributes:{type:"button"},leadingIcon:t.ay({size:t.q.ExtraSmall}),screenReaderContent:"More options"})} <faceplate-menu slot="menu" dropdown> ${e.l({label:"Undo",attributes:{role:"option",onclick:this.handleFeedbackUndo}})} </faceplate-menu> </faceplate-dropdown-menu> </div>`;}renderRemovalReasonAdded(){return t.x`<div class="border border-solid border-neutral-border p-sm flex flex-row gap-xs rounded-2 flex-1 items-center"> <div class="text-14 w-full"> ${"Your removal reason helped train your automation."} </div> </div>`;}render(){return this.hasRemovalReasonAdded?this.renderRemovalReasonAdded():this._feedbackSubmitted?this.renderFeedbackSubmitted():this.renderFeedbackForm()}};o.styles=[a.t],t._([t.n({type:String,attribute:"report-id"})],o.prototype,"reportId",void 0),t._([t.n({type:Boolean,attribute:"has-removal-reason-added"})],o.prototype,"hasRemovalReasonAdded",void 0),t._([t.b()],o.prototype,"_feedbackSubmitted",void 0),o=t._([t.c("post-guidance-feedback")],o)}));
SML.dm("CCzgcJP_",["D7lSuCop","CVEbQKiO","B4Pgp3Rp","Ct0GBREL","DJsOQMvU","Cx0Ea5Jz","BYDFL-1r","B7NvqZE0","DEQ-l4mm","B_ByM_ya","B011DCe8","C7H6Jti6","ahl9RE2R","DB19i69m","Caoa8uoZ","CCphb8vV","CK47trMR","Bj8wOYTD","Bgpq8Ukm","DsV3drw0","UeyFDWWE","B05atAPk","B_-LCs5H","CK9FveTr","jayrQzpw","D5N4FxiB","v9RaKRju","CITAGWir","Dk5NGh_Q","BZ7lqt1T","D9dm-Sy6","B7jsX14Z","BMNJiqQ9","AhHXxeIZ","BC8XSJYX","LCU6ttla","fB-I7_yx","Mh6HSk7W","DZMRR9gi","B8BAxqC_","B_2AnPg8","GpA9mJze","B92R8McT","CGytz8Wq","BcR8gLw3","DdIwQUSk","B6r1xcS1","F3ts0RLu","kExRqc7d","CU4mObWU","CBZc9Xo3","DK2COEsH","CHD_ZF_V","DJy2jSvu","likT9J3g","CGzEIBwW","ClF_poCN","DR8kbffm"],(async(E,t,T,e,r,_)=>{let D=class extends t.s{constructor(){super(...arguments),this.isEnoughParentWidth=!1,this.removed=!1,this.thingId="",this.shouldIgnoreParentWidth=!1,this.pubsub=new E.P(this),this.minWidthToShowLabel=460,this.onCommentUpdateAction=E=>{if(E.commentId!==this.thingId)return;const{action:t}=E;switch(t){case r.C.approve:case r.C.approveOptimistic:this.removed=!1;break;case r.C.remove:case r.C.removeAsSpam:case r.C.confirmRemoval:case r.C.removeOptimistic:case r.C.removeAsSpamOptimistic:case r.C.confirmRemovalOptimistic:this.removed=!0}},this.onPostUpdateAction=E=>{if(E.postId!==this.thingId)return;const{action:t}=E;switch(t){case _.a.approve:case _.a.approveOptimistic:this.removed=!1;break;case _.a.remove:case _.a.removeAsSpam:case _.a.confirmRemoval:case _.a.removeOptimistic:case _.a.removeAsSpamOptimistic:case _.a.confirmRemovalOptimistic:this.removed=!0}},this.onAwardOnContentUpdateAction=E=>{if(E.awardOnContentId!==this.thingId)return;const{action:t}=E;switch(t){case e.A.approve:this.removed=!1;break;case e.A.remove:case e.A.confirmRemoval:this.removed=!0}}}connectedCallback(){this.initializeResizeObserver(),this.pubsub.subscribe(E.T.PostUpdated,this.onPostUpdateAction),this.pubsub.subscribe(E.T.CommentUpdated,this.onCommentUpdateAction),this.pubsub.subscribe(E.T.AwardOnContentUpdated,this.onAwardOnContentUpdateAction),super.connectedCallback()}disconnectedCallback(){this.resizeObserver?.disconnect(),super.disconnectedCallback()}initializeResizeObserver(){const E=T.g(this);E&&(this.resizeObserver=new ResizeObserver((E=>{for(const t of E){const E=t.contentRect.width>=this.minWidthToShowLabel;E!==this.isEnoughParentWidth&&(this.isEnoughParentWidth=E)}})),this.resizeObserver.observe(E))}render(){return t.x` <span class="inline-flex items-center gap-xs text-12 text-neutral-content w-full"> <div class="relative"> <slot name="verdict-indicator-avatar"></slot> <div aria-hidden="true" class="absolute bottom-0 -right-px flex justify-center items-center h-md w-md rounded-full border-solid border-md border-neutral-background scale-75 origin-bottom-right translate-y-px ${this.removed?"bg-red-200 text-red-700":"bg-kiwigreen-200 text-kiwigreen-700"}"> ${this.removed?t.V({size:t.q.ExtraSmall}):t.F({size:t.q.ExtraSmall})} </div> </div> ${this.shouldShowLabel?t.x`<slot name="verdict-indicator-label"></slot>`:""} </span> `}get shouldShowLabel(){return this.shouldIgnoreParentWidth||this.isEnoughParentWidth}};D.styles=[E.t],t._([t.b()],D.prototype,"isEnoughParentWidth",void 0),t._([t.n({type:Boolean,reflect:!0})],D.prototype,"removed",void 0),t._([t.n({type:String,attribute:"thing-id"})],D.prototype,"thingId",void 0),t._([t.n({type:Boolean,attribute:"ignore-parent-width"})],D.prototype,"shouldIgnoreParentWidth",void 0),D=t._([t.c("mod-verdict-indicator-component")],D)}));
SML.dm("yTYmgUGl",["CVEbQKiO","D7lSuCop","DJsOQMvU","Bj8wOYTD","Cx0Ea5Jz","CK9FveTr","DsV3drw0","C7H6Jti6","DEQ-l4mm","B_ByM_ya","DK2COEsH","CK47trMR","CCphb8vV"],(async(e,a,t,n,r,s,o)=>{let i=class extends e.s{constructor(){super(...arguments),this.status=n.R.Reported,this.pubsub=new a.P(this),this.handlePostUpdate=({postId:e,action:a,value:t})=>{e===this.thingId&&a===r.a.ignoreReports&&(this.status=t?n.R.Ignored:n.R.Dismissed)},this.handleCommentUpdate=({commentId:e,action:a,value:r})=>{e===this.thingId&&a===t.C.ignoreReports&&(this.status=r?n.R.Ignored:n.R.Dismissed)}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(a.T.PostUpdated,this.handlePostUpdate),this.pubsub.subscribe(a.T.CommentUpdated,this.handleCommentUpdate)}getStyle(){return e.u({"--list-icon-color":this.status===n.R.Reported?"var(--shreddit-color-mods-reported-onBackground)":"var(--color-secondary-onBackground)"})}render(){return this.status===n.R.Reported?e.x`<div class="bg-mods-reported-background hover:bg-mods-reported-background-hover" style="${this.getStyle()}"> <slot></slot> </div>`:e.x`<details class="max-w-fit bg-secondary-background hover:bg-secondary-background-hover" style="${this.getStyle()}"> <summary class="cursor-pointer block list-none" @click="${e=>e.stopPropagation()}"> <slot name="${this.status}"></slot> </summary> <slot></slot> </details>`}};i.styles=[e.i`summary::-webkit-details-marker{display:none}`,a.t],e._([e.n({type:String,attribute:"thing-id"})],i.prototype,"thingId",void 0),e._([e.n({type:String})],i.prototype,"status",void 0),i=e._([e.c("reports-summary-wrapper")],i);const d=e.s;let u=class extends d{constructor(){super(...arguments),this.contentId="",this.isSnoozed=!1,this.reportReason="",this.pubsub=new a.P(this),this.onPostUpdateAction=e=>{if(e.postId!==this.contentId)return;const{action:a}=e;switch(a){case r.a.snoozeReporter:this.isSnoozed=!0;break;case r.a.unsnoozeReporter:this.isSnoozed=!1}},this.onCommentUpdateAction=e=>{if(e.commentId!==this.contentId)return;const{action:a}=e;switch(a){case t.C.snoozeReporter:this.isSnoozed=!0;break;case t.C.unsnoozeReporter:this.isSnoozed=!1}}}connectedCallback(){super.connectedCallback(),o.f(this.contentId)?this.pubsub.subscribe(a.T.PostUpdated,this.onPostUpdateAction):this.pubsub.subscribe(a.T.CommentUpdated,this.onCommentUpdateAction)}renderReportOverflowMenu(){const t="Snooze reporter",n="Pause reports from this user for 7 days",r="Un-snooze reporter",o="Receive reports from this user again";return e.x` <mod-dropdown-closer> <faceplate-dropdown-menu @click="${e=>e.stopPropagation()}" position="bottom-end"> ${a.k({appearance:"plain",size:a._.ExtraSmall,children:e.ay({size:e.q.ExtraSmall})})} <faceplate-menu slot="menu"> ${s.l({label:this.isSnoozed?r:t,description:this.isSnoozed?o:n,leadingIcon:e.c1({size:e.q.Small}),onClick:this.toggleSnooze})} </faceplate-menu> </faceplate-dropdown-menu> </mod-dropdown-closer> `}sendTrackingEvent(e,t,n){const r=n?"snoozereports":"unsnoozereports",s=o.f(e)?"post":"comment",i=o.f(e)?e:null,d=o.f(e)?null:e,u=a.b({source:"moderator",action:r,noun:s},{...(i && {post:{id:i}}),...(d && {comment:{id:d}}),...(t && {action_info:{reason:t}})});a.e(this,u)}showToast({success:e,isSnoozed:t}){const n="Reports from these users will be paused",r="Reports from these users will be resumed",s="Failed to update reports",o=e?t?n:r:s,i=e?a.a4.info:a.a4.error,d=a.c("faceplate-alert",{level:i,message:o});this.dispatchEvent(d)}async updateReportState(e){try{const{data:t}=await a.v({operation:a.O.UpdateReportState,variables:{input:{itemId:this.contentId,reportText:this.reportReason,isSnoozed:e}}});return t?.updateReport?.ok??!1}catch(e){return!1}}async toggleSnooze(e){const n=!this.isSnoozed;this.sendTrackingEvent(this.contentId,this.reportReason,n);const s=await this.updateReportState(n);s&&(n?o.f(this.contentId)?this.pubsub.publish(a.T.PostUpdated,{postId:this.contentId,action:r.a.snoozeReporter,value:!0}):this.pubsub.publish(a.T.CommentUpdated,{commentId:this.contentId,action:t.C.snoozeReporter,value:!0}):o.f(this.contentId)?this.pubsub.publish(a.T.PostUpdated,{postId:this.contentId,action:r.a.unsnoozeReporter,value:!0}):this.pubsub.publish(a.T.CommentUpdated,{commentId:this.contentId,action:t.C.unsnoozeReporter,value:!0})),this.showToast({success:s,isSnoozed:this.isSnoozed})}render(){const t={"flex items-center m-0 p-0":!0,"bg-secondary-background":this.isSnoozed};return e.x`<li class="${a.x(t)}"> <slot name="${e.l(this.isSnoozed?"snoozed":void 0)}" class="flex-auto block"></slot> ${this.renderReportOverflowMenu()} </li> `}};u.styles=[a.t],e._([e.n({type:String,attribute:"content-id"})],u.prototype,"contentId",void 0),e._([e.n({type:Boolean,attribute:"is-snoozed"})],u.prototype,"isSnoozed",void 0),e._([e.n({type:String,attribute:"report-reason"})],u.prototype,"reportReason",void 0),u=e._([e.c("user-report-summary")],u)}));
SML.dm("5NUG_JHL",["CVEbQKiO"],(async e=>{var t,o;class r{static get instance(){return e.ct(t,t,"f",o)||e.cu(t,t,new t,"f",o),e.ct(t,t,"f",o)}getCorrelationId(){return this._correlationId}setCorrelationId(){return this._correlationId=crypto.randomUUID(),this._correlationId}getPostType(){return this._postType}setPostType(e){return this._postType=e,this._postType}}t=r,o={value:void 0};return{a:r.instance,s:async function(e){const t=document.querySelector("shreddit-comments-page-tools, comment-body-header"),o=document.querySelector("nav")?.offsetHeight??0,r=document.getElementById("pdp-seeker-mweb-return-to-results")?.offsetHeight??0,n=document.querySelector("shreddit-comment-tree");if(!t||!n)return;await n.updateComplete;const s=t.offsetTop;await requestAnimationFrame((()=>{window.scrollTo({top:s-(o+r),behavior:e})}))}}}));
SML.dm("DkJsPyQM",["CCphb8vV"],(async t=>{let n=function(){try{return"1E4 bits"===new Intl.NumberFormat("en",{style:"unit",unit:"bit",unitDisplay:"long",notation:"scientific"}).format(1e4)}catch(t){return!1}}();const o=1e3,r=1e6,i=1e9,e=t=>t>=99999999949?`${Math.floor(t/i)}b`:t>=999999949&&t<99999999949?`${(t/i).toFixed(1)}b`:t>=99999949&&t<999999949?`${Math.floor(t/r)}m`:t>=999949&&t<99999949?`${(t/r).toFixed(1)}m`:t>=99949&&t<999949?`${Math.floor(t/o)}k`:t>=o&&t<99949?`${(t/o).toFixed(1)}k`:String(t);return{_:e,f:function(o,r,i){if(n){const n=(null==i?void 0:i.options)||{notation:(null==i?void 0:i.short)?"compact":"standard"};return t.j(r,n).format(o)}return e(o)}}}));
SML.dm("gYqzC9DM",["D7lSuCop","CCphb8vV","CVEbQKiO","DkJsPyQM"],(async(e,t,o,n)=>{let a=class extends o.s{constructor(){super(...arguments),this.number=0,this.locale="",this.pretty=!1}getLocale(){return this.locale||t.bE()}createRenderRoot(){return this}render(){const e=this.formatOptions?{options:this.formatOptions}:{short:this.pretty};return n.f(this.number,this.getLocale(),e)}};function i(e){const{count:t,none:o,single:n,many:a}=e;return 0===t&&void 0!==o?o:1===t?n:a}return o._([o.n({type:Number})],a.prototype,"number",void 0),o._([o.n({type:String})],a.prototype,"locale",void 0),o._([o.n({type:Object})],a.prototype,"formatOptions",void 0),o._([o.n({type:Boolean})],a.prototype,"pretty",void 0),a=o._([o.c("faceplate-number")],a),{a:function(t,o=!1){return o||0!==t?e.bH({one:`Allows up to ${t} emoji`,other:`Allows up to ${t} emojis`,count:t}):"";},b:i,c:function(t,o=!1){return o||0!==t?e.bH({one:`${t} question left today.`,other:`${t} questions left today.`,count:t}):"";},d:function(t,o=!1){return o||0!==t?e.bH({one:`${t} question left this week.`,other:`${t} questions left this week.`,count:t}):"";},e:function(e,o,n=!1,a=""){return i({count:o,none:n?void 0:"",single:e` <faceplate-number number="${o}" pretty></faceplate-number> <span class="${t.cy(a)}"> ${"member"} </span> `,many:e` <faceplate-number number="${o}" pretty></faceplate-number> <span class="${t.cy(a)}"> ${"members"} </span> `});},p:function(t,o=!1){return o||0!==t?e.bH({one:`Allows text and up to ${t} emoji`,other:`Allows text and up to ${t} emojis`,count:t}):"";}};}));
SML.dm("BmXCRIMH",["D7lSuCop","5NUG_JHL"],(async(i,e)=>{class t{constructor(e){this.isActivatingExplainer=!1,this.handleExplainerClosed=({explainerId:i,dismissed:e})=>{this.resolver&&this.resolver.explainerId===i&&(this.resolver.resolve({dismissed:e}),this.resolver=void 0)},(this.host=e).addController(this),this.pubsub=new i.P(this.host)}hostConnected(){this.pubsub.subscribe(i.T.ExplainerClosed,this.handleExplainerClosed,!1)}getExplainerDialogByExplainerId(i){return document.querySelector(`[dialog-id=explainer-dialog][data-explainer-id="${i}"]`)}async showExplainer({explainerExperience:e,explainerId:a,explainerVariantId:r,correlationId:n}){if(this.isActivatingExplainer||t.activatedExplainers.has(a))return{dismissed:!1};try{this.isActivatingExplainer=!0,await i.f({name:i.aF,routeParams:{explainerId:a},queryParams:{...null!=e&&{explainerExperience:e},...null!=r&&{explainerVariantId:r},...null!=n&&{correlationId:n}},renderMode:i.g.Contents});if(!this.getExplainerDialogByExplainerId(a))throw new Error(`Explainer dialog for explainer ID \`${a}\` not found after activation`);t.activatedExplainers.add(a)}catch(i){window.Sentry?.captureError?.(i)}finally{this.isActivatingExplainer=!1}return t.activatedExplainers.has(a)?new Promise((i=>this.resolver={explainerId:a,resolve:i})):{dismissed:!1}}}t.activatedExplainers=new Set;return{A:class{constructor(e,a){this.isActivatingDialog=!1,this.handleAwardContent=({thingId:i,award:e})=>{i===this.getThingId()&&this.onAward?.(e)},(this.host=e).addController(this),this.pubsub=new i.P(this.host),this.explainerController=new t(this.host),this.getThingId=a.getThingId,this.getAwardsPromoConfig=a.getAwardsPromoConfig,this.onAward=a.onAward}hostConnected(){this.onAward&&this.pubsub.subscribe(i.T.AwardContent,this.handleAwardContent,!1)}async activateDialog(){if(!this.isActivatingDialog)try{this.isActivatingDialog=!0;const{experience:t,variantId:a,id:r,type:n}=this.getAwardsPromoConfig?.()??{},s=t&&a&&r&&n===i.aG.EducationalModule?await this.explainerController.showExplainer({explainerExperience:t,explainerVariantId:a,explainerId:r,correlationId:e.a.getCorrelationId()}):void 0;s?.dismissed||await i.f({name:i.aH,routeParams:{thingId:this.getThingId()},renderMode:i.g.Contents})}finally{this.isActivatingDialog=!1}}}}}));
SML.dm("BUDNGNBQ",[],(async()=>{var t,a,n,i,o;return function(t){t.Control="control_1",t.Variant1="variant1",t.Variant2="variant2",t.Variant3="variant3",t.Variant4="variant4"}(t||(t={})),function(t){t.Control="control_1",t.Variant1="cbau_desktop_variant1",t.Variant2="cbau_desktop_variant2",t.Variant3="cbau_desktop_variant3",t.SlimVariant1="slim_cbau_desktop_variant1",t.SlimVariant2="slim_cbau_desktop_variant2",t.SlimVariant3="slim_cbau_desktop_variant3"}(a||(a={})),function(t){t.Full="full",t.Slim="slim"}(n||(n={})),function(t){t.Button="button",t.Scroll="scroll",t.Close="close"}(i||(i={})),function(t){t.Desktop="comment_block_auth_desktop",t.DesktopWithTimer="comment_block_auth_desktop_timer",t.Mobile="comment_block_auth_mobile"}(o||(o={})),{get C(){return i}}}));
SML.dm("DhZd_Ci9",["CVEbQKiO","D7lSuCop","B6r1xcS1"],(async(t,e,i)=>{const r="rpl-dialog-trigger:trigger-clicked",n=[];function s(t,e){const i=e.getBoundingClientRect();Object.assign(t.style,{position:"fixed",left:`${i.left}px`,height:`${i.height}px`})}function a(t){Object.assign(t.style,{position:"",left:"",height:"",opacity:"",transform:""})}let o=class extends(e.bp(e.bq(t.s))){constructor(){super(...arguments),this.open=!1,this.dialogId="",this.triggerElement=null,this.entityDialogRootContainer=null,this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.shouldEnableNavPersistence=!1,this.handleAfterNavigation=()=>{this.open&&(window.removeEventListener("afterRoute",this.handleAfterNavigation),this.connectedCallback(),this.rightSidebar.classList.add("hidden"));const t=this.rightSidebar.classList.contains("hidden");!n.length&&t&&this.close(!1)},this.handleTriggerEvent=t=>{const e=t.detail;if(e.dialogId===this.dialogId&&!this.open&&!this.triggerElement)return this.triggerElement=e.triggerElement,this.show()}}connectedCallback(){super.connectedCallback(),document.addEventListener(r,this.handleTriggerEvent),this.rightSidebar=document.getElementById("right-sidebar-container"),this.entityDialogRootContainer=document.getElementById(i.R),this.rightSidebar?.parentElement||console.log("Missing right sidebar element. Please make sure right sidebar is rendered before trigger this overlay."),super.portalRoot=this.entityDialogRootContainer??document.body,this.prefersReducedMotion||(this.portalContainer.style.transition="opacity 120ms linear, transform 280ms cubic-bezier(0.54, 1.15, 1, 1)",this.rightSidebar.style.transition="opacity 80ms linear, transform 200ms cubic-bezier(0.54, 1.15, 1, 1)"),this.portalContainer.className="\n    rounded-4 w-[316px] min-w-[316px] xs:max-h-[calc(100vh-var(--shreddit-header-height)-32px)]\n    xs:sticky xs:top-[calc(var(--shreddit-header-height)+16px)] xs:overflow-hidden box-border\n    flex flex-col border border-solid border-neutral-border-weak shadow-neutral-border-weak shadow-[0px_1px_8px_0px] hidden xs:flex",this.shouldEnableNavPersistence&&window.addEventListener("afterRoute",this.handleAfterNavigation)}disconnectedCallback(){document.removeEventListener(r,this.handleTriggerEvent),super.disconnectedCallback(),this.shouldEnableNavPersistence&&!this.open&&window.removeEventListener("afterRoute",this.handleAfterNavigation)}closeAllOpenOverlays(){n.forEach((t=>t.close(!1)))}handleTransitionEnd(t){t?(this.rightSidebar.classList.add("hidden"),a(this.portalContainer)):(this.removePortal(),a(this.rightSidebar))}runAnimation(t){const e={opening:{portal:{start:{transform:"translateX(32px)",opacity:"0"},end:{transform:"translateX(0px)",opacity:"1"}},rightSidebar:{start:{transform:"translateX(0px)",opacity:"1"},end:{transform:"translateX(-16px)",opacity:"0"}}},closing:{portal:{start:{transform:"translateX(0px)",opacity:"1"},end:{transform:"translateX(32px)",opacity:"0"}},rightSidebar:{start:{transform:"translateX(-16px)",opacity:"0"},end:{transform:"translateX(0px)",opacity:"1"}}}},i=t?e.opening:e.closing;Object.assign(this.portalContainer.style,i.portal.start),Object.assign(this.rightSidebar.style,i.rightSidebar.start),requestAnimationFrame((()=>{Object.assign(this.portalContainer.style,i.portal.end),Object.assign(this.rightSidebar.style,i.rightSidebar.end)})),this.portalContainer.addEventListener("transitionend",(()=>this.handleTransitionEnd(t)),{once:!0})}show(){this.open=!0,this.triggerElement?.addOpenAttributes();const t=n.length>0;this.closeAllOpenOverlays(),n.push(this),s(this.portalContainer,this.rightSidebar),this.appendTemplateContentTo(this.portalContainer,{cache:!0}),this.attachPortal();this.prefersReducedMotion||t?this.handleTransitionEnd(!0):this.runAnimation(!0)}close(t=!0){this.open=!1,n.splice(n.indexOf(this),1),s(this.rightSidebar,this.portalContainer),this.rightSidebar.classList.remove("hidden");this.prefersReducedMotion||!t?this.handleTransitionEnd(!1):this.runAnimation(!1),this.triggerElement&&(this.triggerElement.removeOpenAttributes(),this.triggerElement=null)}render(){return t.x` <div class="sticky top-0 bg-neutral-background z-10"> <div class="flex justify-between items-center"> <div class="flex justify-between py-md pl-md pr-0 items-center"> <slot name="header" class="font-semibold text-18 text-neutral-content-strong"></slot> </div> ${e.k({appearance:"secondary",attributes:{type:"button",onclick:()=>this.close(),className:"shrink-0 mx-sm mr-sm ml-xs"},size:e._.Small,leadingIcon:t.C({size:t.q.Small})})} </div> <hr class="border-neutral-border-weak border-0 border-t mx-md my-0"> </div> <slot></slot> `}};o.styles=[e.t],t._([t.n({type:Boolean,reflect:!0})],o.prototype,"open",void 0),t._([t.n({type:String,reflect:!0,attribute:"dialog-id"})],o.prototype,"dialogId",void 0),t._([t.n({type:Boolean,attribute:"should-enable-nav-persistence"})],o.prototype,"shouldEnableNavPersistence",void 0),o=t._([t.c("shreddit-right-rail-overlay")],o)}));
SML.dm("CbavD4mR",["CVEbQKiO","CCphb8vV","D7lSuCop","BmXCRIMH","B6r1xcS1","BUDNGNBQ","5NUG_JHL","gYqzC9DM","B7NvqZE0","DhZd_Ci9","DkJsPyQM"],(async(e,t,o,i,r,n,s)=>{function a(e,o){const{html:i}=e,r=function(e){const t={bg:"",border:""};if(e.isSctReplacementEnabled&&e.isCurrentPermalink)return{bg:"bg-neutral-background-highlighted-strong",border:"border-0 border-s border-solid border-neutral-background-gilded"};if(e.isPdpSeekerM1LO)return t;if(e.isHighlighted)return{bg:"bg-orangered-500 bg-opacity-[0.07]",border:"border-0 border-s border-solid border-global-orangered"};if(d(e))return{bg:"bg-yellow-200 bg-opacity-[0.07]",border:"border-0 border-s border-solid border-global-gold"};return t}(e),n=`Thread for ${e.author}'s comment`,s=e.ariaLabel||n;return i` <details role="article" ?open="${!e.collapsed}" @toggle="${e.handleToggle}" aria-label="${s}" tabindex="0"> <summary class="${t.l("grid grid-cols-[24px_minmax(0,1fr)]",!e.isPdpSeekerM1LO&&"xs:grid-cols-[32px_minmax(0,1fr)]",l(e)?"mt-[1px]":"")}" @click="${e.handleSummaryClick}" aria-label="${`Metadata for ${e.author}'s comment`}"> ${e.collapsed?e.uncollapseButton:i`<div class="relative"> ${l(e)?i` <div class="absolute top-[2px] start-[16px] end-0 h-full ${r.bg} pointer-events-none"></div>`:""} ${i`<slot name="commentAvatar"></slot>`} </div>`} <div class="flex relative ${l(e)?`${r.bg} rounded-tr-[0.5rem] mt-[2px] mb-[-2px]`:""}"> ${i`<slot name="commentMeta" @click="${e.handleCommentMetaSlotClick}" id="comment-meta"></slot>`} </div> </summary> <div class="${t.l("grid grid-cols-[24px_1fr] relative",!e.isPdpSeekerM1LO&&"xs:grid-cols-[32px_1fr]")}"> ${function(e){if(!e.hasMoreLink&&!e.hasRenderedComments)return"";const t=e.isPdpSeekerM1LO?"xs:w-lg":"xs:w-xl";return e.html` <div class="absolute top-0 start-0 bottom-0 w-lg ${t} flex justify-center items-center z-0 cursor-pointer group mb-sm" @mouseenter="${e.onThreadLineMouseEnter}" @mouseleave="${e.onThreadLineMouseLeave}" @click="${e.handleToggle}" aria-hidden="true"> <div data-testid="main-thread-line" class="w-[1px] h-full group-hover:bg-tone-2 ${e.isThreadLineHovered?"bg-tone-2":"bg-tone-4"}"></div> </div> `}(e)} <div class="contents"> <div class="${l(e)?"relative pointer-events-none":""}"> ${l(e)?i`<div class="absolute h-full w-[11.5px] xs:w-[15.5px] end-0 ${r.bg} ${r.border}"></div>`:""} </div> <div class="min-w-0 ${l(e)?r.bg:""}"> ${i`<slot @click="${e.handleContentSlotClick}"></slot>`} ${i`<slot name="comment-edit"></slot>`} ${function(e){if(e.isCommentDeleted||e.isInEditMode)return"";return e.html` <div class="relative"> ${e.html`<slot name="comment"></slot>`} </div> `}(e)} </div> </div> <div class="contents"> ${function(e){return"at-fold"!==e.currentTreePosition&&e.hasRenderedComments}(e)?e.collapseButton:i`<div></div>`} <div class="min-w-0 ${l(e)?`rounded-ee-[0.5rem] relative pe-sm pb-2xs mb-[1px] ${r.bg}`:""}"> ${l(e)?i` <div class="absolute top-0 start-[-12.5px] w-[11.5px] xs:start-[-16.5px] xs:w-[15.5px] h-full pointer-events-none ${r.bg} ${r.border} ${e.isSctReplacementEnabled&&e.isCurrentPermalink?"rounded-bl-[0.5rem]":""}"></div> `:""} ${i`<slot name="actionRow"></slot>`} ${i`<slot name="awardsRow"></slot>`} </div> </div> <div class="contents"> <div></div> <div class="min-w-0">${i`<slot name="next-reply"></slot>`}</div> </div> <div id="comment-children" class="contents ${e.isThreadLineHovered?"[&>.threadline>*]:border-tone-2":"[&>.threadline>*]:border-tone-4"}"> ${function(e){const{html:t,currentTreePosition:o,hasMoreLink:i,hasRenderedComments:r}=e;if(!i&&!r)return t``;if("at-fold"!==o)return t``;return t` ${h(e,{isLastRenderedNode:!0,isComment:!1})} ${t`<slot name="more-comments-permalink"></slot>`} `}(e)} ${o} </div> </div> <ac-call trigger="init" delay="10000" target="closest(shreddit-comment)" method="maybeScheduleReloadPolling"></ac-call> </details> `;}function d(e){return e.awardCount>0}function l(e){return e.isSctReplacementEnabled?e.isCurrentPermalink:!e.isPdpSeekerM1LO&&(e.isHighlighted||d(e))}function h(e,{isLastRenderedNode:t,isComment:o}){const i="box-border h-md border-0 border-tone-4 border-solid border-b-[1px] "+(t?"cursor-pointer":""),r=`${i} w-[calc(50%+0.5px)] border-s-[1px] rounded-es-[12px]`,n=`${i} w-xs absolute end-[-8px]`;return e.html` <div class="threadline flex justify-end align-start relative${t?" bg-neutral-background":" pointer-events-none"}" aria-hidden="true"> <div @mouseenter="${t?e.onThreadLineMouseEnter:void 0}" @mouseleave="${t?e.onThreadLineMouseLeave:void 0}" @click="${t?e.handleToggle:void 0}" class="${r}" data-testid="branch-line"></div> ${o?"":e.html`<div @mouseenter="${t?e.onThreadLineMouseEnter:void 0}" @mouseleave="${t?e.onThreadLineMouseLeave:void 0}" @click="${t?e.handleToggle:void 0}" class="${n}"></div>`} </div> `}var m;!function(e){e.TEXT="text",e.IMAGE="image",e.GIPHY="giphy"}(m||(m={})),SML.di("./DUFdvT8i.js",import.meta.url,"DUFdvT8i"),SML.di("./DuJhm-7n.js",import.meta.url,"DuJhm-7n"),SML.di("./CrV0gKWx.js",import.meta.url,"CrV0gKWx");const c=["post_detail/click/collapse_comment","post_detail/click/expand_comment","post_detail/click/reply_comment","post_detail/click/upvote_comment","post_detail/click/downvote_comment","post_detail/click/comment_image","comment/click/load_more_comments","comment/consume/comment","comment/consume/collapsed_comment","comment/view/comment","comment/view/collapsed_comment","comment/click/report","comment/click/ignore_reports","comment/click/restore_reports"],u=["FACEPLATE-IMG","SHREDDIT-PLAYER-2","IMG"],p='div[slot="comment"]',g="shreddit-comment-action-row",b="none",v="text-neutral-content-strong bg-neutral-background overflow-visible",T=o.d(e.s);let y=class extends T{get _rplHovercards(){return this.querySelectorAll('[slot="commentAvatar"] rpl-hovercard > div:not([slot="content"]), [slot="commentMeta"] rpl-hovercard > div:not([slot="content"])')}getProps(){return{ariaLabel:this.ariaLabel,author:this.author,awardCount:this.awardCount,collapsed:this.collapsed,currentTreePosition:this.currentTreePosition,collapseButton:this.renderCollapseButton(),handleCommentMetaSlotClick:this.handleCommentMetaSlotClick,handleContentSlotClick:this.handleContentSlotClick,handleSummaryClick:this.handleSummaryClick,handleToggle:this.handleToggle,hasMoreLink:this.hasMoreLink,hasRenderedComments:this.hasRenderedComments,html:e.x,isCommentDeleted:this.isCommentDeleted,isHighlighted:this.isHighlighted,isInEditMode:this.isInEditMode,isPdpSeekerM1LO:this.isPdpSeekerM1LO,isThreadLineHovered:this.isThreadLineHovered,onThreadLineMouseEnter:this.onThreadLineMouseEnter,onThreadLineMouseLeave:this.onThreadLineMouseLeave,thingId:this.thingId,uncollapseButton:this.renderUncollapseButton(),withHotkeys:this.withHotkeys,isSctReplacementEnabled:this.isSctReplacementEnabled,isCurrentPermalink:this.isCurrentPermalink}}static get styles(){return[o.t,o.j(":host {\n  display: block;\n}\n:host([is-chosen-mq-comment]) slot[name='comment']::slotted(*) {\n  background-color: var(--color-neutral-background-selected);\n  padding-block: 8px;\n  margin-bottom: 4px;\n}\ndetails {\n  position: relative;\n}\ndetails > summary {\n  list-style: none;\n  padding-bottom: 2px;\n}\ndetails > summary:focus {\n  outline: none;\n}\ndetails > summary::-webkit-details-marker {\n  display: none;\n}\n.summary-flex {\n  display: flex;\n  margin-right: 0;\n  flex-direction: row;\n  align-items: center;\n}\nsummary > *,\n.summary-flex > * {\n  white-space: nowrap;\n}\nsummary > *,\n.summary-flex > * {\n  white-space: nowrap;\n}\n.contents {\n  padding-left: 1.75rem;\n  line-height: 1.0625rem;\n}\n:host([updateAnimation~='light']) {\n  animation: realtimeFade 3s;\n  animation-timing-function: ease-out;\n}\n:host([updateAnimation~='dark']) {\n  animation: realtimeFadeNight 3s;\n  animation-timing-function: ease-out;\n}\n@keyframes realtimeFade {\n  from {\n    background-color: #fff2bd;\n    border: 1px solid #dbaf00;\n  }\n  to {\n    background-color: #f0f5f9;\n    border: 1px solid transparent;\n  }\n}\n@keyframes realtimeFadeNight {\n  from {\n    background-color: #665505;\n    border: 1px solid #382d03;\n  }\n  to {\n    background-color: #030303;\n    border: 1px solid #343536;\n  }\n}\n")]}constructor(){super(),this.thingId="",this.avatar="",this.author="",this.parentId="",this.postId="",this.score="",this.awardCount=0,this.isAuthorDeleted=!1,this.isCommentDeleted=!1,this.isInEditMode=!1,this.depth=0,this.permalink="",this.parentPermalink="",this.isUserOP=!1,this.isHighlighted=!1,this.reloadUrl="",this.isCurrentPermalink=!1,this.contentType=m.TEXT,this.isTranslatable=!1,this.isTranslationFetched=!1,this.isCommentTranslated=!1,this.previousActionsFeature=!1,this.isSctReplacementEnabled=!1,this.collapsed=!1,this.isChosenMqComment=!1,this.updateAnimation=void 0,this.ariaLabel=null,this.isPdpSeekerM1=!1,this.isPdpSeekerM1LO=!1,this.withHotkeys=!1,this.recordTTCI=!1,this.updateState=void 0,this.observer=null,this.targetElement=null,this.consumeTimeoutId=void 0,this._outboundLinkTrackingController=new r.O(this,(()=>({pageType:o.z(),postId:this.postId,commentId:this.thingId}))),this.pubsub=new o.P(this),this._events=new o.E(this),this._awardController=new i.A(this,{getThingId:()=>this.thingId,onAward:()=>this.awardCount++}),this.currentTreePosition=null,this.handleHovercardTriggerClick=e=>{e.metaKey||e.preventDefault()},this.onHotkeysFocus=e=>{this.shadowRoot?.querySelector("details")?.focus(e)},this.handleObserverIntersection=e=>{e.forEach((e=>{if(e.isIntersecting){this.isTranslatable&&t.bl.comment(this);const e={comment_id:this.thingId,comment_parent_id:this.parentId,comment_depth:this.depth};this.entityFilterId&&(e.entity_filter_id=this.entityFilterId),this.dispatchEvent(o.c("comments-viewed-event",{detail:e})),this.consumeTimeoutId=setTimeout((()=>{this.dispatchEvent(o.c("comments-consumed-event",{detail:e}))}),t.ar)}else clearTimeout(this.consumeTimeoutId)}))},this.handleCommentEvents=e=>{const t=e.detail.details||e.detail;var i;(i=t,c.includes(o.ax(i)))&&(t.comment?.id||(t.comment={...t.comment,id:this.thingId,parent_id:this.parentId,post_id:this.postId,score:parseInt(this.score,10)||void 0,type:"comment",created_timestamp:o.eL(this.created),content_type:this.contentType===m.TEXT?void 0:this.contentType},"comment/click/report"===o.ax(t)&&(t.thingId=this.thingId,t.permalink=this.permalink)))},this.handleSummaryClick=e=>{e.fromCommentMeta&&"A"!==e.target.tagName&&!e.target.closest("a")&&e.preventDefault()},this.handleCommentMetaSlotClick=e=>{e.fromCommentMeta="commentMeta"!==e.target.slot},this.handleMoreButtonClick=e=>{this.pubsub.publish(o.T.TriggerCommentBlockingAuth,{source:n.C.Button});const i=o.c("track-event",{details:t.bm()});this.dispatchEvent(i);const r=e.currentTarget;r?.addEventListener("faceplate-response",(()=>{const e=new MutationObserver((t=>{t.some((e=>Array.from(e.removedNodes).some((e=>e===r))))&&(this.updateChildren(),e.disconnect())}));e.observe(this,{childList:!0})}))},this.handleContentSlotClick=e=>{if(e.target&&this.contentType!==m.TEXT){const o=e.target.tagName;u.includes(o)&&this.trackEvent(t.bn())}},this.handleReload=e=>{e.stopPropagation(),this.reload()},this.handleCommentCreated=({parentThingId:e,body:t})=>{if(e!==this.thingId)return;if(!t)return;const i=o.b3(t).find((e=>"shreddit-comment"===e.tagName.toLowerCase()));i&&(i.setAttribute("slot","children"),i.setAttribute("depth",(this.depth+1).toString()),i.removeAttribute("class"),this.append(i),this.updateChildren())},this.convertCommentToDeleted=({commentId:e})=>{this.thingId===e&&(this.hideCommentActionRow(),this.hideOpIcon(),this.replaceCommentAuthorWithDeletedText(),this.hideCommentContent())},this.hideOpIcon=()=>{const e=this.querySelector('div[slot="commentMeta"] > span > .comment-op-icon-js');e&&(e.style.display=b)},this.hideCommentActionRow=()=>{const e=this.querySelector(g);e&&(e.style.display=b)},this.replaceCommentAuthorWithDeletedText=()=>{const e=this.querySelector('div[slot="commentMeta"] .author-name-meta');e&&e.replaceWith(this.getDeletedAuthorHTML())},this.hideCommentContent=()=>{const e=this.querySelector(p);e&&(e.style.display=b)},this.hasRenderedComments=!1,this.hasMoreLink=!1,this._children=null,this.unsubscribeFaceplateRequestListeners=[],this.isThreadLineHovered=!1,this.onThreadLineMouseEnter=()=>{this.isThreadLineHovered=!0,this.requestUpdate()},this.onThreadLineMouseLeave=()=>{this.isThreadLineHovered=!1,this.requestUpdate()},this.addEventListener("faceplate-track",this.handleCommentEvents),this.addEventListener("track-event",this.handleCommentEvents),this.addEventListener("reload-shreddit-comment",this.handleReload),this._events.define("click",(e=>{const t=e.composedPath().find((e=>e.hasAttribute?.("data-more-comments-partial-id")));t&&t.querySelectorAll("icon-load").forEach((e=>e.classList.add("animate-spin")))}))}get hasAwardedTreatment(){return this.awardCount>0}get isCommentHighlighted(){return this.isSctReplacementEnabled?this.isCurrentPermalink:this.isHighlighted||this.hasAwardedTreatment}getReplyPermalink(){const e=new URL(location.origin+this.permalink);return e.searchParams.set("reply",this.thingId),e.href.substring(e.origin.length)}setVisibility(e=Number.POSITIVE_INFINITY,t){const o=this.querySelector("shreddit-comment[is-chosen-mq-comment]")||this.closest("shreddit-comment[is-chosen-mq-comment]"),i=e-(this.depth+1);this.querySelector(g)?.setAttribute("reply-permalink",0===i?this.getReplyPermalink():"");const r=!!o&&"number"==typeof t&&this.depth>=e&&this.depth<=t,n=this.currentTreePosition;this.currentTreePosition=o&&"number"==typeof t?!r&&this.depth<t?"hidden-above-fold":this.depth<e-1?"above-fold":this.depth===e-1?"at-fold":"below-fold":i>0?"above-fold":0===i?"at-fold":"below-fold",null!==n&&n===this.currentTreePosition||(this.style.display="below-fold"===this.currentTreePosition?"none":"",this.ariaHidden="below-fold"===this.currentTreePosition?"true":"false",this.updateChildren())}async setInitialVisibility(){customElements.get("shreddit-comment-tree")||(await window.customElements.whenDefined("shreddit-comment-tree"));const e=this.closest("shreddit-comment-tree");let t=e?.visibilityDetails;null===t&&e?.depthUpdated&&(t=await e.depthUpdated),this.setVisibility(t?.maxVisibleDepth,t?.minVisibleDepth)}connectedCallback(){super.connectedCallback(),this.initObserver(),this.setInitialVisibility(),this.isUserOP&&this.pubsub.subscribe(o.T.CommentDeleted,this.convertCommentToDeleted),this.pubsub.subscribe(o.T.CommentCreated,this.handleCommentCreated),this.addEventListener(t.bo,this.resetToReadMode),this.addEventListener(t.bp,this.resetToReadMode),this.addEventListener("comment-animation-trigger",this.handleTriggerAnimation),this._rplHovercards?.forEach((e=>{e.addEventListener("click",this.handleHovercardTriggerClick)})),(o.z()===o.aa.PostDetail||o.z()===o.aa.SingleCommentThread)&&this.recordTTCI&&o.dR()&&requestAnimationFrame((()=>{this.trackEvent(o.dS(performance.now()))}))}async scrollToFocusedComment(){this.updateComplete.then((async()=>{await requestAnimationFrame((()=>{const e=document.querySelector("nav")?.offsetHeight??0,t=document.getElementById("pdp-seeker-mweb-return-to-results")?.offsetHeight??0,o=document.querySelector("shreddit-comments-page-tools, comment-body-header"),i=this.querySelector('[slot="actionRow"]');if(!i||!o)return;const r=i.getBoundingClientRect().bottom,n=o.getBoundingClientRect().top;Math.abs(r-n)<window.innerHeight-(e+t)?s.s("instant"):i.scrollIntoView({behavior:"instant",block:"center"})}))}))}firstUpdated(){this.querySelector(p)?.addEventListener("click",this.handleContentSlotClick),this.isChosenMqComment&&this.updateComplete.then((()=>{setTimeout((()=>{const e=document.getElementById("mod-queue-pdp-panel");if(!e)return;const t=this.getBoundingClientRect().top-48-window.innerHeight/2,o=document.getElementsByTagName("shreddit-comment-tree")[0]||this;e?.scrollTop>o?.getBoundingClientRect().top||e.scrollTo({top:t,behavior:"auto"})}),200)})),this.isSctReplacementEnabled&&this.isCurrentPermalink&&this.updateComplete.then((()=>this.scrollToFocusedComment()))}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),this.clearConsumeTimeout(),this.removeEventListener(t.bo,this.resetToReadMode),this.removeEventListener(t.bp,this.resetToReadMode),this.removeEventListener("comment-animation-trigger",this.handleTriggerAnimation),this._rplHovercards?.forEach((e=>{e.removeEventListener("click",this.handleHovercardTriggerClick)}))}get shredditComposer(){return this.querySelector("shreddit-composer")}get shareButton(){return this.querySelector("[slot=actionRow]")?.querySelector("shreddit-comment-share-button")}get overlowMenuItemProps(){return this.querySelector("shreddit-overflow-menu")?.getMenuItemProps()}get commentActionRow(){return this.querySelector("shreddit-comment-action-row")}handleTriggerAnimation(e){this.updateState=e.detail,this.triggerRealtimeUpdateAnimation()}triggerRealtimeUpdateAnimation(){const e=o.i();this.updateAnimation=e?"dark":"light",this.updateState=void 0,setTimeout((()=>{this.updateAnimation=void 0}),3e3)}clearConsumeTimeout(){this.consumeTimeoutId&&(clearTimeout(this.consumeTimeoutId),this.consumeTimeoutId=void 0)}maybeScheduleReloadPolling(){this.reloadPollingIntervalMs&&this.reloadPollingDurationMs&&this.reloadPollingDurationMs>0&&this.reload()}async reload({richTextMedia:e,includeTranslation:i}={}){if(!this.reloadUrl||!this.parentNode)return;const r=new URL(location.origin+this.reloadUrl);e&&r.searchParams.set("richTextMedia",e),i&&r.searchParams.set("includeTranslation","true"),this.reloadPollingDurationMs&&this.reloadPollingIntervalMs&&r.searchParams.set(t.bq,(this.reloadPollingDurationMs-(this.reloadPollingIntervalMs+100)).toString()),this.slot&&r.searchParams.set("slot",this.slot);const n=this.parentNode,s=document.createElement("faceplate-partial");s.setAttribute("loading",o.o.Programmatic),s.setAttribute("src",r.href.substring(r.origin.length)),s.setAttribute("slot","children");const a=this.slot;s.slot=a,n.insertBefore(s,this),this.slot="";const d=this.querySelector('[slot="actionRow"]'),l=d?.querySelector("shreddit-comment-action-row"),h=l?.isCommentComposerActive??!1;s.appendChild(this);const m=this.querySelectorAll(":scope > [slot^=children]");o.eM(s),await s.load();const c=n.querySelector(`shreddit-comment[thingid=${this.thingId}]`);if(!0===h&&null!=d){const e=c?.querySelector('[slot="actionRow"]');e?.replaceWith(d)}if(m.length>0){for(const e of m)c?.appendChild(e);c&&(c.slot=a,c.updateChildren())}}initObserver(){this.targetElement=this.querySelector('div[slot="comment"]'),this.targetElement&&(this.observer=new IntersectionObserver(this.handleObserverIntersection,{root:null,threshold:.5}),this.observer.observe(this.targetElement))}addTranslationToggledObserver(e){this.targetElement=this.querySelector(e),this.targetElement&&this.observer&&this.observer.observe(this.targetElement)}disconnectObserver(){this.observer&&(this.clearConsumeTimeout(),this.observer.disconnect())}handleToggle(e){!e.target.open!==this.collapsed&&this.handleCollapse()}handleCollapse(){this.collapsed=!this.collapsed,this.trackEvent(this.collapsed?t.br():t.bs())}resetToReadMode(){this.removeAttribute("edit-mode"),this.querySelector("shreddit-comment-action-row")?.classList.remove("hidden");let e=`${t.bt}?commentId=${this.thingId}`;this.isCommentTranslated&&(e=o.c4(e,"isTranslated","true"));const i=o.eK("faceplate-partial",{id:`comment-${this.thingId}-edit-partial`,src:e,loading:o.o.Programmatic}),r=o.eK("faceplate-shimmer",{class:"h-[100px] w-full hidden",shape:"pill"});i.appendChild(r),this.querySelector(`[slot="comment-${this.thingId}-edit"]`)?.replaceWith(i)}renderCollapseButton(){const i=t.l("flex justify-center self-start py-[2px] bg-neutral-background relative",this.isPdpSeekerM1?"mt-[2px]":"mt-[6px]");return e.x` <div class="${i}"> ${o.k({appearance:"plain",attributes:{onclick:this.handleCollapse,className:t.l(v,this.isCommentHighlighted?"!w-md h-md relative z-1":"w-md h-md"),"aria-expanded":this.collapsed?"false":"true","aria-label":"Toggle Comment Thread","aria-controls":"comment-children"},leadingIcon:this.collapsed?e.c8({size:e.q.Small}):e.b7({size:e.q.Small}),size:o._.Small})} </div> `}renderUncollapseButton(){return e.x` <div class="flex justify-center"> ${o.k({appearance:"plain",attributes:{onclick:this.handleCollapse,className:t.l(v,"w-lg xs:w-xl h-xl xs:h-[40px]")},leadingIcon:e.c8({size:e.q.Small}),size:o._.Small})} </div> `}getDeletedAuthorHTML(){const e=document.createElement("div");e.classList.add("flex","flex-row","items-center","overflow-hidden");const o=document.createElement("faceplate-tracker");o.setAttribute("source","post_detail"),o.setAttribute("action","click"),o.setAttribute("noun","comment_deleted_author"),o.classList.add("contents");const i=document.createElement("span");return i.classList.add("truncate","font-bold","hover:no-underline"),i.classList.add("text-neutral-content-strong","text-12"),i.innerText=t.T(),o.appendChild(i),e.appendChild(o),e}renderCommentBody(){return this.isCommentDeleted||this.isInEditMode?"":e.x` <div class="relative"> <slot name="comment"></slot> </div> `}renderChildren(e,{forceUpdate:t}={}){if(this._children&&!t)return"above-fold"===this.currentTreePosition||"hidden-above-fold"===this.currentTreePosition?this._children:[];const o=Array.from(this.querySelectorAll(':scope > [slot^="children"]'));if(this.hasRenderedComments=o.some((e=>"shreddit-comment"===e.tagName.toLowerCase())),this.hasMoreLink=o.some((e=>"shreddit-comment"!==e.tagName.toLowerCase())),"above-fold"!==this.currentTreePosition&&"hidden-above-fold"!==this.currentTreePosition)return[];this.unsubscribeFaceplateRequestListeners.forEach((e=>e())),this.unsubscribeFaceplateRequestListeners=[];const i=[];this._children=[];for(let e=0;e<o.length;e++){const t=o[e],r="shreddit-comment"===t.tagName.toLowerCase(),n="faceplate-partial"===t.tagName.toLowerCase();i.push(r);const s=`children-${this.thingId}-${e}`;t.slot=s,n&&(t.addEventListener("faceplate-request",this.handleMoreButtonClick),this.unsubscribeFaceplateRequestListeners.push((()=>{t.removeEventListener("faceplate-request",this.handleMoreButtonClick)})))}return this._children=function(e,t){const{html:o,currentTreePosition:i}=e;if("above-fold"!==i&&"hidden-above-fold"!==i)return[];const r=[];for(let i=0;i<t.length;i++){const n=i===t.length-1,s=t[i],a=`children-${e.thingId}-${i}`;r.push(h(e,{isLastRenderedNode:n,isComment:s})),r.push(o`<slot name="${a}"></slot>`)}return r}(e,i),this._children}updateChildren(){this.renderChildren(this.getProps(),{forceUpdate:!0}),this.requestUpdate()}render(){const e=this.renderChildren(this.getProps());return"hidden-above-fold"===this.currentTreePosition?e:a(this.getProps(),e)}};e._([e.n({type:String})],y.prototype,"thingId",void 0),e._([e.n({type:String})],y.prototype,"avatar",void 0),e._([e.n({type:String})],y.prototype,"author",void 0),e._([e.n({type:String})],y.prototype,"created",void 0),e._([e.n({type:String})],y.prototype,"parentId",void 0),e._([e.n({type:String})],y.prototype,"postId",void 0),e._([e.n({type:String})],y.prototype,"score",void 0),e._([e.n({type:Number,attribute:"award-count",reflect:!0})],y.prototype,"awardCount",void 0),e._([e.n({type:Boolean,attribute:"is-author-deleted"})],y.prototype,"isAuthorDeleted",void 0),e._([e.n({type:Boolean,attribute:"is-comment-deleted"})],y.prototype,"isCommentDeleted",void 0),e._([e.n({type:Boolean,attribute:"edit-mode"})],y.prototype,"isInEditMode",void 0),e._([e.n({type:Number})],y.prototype,"depth",void 0),e._([e.n({type:String})],y.prototype,"permalink",void 0),e._([e.n({type:String,attribute:"parent-permalink"})],y.prototype,"parentPermalink",void 0),e._([e.n({type:Boolean,attribute:"is-user-op"})],y.prototype,"isUserOP",void 0),e._([e.n({type:Boolean,attribute:"is-highlighted"})],y.prototype,"isHighlighted",void 0),e._([e.n({type:String,attribute:"reload-url"})],y.prototype,"reloadUrl",void 0),e._([e.n({type:Boolean,attribute:"is-current-permalink"})],y.prototype,"isCurrentPermalink",void 0),e._([e.n({type:String,attribute:"content-type"})],y.prototype,"contentType",void 0),e._([e.n({type:Boolean,attribute:"is-translatable"})],y.prototype,"isTranslatable",void 0),e._([e.n({type:Boolean,attribute:"is-translation-fetched"})],y.prototype,"isTranslationFetched",void 0),e._([e.n({type:Boolean,attribute:"is-comment-translated",reflect:!0})],y.prototype,"isCommentTranslated",void 0),e._([e.n({type:String,attribute:"moderation-verdict"})],y.prototype,"moderationVerdict",void 0),e._([e.n({type:Boolean,attribute:"previous-actions-feature"})],y.prototype,"previousActionsFeature",void 0),e._([e.n({type:Boolean,attribute:"sct-replacement-enabled"})],y.prototype,"isSctReplacementEnabled",void 0),e._([e.n({type:Number,attribute:"reload-polling-interval-ms"})],y.prototype,"reloadPollingIntervalMs",void 0),e._([e.n({type:Number,attribute:"reload-polling-duration-ms"})],y.prototype,"reloadPollingDurationMs",void 0),e._([e.n({type:Boolean,reflect:!0})],y.prototype,"collapsed",void 0),e._([e.n({type:Boolean,attribute:"is-chosen-mq-comment"})],y.prototype,"isChosenMqComment",void 0),e._([e.n({type:String,reflect:!0})],y.prototype,"updateAnimation",void 0),e._([e.n({type:String})],y.prototype,"ariaLabel",void 0),e._([e.n({type:String,attribute:"entity-filter-id",reflect:!0})],y.prototype,"entityFilterId",void 0),e._([e.n({type:Boolean,attribute:"is-pdp-seeker-m1"})],y.prototype,"isPdpSeekerM1",void 0),e._([e.n({type:Boolean,attribute:"is-pdp-seeker-m1-lo"})],y.prototype,"isPdpSeekerM1LO",void 0),e._([e.n({type:Boolean,attribute:"with-hotkeys"})],y.prototype,"withHotkeys",void 0),e._([e.n({type:Boolean,attribute:"record-ttci"})],y.prototype,"recordTTCI",void 0),e._([e.b()],y.prototype,"updateState",void 0),y=e._([e.c("shreddit-comment")],y)}));
SML.dm("DYnm2Zx0",["CVEbQKiO","D7lSuCop","BUDNGNBQ","CCphb8vV","AhHXxeIZ"],(async(t,e,a,i)=>{const n=e.W(t.s);let r=class extends n{constructor(){super(...arguments),this.isVisible=!1}connectedCallback(){super.connectedCallback(),this.enableObserver({threshold:1})}disconnectedCallback(){super.disconnectedCallback(),this.disableObserver()}publishEvent(){e.p(e.T.TriggerCommentBlockingAuth,{source:a.C.Scroll})}publishCloseEvent(){e.p(e.T.TriggerCommentBlockingAuth,{source:a.C.Close})}observerIsIntersectingCallback(){this.publishEvent(),this.isVisible=!0}observerIsNotIntersectingCallback(t){const{boundingClientRect:e,rootBounds:a}=t;a&&this.isVisible&&e.top>a.bottom&&(this.isVisible=!1,this.publishCloseEvent())}render(){return t.x`<div></div> `}};r=t._([t.c("cbau-trigger")],r);let o=class extends t.s{constructor(){super(...arguments),this.isCommentPretranslated=!1,this.pubsub=new e.P(this),this.onPostTranslationOverride=t=>{(t.id===this.postId||t.isContextUpdateEvent)&&(this.commentTranslated=t.isTranslationActive)},this.onCommentTranslationOverride=t=>{t.id===this.commentId&&(this.commentTranslated=t.isTranslationActive)},this.handleClick=()=>{this.commentId&&this.pubsub.publish(e.T.I18nCommentTranslationOverride,{id:this.commentId,isTranslationActive:!this.commentTranslated})}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(e.T.I18nCommentTranslationOverride,this.onCommentTranslationOverride,!1),this.pubsub.subscribe(e.T.I18nPostTranslationOverride,this.onPostTranslationOverride,!1),this.commentTranslated=this.isCommentPretranslated||i.U()}render(){return t.x` <rpl-tooltip appearance="inverted" placement="top" trigger="hover focus" content="${this.commentTranslated?"Show original":"Translate"}"> ${e.k({appearance:"plain",attributes:{onclick:this.handleClick,"data-testid":"comment-translation-status-icon","aria-label":"Toggle comment translation"},leadingIcon:this.commentTranslated?t.ae({size:t.q.ExtraSmall,attributes:{"data-testid":"comment-translation-status-icon-translated-icon","aria-label":"Comment is translated",className:"text-primary-plain"}}):t.af({size:t.q.ExtraSmall,attributes:{"data-testid":"comment-translation-status-icon-original-icon","aria-label":"Comment is in original language",className:"text-primary-plain"}}),size:e._.ExtraSmall})} </rpl-tooltip> `;}};o.styles=[e.t],t._([t.b()],o.prototype,"commentTranslated",void 0),t._([t.n({type:String,attribute:"comment-id"})],o.prototype,"commentId",void 0),t._([t.n({type:String,attribute:"post-id"})],o.prototype,"postId",void 0),t._([t.n({type:Boolean,attribute:"comment-pretranslated"})],o.prototype,"isCommentPretranslated",void 0),o=t._([t.c("comment-translation-status-icon")],o);let s=class extends t.s{constructor(){super(...arguments),this.commentId="",this.dedupe=!1,this.shouldTrackPosition=!1,this.pubsub=new e.P(this),this.loadInAd=()=>{const t=this.shouldTrackPosition?this:this.shadowRoot;if(!t||t.childNodes.length>0)return;const e=document.querySelector(`shreddit-comment-tree-ads > template#comment-tree-ad_${this.commentId}`),a=e?.content.querySelector("shreddit-comments-page-ad");e&&a&&this.isNotADuplicate(a)&&(t.replaceChildren(e.content.cloneNode(!0)),a.hasAttribute("is-blank")||this.removeAttribute("class"))},this.isNotADuplicate=t=>{if(!this.dedupe||t.hasAttribute("is-blank"))return!0;const e=document.querySelector("shreddit-comments-page-ad");return!e||t.getAttribute("campaign-id")!==e.getAttribute("campaign-id")}}createRenderRoot(){return this.shouldTrackPosition?this:super.createRenderRoot()}connectedCallback(){super.connectedCallback(),this.commentId&&(this.loadInAd(),this.pubsub.subscribe(e.T.CommentTreeAdsLoaded,this.loadInAd))}render(){return t.A}};s.styles=[e.t],t._([t.n({type:String,attribute:"comment-id"})],s.prototype,"commentId",void 0),t._([t.n({type:Boolean,attribute:"dedupe"})],s.prototype,"dedupe",void 0),t._([t.n({type:Boolean,attribute:"should-track-position"})],s.prototype,"shouldTrackPosition",void 0),s=t._([t.c("shreddit-comment-tree-ad")],s)}));
SML.dm("Bpvf-mE1",["D7lSuCop","CVEbQKiO"],(async(e,s)=>{var t;!function(e){e.Search="search",e.PostDetail="post_detail"}(t||(t={}));class r{constructor(s,r,i=t.Search){this.checkAndSendImpressionEvent=s=>{if(!s.search?.impression_id)return;const{search:t,action_info:r}=s,i=JSON.parse(sessionStorage.getItem("search_impression_cache")||"[]"),c=new Set([...i]);if(c.has(t.impression_id)||!this.searchTelemetrySource)return;c.add(t.impression_id),sessionStorage.setItem("search_impression_cache",JSON.stringify([...c]));const o=e.b({source:this.source,action:"create",noun:"impression_id"},{...s,search:{...t,impression_id:t.impression_id},action_info:{...r,type:this.searchTelemetrySource}});e.e(this.host,o)},(this.host=s).addController(this),this._events=new e.E(this.host,(()=>window)),this._events.define("track-event",(async e=>{e.composedPath().includes(this.host)&&this.checkAndSendImpressionEvent(e.detail.details)})),this._v2Events=new e.fn(this.host,(e=>{this.checkAndSendImpressionEvent(e)})),this.source=i,this.searchTelemetrySource=r}hostConnected(){}}let i=class extends s.s{constructor(){super(...arguments),this.isPdpSeekerM2=!1,this._searchDynamicIdCacheController=new r(this,this.searchTelemetrySource,this.source)}get source(){return this.isPdpSeekerM2?t.PostDetail:t.Search}willUpdate(e){e.has("searchTelemetrySource")&&(this._searchDynamicIdCacheController.searchTelemetrySource=this.searchTelemetrySource),e.has("isPdpSeekerM2")&&(this._searchDynamicIdCacheController.source=this.source)}createRenderRoot(){return this}};return s._([s.n({attribute:"search-telemetry-source",type:String})],i.prototype,"searchTelemetrySource",void 0),s._([s.n({attribute:"is-pdp-seeker-m2",type:Boolean})],i.prototype,"isPdpSeekerM2",void 0),i=s._([s.c("search-dynamic-id-cache-controller")],i),{S:r}}));
SML.dm("CBjCYKic",["CVEbQKiO","D7lSuCop"],(async e=>{let r=class extends e.s{constructor(){super(...arguments),this.revealed=!1,this.blockRevealOnClick=!1}static get styles(){return e.i`.outer{background:var(--color-category-spoiler);border-radius:2px;cursor:pointer;line-height:21px;transition:background ease-out 1s;border:none;padding:0;font:inherit;color:inherit;margin-right:.25rem}.inner{opacity:0;transition:opacity ease-out 1s;margin-right:-.25rem}.revealed.outer{background:0 0}.revealed .inner{opacity:1}`}revealSpoiler(e){this.revealed||e.preventDefault(),this.revealed=!0}handleKeyPress(e){"Enter"!==e.key&&" "!==e.key||this.revealSpoiler(e)}render(){return this.blockRevealOnClick?e.x` <span class="outer"> <span class="inner" aria-hidden="true"> <slot></slot> </span> </span> `:e.x` <span class="outer${this.revealed?" revealed":""}" title="${"Reveal Spoiler"}" role="button" @click="${this.revealSpoiler}" @keypress="${this.handleKeyPress}" tabindex="0"> <span class="inner" aria-hidden="${!this.revealed}"> <slot></slot> </span> </span> `;}};e._([e.b()],r.prototype,"revealed",void 0),e._([e.n({type:Boolean,attribute:"block-reveal-on-click"})],r.prototype,"blockRevealOnClick",void 0),r=e._([e.c("shreddit-spoiler")],r)}));
SML.dm("BicisKzr",["CVEbQKiO","D7lSuCop"],(async(t,e)=>{let s=class extends t.s{constructor(){super(...arguments),this.size=1/0,this.target="",this.isBatching=!1}static get styles(){return t.i`:host{display:block}`}render(){return t.x` <slot></slot> `}getCurrentTarget(t=this){return this.target&&t.querySelector(this.target)||t}async batchInsert(t){if(this.isBatching)throw new Error("Cannot call batchInsert while batching is already in progress");const s=this.getCurrentTarget();if(!(s instanceof HTMLElement))throw new TypeError("Target element must be instance of HTMLElement");const i=e.c("faceplate-batch-begin",{size:this.size,count:t.length});if(s.dispatchEvent(i),i.defaultPrevented)return;this.isBatching=!0;const n=()=>{if(t.length){const e=t.slice(0,this.size),i=document.createDocumentFragment();for(let s=0;s<e.length;s++)i.appendChild(t[s]);s.appendChild(i)}t.length>this.size?(t=t.slice(this.size),window.setTimeout(n)):(s.style.willChange="unset",this.isBatching=!1)};s.style.willChange="contents",await n()}};t._([t.n({type:Number})],s.prototype,"size",void 0),t._([t.n({type:String})],s.prototype,"target",void 0),s=t._([t.c("faceplate-batch")],s)}));
SML.dm("orb_Bca1",["CVEbQKiO","D7lSuCop","Bj8wOYTD","DJsOQMvU","CCphb8vV"],(async(e,t,i,o,n)=>{let a=class extends e.s{constructor(){super(...arguments),this.pubsub=new t.P(this),this.class="",this.thingId="",this.isOP=!1,this.isCollaborator=!1,this.isCommentDeleted=!1,this.handleCommentUpdated=({commentId:e,action:i,value:n})=>{this.thingId===e&&i===o.C.distinguishAsMod?this.distinguishedAs=n?t.b0.Moderator:void 0:this.thingId===e&&i===o.C.distinguishAsAdmin&&(this.distinguishedAs=n?t.b0.Admin:void 0)},this.handleCommentDeleted=({commentId:e})=>{this.thingId===e&&(this.isCommentDeleted=!0)}}static get styles(){return[t.t,e.i`:host{display:contents}`]}get authorType(){return this.isCommentDeleted?"":this.distinguishedAs===t.b0.Admin?"admin":this.distinguishedAs===t.b0.Moderator?"moderator":this.isOP?"op":this.isCollaborator?"collaborator":""}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.CommentUpdated,this.handleCommentUpdated,!1),this.pubsub.subscribe(t.T.CommentDeleted,this.handleCommentDeleted,!1)}render(){const t=this.authorType,o=`font-semibold text-12 tracking-wide uppercase ${this.class} ${t}`;switch(t){case"moderator":return e.x`<span class="${n.l(o,"text-identity-moderator")}" aria-label="${"Comment distinguished by moderator"}"> ${i.a()} </span>`;case"admin":return e.x`<span class="${n.l(o,"text-identity-admin")}" aria-label="${"Comment distinguished by admin"}"> ${i.g()} </span>`;case"op":return e.x`<span class="${n.l(o,"comment-op-icon-js text-alienblue-600")}" aria-label="${"Comment distinguished as the original poster"}"> ${i.c()} </span>`;case"collaborator":return e.x`<span class="${n.l(o,"text-alienblue-600")}" aria-label="${"Comment distinguished as a post collaborator"}"> ${i.b()} </span>`;default:return e.A}}};e._([e.n({type:String})],a.prototype,"class",void 0),e._([e.n({type:String,attribute:"thing-id"})],a.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"distinguished-as"})],a.prototype,"distinguishedAs",void 0),e._([e.n({type:Boolean,attribute:"op"})],a.prototype,"isOP",void 0),e._([e.n({type:Boolean,attribute:"collaborator"})],a.prototype,"isCollaborator",void 0),e._([e.n({type:Boolean,attribute:"comment-deleted"})],a.prototype,"isCommentDeleted",void 0),a=e._([e.c("shreddit-comment-author-modifier-icon")],a);let r=class extends e.s{constructor(){super(...arguments),this.thingId="",this.iconSize=e.q.Small,this.isDeleted=!1,this.isLocked=!1,this.isStickied=!1,this.isOP=!1,this.pubsub=new t.P(this),this.handleCommentUpdated=({commentId:e,action:i,value:n})=>{if(this.thingId===e)switch(i){case o.C.distinguishAsMod:this.distinguishedAs=n?t.b0.Moderator:void 0;break;case o.C.sticky:this.isStickied=Boolean(n);break;case o.C.lock:this.isLocked=Boolean(n)}},this.handleCommentDeleted=({commentId:e})=>{this.thingId===e&&(this.isDeleted=!0)}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.CommentUpdated,this.handleCommentUpdated),this.pubsub.subscribe(t.T.CommentDeleted,this.handleCommentDeleted)}renderLockedIcon(){return this.isDeleted||!this.isLocked?null:e.aF({size:this.iconSize,attributes:{"aria-label":"Locked comment",className:"lock-icon text-alert-caution"}});}renderStickiedIcon(){if(this.isDeleted||!this.isStickied)return null;let i;return this.distinguishedAs===t.b0.Admin?i="text-identity-admin":this.distinguishedAs===t.b0.Moderator?i="text-identity-moderator":this.isOP&&(i="text-action-secondary"),this.isLocked?e.aG({size:this.iconSize,attributes:{"aria-label":"Stickied comment",className:i}}):e.x` <span class="text-12 text-neutral-content inline-flex items-center gap-2xs"> ${e.aG({attributes:{"aria-hidden":"true"},size:this.iconSize})} <span> ${"Stickied comment"} </span> </span> `;}render(){const t=this.renderLockedIcon(),i=this.renderStickiedIcon();return t||i?e.x` <span class="ml-2xs text-12 text-neutral-content-weak"></span> ${t} ${i} `:null}};r.styles=[e.i`:host{display:inline-flex;align-items:center;gap:var(--spacer-2xs)}`,t.t],e._([e.n({type:String,attribute:"thing-id"})],r.prototype,"thingId",void 0),e._([e.n({type:String,attribute:"icon-size"})],r.prototype,"iconSize",void 0),e._([e.n({type:Boolean,attribute:"deleted"})],r.prototype,"isDeleted",void 0),e._([e.n({type:Boolean,attribute:"locked"})],r.prototype,"isLocked",void 0),e._([e.n({type:Boolean,attribute:"stickied"})],r.prototype,"isStickied",void 0),e._([e.n({type:Boolean,attribute:"op"})],r.prototype,"isOP",void 0),e._([e.n({type:String,attribute:"distinguished-as"})],r.prototype,"distinguishedAs",void 0),r=e._([e.c("shreddit-comment-badges")],r)}));
SML.dm("DaYYbpx8",["CVEbQKiO","D7lSuCop"],(async(e,t)=>{let s=class extends e.s{constructor(){super(),this.label="",this.loadingCounter=0,this._events=new t.E(this),this._events.define("faceplate-request",(()=>this.loadingCounter++)),this._events.define("faceplate-response",(()=>this.loadingCounter--))}get busy(){return this.loadingCounter>0}render(){return e.x`<div aria-labelledby="${this.label}" aria-busy="${this.busy}" role="feed"> <slot></slot> </div>`}};return e._([e.n()],s.prototype,"label",void 0),e._([e.b()],s.prototype,"loadingCounter",void 0),s=e._([e.c("reddit-feed")],s),{get R(){return s}}}));
SML.dm("LbrBbHYe",["CVEbQKiO","D7lSuCop","B8BAxqC_","DZMRR9gi","D9dm-Sy6","Mh6HSk7W","CCphb8vV"],(async(e,t,a)=>{let r=class extends a.T{constructor(){super(...arguments),this.hasChips=!1,this.clearable=!0}static get styles(){return[super.styles,e.i`:host{margin:var(--spacer-2xs) var(--spacer-md);display:inline-flex}label{flex-grow:1}input{background:0 0;border:none;outline:0;width:100%;text-overflow:ellipsis}input::placeholder{color:var(--color-neutral-content-weak)}.label-container,:host([faceplate-validity=invalid]) .label-container,:host([faceplate-validity=valid]) .label-container{border:var(--rem2) solid var(--color-input-border);box-shadow:0 0 0 var(--rem2) transparent}.label-container{align-items:center;box-sizing:border-box;border-radius:var(--radius-full);border:var(--rem2) solid var(--color-input-plain-border);padding-inline:var(--spacer-md)}.label-container-chips{background:var(--color-input-plain)}.label-container:focus-within{background:var(--color-input-plain);border-color:var(--color-neutral-border-strong)}@media (hover:hover){.label-container:focus-within:hover,.label-container:hover{background:var(--color-input-secondary-hover)}}:host .label-container,:host faceplate-form-helper-text:not(.helper-text-without-label-with-trailing){padding-inline-end:var(--spacer-2xs)}.input-container{align-items:center;display:flex;font:var(--font-14-20-regular);position:relative;transform:translateY(0);transition:transform 150ms ease;width:100%;padding-block:var(--spacer-xs)}.leadingIcon{display:inline-flex;font-size:var(--rem16);margin-inline-end:var(--spacer-xs)}.label-container-chips slot[name=chips]{display:inline-flex;margin-inline-end:var(--spacer-xs)}#clearIcon-container{height:var(--rem32);width:var(--rem32);flex-shrink:0}.leadingIcon,:slot[name=chips],:slot[name=clearIcon]{display:flex;flex-shrink:0}`]}render(){return e.x` <label> <div class="${t.x({"label-container":!0,"label-container-chips":this.hasChips,"without-label":!0})}"> <span class="leadingIcon">${e.W({size:e.q.Small,attributes:{"aria-hidden":"true"}})}</span><slot name="chips" @slotchange="${()=>{this.hasChips=this.chipElements.length>0}}"></slot>${this.inputContainer(e.x` <input type="text" enterkeyhint="${e.l(this.enterkeyhint)}" @change="${this.onChange}" @input="${this.onInput}" .value="${a.l(this.value)}" name="${e.l(this.name)}" maxlength="${e.l(this.maxlength)}" placeholder="${e.l(this.placeholder)}" ?disabled="${this.disabled}" ?required="${this.required}" autocomplete="${e.l(this.autocomplete)}" inputmode="${e.l(this.inputmode)}"> `)}<span id="clearIcon-container"> ${this.clearable&&this.value.length>0?e.x`<slot name="clearIcon"></slot>`:""} </span> ${this.screenReaderContent?e.x`<faceplate-screen-reader-content> ${this.screenReaderContent} </faceplate-screen-reader-content>`:""} </div> </label> `}};return e._([e.b()],r.prototype,"hasChips",void 0),e._([e.k({slot:"chips"})],r.prototype,"chipElements",void 0),e._([e.z(".label-container")],r.prototype,"labelContainer",void 0),e._([e.n({type:String})],r.prototype,"enterkeyhint",void 0),e._([e.n({type:String})],r.prototype,"maxlength",void 0),e._([e.n({type:Boolean})],r.prototype,"clearable",void 0),r=e._([e.c("faceplate-search-input")],r),{get F(){return r}}}));
SML.dm("Dc2hBnEH",["D7lSuCop"],(async t=>{var p;function e(p){const e={q:p.query};return p.pane&&(e.type=p.pane),p.source&&(e.source=p.source),p.sort&&(e.sort=p.sort),p.time&&(e.t=p.time),p.referrer&&(e.referrer=p.referrer),p.cursor[t.d6.All]&&(e.cursor=p.cursor[t.d6.All]),p.cursor[t.d6.Posts]&&(e.postsCursor=p.cursor[t.d6.Posts]),p.cursor[t.d6.Comments]&&(e.commentsCursor=p.cursor[t.d6.Comments]),p.cursor[t.d6.Subreddits]&&(e.communitiesCursor=p.cursor[t.d6.Subreddits]),p.cursor[t.d6.Users]&&(e.peopleCursor=p.cursor[t.d6.Users]),p.ad&&(e.ad=p.ad),p.conversationId&&(e.cId=p.conversationId),p.impressionId&&(e.iId=p.impressionId),p.flair&&(e.flair=encodeURIComponent(p.flair)),p.disableSpellCorrection&&(e.disableSpellCorrection=p.disableSpellCorrection),e}!function(t){t.Ad="ad",t.AllCursor="cursor",t.CommentsCursor="commentsCursor",t.CommunitiesCursor="communitiesCursor",t.ConversationId="cId",t.ImpressionId="iId",t.Pane="type",t.PeopleCursor="peopleCursor",t.PostsCursor="postsCursor",t.Query="q",t.Referrer="referrer",t.Sort="sort",t.Source="source",t.Time="t",t.Flair="flair",t.DisableSpellCorrection="disableSpellCorrection"}(p||(p={}));var a;!function(t){t.SearchBarPill="search_bar_scope_pill",t.SerpScopeSwitcher="serp_scope_switcher"}(a||(a={}));const h=/^\//,y=/\/$/,r=(t="")=>t.replace(h,"").replace(y,""),s=/^\/user\/([\w+-]+)\/m\//,i=/\/$/,$=(t="")=>t.replace(s,"").replace(i,""),d=/^\/u(?:ser)?\//,o=/\/$/,n=(t="")=>t.replace(d,"u/").replace(o,""),u=({type:p,path:e})=>({[t.a0.GLOBAL]:t=>t,[t.a0.COMMUNITY]:r,[t.a0.CUSTOM_FEED]:$,[t.a0.PROFILE]:n}[p](e));return {get S(){return p},a:function(t){const p=new URLSearchParams({...e(t)});return`${(t=>t.endsWith("/")?t:`${t}/`)((t=>t.startsWith("/")?t:`/${t}`)(t.scope.path))}search/?${p.toString()}`},b:(p,e=!1)=>{switch(p?.type){case t.a0.COMMUNITY:case t.a0.CUSTOM_FEED:return e?`${u({type:p?.type,path:p.path})}`:`Search in ${u({type:p?.type,path:p.path})}`;case t.a0.PROFILE:return e?`${u({type:p?.type,path:p.path})}`:`Search in ${u({type:p?.type,path:p.path})}`;default:return "Search Reddit";}},get c(){return a},d:"search-media-post-unit",g:u,s:e};}));
SML.dm("C0cJUh2F",["CVEbQKiO","D7lSuCop","Dc2hBnEH","DaYYbpx8","LbrBbHYe","C7H6Jti6"],(async(e,t,a)=>{class o{constructor(){this.partial=null,this.loadAndReplaceContent=async({afterFailure:e,afterSuccess:a,wrapPartialElement:o=e=>e,src:r,target:n})=>{const s=document.createElement("faceplate-partial");s.setAttribute("loading",t.o.Programmatic),s.setAttribute("src",r),s.setAttribute("class","block min-h-screen xs:min-h-[20rem]");const i=document.createElement("shreddit-loading");s.appendChild(i);const m=this.partial??document.getElementById(n),l=`${m.getBoundingClientRect().height}px`;s.style.minHeight=l,m.insertAdjacentElement("beforebegin",o(s)),m.remove(),this.partial=s;try{const e=new Promise(((e,t)=>{const a=e=>{this.partial!==s&&(e.stopImmediatePropagation(),e.stopPropagation()),t()};s.addEventListener("faceplate-error",a,{once:!0}),s.addEventListener("faceplate-alert",a,{once:!0})}));await Promise.race([e,s.load()]),this.partial=null,a?.()}catch{if(this.partial!==s)return;e?.()}}}}let r=class extends(t.d(e.s)){constructor(){super(...arguments),this.target="",this.path="",this.pdpCommentSearchInputSelector=t.cf.pdpCommentSearchInput,this.handleBackNavigation=async()=>{this.showCommentComposer();const e=new URL(location.href);e.searchParams.delete(a.S.Query),e.searchParams.delete(a.S.Pane),e.searchParams.delete(a.S.ConversationId),e.searchParams.delete(a.S.ImpressionId);const o=new URL(`${location.origin}${this.path}`);history.replaceState({},"",e.toString());const r=o.toString().substring(location.origin.length),n=new URLSearchParams(location.search).get(a.S.Sort),s=`/svc/shreddit/comments${r}?${new URLSearchParams({"inline-refresh":"true","render-mode":"partial",...(n ? {sort:n} : {})}).toString()}`;this.replaceContentController.loadAndReplaceContent({src:s,target:this.target,afterSuccess:()=>t.cg(this,{message:"Navigated to all comments successfully",options:{priority:t.S.assertive}}),afterFailure:()=>this.dispatchEvent(t.c("faceplate-alert",{level:t.a4.error,cause:"uncategorized",message:"Failed to load the comments."}))})},this.replaceContentController=new o}showCommentComposer(){document.querySelector(this.pdpCommentSearchInputSelector)?.resetSearchInput()}render(){return e.x` <faceplate-tracker source="post" action="click" noun="view_all_comments"> <faceplate-tooltip appearance="inverted">${t.k({appearance:"plain",size:t._.Small,shape:"pill",attributes:{className:"m-xs border-none","aria-label":"Back",onclick:this.handleBackNavigation,slot:"trigger",type:"button"},children:"All Comments",screenReaderContent:"Show all Comments tree",leadingIcon:e.H({size:e.q.Small})})} ${"Navigate to all comments"} </faceplate-tooltip> </faceplate-tracker>`;}};return r.styles=[t.t],e._([e.n({type:String})],r.prototype,"target",void 0),e._([e.n({type:String})],r.prototype,"path",void 0),e._([e.n({type:String,attribute:"pdp-comment-search-input-selector"})],r.prototype,"pdpCommentSearchInputSelector",void 0),r=e._([e.c("pdp-comment-search-close")],r),{R:o}}));
SML.dm("Bj-TjC1H",["D7lSuCop"],(async t=>{class e{constructor(t){this.shouldOverrideId=!1,this.activeIds={},this.update=t=>this.set(t),this.reset=()=>this.clear(),this.getKey=t}get(...t){const e=this.getKey(...t);return this.activeIds[e]?this.activeIds[e]:this.generate(e)}set(t,e){return e?(this.activeIds[t]=e,this.activeIds[t]):this.generate(t)}clear(t){t?delete this.activeIds[t]:this.activeIds={}}getUUID(){return this.shouldOverrideId?"id":t.a1()}generate(t){return this.activeIds[t]=this.getUUID(),this.activeIds[t]}}const s=t=>t,i=new e(((e,s)=>`${s}-${function(e){let s=`[q:${e.query}]`;return e.scope.type!==t.a0.GLOBAL&&(s=`${s}--[scope:${e.scope.type}-${e.scope.path}]`),e.sort&&(s=`${s}--[sort:${e.sort}]`),e.time&&(s=`${s}--[time:${e.time}]`),e.pane&&(s=`${s}--[pane:${e.pane}]`),s}(e)}`));return{S:new e(s),a:new e(s),b:i}}));
SML.dm("DFbd5ss5",["CVEbQKiO","D7lSuCop"],(async(e,t)=>{let r=class extends e.s{constructor(){super(...arguments),this.inputSelector=t.h.HeaderLarge}static get styles(){return[t.t]}get focusSearchInput(){return{[t.h.HeaderSmall]:document.querySelector(this.inputSelector)?.handleToggleSearchDialog,[t.h.HeaderLarge]:document.querySelector(this.inputSelector)?.focusSearchInput,[t.h.PdpCommentSearchInput]:document.querySelector(this.inputSelector)?.focusSearchInput,[t.h.SearchInputSmall]:document.querySelector(this.inputSelector)?.focusSearchInput}[this.inputSelector]}onClick(e){e.preventDefault(),e.stopPropagation(),this.focusSearchInput?.()}render(){return e.x`<a class="text-primary no-visited" href="#" @click="${this.onClick}"><slot></slot></a>`}};e._([e.n({attribute:"input-selector",type:String})],r.prototype,"inputSelector",void 0),r=e._([e.c("adjust-search-query-link")],r)}));
SML.dm("BxmAGM9T",["D7lSuCop"],(async t=>{var o;!function(t){t.MULTILINGUAL_ON="multilingual_on",t.ACCOUNT_AGE="account_age",t.BACKEND="backend",t.DEFAULT_OFF="default_off",t.REGULAR_SEO="regular_seo",t.MT_SEO="mt_seo"}(o||(o={}));const n="on",e="off",s="initiated",a="see_translation",i="see_original",r=t=>!1===t.isEligibleForImmersive?s:t.isImmersiveTranslationsActive?n:e,c=t=>("isPostTranslatedAfterClick"in t?t.isPostTranslatedAfterClick:t.isCommentTranslatedAfterClick)?a:i;return{get T(){return o},a:o=>t.b({source:"translate_button",action:"view",noun:"comment_composer"},{action_info:{reason:"on"},...o?{comment:{id:o}}:{}}),b:o=>{const n=o?{post:{id:o}}:{};return t.b({source:"translate_button",action:"view",noun:"post_composer"},{action_info:{reason:"on"},...n})},c:(o,n)=>t.b({source:"translate_button",action:"click",noun:"comment_composer"},{action_info:{reason:o?"on":"off"},...n?{comment:{id:n}}:{}}),d:(o,n)=>{const e=n?{post:{id:n}}:{};return t.b({source:"translate_button",action:"click",noun:"post_composer"},{action_info:{reason:o?"on":"off"},...e})},e:o=>t.b({source:"translate_button",action:"dismiss",noun:"translation_intervention"},{action_info:{reason:r(o)},comment:{...o.comment},post:o.post}),f:o=>t.b({source:"translate_button",action:"click",noun:"translation_intervention"},{action_info:{reason:r(o),type:o.actionType},comment:{...o.comment},post:o.post}),g:()=>t.b({source:"translate_button",action:"hide",noun:"comment_composer"}),h:()=>t.b({source:"translate_button",action:"hide",noun:"post_composer"}),i:o=>t.b({source:"translate_button",action:"view",noun:"post_banner"},{action_info:{reason:r(o)},post:{...o.post,translation_state:o.isPostTranslated}}),j:o=>t.b({source:"translate_button",action:"click",noun:"post_banner"},{action_info:{reason:r(o),type:c(o)},post:{...o.post,translation_state:o.isPostTranslated}}),k:o=>t.b({source:"translate_button",action:"dismiss",noun:"post_banner"},{action_info:{reason:r(o)},post:{...o.post,translation_state:o.isPostTranslated}}),l:o=>t.b({source:"overflow_menu",action:"click",noun:"translate_survey"},{post:o?.post,comment:o?.comment}),m:o=>t.b({source:"translate_button",action:"view",noun:"survey"},{post:o?.post,comment:o?.comment}),n:o=>t.b({source:"translate_button",action:"dismiss",noun:"survey"},{post:o?.post,comment:o?.comment}),o:o=>t.b({source:"translate_button",action:"submit",noun:"survey"},{action_info:{reason:o.reason},post:o.post,comment:o.comment,survey:{text:o.survey_text}}),p:(o,n)=>t.b({source:"translate_button",action:"click",noun:"toggle"},{action_info:{reason:o?"off":"on"},translation_metrics:{translation_setting_state:o?"off":"on",target_language:n}}),q:(o,n,e="")=>t.b({source:"translate_button",action:"default",noun:"known_lang"},{action_info:{reason:o,type:e},setting:{value:n.toString(),values:n}}),r:o=>t.b({source:"translate_button",action:"enabled",noun:"status"},{action_info:{reason:o}}),s:o=>t.b({source:"translate_button",action:"disabled",noun:"status"},{action_info:{reason:o}}),t:(o,n)=>t.b({source:"translate_button",action:"submit",noun:"post_composer"},{action_info:{reason:o?"on":"off"},...n?{post:{id:n.id,subreddit_id:n.subredditId,subreddit_name:n.subredditPrefixedName,url:n.permalink}}:{}}),u:o=>t.b({source:"overflow_menu",action:"click",noun:"translate_post"},{action_info:{reason:r(o),type:c(o)},post:{...o.post,translation_state:o.isPostTranslated}}),v:o=>t.b({source:"overflow_menu",action:"view",noun:"translate_post"},{action_info:{reason:r(o)},post:{...o.post,translation_state:o.isPostTranslated}}),w:(o,n,e)=>t.b({source:"translate_button",action:"submit",noun:"comment_composer"},{action_info:{reason:o?"on":"off"},...n?{post:{id:n.id,language:n.postLanguage,subreddit_id:n.subredditId,subreddit_name:n.subredditPrefixedName,type:n.postType,url:n.permalink}}:{},...e?{comment:{id:e}}:{}}),x:o=>t.b({source:"overflow_menu",action:"click",noun:"translate_comment"},{action_info:{reason:r(o),type:c(o)},comment:{...o.comment,translation_state:o.isCommentTranslated},post:o.post}),y:o=>t.b({source:"overflow_menu",action:"view",noun:"translate_comment"},{action_info:{reason:r(o)},comment:{...o.comment,translation_state:o.isCommentTranslated},post:o.post})}}));
SML.dm("CCOsF7IJ",["CVEbQKiO","D7lSuCop","Mh6HSk7W"],(async(e,t,i)=>{const a={checkbox:()=>"This checkbox must be on",radio:()=>"This radio must have a selected option"};class o extends i.F{constructor(){super(...arguments),this.required=!1,this.name="",this.initialized=!1,this._events=new t.E(this),this.ariaRole="checkbox",this._checked=!1,this.ellipsis=!1,this._handleClick=this._events.define("click",(e=>{this.disabled||e.defaultPrevented||this.handleInteraction()})),this._handleKeydown=this._events.define("keydown",(e=>{this.disabled||e.defaultPrevented||"Space"===e.code&&(e.stopPropagation(),e.preventDefault(),this.handleInteraction())}))}get checked(){return this._checked}set checked(e){const t=this._checked;e!==t&&(this._internals.setFormValue(e?this.getAttribute("value")||"on":null),this._checked=e,e?this.setAttribute("aria-checked","true"):this.removeAttribute("aria-checked"),this.hasAttribute("required")&&!this.checked?this._internals.setValidity({valueMissing:!0},a[this.ariaRole]()):this._internals.setValidity(),this.requestUpdate("checked",t))}static get styles(){return[super.styles,e.i`:host(:not(faceplate-switch-input)){min-height:var(--size-md)}:host{display:flex;align-items:center;cursor:pointer}label{font:var(--font-14-20-regular);color:var(--color-neutral-content-strong);margin-left:var(--spacer-2xs);cursor:pointer}.icon{border:var(--line-md) solid transparent;height:var(--size-md);font-size:var(--size-md);flex-shrink:0}:host([checked]) .icon,:host([indeterminate]) .icon{display:inline-block;color:var(--color-primary-background)}:host(:hover) .icon{color:var(--color-primary-background-hover)}:host([faceplate-validity=invalid]) .icon{color:var(--color-danger-content);pointer-events:none}:host([aria-disabled=true]) .icon{color:var(--color-neutral-content-disabled);pointer-events:none}:host([ellipsis]) label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host([required]) label::after{position:absolute;color:var(--color-danger-content);content:'*'}:host(:focus) .icon{border-color:var(--color-global-focus,transparent);outline:0}:host(:focus){outline:0}:host(:focus:not(:focus-visible)) .icon{border-color:transparent}`]}connectedCallback(){super.connectedCallback(),this.initialized||(this.initialized=!0,this.setAttribute("role",this.ariaRole),this.setAttribute("tabindex","0"))}formDisabledCallback(e){super.formDisabledCallback(e),e?this.removeAttribute("tabindex"):this.setAttribute("tabindex","0")}render(){return e.x` ${super.render()} <label> <slot></slot> </label> `}handleInteraction(){const e=new InputEvent("input",{bubbles:!0});this.dispatchEvent(e)}}return e._([e.n({type:Boolean})],o.prototype,"required",void 0),e._([e.n({type:String})],o.prototype,"name",void 0),e._([e.n({type:Boolean,reflect:!0})],o.prototype,"checked",null),e._([e.n({type:Boolean})],o.prototype,"ellipsis",void 0),{C:o}}));
SML.dm("Btl6S_1h",["CVEbQKiO","CCOsF7IJ","BMNJiqQ9","D7lSuCop"],(async(a,r,e,t)=>{var o;!function(a){a.PRIMARY="primary",a.BRAND="brand"}(o||(o={}));const c={[o.PRIMARY]:"switch-input-primary",[o.BRAND]:"switch-input-brand"};var i;!function(a){a.ON="faceplate-switch-input:on",a.OFF="faceplate-switch-input:off"}(i||(i={}));let n=class extends r.C{constructor(){super(...arguments),this.appearance=o.PRIMARY}static get styles(){return[super.styles,a.i`.switch-input-primary{--checked-color-background-default:var(--color-switch-input-background-checked);--checked-color-background-hover:var(--color-switch-input-background-checked-hover)}.switch-input-brand{--checked-color-background-default:var(--color-brand-background);--checked-color-background-hover:var(--color-brand-background-hover)}.outer{background:var(--color-switch-input-background-default);border-radius:var(--radius-full);box-shadow:var(--elevation-switch-input-default-inset);height:var(--size-switch-input-h);vertical-align:middle;width:var(--size-switch-input-w);padding:var(--line-md);box-sizing:border-box;position:relative;display:flex;align-items:center;flex-shrink:0;transition:background-color .3s;contain:strict}.knob{--knob-size:calc(var(--size-switch-input-h) - (var(--line-md) * 2));--knob-size-active:calc((36 / 28) * var(--knob-size));--translate-checked:calc(
            var(--size-switch-input-w) - var(--knob-size) - (var(--line-md) * 2)
          );background:var(--color-global-white);border-radius:var(--radius-full);filter:drop-shadow(0 1px 4px rgba(0, 0, 0, .15));display:flex;align-items:center;justify-content:center;height:var(--knob-size);position:absolute;transform:translateX(0);transition-duration:.3s;transition-property:transform,width;width:var(--knob-size)}.knob:dir(rtl){--translate-checked:calc(
            -1 * (var(--size-switch-input-w) - var(--knob-size) - (var(--line-md) * 2))
          )}:host(:active:not([aria-disabled=true])) .knob{width:var(--knob-size-active)}:host([checked]) .knob{transform:translateX(var(--translate-checked))}:host([checked]:active:not([aria-disabled=true])) .knob{transform:translateX(calc(var(--translate-checked) - (var(--knob-size-active) - var(--knob-size))))}:host([checked]:active:not([aria-disabled=true])) .knob:dir(rtl){transform:translateX(calc(var(--translate-checked) + (var(--knob-size-active) - var(--knob-size))))}label{margin-inline-start:var(--spacer-xs)}:host([checked]) .outer{background:var(--checked-color-background-default)}:host([faceplate-validity=invalid]) .outer{background:var(--color-danger-content)}:host(:focus-visible) .outer{outline:1px auto var(--color-global-focus)}:host(:hover) .outer{background:var(--color-switch-input-background-default-hover)}:host([checked]:hover) .outer{background:var(--checked-color-background-hover)}:host([aria-disabled=true]){opacity:1}:host([aria-disabled=true]) .outer{background-color:var(--color-switch-input-background-disabled);box-shadow:none}:host([checked][aria-disabled=true]) .outer{background-color:var(--color-switch-input-background-checked-disabled);box-shadow:none}:host([aria-disabled=true][checked]:active) .outer{background:var(--color-switch-input-background-checked-disabled);box-shadow:none}:host([aria-disabled=true]) .knob{background-color:var(--color-switch-input-background-handle-disabled);box-shadow:none}:host([aria-disabled=true]) label{opacity:.5}svg{opacity:0;color:var(--color-global-black);transition:opacity .3s}:host([checked]) svg{opacity:1}`]}render(){return a.x` <span class="${c[this.appearance||o.PRIMARY]} outer"> <span class="knob"> ${e.c({attributes:{"aria-hidden":"true"},size:a.I.ExtraSmall})} </span> </span> ${super.render()} `}toggle(){this.checked=!this.checked,this.dispatchEvent(t.c(this.checked?i.ON:i.OFF)),super.handleInteraction()}handleInteraction(){this.toggle()}};return a._([a.n({type:String})],n.prototype,"appearance",void 0),n=a._([a.c("faceplate-switch-input")],n),{get F(){return n},get S(){return o}}}));
SML.dm("CKqHOB_v",["CVEbQKiO","D7lSuCop","BxmAGM9T","Btl6S_1h"],(async(e,t,n)=>{const a=e.s;let i=class extends a{constructor(){super(...arguments),this.translationContextValue=t.at,this.checked=!0,this.isViewEventSent=!1,this.renderTitleText=()=>e.x` ${this.isCommentToggle()?"Translate comment":"Translate post"} `,this.renderbodyText=()=>e.x` ${this.isCommentToggle()?"You are commenting in a community speaking a language different from yours.":"You are posting in a community speaking a language different from yours."} `}getCommentIdForEditMode(){const e=this.closest("comment-composer-host");if(e&&e.isInEditMode)return this.closest("shreddit-comment")?.getAttribute("thingId")??void 0}updated(){if(this.translationContextValue.isTranslationActive&&!this.isViewEventSent){if(this.isCommentToggle()){const e=this.getCommentIdForEditMode();t.e(this,n.a(e))}else this.isPostToggle()&&t.e(this,n.b(this.thingId));this.isViewEventSent=!0}}handleToggleClick(e){if(e.preventDefault(),e.stopPropagation(),this.checked=!this.checked,this.isCommentToggle()){const e=this.getCommentIdForEditMode();t.e(this,n.c(this.checked,e))}this.isPostToggle()&&t.e(this,n.d(this.checked,this.thingId))}isCommentToggle(){return"comment"===this.toggleType}isPostToggle(){return"post"===this.toggleType}render(){if(!this.translationContextValue.isTranslationActive)return e.x``;const t=this.isCommentToggle()?"flex ml-sm mb-2xs justify-between":"flex justify-between py-md";return e.x` <div class="${t}"> <div> <div class="font-normal text-14 leading-5 text-secondary-plain"> ${this.renderTitleText()} </div> <div class="font-normal text-12 leading-4 text-secondary-plain-weak"> ${this.renderbodyText()} </div> </div> <faceplate-switch-input ?checked="${this.checked}" @click="${this.handleToggleClick}"></faceplate-switch-input> </div> `}};i.styles=[t.t],e._([t.as({context:t.au,subscribe:!0}),e.b()],i.prototype,"translationContextValue",void 0),e._([e.n({type:String,attribute:"toggle-type"})],i.prototype,"toggleType",void 0),e._([e.n({type:String,attribute:"thing-id"})],i.prototype,"thingId",void 0),e._([e.b()],i.prototype,"checked",void 0),e._([e.b()],i.prototype,"isViewEventSent",void 0),i=e._([e.c("translation-contribution-toggle")],i)}));
SML.dm("BdwiTd4N",["CVEbQKiO","D7lSuCop","CCphb8vV","CK9FveTr","DEQ-l4mm","B_ByM_ya","AhHXxeIZ","CK47trMR","BC8XSJYX","LCU6ttla"],(async(e,t,r,a)=>{const o=t.d(e.s);var s,i;!function(e){e.ICON="icon",e.TEXT="text",e.ICON_AND_TEXT="icon_and_text"}(s||(s={}));class n extends o{constructor(){super(...arguments),this.withoutTooltip=!1,this.dropdownHeaderText="",this.selectedItemDisplayType=s.TEXT,this.disabled=!1,this.isEntityFilterEnabled=!1,this.isDropdownOpen=!1,this.onDropdownClose=()=>{this.isDropdownOpen=!1,this.tooltip?.hide?.()},this.onDropdownOpen=()=>{this.isDropdownOpen=!0},this.onClickDropdownItem=e=>{this.onSelectDropdownItem(e)},this.onKeyUpDropdownItem=e=>{"Enter"===e.key&&(this.onSelectDropdownItem(e),this.dropdownMenu?.close())},this.renderDropdownMenu=(a,o,s)=>{const i=this.isEntityFilterEnabled?t.k({appearance:"bordered",attributes:{"aria-expanded":this.isDropdownOpen?"true":"false","aria-label":this.buttonAriaLabel||this.getAriaLabel(o),id:this.triggerId,disabled:this.disabled},selected:this.isDropdownOpen,size:t._.Small,leadingIcon:e.aO({size:e.q.Small})}):r.w({appearance:"plain",attributes:{"aria-expanded":this.isDropdownOpen?"true":"false","aria-label":this.buttonAriaLabel||this.getAriaLabel(o),className:this.disabled?"":"text-neutral-content-weak",id:this.triggerId,disabled:this.disabled},children:a,selected:this.isDropdownOpen,size:t._.Small}),n=e.x` <faceplate-tracker class="block" source="${this.telemetrySource}" action="click" noun="sorting"> ${i} </faceplate-tracker>`;return e.x`<faceplate-dropdown-menu class="nd:hidden" .onopen="${this.onDropdownOpen}" .onclose="${this.onDropdownClose}" ?disabled="${this.disabled}"> ${this.withoutTooltip?n:this.wrapWithTooltip(n)} <faceplate-menu slot="menu" class="overflow-y-auto max-h-[50vh]" hidden @keyup="${this.onKeyUpDropdownItem}" @click="${this.onClickDropdownItem}"> ${this.dropdownHeaderText?e.x`<div class="font-semibold m-md mb-xs">${this.dropdownHeaderText}</div>`:""} ${s} </faceplate-menu> </faceplate-dropdown-menu>`}}static get styles(){return[t.t]}connectedCallback(){super.connectedCallback(),this.mutationObserver=new MutationObserver((e=>{e.forEach((e=>{const t=e.target;"FACEPLATE-MENU"===t.nodeName&&t.hasAttribute("hidden")&&this.isDropdownOpen&&this.onDropdownClose()}))})),this.mutationObserver.observe(this.shadowRoot,{attributes:!0,attributeFilter:["hidden"],childList:!1,characterData:!1,subtree:!0})}disconnectedCallback(){super.disconnectedCallback(),this.mutationObserver?.disconnect()}fireOffSortEvents(e,r){var a,o;r&&(this.sortEvent&&this.dispatchEvent(t.c(this.sortEvent,{selected:r,event:e})),this.telemetrySource&&this.trackEvent((a=this.telemetrySource,o=r.toLowerCase(),t.b({source:a,action:"click",noun:o}))))}wrapWithTooltip(t){return e.x` <rpl-tooltip class="nd:hidden block" appearance="inverted" trigger="hover focus-visible" aria-label="${this.dropdownHeaderText}"> ${t} <slot slot="content" name="tooltip-content"></slot> </rpl-tooltip> `}getAriaLabel(e){return e?`${this.dropdownHeaderText}: ${e}`:this.dropdownHeaderText;}}e._([e.z("rpl-tooltip")],n.prototype,"tooltip",void 0),e._([e.z("faceplate-dropdown-menu")],n.prototype,"dropdownMenu",void 0),e._([e.z("faceplate-tracker button")],n.prototype,"menuButton",void 0),e._([e.n({type:Boolean,attribute:"without-tooltip"})],n.prototype,"withoutTooltip",void 0),e._([e.n({type:String,attribute:"header-text"})],n.prototype,"dropdownHeaderText",void 0),e._([e.n({type:String,attribute:"button-aria-label"})],n.prototype,"buttonAriaLabel",void 0),e._([e.n({type:String,attribute:"selected-item-display-type"})],n.prototype,"selectedItemDisplayType",void 0),e._([e.n({type:String,attribute:"sort-event"})],n.prototype,"sortEvent",void 0),e._([e.n({type:String,attribute:"telemetry-source"})],n.prototype,"telemetrySource",void 0),e._([e.n({type:String,attribute:"trigger-id"})],n.prototype,"triggerId",void 0),e._([e.n({type:Boolean})],n.prototype,"disabled",void 0),e._([e.n({type:Boolean,attribute:"entity-filter-enabled"})],n.prototype,"isEntityFilterEnabled",void 0),e._([e.b()],n.prototype,"isDropdownOpen",void 0),function(e){e.ICON="icon",e.TEXT="text",e.ICON_AND_TEXT="icon_and_text"}(i||(i={}));let d=class extends n{constructor(){super(...arguments),this.setCurrentlySelectedItem=t=>{if(!t)return;const{innerText:r}=t;if(this.currentlySelectedItemLabel=r,this.selectedItemDisplayType===i.TEXT)this.currentlySelectedItem=r;else{const a=(this.querySelector('[slot="selected-item-icon-override"]')??t).querySelector("svg"),o=a?.getAttribute("icon-name")?.includes("fill");if(!a||o)return;const s=e.x`${a}`;this.selectedItemDisplayType===i.ICON?this.currentlySelectedItem=s:this.currentlySelectedItem=e.x`<span class="flex"><span class="flex items-center mr-xs">${s}</span><span>${r}</span></span>`}},this.toggleSelectedItemUI=e=>{const t=this.querySelector("li[rpl-selected]"),r=t?.querySelector('[role="menuitem"]');t?.removeAttribute("rpl-selected"),r?.setAttribute("aria-selected","false");const a=e?.querySelector('[role="menuitem"]');if(e?.setAttribute("rpl-selected",""),a?.setAttribute("aria-selected","true"),a&&r){const e=r?.className;r.className=a.className,a.className=e}},this.silentlySelectItemByValue=e=>{const t=this.querySelector(`[value="${e}"]`);if(t){const e=t?.querySelector("li");this.setCurrentlySelectedItem(e),this.toggleSelectedItemUI(e)}},this.onSelectDropdownItem=e=>{const t=e.target,r=t?.closest("li");this.setCurrentlySelectedItem(r),this.toggleSelectedItemUI(r);const a=t?.closest("data")?.getAttribute("value")||void 0;this.fireOffSortEvents(e,a)}}connectedCallback(){super.connectedCallback(),requestAnimationFrame((()=>{const e=this.querySelector('[slot="selected-item"]');this.setCurrentlySelectedItem(e)}))}render(){return this.renderDropdownMenu(this.currentlySelectedItem,this.currentlySelectedItemLabel,e.x` <slot name="dropdown-items"></slot>`)}};e._([e.b()],d.prototype,"currentlySelectedItem",void 0),d=e._([e.c("shreddit-sort-dropdown")],d);const l=(e,r)=>{switch(e){case t.gw.Top:return r===t.gw.Top?"Top (Default)":"Top";case t.gw.New:return r===t.gw.New?"New (Default)":"New";case t.gw.Controversial:return r===t.gw.Controversial?"Controversial (Default)":"Controversial";case t.gw.Old:return r===t.gw.Old?"Old (Default)":"Old";case t.gw.Random:return r===t.gw.Random?"Random (Default)":"Random";case t.gw.Qa:return r===t.gw.Qa?"Q&A (Default)":"Q&A";case t.gw.Live:return r===t.gw.Live?"Live (Default)":"Live";default:return "Best";}},u=r=>{switch(r){case t.gw.Confidence:return e.cD();case t.gw.Top:return e.cI();case t.gw.New:return e.au();case t.gw.Controversial:return e.cH();case t.gw.Old:return e.bQ();case t.gw.Random:return e.cG();case t.gw.Qa:return e.cF();case t.gw.Live:return e.cE();default:return e.cD()}},p=[t.gw.Blank,t.gw.Random,t.gw.Live],c=[t.gw.Confidence,t.gw.Top,t.gw.New,t.gw.Controversial,t.gw.Old,t.gw.Random,t.gw.Qa,t.gw.Live,t.gw.Blank];let N=class extends n{constructor(){super(...arguments),this.currentSort=t.gw.Confidence,this.suggestedSort=void 0,this.postId="",this.subredditId="",this.disableOptions=p.join(","),this.onSelectDropdownItem=(e,t)=>{t&&(this.currentSort=t,this.fireOffSortEvents(e,t))},this.setSuggestedSort=async e=>{const r=e?t.gw.Blank:this.currentSort,{data:a}=await t.v({operation:t.O.SetSuggestedSort,variables:{input:{sort:r,subredditId:this.subredditId,postId:`t3_${this.postId}`}}});if(a?.setSuggestedSort?.ok){if(this.suggestedSort=r,this.telemetrySource){const a=e?"clear_suggested_sort":"set_suggested_sort";this.trackEvent(t.b({source:this.telemetrySource,action:"click",noun:a},{action_info:{reason:r,page_type:t.aa.PostDetail}}))}const a=e?"Suggested sort has been cleared":"Suggested sort has been set";this.dispatchFaceplateAlertEvent(t.a4.success,a)}else{const r=e?"There was an error clearing the suggested sort":"There was an error setting the suggested sort";this.dispatchFaceplateAlertEvent(t.a4.error,r)}},this.renderSuggestedSortOptions=()=>this.isCurrentSuggestedSort?t.k({appearance:"plain",attributes:{onclick:()=>this.setSuggestedSort(!0),className:"text-12 font-semi bold"},size:t._.Small,children:"Clear default sort"}):e.x` <rpl-tooltip appearance="inverted" class="nd:hidden">${t.k({appearance:"plain",attributes:{onclick:()=>this.setSuggestedSort(),className:"text-12 font-semi bold"},size:t._.Small,children:"Set as Default"})}<span slot="content">${"Set as the default sort for this post for all visitors"}</span></rpl-tooltip>`,this.renderDropdownItems=()=>e.x`${(({html:e,listItemRenderer:t,selectedSort:r,suggestedCommentSort:a,disableOptions:o,onclick:s})=>Object.values(c).map((i=>o.includes(i)?e``:e` <data value="${i}"> ${t({label:l(i,a),selected:i===r,leadingIcon:u(i),attributes:{role:"menuitem",onclick:e=>s&&s(e,i)}})} </data> `)))({html:e.x,listItemRenderer:a.l,selectedSort:this.currentSort,suggestedCommentSort:this.suggestedSort,disableOptions:this.disableOptions.split(","),onclick:(e,t)=>this.onSelectDropdownItem(e,t)})}`}get isCurrentSuggestedSort(){return!(!this.suggestedSort||this.suggestedSort===t.gw.Blank)&&this.currentSort===this.suggestedSort}dispatchFaceplateAlertEvent(e,r){const a=t.c("faceplate-alert",{level:e,message:r});this.dispatchEvent(a)}render(){const r=l(this.currentSort,this.suggestedSort);return e.x`<div class="flex items-center justify-between"> ${this.renderDropdownMenu(r,r,this.renderDropdownItems())}${this.currentSort===t.gw.Confidence||this.currentSort===t.gw.Blank?"":this.renderSuggestedSortOptions()} </div>`}};e._([e.n({type:String,attribute:"sort"})],N.prototype,"currentSort",void 0),e._([e.n({type:String,attribute:"suggested-sort"})],N.prototype,"suggestedSort",void 0),e._([e.n({type:String,attribute:"post-id"})],N.prototype,"postId",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],N.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"disable-options"})],N.prototype,"disableOptions",void 0),N=e._([e.c("shreddit-sort-dropdown-with-suggested")],N);var h=Object.freeze({__proto__:null,get ShredditSortDropdown(){return d},get ShredditSortDropdownWithSuggested(){return N}});return{get i(){return h}}}));
SML.dm("MbxPF65-",["CVEbQKiO","D7lSuCop","DlWm-1vG","CCphb8vV","Cx0Ea5Jz","B_ByM_ya","kExRqc7d","CBZc9Xo3","AhHXxeIZ","BYDFL-1r","B7NvqZE0"],(async(e,t,i,a,n)=>{var r,s;!function(e){e.Scheduled="scheduled",e.Live="live",e.Ended="ended",e.Unavailable="unavailable"}(r||(r={}));let o=s=class extends e.s{constructor(){super(...arguments),this.isReminderSet=!1,this.eventState=r.Scheduled,this.postId="",this.permalink="",this.pdpTarget="_self",this.isPdp=!1,this.isLoggedIn=!1,this.isDesktopViewport=!1,this.shouldFireEngagedClick=!1,this.enableUserActionTriggeredModal=!1,this.requestInProgress=!1,this.handleClickCancelReminder=()=>{this.dispatchEvent(new Event(n.E,{bubbles:!0})),this.cancelReminder()},this.cancelReminder=async()=>{this.isReminderSet=!1;if(await this.updatePostReminderState(t.dG.NoReminder)){const e=t.c("faceplate-alert",{level:t.a4.notice,message:"Reminder cancelled"});this.dispatchEvent(e),this.pubsub?.publish(t.T.AdReminderRsvpUnsubscribe,{postId:this.postId})}else{this.isReminderSet=!0;const e="Failed to cancel reminder";this.dispatchErrorAlert(e)}},this.handleClickSetReminder=async()=>{this.shouldFireEngagedClick&&this.dispatchEvent(t.c(i.A)),this.isLoggedIn?(this.dispatchEvent(new Event(n.b,{bubbles:!0})),await this.setReminder()):this.dispatchEvent(t.c(t.ab.follow))},this.setReminder=async()=>{this.isReminderSet=!0;if(await this.updatePostReminderState(t.dG.Reminder)){const e=t.c("faceplate-alert",{level:t.a4.success,message:"Reminder set"});this.dispatchEvent(e),this.pubsub?.publish(t.T.AdReminderRsvpSubscribe,{postId:this.postId})}else{this.isReminderSet=!1;const e="Failed to set reminder";this.dispatchErrorAlert(e)}},this.showUserActionTriggeredModal=()=>{this.userActionTriggeredModal?.showModal(),this.userActionTriggeredBottomSheet?.showModal(),this.userActionTriggeredModal?.addEventListener("rpl-dialog:hide",this.handleModalClose),this.userActionTriggeredBottomSheet?.addEventListener("faceplate-close",this.handleBottomSheetClose)},this.closeUserActionTriggeredModal=()=>{this.userActionTriggeredModal?.hide(),this.userActionTriggeredBottomSheet?.close(),s.triggeredPostIds.delete(this.postId),this.userActionTriggeredModal?.removeEventListener("rpl-dialog:hide",this.handleModalClose),this.userActionTriggeredBottomSheet?.removeEventListener("faceplate-close",this.handleBottomSheetClose)},this.handleModalClose=()=>{s.triggeredPostIds.delete(this.postId),this.userActionTriggeredModal?.removeEventListener("rpl-dialog:hide",this.handleModalClose)},this.handleBottomSheetClose=()=>{s.triggeredPostIds.delete(this.postId),this.userActionTriggeredBottomSheet?.removeEventListener("faceplate-close",this.handleBottomSheetClose)},this.handleTriggerModal=e=>{e.postId!==this.postId||s.triggeredPostIds.has(this.postId)||this.isReminderSet||this.eventState!==r.Scheduled||(s.triggeredPostIds.add(this.postId),this.showUserActionTriggeredModal())},this.closeUserActionTriggeredModalAndGetNotifications=async()=>{this.closeUserActionTriggeredModal(),await this.handleClickSetReminder()},this.updatePostReminderState=async e=>{this.requestInProgress=!0;const i=await t.v({operation:t.O.UpdatePostReminderState,variables:{input:{postId:this.postId,reminderState:e}}});return this.requestInProgress=!1,!!i.data.updatePostReminderState?.ok}}connectedCallback(){super.connectedCallback(),this.pubsub=new t.P(this),this.pubsub.subscribe(t.T.AdReminderRsvpSubscribe,(e=>{e.postId===this.postId&&(this.isReminderSet=!0)})),this.pubsub.subscribe(t.T.AdReminderRsvpUnsubscribe,(e=>{e.postId===this.postId&&(this.isReminderSet=!1)})),this.enableUserActionTriggeredModal&&this.pubsub.subscribe(t.T.TriggerAdReminderModal,this.handleTriggerModal,!1)}disconnectedCallback(){super.disconnectedCallback(),this.pubsub=void 0}get shouldShowUserActionTriggeredModal(){const e=this.eventState===r.Live;return this.enableUserActionTriggeredModal&&this.isLoggedIn&&!e}dispatchErrorAlert(e){const i=t.c("faceplate-alert",{level:t.a4.error,cause:"uncategorized",message:e});this.dispatchEvent(i)}getButtonAttributes(){const e=this.eventState===r.Live;return e&&this.isPdp?null:e&&!this.isPdp?{text:"Join Now",appearance:"primary",href:this.permalink,target:this.pdpTarget}:this.isReminderSet&&!e?{action:this.handleClickCancelReminder,text:"Reminder set",appearance:a.a4()?"secondary":"bordered"}:this.isReminderSet||e?null:{action:this.handleClickSetReminder,text:"Remind me",appearance:a.a4()?"bordered":"secondary"};}get userActionTriggerModalHeaderString(){return "Get reminded when this event starts?";}get userActionTriggerModalContentString(){return "Get notified before it starts so you don't miss out.";}renderUserActionTriggeredBottomSheet(){return e.x` <faceplate-bottom-sheet class="triggered-modal"> <faceplate-bottom-sheet-header slot="header"> ${this.userActionTriggerModalHeaderString} <span slot="trailing"> ${t.k({appearance:"secondary",attributes:{onclick:this.closeUserActionTriggeredModal,"aria-label":"Close",className:"close-btn"},leadingIcon:e.m({size:e.I.Small}),size:t._.Small})} </span> </faceplate-bottom-sheet-header> <faceplate-menu class="w-full box-border px-md"> ${this.userActionTriggerModalContentString} <div> ${t.k({appearance:"secondary",size:t._.Small,children:"No thanks",attributes:{className:"w-100 mt-sm",onclick:this.closeUserActionTriggeredModal}})} </div> <div> ${t.k({appearance:"primary",size:t._.Small,children:"Yes, remind me",attributes:{onclick:this.closeUserActionTriggeredModalAndGetNotifications,className:"w-100 my-sm"}})} </div> </faceplate-menu> </faceplate-bottom-sheet> `;}renderUserActionTriggeredModal(){const i=e.x` <rpl-modal-card class="w-[640px] max-w-[90%] m-auto"> <div slot="title">${this.userActionTriggerModalHeaderString}</div> <div slot="close-button"> ${t.k({appearance:"secondary",shape:"pill",leadingIcon:e.m({size:e.I.Small}),size:t._.Small,attributes:{"aria-label":"Close",onclick:this.closeUserActionTriggeredModal}})} </div> <div class="pt-sm">${this.userActionTriggerModalContentString}</div> <div slot="secondary-button"> ${t.k({appearance:"secondary",size:t._.Small,children:"No thanks",attributes:{className:"w-100 xs:w-auto",onclick:this.closeUserActionTriggeredModal}})} </div> <div slot="primary-button"> ${t.k({appearance:"primary",size:t._.Small,children:"Yes, remind me",attributes:{onclick:this.closeUserActionTriggeredModalAndGetNotifications,className:"w-100 xs:w-auto"}})} </div> </rpl-modal-card> `;return e.x`<rpl-dialog class="triggered-modal" .litTemplateChildren="${i}"></rpl-dialog>`}render(){if(this.eventState===r.Ended)return e.x``;const i=this.getButtonAttributes();if(!i)return e.x``;const{appearance:a,action:n,text:s,href:o,target:l}=i,d=t.k({appearance:a,attributes:{className:"relative",onclick:n,id:"",href:o,target:l,disabled:this.requestInProgress},size:t._.Small,children:s});return e.x`<div> ${d} ${this.shouldShowUserActionTriggeredModal?this.isDesktopViewport?this.renderUserActionTriggeredModal():this.renderUserActionTriggeredBottomSheet():""} </div>`}};o.styles=[t.t],o.triggeredPostIds=new Set,e._([e.n({type:Boolean,attribute:"is-reminder-set",reflect:!0})],o.prototype,"isReminderSet",void 0),e._([e.n({type:String,attribute:"event-state"})],o.prototype,"eventState",void 0),e._([e.n({type:String,attribute:"post-id"})],o.prototype,"postId",void 0),e._([e.n({type:String})],o.prototype,"permalink",void 0),e._([e.n({type:String,attribute:"pdp-target"})],o.prototype,"pdpTarget",void 0),e._([e.n({type:Boolean,attribute:"is-pdp"})],o.prototype,"isPdp",void 0),e._([e.n({type:Boolean,attribute:"is-logged-in"})],o.prototype,"isLoggedIn",void 0),e._([e.n({type:Boolean,attribute:"is-desktop-viewport"})],o.prototype,"isDesktopViewport",void 0),e._([e.n({type:Boolean,attribute:"should-fire-engaged-click"})],o.prototype,"shouldFireEngagedClick",void 0),e._([e.n({type:Boolean,attribute:"enable-user-action-triggered-modal"})],o.prototype,"enableUserActionTriggeredModal",void 0),e._([e.b()],o.prototype,"requestInProgress",void 0),e._([e.z("rpl-dialog.triggered-modal")],o.prototype,"userActionTriggeredModal",void 0),e._([e.z("faceplate-bottom-sheet.triggered-modal")],o.prototype,"userActionTriggeredBottomSheet",void 0),o=s=e._([e.c("ad-reminder-button")],o);let l=class extends e.s{constructor(){super(...arguments),this.postId="",this.eventState=r.Scheduled,this.startsAt="",this.endsAt="",this.locale="en",this.isReminderSet=!1,this.isLoggedIn=!1,this.shouldFireEngagedClick=!1,this.requestInProgress=!1,this.handleClickCancelReminder=()=>{this.dispatchEvent(new Event(n.E,{bubbles:!0})),this.cancelReminder()},this.cancelReminder=async()=>{this.isReminderSet=!1;if(await this.updatePostReminderState(t.dG.NoReminder)){const e=t.c("faceplate-alert",{level:t.a4.notice,message:"Reminder cancelled"});this.dispatchEvent(e),this.pubsub?.publish(t.T.AdReminderRsvpUnsubscribe,{postId:this.postId})}else{this.isReminderSet=!0;const e="Failed to cancel reminder";this.dispatchErrorAlert(e)}},this.handleClickSetReminder=async()=>{this.shouldFireEngagedClick&&this.dispatchEvent(t.c(i.A)),this.isLoggedIn?(this.dispatchEvent(new Event(n.b,{bubbles:!0})),await this.setReminder()):this.dispatchEvent(t.c(t.ab.follow))},this.setReminder=async()=>{this.isReminderSet=!0;if(await this.updatePostReminderState(t.dG.Reminder)){const e=t.c("faceplate-alert",{level:t.a4.success,message:"Reminder set"});this.dispatchEvent(e),this.pubsub?.publish(t.T.AdReminderRsvpSubscribe,{postId:this.postId})}else{this.isReminderSet=!1;const e="Failed to set reminder";this.dispatchErrorAlert(e)}},this.updatePostReminderState=async e=>{this.requestInProgress=!0;const i=await t.v({operation:t.O.UpdatePostReminderState,variables:{input:{postId:this.postId,reminderState:e}}});return this.requestInProgress=!1,!!i.data.updatePostReminderState?.ok},this.handleStatusClick=()=>{this.eventState===r.Ended||this.requestInProgress||(this.isReminderSet?this.handleClickCancelReminder():this.handleClickSetReminder())}}connectedCallback(){super.connectedCallback(),this.pubsub=new t.P(this),this.pubsub.subscribe(t.T.AdReminderRsvpSubscribe,(e=>{e.postId===this.postId&&(this.isReminderSet=!0)})),this.pubsub.subscribe(t.T.AdReminderRsvpUnsubscribe,(e=>{e.postId===this.postId&&(this.isReminderSet=!1)}))}getStatusMessage(){let e,t="text-neutral-content-weak";return this.eventState===r.Scheduled?e="Coming Up":this.eventState===r.Live?(t="text-global-orangered",e="Live"):e="Just Finished",{message:e,color:t};}getRelativeTime(){const e=new Date(this.startsAt),t=new Date(this.endsAt),i=new Date(Date.now()-6e4);return this.eventState===r.Scheduled?e:this.eventState===r.Live?e<i?e:i:t<i?t:i}endedOver24HoursAgo(){if(this.eventState===r.Ended){return new Date(this.endsAt)<=new Date(Date.now()-864e5)}return!1}dispatchErrorAlert(e){const i=t.c("faceplate-alert",{level:t.a4.error,cause:"uncategorized",message:e});this.dispatchEvent(i)}render(){if(!this.startsAt||!this.endsAt||this.endedOver24HoursAgo())return e.x``;const{message:t,color:i}=this.getStatusMessage(),a=this.eventState===r.Scheduled,n=this.getRelativeTime().toISOString();return e.x`<div class="flex flex-row items-center text-12 h-xl ad-event-status cursor-pointer hover:opacity-80 transition-opacity" @click="${this.handleStatusClick}" role="button" tabindex="0" @keydown="${e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.handleStatusClick())}}"> <span class="${i} font-bold tracking-tight">${t}</span> <span class="me-2xs ms-2xs"></span> <span class="text-neutral-content-strong tracking-tight"> ${a?e.x`<faceplate-date locale="${e.l(this.locale)}" ts="${n}" .formatOptions="${{dateStyle:"medium",timeStyle:"short"}}"></faceplate-date>`:e.x`<faceplate-timeago ts="${n}" format="short"></faceplate-timeago>`} </span> </div>`}};l.styles=[t.t],e._([e.n({type:String,attribute:"post-id"})],l.prototype,"postId",void 0),e._([e.n({type:String,attribute:"event-state"})],l.prototype,"eventState",void 0),e._([e.n({type:String,attribute:"starts-at"})],l.prototype,"startsAt",void 0),e._([e.n({type:String,attribute:"ends-at"})],l.prototype,"endsAt",void 0),e._([e.n({type:String})],l.prototype,"locale",void 0),e._([e.n({type:Boolean,attribute:"is-reminder-set",reflect:!0})],l.prototype,"isReminderSet",void 0),e._([e.n({type:Boolean,attribute:"is-logged-in"})],l.prototype,"isLoggedIn",void 0),e._([e.n({type:Boolean,attribute:"should-fire-engaged-click"})],l.prototype,"shouldFireEngagedClick",void 0),e._([e.b()],l.prototype,"requestInProgress",void 0),l=e._([e.c("ad-event-status")],l)}));
SML.dm("CtUNJvJW",["CVEbQKiO","D7lSuCop","5NUG_JHL","DsV3drw0","CCphb8vV","BUDNGNBQ","Bpvf-mE1","B6r1xcS1","C0cJUh2F","Dc2hBnEH","Bj-TjC1H","DlFJW-AA","CbavD4mR","DYnm2Zx0","CBjCYKic","BicisKzr","DnwTtnNv","orb_Bca1","DaYYbpx8","LbrBbHYe","C7H6Jti6","DFbd5ss5","CKqHOB_v","BdwiTd4N","58f2cEWE","xsszdj8W","B7jsX14Z","MbxPF65-","gYqzC9DM","DkJsPyQM","B7NvqZE0","BmXCRIMH","DhZd_Ci9","AhHXxeIZ","BC8XSJYX","LCU6ttla","Bj8wOYTD","DJsOQMvU","B8BAxqC_","D9dm-Sy6","Mh6HSk7W","DZMRR9gi","CK47trMR","BxmAGM9T","Btl6S_1h","CCOsF7IJ","BMNJiqQ9","DEQ-l4mm","B_ByM_ya","CK9FveTr","CU4mObWU","DlWm-1vG","Cx0Ea5Jz","kExRqc7d","CBZc9Xo3","BYDFL-1r"],(async(e,t,r,n,i,s,a,o,l,m,c,h)=>{const d=t.d(e.s);let p=window.location,u=class extends d{constructor(){super(...arguments),this.commentId="",this.parentCommentPermalink="",this.postPermalink="",this.isInModQueue=!1,this.onLinkClick=(e,r)=>{this.isInModQueue&&(e.stopPropagation(),e.preventDefault(),t.p?.(t.T.ModQueuePdpLinkClick,{isFullDiscussionLink:r,parentCommentPermalink:this.parentCommentPermalink,postPermalink:this.postPermalink}))}}static get styles(){return[t.t,t.j(".single-comment-thread-toolbar {\n  align-items: center;\n  display: flex;\n  flex-flow: row nowrap;\n  font: var(--font-title-h6);\n  justify-content: space-between;\n  padding: 0.5rem 1rem;\n}\n")]}firstUpdated(){this.updateComplete.then((()=>{if(this.isInModQueue)return;"1"===new URLSearchParams(p.search).get("draft")||r.s("auto")}))}handleSeeFullDiscussionLink(e){this.onLinkClick(e,!0);const t=document.querySelector("shreddit-post");t&&this.trackEvent(n.o(t))}render(){if(!this.commentId)return;const t=this.isInModQueue?"View parent comment":"Single comment thread",r="no-underline hover:no-underline visited:no-underline text-primary";return e.x` <div> <div class="single-comment-thread-toolbar text-neutral-content-weak"> ${this.parentCommentPermalink?e.x` <a href="${this.parentCommentPermalink}" class="${r}" @click="${this.onLinkClick}"> ${t} </a> `:e.x` <span>${t}</span> `} <span class="flex-1 h-px mx-xs bg-tone-4" data-id="line"></span> <a href="${this.postPermalink}" class="${r}" @click="${this.handleSeeFullDiscussionLink}"> ${"See full discussion"} </a> </div> </div> `;}};e._([e.n({type:String,attribute:"comment-id"})],u.prototype,"commentId",void 0),e._([e.n({type:String,attribute:"parent-comment-permalink"})],u.prototype,"parentCommentPermalink",void 0),e._([e.n({type:String,attribute:"post-permalink"})],u.prototype,"postPermalink",void 0),e._([e.n({type:Boolean,attribute:"is-in-modqueue"})],u.prototype,"isInModQueue",void 0),u=e._([e.c("shreddit-comments-page-tools")],u);const E=t.d(e.s);let T=class extends E{constructor(){super(...arguments),this.postId="",this.isTruncated=!1,this.ui="mobile",this.pubsub=new t.P(this),this._searchDynamicIdCacheController=new a.S(this,t.dQ.PdpCommentHighlightedSearchTerm),this._visibilityDetails=null,this.depthUpdated=null,this.handleCommentCreated=({parentThingId:e,body:r})=>{this.postId===e&&r&&this.querySelector("#next-comment")?.after(...t.b3(r))}}static get styles(){return[t.t,t.j(":host {\n  display: block;\n  background-color: var(--shreddit-content-background);\n  padding-bottom: var(--spacer-xs);\n}\n")]}get visibilityDetails(){return null===this._visibilityDetails&&null===this.depthUpdated&&(this.depthUpdated=new Promise((e=>{requestAnimationFrame((()=>{const t=this.getVisibilityDetails();this._visibilityDetails=t,e(t)}))}))),this._visibilityDetails}getVisibilityDetails({containerWidth:e}={}){const t=this.querySelector(":scope > shreddit-comment"),r=t?.depth??0;e??(e=this.getBoundingClientRect().width);const n="mobile"===this.ui?232:320,i="mobile"===this.ui?18:32,s=this.maxDepth||("mobile"===this.ui?4:10),a=Math.floor((e-n)/i),o=Math.max(1,Math.min(a,s)),l=o+r,m=this.querySelector(":scope shreddit-comment[is-chosen-mq-comment]"),c=m?.depth??0,h=Math.max(r,c-o+1);return m?{maxVisibleDepth:h+o,minVisibleDepth:h}:{maxVisibleDepth:l}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.CommentCreated,this.handleCommentCreated),this.resizeObserver=new ResizeObserver(i.x((e=>{let t=0;for(const r of e){const e=r.contentBoxSize.at(0)?.inlineSize;if(e){t=e;break}}if(0===t)return;const r=this.getVisibilityDetails({containerWidth:t});if(this._visibilityDetails?.maxVisibleDepth!==r.maxVisibleDepth||this._visibilityDetails?.minVisibleDepth!==r.minVisibleDepth){this._visibilityDetails=r,this.depthUpdated=Promise.resolve(r);for(const e of this.querySelectorAll("shreddit-comment"))e.setVisibility(r.maxVisibleDepth,r.minVisibleDepth)}}),128,!0)),this.resizeObserver.observe(this,{box:"content-box"})}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver?.unobserve(this),this.resizeObserver?.disconnect()}showAllComments(){t.p(t.T.TriggerCommentBlockingAuth,{source:s.C.Button}),this.isTruncated=!1,this.trackEvent(i.bf())}renderShredtopViewMoreCommentsButton(r){return t.k({attributes:{type:"button",className:"ml-sm xs:ml-0 font-semibold mt-md",onclick:r},appearance:"brand",shape:"pill",leadingIcon:e.M({size:e.q.Medium}),size:t._.Small,children:"View more comments"});}renderTruncatedExpandButton(){return this.renderShredtopViewMoreCommentsButton(this.showAllComments)}renderContent(){return function(e,t){const r="Comments Section";return e` <section class="flex flex-col px-md xs:px-0 gap-md relative" aria-label="${"Comments"}"> <h1 class="absolute -top-full -start-full w-px h-px overflow-hidden" aria-label="${r}"> ${r} </h1> ${e`<slot></slot>`} ${t?"":e`<slot name="truncated"></slot>`} </section> `;}(e.x,this.isTruncated);}renderExpandButton(){return this.isTruncated?this.renderTruncatedExpandButton():""}render(){return e.x` ${this.renderContent()} ${this.renderExpandButton()} `}};e._([e.n({type:String,attribute:"post-id"})],T.prototype,"postId",void 0),e._([e.n({type:Boolean})],T.prototype,"isTruncated",void 0),e._([e.n({type:String,attribute:"ui"})],T.prototype,"ui",void 0),e._([e.n({type:Number,attribute:"max-depth"})],T.prototype,"maxDepth",void 0),T=e._([e.c("shreddit-comment-tree")],T);let S=class extends e.s{constructor(){super(),this.postId="",this.handleCommentCreated=({postId:e})=>{e===this.postId&&this.remove()},this.pubsub=new t.P(this)}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(t.T.CommentCreated,this.handleCommentCreated),t.z()!==t.aa.PostDetail&&t.z()!==t.aa.SingleCommentThread||!t.dR()||requestAnimationFrame((()=>{t.e(this,t.dS(performance.now()))}))}render(){return e.x`<slot></slot>`}};S.styles=[e.i`:host{display:contents}`,t.t],e._([e.n({type:String,attribute:"post-id"})],S.prototype,"postId",void 0),S=e._([e.c("comment-forest-empty-state")],S);let I=class extends e.s{constructor(){super(),this.target="",this.path="",this.isMobile=!1,this.isEntityFilterEnabled=!1,this.hiddenChips=[],this.isSearchActive=!1,this.amaCommentTab=null,this.commentSearch=null,this.commentSort=null,this.pubsub=new t.P(this),this.replaceComments=async({sort:e="",filter:r="",entityFilterId:n=""})=>{e!==this.getCurrentSort()&&this.updateLocation({sort:e});const i=new URL(`${location.origin}${this.path}`);e&&i.searchParams.set(o.P.Sort,e.toLowerCase()),r&&i.searchParams.set(o.P.Filter,r.toLowerCase()),n&&i.searchParams.set(o.P.EntityFilterId,n),i.searchParams.set(o.P.InlineRefresh,"true");const s=i.toString().substring(location.origin.length);this.replaceContentController.loadAndReplaceContent({src:s,target:this.target,afterSuccess:()=>t.cg(this,{message:"The comments are sorted successfully",options:{priority:t.S.assertive}}),afterFailure:()=>this.dispatchEvent(t.c("faceplate-alert",{level:t.a4.error,cause:"uncategorized",message:"Failed to load the comments."}))})},this.handleCommentFilterUpdated=({sort:e,filter:t,entityFilterId:r})=>{this.replaceComments({entityFilterId:r,filter:t??this.getCurrentFilter(),sort:e??this.getCurrentSort()})},this.handleSortEvent=async e=>{this.replaceComments({sort:e.detail.selected?.toLowerCase(),filter:this.getCurrentFilter()}),this.pubsub.publish(t.T.CommentSort,{sort:e.detail.selected});const r=this.querySelector("rpl-filter-chip[selected]"),n=this.allChip?.assignedElements()?.[0];r?.removeAttribute("selected"),n?.setAttribute("selected","")},this.handleAmaTabClick=e=>{const t=e.target?.closest("button")?.getAttribute("value");if(t){if(e instanceof KeyboardEvent&&"Enter"!==e.key)return;this.replaceComments({filter:t,sort:this.getCurrentSort()}),e.preventDefault()}},this.replaceContentController=new l.R,this.handleCommentSearchToggle=e=>{const t=e.detail.isHidden;this.isSearchActive=t;const r=this.querySelector("search-dynamic-id-cache-controller");r?.classList.toggle("min-w-full",t),this.classList.toggle("w-full",t)},this.handleSelect=e=>{if(e instanceof KeyboardEvent&&"Enter"!==e.key)return;let t=e.target?.closest("rpl-filter-chip");if(!t)return;const r=this.querySelector("rpl-filter-chip[selected]");r===t&&(t=this.allChip.assignedElements()[0]),r?.removeAttribute("selected"),t?.setAttribute("selected",""),this.handleCommentFilterUpdated({entityFilterId:t?.dataset.entityId,sort:"confidence"});const n=this.querySelector("shreddit-sort-dropdown");n?.silentlySelectItemByValue("CONFIDENCE")}}updateLocation({sort:e}){const t=new URL(location.href);t.searchParams.set(o.P.Sort,e.toLowerCase()),history.replaceState({},"",t.toString())}getCurrentFilter(){return this.querySelector("[faceplate-tab-selected]")?.getAttribute("value")?.toLowerCase()||""}getCurrentSort(){return new URLSearchParams(location.search).get(o.P.Sort)||""}connectedCallback(){super.connectedCallback(),this.commentSearch=this.querySelector('[slot="comment-search"]'),this.amaCommentTab=this.querySelector('[slot="ama-comment-tab"]'),this.commentSort=this.querySelector('[slot="comment-sort"]')}getNextBatchCount(){return 0===this.hiddenChips.length?10:Math.min(this.hiddenChips.filter(Boolean).length,10)}handleShowAllClick(){const e=this.getNextBatchCount(),t=this.hiddenChips.findIndex(Boolean)+e;this.hiddenChips=this.hiddenChips.map(((e,r)=>r>t))}renderDivider(){return this.isEntityFilterEnabled&&!this.isSearchActive?e.x`<hr class="border-neutral-border-weak my-0 mx-2xs p-0 h-xl border-[0.5px]">`:e.A}renderEntityFilterSlots(){const r=this.querySelectorAll('[slot^="entity-"]');if(!this.isEntityFilterEnabled||this.isSearchActive||0===r.length)return e.A;const n=this.getNextBatchCount(),i=0===n||this.isMobile,s=e.x` <slot name="all" @click="${this.handleSelect}" @keydown="${this.handleSelect}" class="chip all-chip flex flex-shrink-0"></slot> ${Array.from({length:r.length}).map(((t,r)=>{const n=!this.isMobile&&this.hiddenChips[r];return e.x` <slot name="entity-${r}" @click="${this.handleSelect}" @keydown="${this.handleSelect}" class="chip entity flex flex-shrink-0 ${n?"hidden":""}"></slot> `}))} ${t.k({appearance:"bordered",size:t._.Small,children:`+ ${n} more`,attributes:{className:"chip show-all-chip flex "+(i?"hidden":""),onclick:this.handleShowAllClick,type:"button"}})}`;return this.isMobile?e.x` <div class="flex gap-xs w-full overflow-x-auto hide-scrollbar">${s}</div>`:s}firstUpdated(e){super.firstUpdated(e),requestAnimationFrame((()=>{this.measureAndHideOverflow()}))}getSpaceTakenByElement(e){const t=e?.clientWidth??0;return t+(t>0?8:0)}measureAndHideOverflow(){if(!this.container)return;const e=Array.from(this.entities);if(0===e.length)return;this.hiddenChips=e.map((()=>!1));const t=this.getSpaceTakenByElement(this.stickyContainer)+this.getSpaceTakenByElement(this.allChip)+(this.showAllChip?.clientWidth??0),r=this.container.clientWidth-t;let n=0;const i=[...this.hiddenChips];let s=!1;for(let t=0;t<e.length;t++){const a=e[t],o=this.getSpaceTakenByElement(a);n+o>r&&(s=!0),i[t]=s,n+=o}this.hiddenChips=i}renderSortbar(){const r=t.x({flex:!0,"xs:ml-auto":!!this.amaCommentTab,hidden:this.isSearchActive});return this.commentSort?e.x`<slot name="comment-sort" class="${r}"></slot>`:e.A}renderSearchToggle(){return this.commentSearch?e.x`<slot name="comment-search"></slot>`:e.A}renderAMATab(){const r=t.x({flex:!0,hidden:this.isSearchActive});return this.amaCommentTab?e.x` <slot name="ama-comment-tab" @click="${this.handleAmaTabClick}" @keydown="${this.handleAmaTabClick}" class="${r}"></slot> `:e.A}renderToolbar(){const r=t.x({"toolbar-container relative bg-neutral-background flex gap-xs items-center":!0,"flex-wrap":!this.isEntityFilterEnabled,"flex-1":this.isSearchActive});return e.x` ${this.renderAMATab()} <div class="${r}"> ${this.renderSortbar()} ${this.renderSearchToggle()} ${this.renderDivider()} </div> `}renderDesktop(t){return e.x` <div class="${t}"> ${this.renderToolbar()} ${this.renderEntityFilterSlots()} </div> `}renderMobile(t){return e.x` <div class="${t}">${this.renderToolbar()}</div> ${this.renderEntityFilterSlots()} `}render(){const r=t.x({"flex gap-xs outer-container items-center flex-wrap ":!0,"w-full":!this.isMobile||this.isSearchActive,"justify-between w-full":Boolean(this.amaCommentTab)});return e.x` <div class="flex gap-xs w-full" @comment-sort="${this.handleSortEvent}" @pdp-comment-search-toggle="${this.handleCommentSearchToggle}"> ${this.isMobile?this.renderMobile(r):this.renderDesktop(r)} </div> `}};I.styles=[t.t,e.i`.hide-scrollbar{-ms-overflow-style:none;scrollbar-width:none}`],e._([e.n({type:String})],I.prototype,"target",void 0),e._([e.n({type:String})],I.prototype,"path",void 0),e._([e.n({type:Boolean,attribute:"is-mobile"})],I.prototype,"isMobile",void 0),e._([e.z(".outer-container")],I.prototype,"container",void 0),e._([e.z(".all-chip")],I.prototype,"allChip",void 0),e._([e.z(".show-all-chip")],I.prototype,"showAllChip",void 0),e._([e.X(".entity")],I.prototype,"entities",void 0),e._([e.z(".toolbar-container")],I.prototype,"stickyContainer",void 0),e._([e.n({type:Boolean,attribute:"entity-filter-enabled"})],I.prototype,"isEntityFilterEnabled",void 0),e._([e.b()],I.prototype,"hiddenChips",void 0),e._([e.b()],I.prototype,"isSearchActive",void 0),I=e._([e.c("shreddit-comments-sort-dropdown")],I);const D="expand-pdp-comment-search-button";let b=class extends e.s{constructor(){super(...arguments),this.target="",this.path="",this.showOnLoad=!1,this.initialValue="",this.isEntityFilterEnabled=!1,this.open=this.showOnLoad,this.commentSearchActive=this.showOnLoad,this.focusSearchInput=()=>{this.open||(this.open=!0),this.searchInput?.innerInput?.focus()},this.resetSearchInput=()=>{this.handleClear(),this.open=!1,c.S.update(t.dQ.PdpCommentSearch),this.commentSearchActive=!1,this.expandSearchButton?.focus()},this.replaceContentController=new l.R,this.handlePdpCommentSearch=t.u((async()=>{const e=this.searchInput?.value??"";if(e){this.commentSearchActive=!0;const r={conversationId:c.a.get(t.dQ.PdpCommentSearch),cursor:{},impressionId:c.S.getUUID(),pane:t.dT.Comments,query:e,scope:{type:t.a0.PDP,path:this.path}};this.addSearchParamsToUrl(r);const n=new URLSearchParams({...m.s(r)});t.e(this,t.b({source:"search",action:"click",noun:"full_search_button"},this.searchTelemetryData));const i=document.createElement("span");i.id=this.target,this.replaceContentController.loadAndReplaceContent({src:`/svc/shreddit${this.path}pdp-comment-search-results?${n.toString()}`,target:this.target,wrapPartialElement:e=>(i.appendChild(e),i)})}}),300),this.handleKeyDown=e=>{c.S.update(t.dQ.PdpCommentSearch),"Enter"===e.key&&e.target===this.searchInput&&this.handlePdpCommentSearch(),"Escape"===e.key&&e.target===this.searchInput&&(e.stopPropagation(),this.commentSearchActive?this.searchInput?.blur():this.resetSearchInput())},this.handleClear=()=>{this.searchInput?.value&&(this.searchInput.value="")},this.searchCommentText=()=>"Search Comments"}hideElementsVisibility(e){this.dispatchEvent(t.c("pdp-comment-search-toggle",{isHidden:e}))}connectedCallback(){super.connectedCallback(),this.commentSearchActive=this.showOnLoad,this.open=this.showOnLoad}get searchTelemetryData(){const e=this.searchInput?.value??"";return{action_info:{page_type:t.aa.PostDetail},search:{conversation_id:c.a.get(t.dQ.PdpCommentSearch),impression_id:c.S.get(t.dQ.PdpCommentSearch),query:e,query_id:c.b.get({query:e,scope:{type:t.a0.PDP,path:this.path}},t.dQ.PdpCommentSearch),origin_element:t.dU.CommentSearchBar,origin_page_type:t.aa.PostDetail}}}addSearchParamsToUrl(e){const r=location.href,n=new URL(r);n.searchParams.set(m.S.Query,e.query),n.searchParams.set(m.S.Pane,t.dT.Comments),n.searchParams.set(m.S.ConversationId,e.conversationId??c.a.get(t.dQ.PdpCommentSearch)),n.searchParams.set(m.S.ImpressionId,e.impressionId??c.S.getUUID());const i=n.toString();i!==r&&history.replaceState({},"",i)}updated(e){if(e.has("open")){const t=!e.get("open")&&this.open,r=e.get("open")&&!this.open;t?this.focusSearchInput():r&&this.expandSearchButton?.focus()}this.hideElementsVisibility(this.commentSearchActive||this.open)}renderSearchButton(){const r={"aria-controls":"pdp-comment-search-form","aria-expanded":`${this.open}`,id:D,onclick:this.focusSearchInput,type:"button"},n={appearance:"bordered",screenReaderContent:"Expand comment search"};return this.isEntityFilterEnabled?t.k({attributes:{...r,className:""+(this.open?"hidden":"")},leadingIcon:e.W({size:e.q.Small}),size:t._.Small,...n}):t.k({attributes:{...r,className:"border-neutral-border-weak hover:border-neutral-content-weak text-secondary-weak font-normal "+(this.open?"hidden":"")},children:e.x`<span class="flex pr-xs">${this.searchCommentText()}</span>`,leadingIcon:e.x`<span class="flex pl-xs">${e.W({size:e.q.Small})}</span>`,...n})}render(){return e.x`<div class="block" data-faceplate-tracking-context="${JSON.stringify(this.searchTelemetryData)}"> <faceplate-tracker source="search" action="click" noun="search_bar"> ${this.renderSearchButton()} </faceplate-tracker> <form class="flex w-full ${t.x({hidden:!this.open})}" id="pdp-comment-search-form" @submit="${this.handlePdpCommentSearch}"> <faceplate-search-input class="text-secondary-plain m-0 rounded-full outline outline-1 outline-neutral-border-weak flex-grow focus:outline-neutral-content-weak" placeholder="${this.searchCommentText()}" enterkeyhint="search" @keydown="${this.handleKeyDown}" @focus="${()=>{this.open=!0}}" value="${this.initialValue}"> ${t.k({attributes:{id:"search-input-clear-button",slot:"clearIcon",type:"button",onclick:this.handleClear},appearance:"plain",size:t._.Small,screenReaderContent:"Clear search",leadingIcon:e.ag({size:e.q.Small})})}</faceplate-search-input> ${t.k({appearance:"plain",attributes:{className:"ml-xs"+(this.commentSearchActive?" hidden":""),id:"cancel-pdp-comment-search-button",onclick:this.resetSearchInput,type:"button"},children:"Cancel"})} </form> </div>`;}};b.styles=[t.t],e._([e.n({type:String})],b.prototype,"target",void 0),e._([e.n({type:String})],b.prototype,"path",void 0),e._([e.n({attribute:"show-on-load",type:Boolean})],b.prototype,"showOnLoad",void 0),e._([e.n({type:String,attribute:"initial-value"})],b.prototype,"initialValue",void 0),e._([e.n({type:Boolean,attribute:"entity-filter-enabled"})],b.prototype,"isEntityFilterEnabled",void 0),e._([e.z(`#${D}`)],b.prototype,"expandSearchButton",void 0),e._([e.z("faceplate-search-input")],b.prototype,"searchInput",void 0),e._([e.b()],b.prototype,"open",void 0),e._([e.b()],b.prototype,"commentSearchActive",void 0),b=e._([e.c("pdp-comment-search-input")],b);let R=class extends e.s{connectedCallback(){const e=this.getFullUrl();e.includes(":~:text=")?this.goToCommentWithTextFragment(e):this.goToCommentWithId(),super.connectedCallback()}goToCommentWithId(){const e=window.location.hash;if(!e)return;const t=e.substring(1);if(!t)return;const r=`t1_${t}-comment-rtjson-content`,n=document.getElementById(r);if(!n)return;const i=document.querySelector(`shreddit-comment[thingid="t1_${t}"]`);if(!i)return;n.style.fontWeight="900";const s=i.getBoundingClientRect(),a=i.offsetHeight,o=s.top+window.pageYOffset-a/2;o>window.innerHeight&&window.scrollTo({top:o,behavior:"smooth"})}goToCommentWithTextFragment(e){document.fragmentDirective&&this.setWindowHref(e)}getFullUrl(){const e=performance.getEntriesByType("navigation");return e.length>0?e[0].name:window.location.href}setWindowHref(e){window.location.href=e}render(){return e.x``}};R=e._([e.c("comment-url-fragment-manager")],R),"enabled"===window.CLIENT_EXPERIMENTS?.shreddit_pdp_no_mod_js_lo?h.g()&&SML.di("./DCFW_W7Q.js",import.meta.url,"DCFW_W7Q"):SML.di("./DCFW_W7Q.js",import.meta.url,"DCFW_W7Q")}));
SML.dm("1mMjJrsx",["CVEbQKiO","D7lSuCop"],(async(t,i)=>{i.bD(t.i`#shreddit-media-lightbox .lightboxed-content{display:flex;align-items:center;justify-content:center;width:100%;height:100%}#shreddit-media-lightbox .non-lightboxed-content{display:none}#shreddit-media-lightbox .media-lightbox-img{max-height:none}#shreddit-media-lightbox::part(panel){max-width:100svw;max-height:100svh;width:100svw;height:100svh;border-radius:0}`);let e=class extends t.s{constructor(){super(...arguments),this._isConnected=!1,this._push=i.bE,this._lightboxUrl=void 0,this.pubsub=new i.P(this),this.templateRef=i.aE(),this.contentRef=i.aE(),this._hideCloseButtonOnIdle=!1,this.disableAnimations=!1,this.isIdle=!1,this.lightboxOpenHandler=({element:t,attributes:i={}})=>{const e=i.permalink??window.location.href;try{const s=e.startsWith("http")?e:`${window.location.origin}${e}`;this._lightboxUrl=new URL(`${s}#lightbox`),this._push(this._lightboxUrl.href,{onForwardNav:()=>this.showModal({element:t,attributes:i}),onBackNav:()=>this.dialog?.hide()})}catch(s){this.showModal({element:t,attributes:i}),window.Sentry?.captureException?.(`shreddit-media-lightbox: Error parsing permalink ${e}`,s)}},this.showModal=({element:t,attributes:e={}})=>{if(this.dialog?.open)return;const{hideCloseButtonOnIdle:s,onAfterClose:o}=e;this._hideCloseButtonOnIdle=s??!1,this._onAfterClose=o,this._originalParent=t,this._originalParentHeight=t.offsetHeight||t.parentElement?.offsetHeight,this.dialog?.showModal(),this.pubsub.publish(i.T.LightboxOpened)},this.onAfterShow=()=>{const t=document.createElement("div");t.style.height=`${this._originalParentHeight}px`,this.contentRef?.value?.replaceChildren(...(this._originalParent?.children || [])),this._originalParent?.appendChild(t),this._startIdleTimer(),this.isIdle=!1},this.lightboxCloseHandler=()=>{this.dialog?.open&&this.dialog?.hide()},this.onDialogHide=()=>{this.pubsub.publish(i.T.LightboxClosed),this.contentRef?.value?.children&&this._originalParent&&(this._originalParent.replaceChildren(...this.contentRef.value.children),this.contentRef.value.innerHTML=""),this._originalParent=void 0,this._hideCloseButtonOnIdle=!1,this._idleTimeout=void 0,this.isIdle=!1;const t=window.navigation?.currentEntry?.url!==this._lightboxUrl?.href;window.navigation?.canGoBack&&!t&&(this._lightboxUrl=void 0,window.navigation.back())},this.onAfterHide=()=>{this._onAfterClose&&(this._onAfterClose(),this._onAfterClose=void 0)},this._startIdleTimer=()=>{this._hideCloseButtonOnIdle&&(this._stopIdleTimer(),this._idleTimeout=window.setTimeout((()=>{this.isIdle=!0}),1500))}}static get styles(){return[i.t]}connectedCallback(){super.connectedCallback();Array.from(document.getElementsByTagName("shreddit-media-lightbox")).some((t=>t._isConnected))||(this._isConnected=!0,this.pubsub.subscribe(i.T.LightboxOpen,this.lightboxOpenHandler,!1),this.pubsub.subscribe(i.T.LightboxClose,this.lightboxCloseHandler,!1))}firstUpdated(){this.dialog&&this.disableAnimations&&function(t){const e={keyframes:[],options:{duration:0}};["dialog.show","dialog.hide","dialog.denyClose","dialog.overlay.show","dialog.overlay.hide"].forEach((s=>{i.bF(t,s,e)}))}(this.dialog)}disconnectedCallback(){super.disconnectedCallback(),this._isConnected&&(this.dialog?.open&&this.dialog?.hide(),this._isConnected=!1)}_stopIdleTimer(){window.clearTimeout(this._idleTimeout),this._idleTimeout=void 0,this.isIdle=!1}render(){if(this._isConnected){const e=t.x`<div data-testid="lightbox-template" class="relative h-full w-full" @mousemove="${this._startIdleTimer}" @click="${this._startIdleTimer}" @keydown="${this._startIdleTimer}" ${i.aq(this.templateRef)}> <div data-testid="lightbox-template-content" class="h-full w-full max-h-dvh" ${i.aq(this.contentRef)}></div> ${i.k({size:i._.Large,appearance:"media",shape:"pill",attributes:{"data-testid":"close-button",className:"absolute top-sm right-sm z-10 duration-300 "+(this.isIdle?"opacity-0 invisible":"opacity-100"),"aria-label":"Close lightbox",onclick:()=>{this.dialog?.hide()}},children:t.V({size:t.q.Medium})})} </div>`;return t.x` <rpl-dialog dialog-id="${"shreddit-media-lightbox"}" @rpl-dialog:after-show="${this.onAfterShow}" @rpl-dialog:hide="${this.onDialogHide}" @rpl-dialog:after-hide="${this.onAfterHide}" .litTemplateChildren="${e}"> </rpl-dialog> `}return""}};t._([t.n({type:Boolean,attribute:"disable-animations"})],e.prototype,"disableAnimations",void 0),t._([t.b()],e.prototype,"isIdle",void 0),t._([t.z("rpl-dialog")],e.prototype,"dialog",void 0),e=t._([t.c("shreddit-media-lightbox")],e);let s=class extends t.s{constructor(){super(...arguments),this.pubsub=new i.P(this),this.handleInteraction=t=>{i.a(t)&&this.openLightbox()},this.handleTrigger=({postId:t})=>{t===this.postId&&this.openLightbox()},this.openLightbox=()=>{this.pubsub.publish(i.T.LightboxOpen,{element:this,attributes:{permalink:this.permalink}})}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(i.T.TriggerLightboxOpen,this.handleTrigger,!1)}render(){return t.x`<slot @click="${this.handleInteraction}" @keypress="${this.handleInteraction}"></slot>`}};s.styles=[t.i`:host{cursor:pointer}`,i.t],t._([t.n({type:String,attribute:"post-id"})],s.prototype,"postId",void 0),t._([t.n({type:String,attribute:"permalink"})],s.prototype,"permalink",void 0),s=t._([t.c("shreddit-media-lightbox-listener")],s)}));
SML.dm("DonBeKRF",["CVEbQKiO","D7lSuCop","CCphb8vV"],(async(e,t,i)=>{let s=class extends e.s{constructor(){super(...arguments),this.zoomedIn=!1,this.disabled=!1,this.media=null,this._events=new t.E(this),this._click=this._events.define("click",this.onClick),this.fullImageWidth=0,this.fullImageHeight=0,this.checkMediaSize=()=>{this.media?.complete&&(this.fullImageWidth=this.media.naturalWidth,this.fullImageHeight=this.media.naturalHeight,this.disabled=this.fullImageWidth<=this.clientWidth&&this.fullImageHeight<=this.clientHeight,this.zoomedIn=!this.disabled&&this.zoomedIn)},this.checkMediaSizeDebounced=t.u(this.checkMediaSize,100)}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.media=this.querySelector("img"),this.media&&this.media.addEventListener("load",this.checkMediaSize,{once:!0}),requestAnimationFrame(this.checkMediaSize),window.addEventListener("resize",this.checkMediaSizeDebounced)}firstUpdated(){this.checkMediaSize()}onClick(e){if(this.media&&e.target===this.media&&!this.disabled){let t=0,i=0;if(!this.zoomedIn){const s=this.media.getBoundingClientRect(),h=e.clientX-s.left,l=e.clientY-s.top,d=h/s.width*100,a=l/s.height*100;i=this.fullImageWidth*d/100-this.clientWidth/2,t=this.fullImageHeight*a/100-this.clientHeight/2}this.zoomedIn=!this.zoomedIn,requestAnimationFrame((()=>{this.scrollTo({top:t,left:i})}))}}render(){this.media&&this.media.setAttribute("class",this.getChildClassList()),this.setAttribute("class",this.getClasslist())}getClasslist(){return i.l("flex",this.zoomedIn?"fixed top-0 left-0 w-screen h-screen overflow-auto":"w-full h-full justify-center items-center overflow-hidden")}getChildClassList(){return i.l("z-1",this.disabled?"max-h-full max-w-full":this.zoomedIn?"max-w-none max-h-none m-auto cursor-zoom-out":"max-h-full max-w-full object-contain cursor-zoom-in")}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this.checkMediaSizeDebounced),this.zoomedIn=!1}};e._([e.b()],s.prototype,"zoomedIn",void 0),e._([e.b()],s.prototype,"disabled",void 0),s=e._([e.c("zoomable-img")],s)}));

SML.dm("BBEDSIIS",["D7lSuCop"],(async e=>{var _,n,t;function E({subredditId:e,subredditName:_}){return{id:e,name:_}}function i({isEnabled:_}){return{page_type:e.z(),reason:_?"on":"off"}}!function(e){e.MODERATOR="moderator",e.COMMUNITY_GUIDE="community_guide"}(_||(_={})),function(e){e.VIEW="view",e.CLICK="click"}(n||(n={})),function(e){e.GUIDE_TOGGLE="community_guide_toggle",e.SHOW_ON_JOIN_TOGGLE="show_on_join_toggle",e.HEADER_LAYOUT_EDIT="header_layout_edit",e.HEADER_BANNER_EDIT="header_banner_edit",e.WELCOME_MESSAGE_EDIT="welcome_message_edit",e.USER_FLAIR_EDIT="user_flair_edit",e.COMMUNITY_RESOURCES_EDIT="community_resources_edit",e.COMMUNITY_RESOURCE_LINK="resource_link",e.GUIDE="guide",e.CLOSE="close",e.OPEN="open"}(t||(t={}));const r=(_,n,t)=>r=>e.b({source:_,action:n,noun:t},{action_info:i(r),subreddit:E(r)});const o=r(_.MODERATOR,n.CLICK,t.GUIDE_TOGGLE),u=r(_.MODERATOR,n.CLICK,t.SHOW_ON_JOIN_TOGGLE);return{get A(){return n},get N(){return t},get S(){return _},a:u,c:o,g:function(e,_){return JSON.stringify({subreddit:{id:e,name:_}})}}}));
SML.dm("Csfdzp9J",[],(async()=>{var t;!function(t){t.Main="main",t.TextArea="text-area",t.Button="button",t.SubredditRules="subreddit-rules",t.Image="image",t.CommunityList="community-list",t.Calendar="calendar",t.Custom="custom",t.IdCard="id-card",t.PostFlair="post-flair",t.Menu="menu"}(t||(t={}));const e={[t.Main]:"",[t.TextArea]:"text_widget",[t.Button]:"button_widget",[t.SubredditRules]:"rules_widget",[t.Image]:"image_widget",[t.CommunityList]:"community_list_widget",[t.Calendar]:"calendar_widget",[t.Custom]:"custom_widget",[t.IdCard]:"id_card",[t.PostFlair]:"post_flair_widget",[t.Menu]:"bookmarks_widget"};return{C:"community-widget-edit-modal",get E(){return t},W:e}}));
SML.dm("n7e08_Ku",["D7lSuCop"],(async t=>{const a={[t.ae.Card]:{get description(){return "Card";}},[t.ae.Compact]:{get description(){return "Compact";}},[t.ae.Classic]:{get description(){return "Compact";}}};var o;return function(t){t.MANUAL="manual",t.AUTOMATIC="automatic"}(o||(o={})),{get B(){return o},C:"/svc/shreddit/:subredditName/community-highlights",F:a,P:"post-deletion-modal",S:"subreddit-mute-modal",a:"subreddit-right-rail__partial"}}));
SML.dm("IdVz6a93",["CVEbQKiO","D7lSuCop"],(async(t,e)=>{let o=class extends t.s{constructor(){super(...arguments),this.feature="",this.routeParams="",this.queryParams="",this.dialogId="",this.dialogContentId="",this.featureRootSelector=""}parseParams(t){try{return JSON.parse(t)}catch{return}}async showModal(){await e.f({name:this.feature,routeParams:this.parseParams(this.routeParams),queryParams:this.parseParams(this.queryParams),renderMode:e.g.Contents,root:this.featureRootSelector?document.querySelector(this.featureRootSelector)??document:document});const t=document.querySelector(`rpl-dialog#${this.dialogId}`),o=new CustomEvent("custom-feed-edit-button:dialog-loaded",{detail:{dialog:t}});this.dispatchEvent(o);const r=()=>t.portalContainer,a=()=>{const t=r();return t?.querySelectorAll('[slot="close-button"]')??[]},s=()=>t.hide(),i=()=>{a().forEach((t=>{t.addEventListener("click",s)})),r()?.addEventListener("close-dialog",s)};t.open?i():(t.addEventListener("rpl-dialog:after-show",i),t.showModal()),t.addEventListener("rpl-dialog:hide",(()=>{a().forEach((t=>{t.removeEventListener("click",s)})),r()?.removeEventListener("close-dialog",s)}))}handleKeyDown(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this.showModal())}render(){return t.x`<slot @click="${this.showModal}" @keydown="${this.handleKeyDown}"></slot>`}};o.styles=[e.t],t._([t.n({type:String})],o.prototype,"feature",void 0),t._([t.n({type:String,attribute:"route-params"})],o.prototype,"routeParams",void 0),t._([t.n({type:String,attribute:"query-params"})],o.prototype,"queryParams",void 0),t._([t.n({type:String,attribute:"dialog-id"})],o.prototype,"dialogId",void 0),t._([t.n({type:String,attribute:"dialog-content-id"})],o.prototype,"dialogContentId",void 0),t._([t.n({type:String,attribute:"feature-root-selector"})],o.prototype,"featureRootSelector",void 0),o=t._([t.c("custom-feed-edit-button")],o)}));
SML.dm("BLzu98I8",["CVEbQKiO","D7lSuCop","CK9FveTr","n7e08_Ku","CCphb8vV","IdVz6a93","DEQ-l4mm","B_ByM_ya"],(async(e,i,t,a,s)=>{var n,o,r;!function(e){e.Everywhere="GLOBAL",e.UnitedStates="US",e.Argentina="AR",e.Australia="AU",e.Bulgaria="BG",e.Canada="CA",e.Chile="CL",e.Colombia="CO",e.Croatia="HR",e.CzechRepublic="CZ",e.Finland="FI",e.France="FR",e.Germany="DE",e.Greece="GR",e.Hungary="HU",e.Iceland="IS",e.India="IN",e.Ireland="IE",e.Italy="IT",e.Japan="JP",e.Malaysia="MY",e.Mexico="MX",e.NewZealand="NZ",e.Philippines="PH",e.Poland="PL",e.Portugal="PT",e.PuertoRico="PR",e.Romania="RO",e.Serbia="RS",e.Singapore="SG",e.Spain="ES",e.Sweden="SE",e.Taiwan="TW",e.Thailand="TH",e.Turkey="TR",e.UnitedKingdom="GB"}(n||(n={})),function(e){e.AllStates="",e.Alaska="AK",e.Alabama="AL",e.Arkansas="AR",e.Arizona="AZ",e.California="CA",e.Colorado="CO",e.Connecticut="CT",e.DistrictOfColumbia="DC",e.Delaware="DE",e.Florida="FL",e.Georgia="GA",e.Hawaii="HI",e.Iowa="IA",e.Idaho="ID",e.Illinois="IL",e.Indiana="IN",e.Kansas="KS",e.Kentucky="KY",e.Louisiana="LA",e.Massachusetts="MA",e.Maryland="MD",e.Maine="ME",e.Michigan="MI",e.Minnesota="MN",e.Missouri="MO",e.Mississippi="MS",e.Montana="MT",e.NorthCarolina="NC",e.NorthDakota="ND",e.Nebraska="NE",e.NewHampshire="NH",e.NewJersey="NJ",e.NewMexico="NM",e.Nevada="NV",e.NewYork="NY",e.Ohio="OH",e.Oklahoma="OK",e.Oregon="OR",e.Pennsylvania="PA",e.RhodeIsland="RI",e.SouthCarolina="SC",e.SouthDakota="SD",e.Tennessee="TN",e.Texas="TX",e.Utah="UT",e.Virginia="VA",e.Vermont="VT",e.Washington="WA",e.Wisconsin="WI",e.WestVirginia="WV",e.Wyoming="WY"}(o||(o={})),function(e){e.Show="show",e.Close="close"}(r||(r={}));const d="enabled_copy1",l="enabled_copy2",u=({notificationLevel:e,hfnUxUpdatesVariant:t,isUpdatesAllEnabled:a})=>{switch(e){case i.ex.All:return "All new posts";case i.ex.Frequent:return ((e,i)=>{if(i)return "Popular posts";switch(e){case d:return "Frequent notifications";case l:return "All notifications";default:return "Frequent";}})(t,a);case i.ex.Low:return (e=>{switch(e){case d:return "Allow notifications";case l:return "Personalized notifications";default:return "Low";}})(t);case i.ex.Off:return ((e,i)=>{const t="Off";return i?t:e===d||e===l?"None":t;})(t,a);default:return""}},N=(t,a,s)=>{switch(t){case i.ex.All:return a?.filled?e.c3(a?.iconProps):e.c4(a?.iconProps);case i.ex.Frequent:return s?a?.filled?e.c2(a?.iconProps):e.b$(a?.iconProps):a?.filled?e.c3(a?.iconProps):e.c4(a?.iconProps);case i.ex.Low:return a?.filled?e.c2(a?.iconProps):e.b$(a?.iconProps);case i.ex.Off:return a?.filled?e.c0(a?.iconProps):e.c1(a?.iconProps);default:return e.b$(a?.iconProps)}},p=({notificationLevel:e,hfnUxUpdatesVariant:t,isUpdatesAllEnabled:a})=>{switch(e){case i.ex.All:return "Notifications set to All new posts";case i.ex.Frequent:return ((e,i)=>{if(i)return "Notifications set to Popular posts";switch(e){case d:case l:return "All notifications are turned on";default:return "Notifications set to frequent";}})(t,a);case i.ex.Low:return (e=>{switch(e){case d:return "Notifications are now allowed";case l:return "Personalized notifications are on";default:return "Notifications set to low";}})(t);case i.ex.Off:return ((e,i)=>{const t="Notifications turned off";return i?t:e===d||e===l?"No notifications":t;})(t,a);default:return""}},c=(e,t)=>t?e===i.ex.Low?i.ex.Off:e:e===i.ex.All?i.ex.Frequent:e,h=async e=>{const t=await i.v({operation:i.O.UpdateSubredditSubscriptions,variables:{input:{inputs:[e]}}});if(!t?.data?.updateSubredditSubscriptions?.ok)throw new Error("Failed to update subreddit subscription")};let m=class extends e.s{constructor(){super(...arguments),this.name="",this.prefixedName="",this.subredditId="",this.isMuted=!1,this.isFavorite=!1,this.subscribed=!1,this.showJoinButton=!1,this.isUserLoggedIn=!1,this.buttonSize=i._.Small,this.iconSize=e.q.Small,this.isCustomFeedEnabled=!1,this.isDropdownOpen=!1,this.isDisabled=!1,this.pubsub=new i.P(this),this.onFavoriteButtonClick=this.disableButtonDuringExecution((async()=>{try{this.subscribed||(await h({subredditId:this.subredditId,subscribeState:i.ey.Subscribed}),this.handleSubscriptionChange(i.ey.Subscribed));const e=this.isFavorite?i.aJ.None:i.aJ.Favorited;await(async e=>{const t=await i.v({operation:i.O.UpdateSubredditFavoriteState,variables:{input:e}});if(!t?.data?.updateSubredditFavoriteState?.ok)throw new Error("Failed to update subreddit favorite state")})({subredditId:this.subredditId,favoriteState:e}),this.handleFavoriteStateChange(e)}catch(e){this.dispatchEvent(i.c("faceplate-alert",{level:i.a4.error,message:"Something went wrong",cause:i.bt(e)}))}})),this.onUnmuteButtonClick=this.disableButtonDuringExecution((async()=>{try{await(async e=>{const t=await i.v({operation:i.O.DeleteSubredditMuteSettings,variables:{input:e}});if(!t?.data?.deleteSubredditMuteSettings?.ok)throw new Error("Failed to unmute subreddit")})({subredditId:this.subredditId}),this.handleUnmuteChange()}catch(e){this.dispatchEvent(i.c("faceplate-alert",{level:i.a4.error,message:"Something went wrong",cause:i.bt(e)}))}})),this.onJoinButtonClick=this.disableButtonDuringExecution((async e=>{try{e===i.ey.Subscribed&&i.ez(this.name).catch((()=>{})),await h({subredditId:this.subredditId,subscribeState:e}),this.handleSubscriptionChange(e)}catch(e){this.dispatchEvent(i.c("faceplate-alert",{level:i.a4.error,message:"Something went wrong",cause:i.bt(e)}))}})),this.activateFeature=i.f}static get styles(){return[i.t]}firstUpdated(){this.pubsub.subscribe(i.T.SubredditSubscriptionChange,(e=>{this.name===e.name&&(this.subscribed=e.subscribed)})),this.pubsub.subscribe(i.T.SubredditMuteStatusChange,(e=>{this.subredditId===e.subredditId&&(this.isMuted=e.isMuted)})),this.addToCustomFeedButton?.addEventListener("custom-feed-edit-button:dialog-loaded",this.setupAddToCustomFeedButtonListeners)}disconnectedCallback(){super.disconnectedCallback()}disableButton(){this.isDisabled=!0}enableButton(){this.isDisabled=!1}disableButtonDuringExecution(e){return async(...i)=>{this.disableButton(),await e(...i),this.enableButton()}}setupAddToCustomFeedButtonListeners(){const e=document.querySelector("rpl-dialog#custom-feed-add-modal");if(!e)return;const i=()=>{e.portalContainer.querySelector("custom-feed-edit-button")?.addEventListener("custom-feed-edit-button:dialog-loaded",(()=>{e.hide()}))};e.open?i():e.addEventListener("rpl-dialog:after-show",i)}handleFavoriteStateChange(t){this.isFavorite=t===i.aJ.Favorited,i.p(i.T.SubredditFavoriteStatusChange,{id:this.subredditId,isFavorite:this.isFavorite});const a=this.isFavorite?`Added ${this.prefixedName} to favorites`:`Removed ${this.prefixedName} from favorites`;this.dispatchEvent(i.c("faceplate-alert",{level:i.a4.info,message:a,namedContent:{action:e.x``}}))}handleUnmuteChange(){this.isMuted=!1,i.p(i.T.SubredditMuteStatusChange,{subredditId:this.subredditId,isMuted:!1}),this.dispatchEvent(i.c("faceplate-alert",{level:i.a4.info,message:`Unmuted ${this.prefixedName}`,namedContent:{action:e.x``}}))}handleSubscriptionChange(e){this.subscribed=e===i.ey.Subscribed,i.p(i.T.SubredditSubscriptionChange,{name:this.name,subscribed:this.subscribed})}async openMuteConfirmationModal(){await this.activateFeature({name:i.eA});const e=document.getElementById(a.S);e?.openModal({subredditId:this.subredditId,prefixedName:this.prefixedName,onMuteRequestStart:this.disableButton.bind(this),onMuteRequestEnd:this.enableButton.bind(this)})}onDropdownOpen(){this.isDropdownOpen=!0}onDropdownClose(){this.isDropdownOpen=!1}renderAddToCustomFeedButton(){return this.isCustomFeedEnabled?e.x` <custom-feed-edit-button class="nd:visible" feature="${i.eB}" dialog-id="custom-feed-add-modal" query-params="${JSON.stringify({subredditId:this.subredditId})}"> ${t.l({label:"Add to custom feed",attributes:{tabindex:"0"}})} </custom-feed-edit-button> `:e.A;}renderFavoriteButton(){const e=this.isFavorite?"Remove from favorites":"Add to favorites";return t.l({label:e,onClick:this.onFavoriteButtonClick})}renderMuteButton(){if(!this.prefixedName)return"";const i=this.isMuted?`Unmute ${this.prefixedName}`:`Mute ${this.prefixedName}`,a=this.isMuted?"unmute":"mute",s=this.isMuted?this.onUnmuteButtonClick:this.openMuteConfirmationModal;return e.x` <faceplate-tracker source="subreddit_muting" action="${a}" noun="subreddit"> ${t.l({label:i,onClick:s})} </faceplate-tracker>`}renderJoinButton(){const a=this.subscribed?"Leave":"Join",s=this.subscribed?"unsubscribe":"subscribe",n=this.subscribed?i.ey.None:i.ey.Subscribed;return e.x`<faceplate-tracker source="community" action="click" noun="${s}"> ${t.l({label:a,onClick:()=>this.onJoinButtonClick(n)})} </faceplate-tracker>`}render(){return e.x`<faceplate-dropdown-menu class="nd:hidden" position="bottom-end" .onopen="${this.onDropdownOpen}" .onclose="${this.onDropdownClose}"> ${i.k({appearance:"bordered",attributes:{"aria-label":"Open overflow menu",disabled:this.isDisabled},size:this.buttonSize,leadingIcon:e.ay({size:this.iconSize}),selected:this.isDropdownOpen})} <faceplate-menu slot="menu" class="max-h-[18rem] overflow-auto nd:hidden" hidden> ${this.isUserLoggedIn?e.x` ${[this.renderAddToCustomFeedButton(),this.renderFavoriteButton(),this.renderMuteButton()]} ${this.showJoinButton?this.renderJoinButton():""} `:""} <slot name="devvit-context-actions"></slot> </faceplate-menu> </faceplate-dropdown-menu>`;}};e._([e.n({type:String})],m.prototype,"name",void 0),e._([e.n({type:String,attribute:"prefixed-name"})],m.prototype,"prefixedName",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],m.prototype,"subredditId",void 0),e._([e.n({type:Boolean,attribute:"is-muted"})],m.prototype,"isMuted",void 0),e._([e.n({type:Boolean,attribute:"is-favorite"})],m.prototype,"isFavorite",void 0),e._([e.n({type:Boolean,attribute:"subscribed"})],m.prototype,"subscribed",void 0),e._([e.n({type:Boolean,attribute:"show-join-button"})],m.prototype,"showJoinButton",void 0),e._([e.n({type:Boolean,attribute:"is-user-logged-in"})],m.prototype,"isUserLoggedIn",void 0),e._([e.n({type:String,attribute:"button-size"})],m.prototype,"buttonSize",void 0),e._([e.n({type:String,attribute:"icon-size"})],m.prototype,"iconSize",void 0),e._([e.n({type:Boolean,attribute:"allow-custom-feed"})],m.prototype,"isCustomFeedEnabled",void 0),e._([e.b()],m.prototype,"isDropdownOpen",void 0),e._([e.b()],m.prototype,"isDisabled",void 0),e._([e.z(`custom-feed-edit-button[feature="${i.eB}"]`)],m.prototype,"addToCustomFeedButton",void 0),m=e._([e.c("shreddit-subreddit-overflow-control")],m);let f=class extends m{render(){if(!this.prefixedName)return e.x``;const i=this.isMuted?e.bP({size:this.iconSize}):e.c5({size:this.iconSize}),a=this.isMuted?"Unmute":"Mute",s=this.isMuted?"Show everything from this community":"Hide everything from this community",n=e.x` <div> <div>${a}</div> <div class="mt-0.5 text-12 text-secondary-weak">${s}</div> </div> `,o=this.isMuted?e.F({size:this.iconSize}):"",r=this.isMuted,d=this.isMuted?"unmute":"mute",l=this.isMuted?this.onUnmuteButtonClick:this.openMuteConfirmationModal;return e.x` <faceplate-tracker source="subreddit_muting" action="${d}" noun="subreddit"> ${t.l({label:n,leadingIcon:i,trailingSlot:o,selected:r,onClick:l,attributes:{role:"menuitem","aria-label":a}})} </faceplate-tracker> `}};f=e._([e.c("shreddit-notification-mute-control")],f);const I=[i.ex.Frequent,i.ex.Low,i.ex.Off],b=[i.ex.All,i.ex.Frequent,i.ex.Off];let k=class extends e.s{constructor(){super(...arguments),this.subredditId="",this.notificationLevel=i.ex.Low,this.buttonSize=i._.Small,this.iconSize=e.q.Small,this.hfnUxUpdatesVariant="",this.isUpdatesAllEnabled=!1,this.prefixedName="",this.isMuted=!1,this.isDropdownOpen=!1,this.isDisabled=!1,this.pubsub=new i.P(this)}static get styles(){return[i.t]}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(i.T.SubredditMuteStatusChange,(e=>{this.subredditId===e.subredditId&&(this.isMuted=e.isMuted)})),this.notificationLevel=c(this.notificationLevel,this.isUpdatesAllEnabled)}async onItemSelect(e){if(this.notificationLevel!==e){this.isDisabled=!0;try{const t=(e=>{switch(e){case i.ex.Frequent:return{isSubredditUpdatesInterestingPostEnabled:!0,isUpdateFromSubredditEnabled:!0};case i.ex.Low:return{isSubredditUpdatesInterestingPostEnabled:!1,isUpdateFromSubredditEnabled:!0};case i.ex.Off:default:return{isSubredditUpdatesInterestingPostEnabled:!1,isUpdateFromSubredditEnabled:!1}}})(e),a=await this.updateSubredditNotificationLevel(t,e);a?.data?.updateSubredditMuteAndNotificationLevelSettings?.ok?(this.notificationLevel=c(e,this.isUpdatesAllEnabled),this.handleUpdateSuccess(e)):this.handleUpdateError(e)}catch(i){this.handleUpdateError(e)}this.isDisabled=!1}}async updateSubredditNotificationLevel(e,t=i.ex.Off){return i.v({operation:i.O.UpdateSubredditMuteAndNotificationLevelSettings,variables:{input:{subredditId:this.subredditId,...e,subredditNotificationLevel:t}}})}handleUpdateSuccess(t){this.dispatchEvent(i.c("faceplate-alert",{level:i.a4.success,message:p({notificationLevel:t,hfnUxUpdatesVariant:this.hfnUxUpdatesVariant,isUpdatesAllEnabled:this.isUpdatesAllEnabled}),namedContent:{icon:N(t,{iconProps:{size:e.q.Medium}},this.isUpdatesAllEnabled)??e.x``,action:e.x``}}))}handleUpdateError(t){const a=()=>this.pubsub.publish(i.T.TriggerFeedErrorBanner,{type:r.Close}),n=e.x`<div slot="leadingIcon">${e.bb()}</div>`,o=e.x`<span slot="closeButton"> ${s.b6("plainInverted",{"aria-label":"close button",onclick:a})} </span>`,d=e.x` <div slot="actionButtons"> ${s.bi([{children:"Retry",attributes:{onclick:()=>{a(),this.onItemSelect(t)}}}],"plainInverted")} </div>`,l={msg:"Error updating notifications",className:"my-lg",appearance:"plainInverted",shape:"rounded",children:e.x` ${n} ${d} ${o} `};this.pubsub.publish(i.T.TriggerFeedErrorBanner,{type:r.Show,data:l})}onDropdownOpen(){this.isDropdownOpen=!0}onDropdownClose(){this.isDropdownOpen=!1}render(){const a=this.isUpdatesAllEnabled?b:I,s=this.hfnUxUpdatesVariant===d||this.hfnUxUpdatesVariant===l,n=s&&this.isMuted?e.bP({size:this.iconSize}):N(this.notificationLevel||i.ex.Low,{filled:!0,iconProps:{size:this.iconSize}},this.isUpdatesAllEnabled);return e.x`<faceplate-dropdown-menu class="nd:hidden" position="bottom-end" .onopen="${this.onDropdownOpen}" .onclose="${this.onDropdownClose}"> ${i.k({appearance:"bordered",size:this.buttonSize,attributes:{disabled:this.isDisabled,role:"button","aria-label":"Notification frequency menu"},leadingIcon:n,selected:this.isDropdownOpen})} <faceplate-menu slot="menu" hidden> ${a.map((i=>{const a=i.toLowerCase();let n=!1,o=this.notificationLevel===i,r="";s&&(n=this.isMuted,o&&(o=!n),o&&(r=e.F({size:this.iconSize})));const d=u({notificationLevel:i,hfnUxUpdatesVariant:this.hfnUxUpdatesVariant,isUpdatesAllEnabled:this.isUpdatesAllEnabled});return e.x` <faceplate-tracker source="community" action="set_frequency" noun="${a}"> ${t.l({label:d,leadingIcon:N(i,{filled:o},this.isUpdatesAllEnabled),trailingSlot:r,selected:o,disabled:n,attributes:{role:"menuitem","aria-label":`Notifications ${d}`},onClick:()=>this.onItemSelect(i)})} </faceplate-tracker>`;}))} ${s?e.x` <div class="rpl-divider my-1 h-px bg-neutral-border" role="separator"></div> <shreddit-notification-mute-control prefixed-name="${this.prefixedName}" subreddit-id="${this.subredditId}" ?is-muted="${this.isMuted}" icon-size="${this.iconSize}"></shreddit-notification-mute-control>`:e.x``} </faceplate-menu> </faceplate-dropdown-menu>`;}};return e._([e.n({type:String,attribute:"subreddit-id"})],k.prototype,"subredditId",void 0),e._([e.n({type:String,attribute:"notification-level"})],k.prototype,"notificationLevel",void 0),e._([e.n({type:String,attribute:"button-size"})],k.prototype,"buttonSize",void 0),e._([e.n({type:String,attribute:"icon-size"})],k.prototype,"iconSize",void 0),e._([e.n({type:String,attribute:"hfn-ux-updates-variant"})],k.prototype,"hfnUxUpdatesVariant",void 0),e._([e.n({type:Boolean,attribute:"is-updates-all-enabled"})],k.prototype,"isUpdatesAllEnabled",void 0),e._([e.n({type:String,attribute:"prefixed-name"})],k.prototype,"prefixedName",void 0),e._([e.n({type:Boolean,attribute:"is-muted"})],k.prototype,"isMuted",void 0),e._([e.b()],k.prototype,"isDropdownOpen",void 0),e._([e.b()],k.prototype,"isDisabled",void 0),k=e._([e.c("shreddit-notification-frequency-control")],k),{get F(){return r}}}));
SML.dm("CBikhtU2",["CVEbQKiO","D7lSuCop","Csfdzp9J"],(async(t,e,i)=>{let d=class extends t.s{constructor(){super(...arguments),this.subredditName="",this.pageId=i.E.Main,this.openModal=async()=>{await this._activateCommunityWidgetEditModalFeature();const t=document.querySelector(`community-widget-edit-modal#${i.C}`);t?.showModal({pageId:this.pageId,widgetId:this.widgetId})},this.onClick=()=>{this.openModal()},this.onKeyPress=t=>{"Enter"!==t.key&&"Space"!==t.key||this.openModal()}}static get styles(){return[e.t]}_activateCommunityWidgetEditModalFeature(){return e.f({name:e.B,routeParams:{subreddit:this.subredditName}})}render(){return t.x`<slot @click="${this.onClick}" @keypress="${this.onKeyPress}"></slot>`}};t._([t.n({type:String,attribute:"subreddit-name"})],d.prototype,"subredditName",void 0),t._([t.n({type:String,attribute:"page-id"})],d.prototype,"pageId",void 0),t._([t.n({type:String,attribute:"widget-id"})],d.prototype,"widgetId",void 0),d=t._([t.c("community-widget-edit-button")],d)}));
SML.dm("gecfOyN6",["CVEbQKiO","D7lSuCop","BBEDSIIS","Csfdzp9J","CCphb8vV","BLzu98I8","CBikhtU2","gYqzC9DM","CK9FveTr","n7e08_Ku","IdVz6a93","DEQ-l4mm","CK47trMR","B_ByM_ya","DkJsPyQM"],(async(t,e,n,s,a)=>{const i="line-clamp-3",r="hidden",o="description",u="show-more-btn";const l=e.d(t.s);let c=class extends l{constructor(){super(...arguments),this.name="",this.subredditId="",this.prefixedName="",this.displayName="",this.description="",this.subscribers=0,this.bannerUrl="",this.routerName="",this.bannerFallbackBackgroundColor="",this.notificationLevel="",this.idCardWidgetId="",this.subscribersText="",this.currentlyViewingText="",this.weeklyActiveUsersCount=0,this.weeklyContributionsCount=0,this.isActivityIndicatorsEnabled=!1,this.isModerator=!1,this.hasModqueueAccess=!1,this.isSubscribed=!1,this.isMuted=!1,this.isFavorite=!1,this.isUserLoggedIn=!1,this.isPdpRoute=!1,this.newBannerExperimentEnabled=!1,this.allowIdCardEdit=!1,this.isCustomFeedEnabled=!1,this.active=0,this.hasCommunityGuide=!1,this.isCommunityGuideExperimentEnabled=!1,this.isModInsightsWidgetExperimentEnabled=!1,this.isModOnboardingGuidesExperimentEnabled=!1,this.isRedesign=!1,this.hfnUxUpdatesVariant="",this.isUpdatesAllEnabled=!1,this.pubsub=new e.P(this),this._activateFeature=async t=>e.f(t),this._getPageType=e.z,this.onSubscriptionChange=async t=>{let n;this.name===t.name&&(n=t.subscribed&&this.isSubscribed!==t.subscribed,this.isSubscribed=t.subscribed),n&&this.isPdpRoute&&this.isUserLoggedIn&&this.subredditId&&(await this._activateFeature({name:e.ft,queryParams:{subredditId:this.subredditId,pageType:String(this._getPageType())}}))},this.renderJoinOrModButton=()=>{if(!this.newBannerExperimentEnabled||this.isPdpRoute)return this.isModerator?e.k({appearance:"primary",size:e._.Small,attributes:{href:this.hasModqueueAccess?`/mod/${this.name}/queue`:`/mod/${this.name}/insights`,className:"modtools-btn"},children:"Mod Tools"}):t.x`<faceplate-tracker source="community" action="click" noun="${this.isSubscribed?"unsubscribe":"subscribe"}" data-faceplate-tracking-context="${JSON.stringify({subreddit:{id:this.subredditId,name:this.name}})}"> <shreddit-join-button name="${this.name}" subreddit-id="${this.subredditId}" button-classes="min-w-[70px]" subscribe-label="${"Join"}" unsubscribe-label="${"Joined"}" unsubscribe-button-type-override="bordered" ?subscribed="${this.isSubscribed}"></shreddit-join-button></faceplate-tracker>`;},this.renderNotificationControl=()=>this.isSubscribed?t.x` <shreddit-notification-frequency-control subreddit-id="${this.subredditId}" notification-level="${this.notificationLevel}" hfn-ux-updates-variant="${t.l(this.hfnUxUpdatesVariant)}" ?is-updates-all-enabled="${this.isUpdatesAllEnabled}" prefixed-name="${this.prefixedName}" ?is-muted="${this.isMuted}"></shreddit-notification-frequency-control>`:"",this.renderOverflowControl=()=>this.isUserLoggedIn?t.x`<shreddit-subreddit-overflow-control name="${this.name}" prefixed-name="${this.prefixedName}" subreddit-id="${this.subredditId}" ?is-muted="${this.isMuted}" ?is-favorite="${this.isFavorite}" ?subscribed="${this.isSubscribed}" ?show-join-button="${this.isModerator}" ?is-user-logged-in="${this.isUserLoggedIn}" ?allow-custom-feed="${this.isCustomFeedEnabled}"></shreddit-subreddit-overflow-control>`:"",this.checkDescriptionForClamping=()=>{if(!this.isPdpRoute)return;const t=this.getDescriptionContainer();if(!t)return;this.isTextClamped(t)&&this.unhideShowMoreButton()},this.showMoreText=()=>{this.hideShowMoreButton(),this.removeLineClampFromDescription()},this.removeLineClampFromDescription=()=>{const t=this.getDescriptionContainer();t?.classList.remove(i)},this.hideShowMoreButton=()=>{const t=this.getShowMoreButton();t?.classList.add(r)},this.unhideShowMoreButton=()=>{const t=this.getShowMoreButton();t?.classList.remove(r)},this.onShowCommunityGuide=async()=>{try{await this._activateFeature({name:e.fu,routeParams:{subredditName:this.name},renderMode:e.g.Contents})}catch{this.showErrorToast("Failed to load community guide")}},this.onShowModOnboardingGuidePreview=async()=>{try{await this._activateFeature({name:e.fv,routeParams:{subredditName:this.name},queryParams:{"show-mod-guide":"true"},renderMode:e.g.Contents})}catch{this.showErrorToast("Failed to load mod onboarding guide preview")}},this.isTextClamped=t=>t.scrollHeight>t.clientHeight,this.getDescriptionContainer=()=>this.shadowRoot?.getElementById(o),this.getShowMoreButton=()=>this.shadowRoot?.getElementById(u),this.renderShowMoreButton=()=>e.k({appearance:this.isRedesign?"secondary":"plain",attributes:{id:u,className:`${r} ${this.isRedesign?"":"text-[color:var(--color-a-default)]"} no-underline mb-xs`,onclick:this.showMoreText},children:"Show more",size:e._.Small}),this.renderDescription=()=>this.description?t.x`<div id="${o}" class="i18n-subreddit-description description text-left text-neutral-content-weak overflow-hidden ${this.isPdpRoute?i:""}"> ${this.description} </div> ${this.renderShowMoreButton()}`:t.x``}static get styles(){return[e.t,e.j(":host {\n  text-align: center;\n}\n.r-slash-icon {\n  border: 2px solid var(--color-tone-1);\n  border-radius: 50%;\n  overflow: hidden;\n}\nh2 {\n  font: var(--font-title-h2);\n  font-weight: bold;\n  margin: 0.5rem 0 0;\n}\n.description,\n.subscribers {\n  margin-bottom: 0.5rem;\n}\n.prefixedName {\n  font-size: 18px;\n}\na {\n  color: inherit;\n  text-decoration: none;\n}\n.header {\n  background-position: top center;\n  background-repeat: no-repeat;\n  background-size: auto 6.8em;\n  position: relative;\n}\n.banner {\n  background-color: var(--color-tone-6);\n  background-position: center center;\n  background-size: cover;\n  margin-top: -1rem;\n  margin-left: -1rem;\n  margin-right: -1rem;\n}\n")]}firstUpdated(){const t=this.parentElement;t&&t.classList.add("xs:block"),this.pubsub.subscribe(e.T.SubredditSubscriptionChange,this.onSubscriptionChange),requestAnimationFrame((()=>{this.checkDescriptionForClamping()}));const n=new CustomEvent(e.d9,{bubbles:!0,composed:!0,detail:{name:"shreddit-subreddit-header"}});this.isModOnboardingGuidesExperimentEnabled&&window.location.search.includes("show-mod-guide=true")&&this.onShowModOnboardingGuidePreview(),this.dispatchEvent(n)}renderPdpRouteHeader(){const e=this.mtSeoSubredditLink?this.mtSeoSubredditLink:`/${this.prefixedName}/`;return t.x` <div class="${"flex justify-between"}"> ${this.prefixedName?t.x` <span class="flex items-center truncate"> <a href="${e}" class="flex justify-between truncate focus-visible:-outline-offset-1"> <div class="prefixedName font-bold truncate mr-xs">${this.prefixedName}</div> </a> <slot name="community-status"></slot> </span> `:""} <div class="flex items-center gap-sm">${this.renderJoinOrModButton()}</div> </div>`}renderHeader(){return this.routerName===a.bT?t.x`<h2 class="uppercase text-left font-semibold text-neutral-content-weak text-12 mb-sm"> ${"About community"} </h2>`:!this.newBannerExperimentEnabled||this.isPdpRoute?t.x` <div class="${"flex flex-col gap-sm pt-md"}"> <div class="flex justify-between gap-sm"> ${this.prefixedName?t.x` <a class="prefixedName font-bold truncate mr-xs no-underline" href="${`/${this.prefixedName}`}">${this.prefixedName}</a> `:""} ${this.renderOverflowControl()} </div> <div class="flex items-center gap-sm"> ${this.renderJoinOrModButton()} ${this.renderNotificationControl()} </div> </div>`:void 0;}renderBanner(){return this.routerName===a.bT||this.isPdpRoute?"":t.x`<div class="banner rounded-t-[8px]" style="${t.u({backgroundImage:this.bannerUrl?`url('${this.bannerUrl}')`:"",backgroundColor:this.bannerFallbackBackgroundColor?this.bannerFallbackBackgroundColor:"",height:this.bannerUrl?"128px":""})}"></div>`}renderWeeklyActivityIndicators(){if(!this.isActivityIndicatorsEnabled||this.isModInsightsWidgetExperimentEnabled&&this.isModerator||this.routerName===a.bT||!this.weeklyActiveUsersCount)return t.A;const n=t.x` <span class="text-neutral-content-strong"> <strong><slot name="weekly-active-users-count"></slot></strong></span> `,s=this.subscribersText?t.x` ${n} <span class="text-[12px] text-neutral-content-weak">${this.subscribersText}</span> `:e.bH({one:t.x` ${n} <span class="text-[12px] text-neutral-content-weak">Weekly visitor</span> `,other:t.x` ${n} <span class="text-[12px] text-neutral-content-weak">Weekly visitors</span> `,count:this.weeklyActiveUsersCount}),i=t.x` <span class="text-neutral-content-strong"> <strong><slot name="weekly-contributions-count"></slot></strong></span> `,r=this.currentlyViewingText?t.x` ${i} <span class="text-[12px] text-neutral-content-weak">${this.currentlyViewingText}</span> `:e.bH({one:t.x` ${i} <span class="text-[12px] text-neutral-content-weak">Weekly contribution</span> `,other:t.x` ${i} <span class="text-[12px] text-neutral-content-weak">Weekly contributions</span> `,count:this.weeklyContributionsCount});return t.x` <div class="flex flex-wrap text-left mt-xs gap-2xs" data-testid="activity-indicators"> <div class="flex flex-col items-start flex-grow">${s}</div> ${this.weeklyContributionsCount?t.x`<div class="flex flex-col items-start flex-grow">${r}</div>`:t.A} </div> `}renderSubscribers(){if(this.isModInsightsWidgetExperimentEnabled&&this.isModerator||this.routerName===a.bT||!this.subscribers)return t.A;const n=t.x` <span class="text-neutral-content-strong"> <strong id="subscribers"> <faceplate-number number="${this.subscribers}" pretty> </faceplate-number> </strong></span> `,s=this.subscribersText?t.x` ${n} <span class="text-[12px] text-neutral-content-weak subscribers-text"> ${this.subscribersText} </span> `:e.bH({one:t.x` ${n} <span class="text-[12px] text-neutral-content-weak subscribers-text"> Member </span> `,other:t.x` ${n} <span class="text-[12px] text-neutral-content-weak subscribers-text"> Members </span> `,count:this.subscribers}),i=t.x` <strong id="online"><faceplate-number number="${this.active}" pretty></faceplate-number></strong> `,r="Online",o=this.currentlyViewingText||r;return t.x` <div class="flex flex-wrap text-left subscribers mt-xs gap-2xs"> <div class="flex flex-col items-start flex-grow">${s}</div> ${this.active?t.x` <div class="active flex flex-col items-start flex-grow"> <span class="text-neutral-content-strong"> ${i} </span> <span class="text-[12px] text-neutral-content-weak"> <span class="inline-flex bg-kiwigreen-400 rounded-full w-xs h-xs"></span> <span class="currently-viewing-text">${o}</span> </span> </div> `:""} <div class="flex flex-grow flex-col items-start"> <slot name="directoryLink"></slot> </div> </div> `}showErrorToast(t){const n=e.c("faceplate-alert",{message:t,level:e.a4.error,cause:"uncategorized"});this.dispatchEvent(n)}renderCommunityGuideBtn(){if(!this.isCommunityGuideExperimentEnabled)return"";if(this.hasCommunityGuide){const s=n.g(this.subredditId,this.name);return t.x` <faceplate-tracker class="mt-sm mb-md" source="${n.S.COMMUNITY_GUIDE}" action="${n.A.CLICK}" noun="${n.N.OPEN}" data-faceplate-tracking-context="${s}"> ${e.k({appearance:"secondary",size:e._.Small,attributes:{id:"show-community-guide-btn",className:"w-full",onclick:this.onShowCommunityGuide},children:"Community Guide",leadingIcon:t.cp({size:t.q.ExtraSmall})})} </faceplate-tracker> `;}return this.isModerator?e.k({appearance:"bordered",size:e._.Small,attributes:{id:"community-guide-settings",className:"w-full mt-sm mb-md",href:`/mod/${this.name}/guide`,target:"_blank"},children:"Add a community guide",leadingIcon:t.am({size:t.q.ExtraSmall})}):"";}renderModOnboardingGuidePreviewBtn(){return this.isModerator&&this.isModOnboardingGuidesExperimentEnabled?t.x`${e.k({appearance:"secondary",size:e._.Small,attributes:{id:"show-mod-onboarding-guide-preview-btn",className:"w-full mt-sm",onclick:this.onShowModOnboardingGuidePreview},children:"Mod Guide",leadingIcon:t.cq({size:t.q.Small})})}`:"";}renderTitle(){const n=this.displayName||this.name,a=t.x`<div id="title" class="i18n-subreddit-title text-left text-neutral-content ${this.isRedesign?"text-16 font-semibold":"text-14 font-bold"} mt-xs"> ${n} </div>`;return this.allowIdCardEdit&&!this.isPdpRoute?t.x` <div class="flex justify-between items-end py-xs"> ${a} <community-widget-edit-button subreddit-name="${this.name}" page-id="${s.E.IdCard}" widget-id="${this.idCardWidgetId}"> <faceplate-tracker source="community_widgets" action="click" noun="edit_widget" data-faceplate-tracking-context="${JSON.stringify({widget:{type:s.W[s.E.IdCard],target_subreddit_name:this.name,target_subreddit_id:this.subredditId}})}"> ${e.k({appearance:"secondary",shape:"pill",attributes:{type:"button",className:"w-lg h-lg","aria-label":"Edit subreddit ID card"},leadingIcon:t.aY({size:t.q.ExtraSmall}),size:e._.ExtraSmall})} </faceplate-tracker> </community-widget-edit-button> </div>`:a;}render(){const e="Community Info Section";return t.x` <div class="header ${this.isRedesign?"":"px-md"}"> <h1 class="absolute -top-full -left-full w-px h-px overflow-hidden" aria-label="${e}"> ${e} </h1> ${this.renderBanner()} ${this.isPdpRoute?this.renderPdpRouteHeader():this.renderHeader()} <div class="flex flex-col justify-start"> ${this.renderTitle()} ${this.renderDescription()} <slot name="community-details"></slot> ${this.renderModOnboardingGuidePreviewBtn()} ${this.renderCommunityGuideBtn()} </div> <div class="flex flex-col justify-start ${this.isActivityIndicatorsEnabled&&this.isModerator&&this.isModInsightsWidgetExperimentEnabled&&!this.isCommunityGuideExperimentEnabled?"mt-md":""}"> <slot name="mod-insights-widget"></slot> </div> ${this.isActivityIndicatorsEnabled?this.renderWeeklyActivityIndicators():this.renderSubscribers()} </div> `}};t._([t.n({type:String})],c.prototype,"name",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],c.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"prefixed-name"})],c.prototype,"prefixedName",void 0),t._([t.n({type:String,attribute:"display-name"})],c.prototype,"displayName",void 0),t._([t.n({type:String})],c.prototype,"description",void 0),t._([t.n({type:Number})],c.prototype,"subscribers",void 0),t._([t.n({type:String,attribute:"banner-url"})],c.prototype,"bannerUrl",void 0),t._([t.n({type:String,attribute:"router-name"})],c.prototype,"routerName",void 0),t._([t.n({type:String,attribute:"banner-background-fallback-color"})],c.prototype,"bannerFallbackBackgroundColor",void 0),t._([t.n({type:String,attribute:"notification-level"})],c.prototype,"notificationLevel",void 0),t._([t.n({type:String,attribute:"id-card-widget-id"})],c.prototype,"idCardWidgetId",void 0),t._([t.n({type:String,attribute:"subscribers-text"})],c.prototype,"subscribersText",void 0),t._([t.n({type:String,attribute:"currently-viewing-text"})],c.prototype,"currentlyViewingText",void 0),t._([t.n({type:Number,attribute:"weekly-active-users"})],c.prototype,"weeklyActiveUsersCount",void 0),t._([t.n({type:Number,attribute:"weekly-contributions"})],c.prototype,"weeklyContributionsCount",void 0),t._([t.n({type:Boolean,attribute:"activity-indicators-enabled"})],c.prototype,"isActivityIndicatorsEnabled",void 0),t._([t.n({type:Boolean,attribute:"is-moderator"})],c.prototype,"isModerator",void 0),t._([t.n({type:Boolean,attribute:"modqueue-access"})],c.prototype,"hasModqueueAccess",void 0),t._([t.n({type:Boolean,attribute:"is-subscribed"})],c.prototype,"isSubscribed",void 0),t._([t.n({type:Boolean,attribute:"is-muted"})],c.prototype,"isMuted",void 0),t._([t.n({type:Boolean,attribute:"is-favorite"})],c.prototype,"isFavorite",void 0),t._([t.n({type:Boolean,attribute:"is-user-logged-in"})],c.prototype,"isUserLoggedIn",void 0),t._([t.n({type:Boolean,attribute:"is-pdp-route"})],c.prototype,"isPdpRoute",void 0),t._([t.n({type:Boolean,attribute:"new-banner-experiment-enabled"})],c.prototype,"newBannerExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"allow-id-card-edit"})],c.prototype,"allowIdCardEdit",void 0),t._([t.n({type:Boolean,attribute:"allow-custom-feed"})],c.prototype,"isCustomFeedEnabled",void 0),t._([t.n({type:Number})],c.prototype,"active",void 0),t._([t.n({type:Boolean,attribute:"has-community-guide"})],c.prototype,"hasCommunityGuide",void 0),t._([t.n({type:Boolean,attribute:"community-guide-experiment-enabled"})],c.prototype,"isCommunityGuideExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"is-mod-insights-widget-experiment-enabled"})],c.prototype,"isModInsightsWidgetExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"mod-onboarding-guides-experiment-enabled"})],c.prototype,"isModOnboardingGuidesExperimentEnabled",void 0),t._([t.n({type:Boolean,attribute:"redesign"})],c.prototype,"isRedesign",void 0),t._([t.n({type:String,attribute:"mt-seo-subreddit-link"})],c.prototype,"mtSeoSubredditLink",void 0),t._([t.n({type:String,attribute:"hfn-ux-updates-variant"})],c.prototype,"hfnUxUpdatesVariant",void 0),t._([t.n({type:Boolean,attribute:"is-updates-all-enabled"})],c.prototype,"isUpdatesAllEnabled",void 0),c=t._([t.c("shreddit-subreddit-header")],c)}));
SML.dm("TC9gnkab",[],(async()=>{var t,T,S;return function(t){t.MODERATOR="moderator",t.COMMUNITY_STATUS="community_status"}(t||(t={})),function(t){t.VIEW="view",t.CLICK="click"}(T||(T={})),function(t){t.STATUS_EDIT="status_edit",t.STATUS_CANCEL="status_cancel",t.STATUS_CREATE="status_create",t.STATUS_DELETE="status_delete",t.STATUS_LINK="status_link",t.STATUS_DISPLAY="status_display",t.STATUS_SUB_LINK="subreddit_link"}(S||(S={})),{get A(){return T},get N(){return S},get S(){return t}}}));
SML.dm("DohuPq-E",["CVEbQKiO","D7lSuCop","CK47trMR","CCphb8vV","C7H6Jti6"],(async(e,t,s,o,i)=>{const r=new WeakSet,n=async(e,{includeShadowRoot:s=!1}={})=>{const o="faceplate-partial",i=Array.from(e.querySelectorAll(o));s&&i.push(...Array.from(e.shadowRoot?.querySelectorAll(o)??[]));return(await Promise.all(i.map((async e=>!e||r.has(e)||e.loading!==t.o.Programmatic?Promise.resolve(!1):(r.add(e),e.load().then((()=>!0))))))).filter(Boolean).length>0},a=e=>t=>(e(t),t);let h=class extends i.FaceplateTooltip{constructor(){super(...arguments),this.mouseEnterDelay=750,this.mouseLeaveDelay=500,this.closeOnTrack=!1,this.disableTouchActivation=!1,this.partialLoading=t.o.Action,this.label="",this.mouseOnly=!1,this.sleepAfterEscape=!1,this.enterTimeout=-1,this.leaveTimeout=-1,this._popperController=new s.P(this,{position:this.position,referenceElementKey:"referenceElement",popperElementKey:"_tooltip"}),this._isHandlingTouch=!1,this.cleanupTimeouts=()=>{this.enterTimeout=this.leaveTimeout=-1},this.triggerEvent="hover",this.emitter=o.v(this),this.handleFocusOut=e=>{const t=e.relatedTarget;this.hidden||this.hasUserInteraction(t)||(this.close(),this.anchorEl&&(this.sleepAfterEscape=!0,this.anchorEl?.focus({preventScroll:!0})))},this.rplHovercardShowHandler=e=>{e.target===this||this.hidden||this.close()},this.onEscape=e=>{"Escape"===e.key&&(this.sleepAfterEscape=!0,this.close(),this.trigger?.focus())},this.mouseOverTrigger=e=>{this.setAttribute("trigger","mouse"),this.handleMouseenter(e)},this.handleClick=e=>{"hover"===this.triggerEvent&&this._isHandlingTouch&&this.disableTouchActivation&&(this.cleanupTimeouts(),this._isHandlingTouch=!1),super.handleClick(e)},this.handleTouchstart=()=>{this._isHandlingTouch=!0},this.handleMouseenter=e=>{if(this.mouseOnly&&"focusin"===e?.type)return;if(this.sleepAfterEscape)return void(this.sleepAfterEscape=!1);if(!this.hidden)return this.cleanupTimeouts();this.emitter.dispatch("entered"),this.partialLoading===t.o.Intent&&this.load();const s=window.setTimeout((()=>{s===this.enterTimeout&&this.hasUserInteraction()&&this.show()}),this.mouseEnterDelay);this.enterTimeout=s,document.addEventListener("keydown",this.onEscape),e?.currentTarget?.addEventListener("mouseleave",this.handleMouseleave,{once:!0})},this.handleMouseleave=()=>{if(this.hidden)return this.cleanupTimeouts();const e=window.setTimeout((()=>{e===this.leaveTimeout&&this.close()}),this.mouseLeaveDelay);this.leaveTimeout=e},this.handleMouseEnterTooltip=()=>{this.cleanupTimeouts()},this.handleMouseLeaveTooltip=()=>{this.handleMouseleave(),document.removeEventListener("keydown",this.onEscape)},this.handleFaceplateTrack=()=>{this.closeOnTrack&&this.close()},this.handleSlotChange=()=>{this.initializeFocusManager(),!this.hidden&&this.focusManager?.focus()},this.initializeFocusManager=()=>{this.content&&(this.focusManager=new t.ar(this,this.content))},this.render=()=>{const t=this._popperController.actualPosition||this.position;return e.x` <slot aria-describedby="faceplate-tooltip" faceplate-popper-trigger @click="${this.handleClick}" @touchstart="${this.handleTouchstart}" @mouseenter="${this.mouseOverTrigger}" @mouseleave="${this.handleMouseleave}" @focusin="${this.handleMouseenter}" @focusout="${this.handleMouseleave}"></slot> <div aria-label="${e.l((this.label||this.ariaLabel)??void 0)}" id="faceplate-tooltip" role="dialog" part="content-container" position="${t}" @keydown="${this.handleKeydown}" @mouseenter="${this.handleMouseEnterTooltip}" @mouseleave="${this.handleMouseLeaveTooltip}" @focusin="${this.handleMouseEnterTooltip}" @focusout="${this.handleMouseLeaveTooltip}" @slotchange="${this.handleSlotChange}" faceplate-popper-content> <slot name="content" @faceplate-track="${this.handleFaceplateTrack}"></slot> </div> `}}get content(){return this.contents[0]??null}get trigger(){return this.anchorEl??this.triggers[0]??null}get anchorEl(){try{if(this.anchor&&"string"==typeof this.anchor){return this.getRootNode().getElementById(this.anchor)}return this.anchor instanceof HTMLElement?this.anchor:null}catch{return null}}get referenceElement(){return this.trigger??this}setupAnchorElListeners(){const{anchorEl:e}=this;e&&(e.addEventListener("click",this.handleClick),e.addEventListener("touchstart",this.handleTouchstart),e.addEventListener("mouseenter",this.mouseOverTrigger),e.addEventListener("mouseleave",this.handleMouseleave),e.addEventListener("focusin",this.handleMouseenter),e.addEventListener("focusout",this.handleMouseleave))}cleanupAnchorElListeners(){const{anchorEl:e}=this;e&&(e.removeEventListener("click",this.handleClick),e.removeEventListener("touchstart",this.handleTouchstart),e.removeEventListener("mouseenter",this.mouseOverTrigger),e.removeEventListener("mouseleave",this.handleMouseleave),e.removeEventListener("focusin",this.handleMouseenter),e.removeEventListener("focusout",this.handleMouseleave))}hasUserInteraction(e){const t=Boolean(this.querySelector(":hover")||this.trigger?.matches(":hover")),s=Boolean(e&&(this.contains(e)||this.trigger?.contains(e))||this.querySelector(":focus")||this.trigger?.matches(":focus"));return t||s}hovercardShowHandler(e){e.target!==this&&this.close()}load(){return n(this).then(a(this._popperController.reposition)).then(a((e=>{this.hidden||e&&(this.focusManager?.refresh(),this.focusManager?.focus())})))}async show(){super.show(),this.partialLoading===t.o.Action&&this.load(),await this._popperController.currentState.animationFinished,this.focusManager?.focus(),this.addEventListener("focusout",this.handleFocusOut),document.addEventListener(this.emitter.eventId("open"),this.hovercardShowHandler),document.addEventListener("rpl-hovercard:show",this.rplHovercardShowHandler),this.cleanupTimeouts()}async close(){const e=super.close();document.removeEventListener(this.emitter.eventId("open"),this.hovercardShowHandler),document.removeEventListener("rpl-hovercard:show",this.rplHovercardShowHandler),this.cleanupTimeouts(),await e,this.removeTrigger()}removeTrigger(){this.removeAttribute("trigger")}handleKeydown(){this.removeTrigger()}connectedCallback(){super.connectedCallback(),this.setupAnchorElListeners()}disconnectedCallback(){this.cleanupAnchorElListeners(),super.disconnectedCallback(),this.cleanupTimeouts()}static get styles(){return[...super.styles,e.i`:host{display:contents}#faceplate-tooltip{display:flex;flex-direction:column;width:fit-content;justify-content:flex-start;align-items:flex-start;box-sizing:border-box;border-radius:1rem;box-shadow:var(--elevation-md);z-index:var(--faceplate-hovercard-z-index,1)}#faceplate-tooltip::after{display:none}`]}};e._([e.n({type:String})],h.prototype,"anchor",void 0),e._([e.k({slot:""})],h.prototype,"triggers",void 0),e._([e.k({slot:"content"})],h.prototype,"contents",void 0),e._([e.n({type:Number,attribute:"enter-delay"})],h.prototype,"mouseEnterDelay",void 0),e._([e.n({type:Number,attribute:"leave-delay"})],h.prototype,"mouseLeaveDelay",void 0),e._([e.n({type:Boolean,attribute:"close-on-track"})],h.prototype,"closeOnTrack",void 0),e._([e.n({type:Boolean,attribute:"disable-touch-activation",reflect:!0})],h.prototype,"disableTouchActivation",void 0),e._([e.n({type:String,attribute:"partial-loading"})],h.prototype,"partialLoading",void 0),e._([e.n({type:String})],h.prototype,"label",void 0),e._([e.n({type:Boolean,attribute:"mouse-only"})],h.prototype,"mouseOnly",void 0),e._([e.b()],h.prototype,"sleepAfterEscape",void 0),h=e._([e.c("faceplate-hovercard")],h);var l=Object.freeze({__proto__:null,get FaceplateHovercard(){return h}});return{get F(){return h},get f(){return l},l:n,s:a}}));
SML.dm("BRdfFi0A",["CVEbQKiO","D7lSuCop","TC9gnkab","kExRqc7d","DohuPq-E"],(async(t,e,s)=>{var i;!function(t){t.small="small",t.medium="medium"}(i||(i={}));let o=class extends t.s{constructor(){super(...arguments),this.size=i.medium}render(){return t.x` <button class="flex items-center justify-center p-0 m-0 border-none rounded-1 h-[var(--emote-btn-size)] w-[var(--emote-btn-size)] bg-transparent hover:bg-neutral-background-hover cursor-pointer"> <slot class="emote"></slot> </button> `}};function r({pageType:t,url:e}){return {page_type:t,...(e ? {pane_name:e} : {})};}function a({subredditId:t,subredditName:e}){return {id:t,...(e ? {name:e} : {})};}o.styles=[t.i`:host{--emote-btn-size:2.25rem;--emote-size:1.75rem;display:block}:host([size=small]){--emote-btn-size:1.25rem;--emote-size:1.25rem}.emote::slotted(img){width:var(--emote-size);height:var(--emote-size);object-fit:contain;margin:0!important;padding:0!important}`,e.t],t._([t.n({type:String,reflect:!0})],o.prototype,"size",void 0),o=t._([t.c("community-status")],o);const n=t=>e.b({source:s.S.COMMUNITY_STATUS,action:s.A.CLICK,noun:s.N.STATUS_LINK},{action_info:r(t),subreddit:a(t)}),l=t.s;let d=class extends l{constructor(){super(...arguments),this.subredditId="",this.subredditName="",this.open=()=>{this.bottomSheet?.showModal()},this.close=()=>{this.bottomSheet?.close()},this.handleKeyUp=t=>{"Enter"!==t.key&&"Space"!==t.key||this.close()},this.handleStatusClicks=t=>{const s=t.composedPath().find((t=>t instanceof HTMLAnchorElement));s&&e.e(this,n({subredditId:this.subredditId,subredditName:this.subredditName,pageType:this._getPageType(),url:s.href}))},this._getPageType=e.z}render(){return t.x` <button @click="${this.open}" class="m-0 p-0 border-none bg-transparent"> <slot name="trigger"></slot> </button> <faceplate-bottom-sheet id="bottom-sheet"> <div class="flex flex-col w-full box-border px-md py-xl"> <div class="flex justify-center align-center"> <slot name="emote"></slot> </div> <p class="text-center m-0 line-clamp-8 text-14 font-semibold"> ${""} <slot name="status" @click="${this.handleStatusClicks}"></slot> </p> <slot @click="${this.close}" @keyup="${this.handleKeyUp}" name="primary-btn"></slot> ${e.k({appearance:"secondary",attributes:{onclick:this.close,className:"mt-sm",id:"close-button"},children:"Close"})} </div> </faceplate-bottom-sheet> `;}};d.styles=[t.i`:host{display:inline-flex}slot[name=emote]::slotted(img){max-height:148px;margin-bottom:32px!important}slot[name=primary-btn]::slotted(*){margin-top:24px}`,e.t],t._([t.n({type:String,attribute:"subreddit-id"})],d.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"subreddit-name"})],d.prototype,"subredditName",void 0),t._([t.z("#bottom-sheet")],d.prototype,"bottomSheet",void 0),d=t._([t.c("community-status-bottom-sheet")],d);const m=t.s;let c=class extends m{constructor(){super(...arguments),this.subredditId="",this.subredditName="",this.handleClick=()=>{this.hovercard?.close()},this.handleKeyUp=t=>{"Enter"===t.key&&this.handleClick()},this.handleStatusClicks=t=>{const s=t.composedPath().find((t=>t instanceof HTMLAnchorElement));s&&e.e(this,n({subredditId:this.subredditId,subredditName:this.subredditName,pageType:this._getPageType(),url:s.href}))},this._getPageType=e.z}render(){return t.x` <faceplate-hovercard position="bottom" appearance="inverted"> <span> <slot name="trigger"></slot> </span> <article slot="content" class="flex flex-col relative py-sm w-[184px]"> <div class="absolute right-2xs top-2xs"> <slot name="edit-btn" @click="${this.handleClick}" @keyup="${this.handleKeyUp}"></slot> </div> <div class="flex justify-center align-center"> <slot name="emote"></slot> </div> <p class="text-center m-0 mt-md line-clamp-12 text-12"> ${""} <slot name="status" @click="${this.handleStatusClicks}"></slot> </p> </article> </faceplate-hovercard> `}};c.styles=[t.i`slot[name=emote]::slotted(img){max-height:140px;max-width:148px!important;margin-bottom:0!important}faceplate-hovercard::part(content-container){background:var(--color-neutral-content-strong)}`,e.t],t._([t.n({type:String,attribute:"subreddit-id"})],c.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"subreddit-name"})],c.prototype,"subredditName",void 0),t._([t.z("faceplate-hovercard")],c.prototype,"hovercard",void 0),c=t._([t.c("community-status-tooltip")],c)}));

SML.dm("BmOBRqii",["CVEbQKiO","D7lSuCop"],(async(e,i)=>{let t=class extends e.s{constructor(){super(...arguments),this._imageElem=null,this._traceCompleted=!1,this._imageStartTiming=0,this._imageLoadedTiming=0,this._imageReadyTiming=0,this._observer=new i.bm,this._hasBeenInView=!1,this.placement="image_post",this.onEnter=()=>{this._hasBeenInView=!0,this._imageStartTiming||(this._imageStartTiming=Date.now()),this.applyListeners(),this._timeoutTimer||(this._timeoutTimer=setTimeout((()=>{this._imageElem?.complete&&this._imageElem?.naturalWidth||this.sendImageMetric("download_fail")}),6e4))},this.onLeave=()=>{if(this._traceCompleted||!this._hasBeenInView||!this._imageStartTiming)return;const e=Date.now()-this._imageStartTiming>=150;!this._imageReadyTiming&&e&&this.sendImageMetric("exit_before_visible")},this.onLoad=()=>{this._imageLoadedTiming=Date.now(),this.poll()},this.onError=()=>{this.sendImageMetric("download_fail")},this.checkStatus=e=>{if(e.naturalWidth&&!this._imageReadyTiming)return this._imageLoadedTiming||(this._imageLoadedTiming=Date.now()),this._imageReadyTiming=Date.now(),this.sendImageMetric(),!0;e.complete&&!this._imageLoadedTiming&&(this._imageLoadedTiming=Date.now(),this.poll());const i=Date.now()-this._imageLoadedTiming;return this._pollVisibleInterval&&i>1e4&&this.sendImageMetric("download_fail"),!1}}connectedCallback(){if(super.connectedCallback(),this._traceCompleted)return;if(this._imageElem=this.previousElementSibling,!this._imageElem.tagName.includes("IMG"))throw new Error("<image-observer> must be immediately after the observed <img> in the DOM");this.checkStatus(this._imageElem)||(this._observer.observe(this._imageElem),this._imageElem.addEventListener("faceplate-enter",this.onEnter),this._imageElem.addEventListener("faceplate-leave",this.onLeave))}disconnectedCallback(){super.disconnectedCallback(),this._observer.unobserve(this._imageElem),this._imageElem?.removeEventListener("faceplate-enter",this.onEnter),this._imageElem?.removeEventListener("faceplate-leave",this.onLeave),this.cleanup()}applyListeners(){if(!this._imageElem)return;this.checkStatus(this._imageElem)||(this._imageElem.addEventListener("load",this.onLoad,{once:!0}),this._imageElem.addEventListener("error",this.onError,{once:!0}))}cleanup(){clearInterval(this._pollVisibleInterval),clearTimeout(this._timeoutTimer),this._imageElem?.removeEventListener("load",this.onLoad),this._imageElem?.removeEventListener("error",this.onError),this._imageStartTiming=0,this._imageLoadedTiming=0,this._imageReadyTiming=0}poll(){!this._pollVisibleInterval&&this._hasBeenInView&&(this._pollVisibleInterval=setInterval((()=>{this.checkStatus(this._imageElem)}),25))}sendImageMetric(e=void 0){const t=this._getPostInfo(),a=this._getGalleryInfo();let s,n;t&&({position:n,...s}=t);const m=this._imageStartTiming||this._imageLoadedTiming||this._imageReadyTiming||Date.now(),o=this._imageReadyTiming||Date.now(),r={source:"image",action:"trace",noun:"performance",client_timestamp:Date.now(),image_trace:{get_image_start_timestamp:m,image_ready_timestamp:o,view_visibile_timestamp:m},media:{width:this._imageElem?.naturalWidth,height:this._imageElem?.naturalHeight,url:this._imageElem?.src,placement:this.placement},action_info:{position:n,reason:e,page_type:i.z()}};s&&(r.post=s),a&&(r.gallery=a),this._sendEvent(r),this.cleanup(),"exit_before_visible"!==e&&(this._traceCompleted=!0)}_getPostInfo(){const e=this.closest("shreddit-post, shreddit-ad-post");if(e)return{id:e.id,promoted:e.nodeName.includes("AD"),nsfw:e.nsfw,view_type:e.viewType===i.a3.CompactView?"classic":"card",position:e.feedIndex}}_getGalleryInfo(){if(!this.closest("gallery-carousel"))return;const e=this.closest("li")?.getAttribute("slot");return e?{position:Number(e.split("-")[1])-1}:void 0}_sendEvent(e){i.e(this,e)}createRenderRoot(){return this}};e._([e.n()],t.prototype,"placement",void 0),t=e._([e.c("image-observer")],t)}));
SML.dm("BwmVBZAv",[],(async()=>{var e,a,r;return function(e){e.GoldPurchasePaymentForm="award-gold-purchase-payment-form",e.GoldTopupPaymentForm="award-gold-topup-payment-form"}(e||(e={})),function(e){e.SelectionSheet="selection-sheet",e.Leaderboard="leaderboard",e.GoldPurchase="gold-purchase",e.GoldTopUp="gold-top-up"}(a||(a={})),Object.values(a),function(e){e.Limited="award:limited",e.Free="award:free",e.Community="award:community",e.Highlighted="award:highlighted",e.Iconic="award:iconic",e.Branded="award:branded"}(r||(r={})),{get A(){return r},get a(){return a}}}));
SML.dm("BWyYpeH6",["CVEbQKiO","D7lSuCop","UeyFDWWE","BmXCRIMH","CCphb8vV","B05atAPk","5NUG_JHL","BwmVBZAv","gYqzC9DM"],(async(t,e,n,o,a,r,i,s)=>{var c;!function(t){t.Upvote="upvote",t.Downvote="downvote"}(c||(c={}));const u=({appearance:t,active:e})=>`group button flex justify-center aspect-square p-0 border-0 ${n.A[t]} ${!e&&"disabled:text-interactive-content-disabled"} ${e&&"secondary"===t?"":"button-plain"}  inline-flex items-center`,l=({size:n})=>({size:n===e._.Small||n===e._.ExtraSmall?t.q.Small:t.q.Medium}),d=({size:t})=>`flex mx-xs ${e.a9[t]}`,p=t=>{let e="bg-transparent text-global-white hover:text-global-white";switch(t){case c.Downvote:e+=" hover:bg-downvote-background-hover";break;case c.Upvote:e+=" hover:bg-upvote-background-hover"}return e},h=(t,e)=>"secondary"===e?{upvote:"bg-action-upvote text-global-white border-action-upvote ",downvote:"bg-action-downvote text-global-white border-action-downvote "}[t]:"",v={secondary:"bg-interactive-background-disabled text-[color:var(--color-button-secondary-text-disabled)] border-transparent",plain:"bg-[color:var(--color-button-plain-background-disabled)] text-[color:var(--color-button-plain-text-disabled)] border-transparent",bordered:"","plain-weak":"text-interactive-content-disabled"},m=({voteType:t,appearance:e})=>null==t?v[e]:"opacity-40 text-global-white";function b(t,e){return t.tags?.includes(e)}s.A.Limited,s.A.Community,s.A.Free;let g=class extends(e.d(t.s)){constructor(){super(...arguments),this.size=e._.Medium,this.disabled=!1,this.count=0,this.hasEnteredViewport=!1,this.awardController=new o.A(this,{getThingId:()=>this.thingId,onAward:t=>{this.count++,this.isAwardedByUser=!0,t&&(this.awardId=t.id,this.iconUrl=t.staticIcon.url,this.hasIconicAward||(this.hasIconicAward=function(t){return b(t,s.A.Iconic)}(t)),this.hasBrandedAward||(this.hasBrandedAward=function(t){return b(t,s.A.Branded)}(t)))}}),this.handleEnterViewport=()=>{this.hasEnteredViewport=!0,this.observerController&&(this.observerController=e.r(this,this.observerController))},this.handleClick=()=>{const t=i.a.setCorrelationId(),e=i.a.setPostType(this.postType);this.trackEvent(r.d({awardId:this.awardId,thingId:this.thingId,subredditId:this.subredditId,postId:this.postId,topAwardIconUrl:this.iconUrl,animatedAwardIconUrls:this.iconUrls,correlationId:t,position:this.feedIndex,postType:e,postScore:this.postScore,score:this.score,numberComments:this.commentCount})),this.awardController.activateDialog()}}connectedCallback(){super.connectedCallback(),this.observerController=e.dv(this,this,this.handleEnterViewport,{rootMargin:"0px"})}disconnectedCallback(){super.disconnectedCallback(),this.observerController&&(this.observerController=e.r(this,this.observerController))}renderGlow(){return t.x`<span class="glow" style="${t.l(this.isAwardedByUser?"--fade-out: none":void 0)}"> ${Array.from({length:8}).map(((e,n)=>t.x`<span class="sunbeam" style="${t.u({"--n":n})}"></span>`))} </span>`}renderStream(){if(a.n())return t.A;const{iconUrls:e}=this;if(!e)return t.A;const n=[1,-1,0,-1],o=Number(e[0]===this.iconUrl);return t.x`<span class="stream"> ${Array.from({length:16}).map(((a,r)=>t.x`<img style="${t.u({"--n":r,"--offset":n[r%n.length]})}" src="${e[(r+o)%e.length]}" width="16" height="16" alt="">`))} </span>`}render(){if(!this.thingId)return t.A;const o=n.I[this.size],r=(this.hasIconicAward||this.hasBrandedAward)&&!this.noGoldenBorder;return n.c({appearance:this.appearance,attributes:{type:"button",className:a.l("overflow-visible",r&&"border-sm border-global-gold",this.buttonClass),disabled:this.disabled,onclick:this.handleClick,"aria-label":0===this.count?"Give award":e.bH({one:`Give award, ${this.count} award given`,other:`Give award, ${this.count} awards given`,count:this.count})},size:this.size,leadingIcon:this.iconUrl?t.x`<span class="${a.l("flex relative",this.disabled&&"opacity-25")}" aria-hidden="true"> ${this.hasEnteredViewport?this.renderGlow():t.A} ${this.hasEnteredViewport?this.renderStream():t.A} <img src="${this.iconUrl}" alt="" class="relative" width="${t.bc[o]}" height="${t.bc[o]}"> </span>`:t.bd({attributes:{"aria-hidden":"true"},size:o}),children:this.count?t.x`<faceplate-number number="${this.count}" pretty aria-hidden="true"></faceplate-number>`:this.withInitialStateText?t.x`<span aria-hidden="true">${"Award"}</span>`:void 0});}};g.styles=[e.t,e.j("@keyframes fade-in {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes rotate-clockwise {\n  0% {\n    transform: rotate(45deg);\n  }\n  100% {\n    transform: rotate(135deg);\n  }\n}\n@keyframes sunbeam-even {\n  0% {\n    transform: scaleX(1) scaleY(1);\n  }\n  50% {\n    transform: scaleX(1.2) scaleY(1.3);\n  }\n  100% {\n    transform: scaleX(1) scaleY(1);\n  }\n}\n@keyframes sunbeam-odd {\n  0% {\n    transform: scaleX(1.2) scaleY(1.3);\n  }\n  50% {\n    transform: scaleX(1) scaleY(1);\n  }\n  100% {\n    transform: scaleX(1.2) scaleY(1.3);\n  }\n}\n.glow {\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  width: 0;\n  height: 0;\n  perspective: 5em;\n  animation: 3s ease-out 1.5s both rotate-clockwise, 0.5s ease-in 1.5s backwards fade-in, var(--fade-out, 0.5s ease-out 5s reverse forwards fade-in);\n}\n.glow::before {\n  content: '';\n  display: block;\n  position: absolute;\n  left: -1em;\n  top: -1em;\n  background: radial-gradient(rgba(245, 214, 87, 0.9), rgba(245, 214, 87, 0) 50%);\n  width: 2em;\n  height: 2em;\n}\n.glow > .sunbeam {\n  display: block;\n  transform: rotate(calc(var(--n) * 45deg)) rotateX(-45deg);\n}\n.glow > .sunbeam::before {\n  content: '';\n  display: block;\n  background: no-repeat linear-gradient(rgba(245, 214, 87, 0.9), rgba(245, 214, 87, 0));\n  height: 1em;\n  width: 0.3em;\n  position: absolute;\n  transform: rotate(180deg) translateX(50%);\n  transform-origin: 50% 0px;\n  animation: 1.5s linear 1.5s 2 both sunbeam-even;\n  animation-composition: add;\n}\n.glow > .sunbeam:nth-child(odd)::before {\n  animation-name: sunbeam-odd;\n}\n"),e.j("@keyframes stream {\n  0% {\n    transform: scale(0);\n  }\n  20% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  100% {\n    offset-distance: 100%;\n    opacity: 0;\n  }\n}\n.stream {\n  pointer-events: none;\n  position: absolute;\n  bottom: calc(100px + 50%);\n  left: 50%;\n}\n.stream > img {\n  animation: 2s ease-in both stream;\n  animation-delay: calc(var(--n) * 0.2s);\n  offset-path: path('M2.5,100 q-5,-10,0,-20 t 0-20 0-20 0-20 0-20');\n  offset-rotate: 0deg;\n  position: absolute;\n  translate: calc(var(--offset) * 8px);\n}\n")],t._([t.n({type:String})],g.prototype,"appearance",void 0),t._([t.n({type:String})],g.prototype,"size",void 0),t._([t.n({type:String,attribute:"button-class"})],g.prototype,"buttonClass",void 0),t._([t.n({type:Boolean,reflect:!0})],g.prototype,"disabled",void 0),t._([t.n({type:Boolean,attribute:"no-golden-border"})],g.prototype,"noGoldenBorder",void 0),t._([t.n({type:Boolean,attribute:"with-initial-state-text"})],g.prototype,"withInitialStateText",void 0),t._([t.n({type:Boolean,attribute:"is-logged-in"})],g.prototype,"isLoggedIn",void 0),t._([t.n({type:Boolean,reflect:!0,attribute:"is-awarded-by-user"})],g.prototype,"isAwardedByUser",void 0),t._([t.n({type:String,attribute:"thing-id"})],g.prototype,"thingId",void 0),t._([t.n({type:Number,attribute:"feed-index"})],g.prototype,"feedIndex",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],g.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"post-id"})],g.prototype,"postId",void 0),t._([t.n({type:String,attribute:"post-type"})],g.prototype,"postType",void 0),t._([t.n({type:Number,attribute:"post-score"})],g.prototype,"postScore",void 0),t._([t.n({type:Number})],g.prototype,"score",void 0),t._([t.n({type:Number,attribute:"comment-count"})],g.prototype,"commentCount",void 0),t._([t.n({type:Number,reflect:!0})],g.prototype,"count",void 0),t._([t.n({type:String,reflect:!0,attribute:"award-id"})],g.prototype,"awardId",void 0),t._([t.n({type:String,reflect:!0,attribute:"icon-url"})],g.prototype,"iconUrl",void 0),t._([t.n({type:Array,attribute:"icon-urls"})],g.prototype,"iconUrls",void 0),t._([t.n({type:Boolean,reflect:!0,attribute:"has-iconic-award"})],g.prototype,"hasIconicAward",void 0),t._([t.n({type:Boolean,reflect:!0,attribute:"has-branded-award"})],g.prototype,"hasBrandedAward",void 0),t._([t.b()],g.prototype,"hasEnteredViewport",void 0),g=t._([t.c("award-button")],g);var w;!function(t){t.Upvote="upvote",t.Downvote="downvote"}(w||(w={}));const N=t=>`group button flex justify-center p-0 border-0 ${n.A[t]} inline-flex items-center`,I=({size:n})=>({attributes:{classname:"rpl-vote-button-icon"},size:n===e._.Small||n===e._.ExtraSmall?t.q.Small:t.q.Medium}),f=({size:t})=>`flex mx-xs ${e.a9[t]}`;const $=(t,e)=>{if("post"===e){const e=t;return{ok:e.data?.updatePostVoteState?.ok,errors:e.data?.updatePostVoteState?.errors,voteStateResult:e.data?.updatePostVoteState?.voteState}}const n=t;return{ok:n.data?.updateCommentVoteState?.ok,errors:n.data?.updateCommentVoteState?.errors,voteStateResult:n.data?.updateCommentVoteState?.voteState}},T=(t,n,o)=>"post"===n?{operation:e.O.UpdatePostVoteState,variables:{input:{postId:t,voteState:o}}}:{operation:e.O.UpdateCommentVoteState,variables:{input:{commentId:t,voteState:o}}};return {get V(){return c},a:({attributes:o,voteType:a,upvoteButton:r,downvoteButton:i,size:s=e._.Medium,appearance:c="plain"})=>{const{html:u,createElement:l}=t.g(),d=u`${r} ${(()=>{if("plain"===c)return"";const t=s===e._.Small?"h-md":"h-[20px]";return u`<span class="rpl-vote-button-group-divider rounded-1 ms-[-2px] translate-x-px w-px ${t}"></span>`})()} ${i}`;return l("span",{...o,className:`\n      rpl-vote-button-group p-0 button-shell overflow-hidden font-semibold flex items-center cursor-auto\n      ${o?.className||""} \n      ${a??""}\n      ${n.g({size:s,appearance:c})}`,rpl:!0},d)},b:o=>{const{html:a,createElement:r}=t.g(),{appearance:i="plain",attributes:s,initialStateText:c,onClick:u,screenReaderContent:l,size:d=e._.Medium,voteCount:p,voteType:h}=o,v=d===e._.Small,m=h===w.Upvote,b=s?.href;return r(null!=b?"a":"button",{rpl:!0,upvote:!0,onclick:u,...s,className:`\n        ${s?.className||""} \n        rounded-none \n        ${v?"rounded-r-[8px]":"rounded-r-[12px]"}\n        ${N(i)}\n      `,style:`height: ${n.B[d]};`,"aria-pressed":m},a` <span class="${v?"ms-sm":"ms-md"} mr-[6px] ${f({size:d})}"> ${(m?t.bg:t.bh)(I({size:d}))} </span> ${l&&a`<faceplate-screen-reader-content> ${l||"Upvote"} </faceplate-screen-reader-content>`} ${null==p?c?a`<span class="rpl-vote-button-group-label ${"plain"===i?"pe-[3px]":"pe-[10px]"}">${c}</span>`:"":a`<span class="rpl-vote-button-group-label ${"plain"===i?"pe-[3px]":"pe-[10px]"}"> <faceplate-number number="${p}" pretty></faceplate-number> </span>`} `);},c:o=>{const{html:a,createElement:r}=t.g(),{appearance:i="plain",attributes:s,size:c=e._.Medium,screenReaderContent:u,voteType:l,onClick:d}=o,p=c===e._.Small,h=l===w.Downvote,v=s?.href;return r(null!=v?"a":"button",{rpl:!0,downvote:!0,...s,onclick:d,className:`\n        ${s?.className||""} \n        rounded-none\n        ${p?"rounded-l-[8px]":"rounded-l-[12px]"}\n        ${N(i)} \n      `,style:`height: ${n.B[c]};`,"aria-pressed":h},a`<span class="${p?"me-sm":"me-md"} ${"plain"===i?"ms-[3px]":"ms-xs"} ${f({size:c})}"> ${(h?t.be:t.bf)(I({size:c}))} </span> ${u&&a`<faceplate-screen-reader-content> ${u||"Downvote"} </faceplate-screen-reader-content>`}`);},d:({attributes:o,size:a=e._.Medium,appearance:r="plain",screenReaderContent:i,voteType:s,onClick:h})=>{const{html:v,createElement:m}=t.g(),b=null!=s,g=s===c.Downvote,w=u({appearance:r,active:b});return m("button",{rpl:!0,downvote:!0,...o,onclick:h,className:`${o?.className||""} ${w} ${{plain:g?"text-action-downvote":"hover:text-action-downvote focus-visible:text-action-downvote",secondary:b?p(s):"hover:text-action-downvote focus-visible:text-action-downvote",bordered:g?"text-action-downvote":"hover:text-action-downvote focus-visible:text-action-downvote","plain-weak":g?"text-action-downvote":"hover:text-action-downvote focus-visible:text-action-downvote"}[r]}`,style:`height: ${n.B[a]};`,"aria-pressed":g},v`<span class="${d({size:a})}"> ${(g?t.be:t.bf)(l({size:a}))} </span> ${i&&v`<faceplate-screen-reader-content> ${i||"Downvote"} </faceplate-screen-reader-content>`}`);},g:function(t,e){return!t&&e===c.Upvote||t===c.Downvote&&e===c.Downvote?1:!t&&e===c.Downvote||t===c.Upvote&&e===c.Upvote?-1:t===c.Downvote&&e===c.Upvote?2:t===c.Upvote&&e===c.Downvote?-2:0},o:async function(t,n,o){let a=e.dw.None;o&&(a=o===c.Upvote?e.dw.Up:e.dw.Down);const r=await e.v(T(t,n,a)),{ok:i,errors:s,voteStateResult:u}=$(r,n);if(i){const t=u;if(t===e.dw.None)return;return t===e.dw.Up?c.Upvote:c.Downvote}if(s?.[0]){const t=s[0]?.message??"Something went wrong";throw new Error(t)}return o},u:({attributes:o,size:a=e._.Medium,appearance:r="plain",screenReaderContent:i,voteType:s,onClick:h})=>{const{html:v,createElement:m}=t.g(),b=null!=s,g=s===c.Upvote,w=u({appearance:r,active:b});return m("button",{rpl:!0,upvote:!0,onclick:h,...o,className:`${o?.className||""} ${w} ${{plain:g?"text-action-upvote":"hover:text-action-upvote focus-visible:text-action-upvote",secondary:b?p(s):"hover:text-action-upvote focus-visible:text-action-upvote",bordered:g?"text-action-upvote":"hover:text-action-upvote focus-visible:text-action-upvote","plain-weak":g?"text-action-upvote":"hover:text-action-upvote focus-visible:text-action-upvote"}[r]}`,style:`height: ${n.B[a]};`,"aria-pressed":g},v`<span class="${d({size:a})}"> ${(g?t.bg:t.bh)(l({size:a}))} </span> ${i&&v`<faceplate-screen-reader-content> ${i||"Upvote"} </faceplate-screen-reader-content>`}`);},v:({attributes:o,voteCount:a,voteType:r,upvoteButton:i,downvoteButton:s,size:c=e._.Medium,appearance:u="plain",initialStateText:l})=>{const{html:d,createElement:p}=t.g(),v=d`${i} ${null==a?l:d`<span> <faceplate-number number="${a}" pretty></faceplate-number> </span>`} ${s}`;return p("span",{...o,className:`${o?.className||""} ${r?h(r,u):""}\n      p-0 ${n.g({size:c,appearance:u,selected:!0})} button-shell overflow-visible font-semibold flex items-center cursor-auto ${o?.disabled?m({voteType:r,appearance:u}):""}`,rpl:!0},v)}};}));
SML.dm("BNksWu9w",["CVEbQKiO","D7lSuCop"],(async N=>{var I;!function(N){N.APP="APP",N.GAME="GAME",N.NSFW="NSFW",N.ORIGINAL="ORIGINAL",N.SPOILER="SPOILER",N.QUARANTINED="QUARANTINED"}(I||(I={}));return {get C(){return I},c:({attributes:A,children:R,appearance:E})=>{const{html:e,createElement:a}=N.g(),P={size:N.q.Small,attributes:{className:"inline-block",style:"vertical-align: text-bottom"}},T={[I.APP]:{className:"text-ai-plain",icon:N.a6(P)},[I.GAME]:{className:"text-ai-plain",icon:N.a7(P)},[I.NSFW]:{className:"text-category-nsfw",icon:N.a8(P)},[I.ORIGINAL]:{className:"text-primary",icon:N.a9(P)},[I.SPOILER]:{className:"text-category-spoiler",icon:N.K(P)},[I.QUARANTINED]:{className:"text-warning-content",icon:N.aa(P)}},O=e`<span class="inline-block" aria-hidden="true">${[T[E].icon]}</span> <span class="font-semibold text-12 uppercase">${R}</span>`;return a("span",{...A,className:`flex items-center gap-2xs ${[T[E].className]}`,rpl:!0},O)},g:()=>({[I.NSFW]:{children:"NSFW",appearance:I.NSFW},[I.APP]:{children:"APP",appearance:I.APP},[I.GAME]:{children:"GAME",appearance:I.GAME},[I.SPOILER]:{children:"SPOILER",appearance:I.SPOILER},[I.QUARANTINED]:{children:"QUARANTINED",appearance:I.QUARANTINED},[I.ORIGINAL]:{children:"ORIGINAL",appearance:I.ORIGINAL}})};}));
SML.dm("Bd8lDV8U",["CVEbQKiO","BNksWu9w","D7lSuCop","Cx0Ea5Jz","Bj8wOYTD"],(async(t,e,s,i)=>{let n=class extends t.s{constructor(){super(),this.postId="",this.spoiler=!1,this.nsfw=!1,this.quarantined=!1,this.game=!1,this.app="",this.onPostUpdateAction=({postId:t,action:e,value:s})=>{if(this.postId===t)switch(e){case i.a.markAsNsfw:this.nsfw=s;break;case i.a.markAsSpoiler:this.spoiler=s}},this.pubsubController=new s.P(this)}connectedCallback(){super.connectedCallback(),this.pubsubController.subscribe(s.T.PostUpdated,this.onPostUpdateAction)}renderContentTag(s){const i=e.c(e.g()[s]);return t.x`<span class="h-lg inline-block">${i}</span>`}render(){return this.nsfw||this.spoiler||this.quarantined||this.app?t.x` <div class="content-tags inline-flex gap-xs"> ${this.nsfw?this.renderContentTag(e.C.NSFW):""} ${this.app?t.x`<a target="_blank" href="https://developers.reddit.com/apps/${this.app}?utm=watermark_v1" @click="${()=>this.dispatchEvent(new CustomEvent("tag-click",{detail:{type:e.C.APP}}))}">${this.renderContentTag(this.game?e.C.GAME:e.C.APP)}</a>`:""} ${this.spoiler?this.renderContentTag(e.C.SPOILER):""} ${this.quarantined?this.renderContentTag(e.C.QUARANTINED):""} </div> `:""}};n.styles=[s.t],t._([t.n({type:String,attribute:"post-id"})],n.prototype,"postId",void 0),t._([t.n({type:Boolean,attribute:"spoiler",reflect:!0})],n.prototype,"spoiler",void 0),t._([t.n({type:Boolean,attribute:"nsfw",reflect:!0})],n.prototype,"nsfw",void 0),t._([t.n({type:Boolean,attribute:"quarantined",reflect:!0})],n.prototype,"quarantined",void 0),t._([t.n({type:Boolean})],n.prototype,"game",void 0),t._([t.n({type:String})],n.prototype,"app",void 0),n=t._([t.c("shreddit-content-tags")],n)}));
SML.dm("CWo_XZVj",["D7lSuCop"],(async a=>{const e=a=>!!a&&!!a.startsWith("r/"),i=(i,n,r,o)=>a.b(i,{...(n ? {post:{id:n.startsWith("t3_")?n:`t3_${n}`,...(e(r) ? {subreddit_name:r} : {})}} : {}),...(e(r) ? {subreddit:{name:r}} : {}),...(o ? {ad_account:{id:o}} : {})});function n(e){const i=new URLSearchParams(a.dW.search),n=new URL(e,a.dW.origin);return i.forEach(((a,e)=>{n.searchParams.has(e)||n.searchParams.set(e,a)})),n.href}const r=()=>[{name:"United States of America",primaryLanguageCode:"en",isoCode:"US"},{name:"Afghanistan",primaryLanguageCode:"ps",isoCode:"AF"},{name:"Albania",primaryLanguageCode:"sq",isoCode:"AL"},{name:"Algeria",primaryLanguageCode:"ar",isoCode:"DZ"},{name:"American Samoa",primaryLanguageCode:"en",isoCode:"AS"},{name:"Andorra",primaryLanguageCode:"ca",isoCode:"AD"},{name:"Angola",primaryLanguageCode:"pt",isoCode:"AO"},{name:"Anguilla",primaryLanguageCode:"en",isoCode:"AI"},{name:"Antigua and Barbuda",primaryLanguageCode:"en",isoCode:"AG"},{name:"Argentina",primaryLanguageCode:"es",isoCode:"AR"},{name:"Armenia",primaryLanguageCode:"hy",isoCode:"AM"},{name:"Aruba",primaryLanguageCode:"nl",isoCode:"AW"},{name:"Australia",primaryLanguageCode:"en",isoCode:"AU"},{name:"Austria",primaryLanguageCode:"de",isoCode:"AT"},{name:"Azerbaijan",primaryLanguageCode:"az",isoCode:"AZ"},{name:"Bahamas",primaryLanguageCode:"en",isoCode:"BS"},{name:"Bahrain",primaryLanguageCode:"ar",isoCode:"BH"},{name:"Bangladesh",primaryLanguageCode:"bn",isoCode:"BD"},{name:"Barbados",primaryLanguageCode:"en",isoCode:"BB"},{name:"Belarus",primaryLanguageCode:"be",isoCode:"BY"},{name:"Belgium",primaryLanguageCode:"nl",isoCode:"BE"},{name:"Belize",primaryLanguageCode:"en",isoCode:"BZ"},{name:"Benin",primaryLanguageCode:"fr",isoCode:"BJ"},{name:"Bermuda",primaryLanguageCode:"en",isoCode:"BM"},{name:"Bhutan",primaryLanguageCode:"dz",isoCode:"BT"},{name:"Bolivia",primaryLanguageCode:"es",isoCode:"BO"},{name:"Bonaire, Sint Eustatius and Saba",primaryLanguageCode:"nl",isoCode:"BQ"},{name:"Bosnia and Herzegovina",primaryLanguageCode:"bs",isoCode:"BA"},{name:"Botswana",primaryLanguageCode:"en",isoCode:"BW"},{name:"Bouvet Island",primaryLanguageCode:"no",isoCode:"BV"},{name:"Brazil",primaryLanguageCode:"pt",isoCode:"BR"},{name:"British Indian Ocean Territory",primaryLanguageCode:"en",isoCode:"IO"},{name:"Brunei Darussalam",primaryLanguageCode:"ms",isoCode:"BN"},{name:"Bulgaria",primaryLanguageCode:"bg",isoCode:"BG"},{name:"Burkina Faso",primaryLanguageCode:"fr",isoCode:"BF"},{name:"Burundi",primaryLanguageCode:"fr",isoCode:"BI"},{name:"Cabo Verde",primaryLanguageCode:"pt",isoCode:"CV"},{name:"Cambodia",primaryLanguageCode:"km",isoCode:"KH"},{name:"Cameroon",primaryLanguageCode:"en",isoCode:"CM"},{name:"Canada",primaryLanguageCode:"en",isoCode:"CA"},{name:"Cayman Islands",primaryLanguageCode:"en",isoCode:"KY"},{name:"Central African Republic",primaryLanguageCode:"fr",isoCode:"CF"},{name:"Chad",primaryLanguageCode:"fr",isoCode:"TD"},{name:"Chile",primaryLanguageCode:"es",isoCode:"CL"},{name:"China",primaryLanguageCode:"zh",isoCode:"CN"},{name:"Christmas Island",primaryLanguageCode:"en",isoCode:"CX"},{name:"Cocos (Keeling) Islands",primaryLanguageCode:"en",isoCode:"CC"},{name:"Colombia",primaryLanguageCode:"es",isoCode:"CO"},{name:"Comoros",primaryLanguageCode:"fr",isoCode:"KM"},{name:"Congo",primaryLanguageCode:"fr",isoCode:"CG"},{name:"Congo (Democratic Republic of the)",primaryLanguageCode:"fr",isoCode:"CD"},{name:"Cook Islands",primaryLanguageCode:"en",isoCode:"CK"},{name:"Costa Rica",primaryLanguageCode:"es",isoCode:"CR"},{name:"Croatia",primaryLanguageCode:"hr",isoCode:"HR"},{name:"Cuba",primaryLanguageCode:"es",isoCode:"CU"},{name:"Curaao",primaryLanguageCode:"nl",isoCode:"CW"},{name:"Cyprus",primaryLanguageCode:"tr",isoCode:"CY"},{name:"Czech Republic",primaryLanguageCode:"cs",isoCode:"CZ"},{name:"Cte d'Ivoire",primaryLanguageCode:"fr",isoCode:"CI"},{name:"Denmark",primaryLanguageCode:"da",isoCode:"DK"},{name:"Djibouti",primaryLanguageCode:"fr",isoCode:"DJ"},{name:"Dominica",primaryLanguageCode:"en",isoCode:"DM"},{name:"Dominican Republic",primaryLanguageCode:"es",isoCode:"DO"},{name:"Ecuador",primaryLanguageCode:"es",isoCode:"EC"},{name:"Egypt",primaryLanguageCode:"ar",isoCode:"EG"},{name:"El Salvador",primaryLanguageCode:"es",isoCode:"SV"},{name:"Equatorial Guinea",primaryLanguageCode:"es",isoCode:"GQ"},{name:"Eritrea",primaryLanguageCode:"en",isoCode:"ER"},{name:"Estonia",primaryLanguageCode:"et",isoCode:"EE"},{name:"Ethiopia",primaryLanguageCode:"am",isoCode:"ET"},{name:"Falkland Islands (Malvinas)",primaryLanguageCode:"en",isoCode:"FK"},{name:"Faroe Islands",primaryLanguageCode:"fo",isoCode:"FO"},{name:"Fiji",primaryLanguageCode:"en",isoCode:"FJ"},{name:"Finland",primaryLanguageCode:"fi",isoCode:"FI"},{name:"France",primaryLanguageCode:"fr",isoCode:"FR"},{name:"French Guiana",primaryLanguageCode:"fr",isoCode:"GF"},{name:"French Polynesia",primaryLanguageCode:"fr",isoCode:"PF"},{name:"French Southern Territories",primaryLanguageCode:"fr",isoCode:"TF"},{name:"Gabon",primaryLanguageCode:"fr",isoCode:"GA"},{name:"Gambia",primaryLanguageCode:"en",isoCode:"GM"},{name:"Georgia",primaryLanguageCode:"ka",isoCode:"GE"},{name:"Germany",primaryLanguageCode:"de",isoCode:"DE"},{name:"Ghana",primaryLanguageCode:"en",isoCode:"GH"},{name:"Gibraltar",primaryLanguageCode:"en",isoCode:"GI"},{name:"Greece",primaryLanguageCode:"el",isoCode:"GR"},{name:"Greenland",primaryLanguageCode:"kl",isoCode:"GL"},{name:"Grenada",primaryLanguageCode:"en",isoCode:"GD"},{name:"Guadeloupe",primaryLanguageCode:"fr",isoCode:"GP"},{name:"Guam",primaryLanguageCode:"en",isoCode:"GU"},{name:"Guatemala",primaryLanguageCode:"es",isoCode:"GT"},{name:"Guernsey",primaryLanguageCode:"en",isoCode:"GG"},{name:"Guinea",primaryLanguageCode:"fr",isoCode:"GN"},{name:"Guinea-Bissau",primaryLanguageCode:"pt",isoCode:"GW"},{name:"Guyana",primaryLanguageCode:"en",isoCode:"GY"},{name:"Haiti",primaryLanguageCode:"fr",isoCode:"HT"},{name:"Heard Island and McDonald Islands",primaryLanguageCode:"en",isoCode:"HM"},{name:"Holy See",primaryLanguageCode:"fr",isoCode:"VA"},{name:"Honduras",primaryLanguageCode:"es",isoCode:"HN"},{name:"Hong Kong",primaryLanguageCode:"en",isoCode:"HK"},{name:"Hungary",primaryLanguageCode:"hu",isoCode:"HU"},{name:"Iceland",primaryLanguageCode:"is",isoCode:"IS"},{name:"India",primaryLanguageCode:"hi",isoCode:"IN"},{name:"Indonesia",primaryLanguageCode:"id",isoCode:"ID"},{name:"Iran (Islamic Republic of)",primaryLanguageCode:"fa",isoCode:"IR"},{name:"Iraq",primaryLanguageCode:"ar",isoCode:"IQ"},{name:"Ireland",primaryLanguageCode:"ga",isoCode:"IE"},{name:"Isle of Man",primaryLanguageCode:"en",isoCode:"IM"},{name:"Israel",primaryLanguageCode:"he",isoCode:"IL"},{name:"Italy",primaryLanguageCode:"it",isoCode:"IT"},{name:"Jamaica",primaryLanguageCode:"en",isoCode:"JM"},{name:"Japan",primaryLanguageCode:"ja",isoCode:"JP"},{name:"Jersey",primaryLanguageCode:"en",isoCode:"JE"},{name:"Jordan",primaryLanguageCode:"ar",isoCode:"JO"},{name:"Kazakhstan",primaryLanguageCode:"kk",isoCode:"KZ"},{name:"Kenya",primaryLanguageCode:"en",isoCode:"KE"},{name:"Kiribati",primaryLanguageCode:"en",isoCode:"KI"},{name:"Korea (Democratic People's Republic of)",primaryLanguageCode:"ko",isoCode:"KP"},{name:"Korea (Republic of)",primaryLanguageCode:"ko",isoCode:"KR"},{name:"Kuwait",primaryLanguageCode:"ar",isoCode:"KW"},{name:"Kyrgyzstan",primaryLanguageCode:"ky",isoCode:"KG"},{name:"Lao People's Democratic Republic",primaryLanguageCode:"lo",isoCode:"LA"},{name:"Latvia",primaryLanguageCode:"lv",isoCode:"LV"},{name:"Lebanon",primaryLanguageCode:"ar",isoCode:"LB"},{name:"Lesotho",primaryLanguageCode:"en",isoCode:"LS"},{name:"Liberia",primaryLanguageCode:"en",isoCode:"LR"},{name:"Libya",primaryLanguageCode:"ar",isoCode:"LY"},{name:"Liechtenstein",primaryLanguageCode:"de",isoCode:"LI"},{name:"Lithuania",primaryLanguageCode:"lt",isoCode:"LT"},{name:"Luxembourg",primaryLanguageCode:"fr",isoCode:"LU"},{name:"Macao",primaryLanguageCode:"zh",isoCode:"MO"},{name:"Macedonia (the former Yugoslav Republic of)",primaryLanguageCode:"mk",isoCode:"MK"},{name:"Madagascar",primaryLanguageCode:"fr",isoCode:"MG"},{name:"Malawi",primaryLanguageCode:"en",isoCode:"MW"},{name:"Malaysia",primaryLanguageCode:"",isoCode:"MY"},{name:"Maldives",primaryLanguageCode:"dv",isoCode:"MV"},{name:"Mali",primaryLanguageCode:"fr",isoCode:"ML"},{name:"Malta",primaryLanguageCode:"mt",isoCode:"MT"},{name:"Marshall Islands",primaryLanguageCode:"en",isoCode:"MH"},{name:"Martinique",primaryLanguageCode:"fr",isoCode:"MQ"},{name:"Mauritania",primaryLanguageCode:"ar",isoCode:"MR"},{name:"Mauritius",primaryLanguageCode:"en",isoCode:"MU"},{name:"Mayotte",primaryLanguageCode:"fr",isoCode:"YT"},{name:"Mexico",primaryLanguageCode:"es",isoCode:"MX"},{name:"Micronesia (Federated States of)",primaryLanguageCode:"en",isoCode:"FM"},{name:"Moldova (Republic of)",primaryLanguageCode:"ro",isoCode:"MD"},{name:"Monaco",primaryLanguageCode:"fr",isoCode:"MC"},{name:"Mongolia",primaryLanguageCode:"mn",isoCode:"MN"},{name:"Montenegro",primaryLanguageCode:"sr",isoCode:"ME"},{name:"Montserrat",primaryLanguageCode:"en",isoCode:"MS"},{name:"Morocco",primaryLanguageCode:"ar",isoCode:"MA"},{name:"Mozambique",primaryLanguageCode:"pt",isoCode:"MZ"},{name:"Myanmar",primaryLanguageCode:"my",isoCode:"MM"},{name:"Namibia",primaryLanguageCode:"en",isoCode:"NA"},{name:"Nauru",primaryLanguageCode:"en",isoCode:"NR"},{name:"Nepal",primaryLanguageCode:"ne",isoCode:"NP"},{name:"Netherlands",primaryLanguageCode:"nl",isoCode:"NL"},{name:"New Caledonia",primaryLanguageCode:"fr",isoCode:"NC"},{name:"New Zealand",primaryLanguageCode:"en",isoCode:"NZ"},{name:"Nicaragua",primaryLanguageCode:"es",isoCode:"NI"},{name:"Niger",primaryLanguageCode:"fr",isoCode:"NE"},{name:"Nigeria",primaryLanguageCode:"en",isoCode:"NG"},{name:"Niue",primaryLanguageCode:"en",isoCode:"NU"},{name:"Norfolk Island",primaryLanguageCode:"en",isoCode:"NF"},{name:"Northern Mariana Islands",primaryLanguageCode:"en",isoCode:"MP"},{name:"Norway",primaryLanguageCode:"no",isoCode:"NO"},{name:"Oman",primaryLanguageCode:"ar",isoCode:"OM"},{name:"Pakistan",primaryLanguageCode:"en",isoCode:"PK"},{name:"Palau",primaryLanguageCode:"en",isoCode:"PW"},{name:"Palestine, State of",primaryLanguageCode:"ar",isoCode:"PS"},{name:"Panama",primaryLanguageCode:"es",isoCode:"PA"},{name:"Papua New Guinea",primaryLanguageCode:"en",isoCode:"PG"},{name:"Paraguay",primaryLanguageCode:"es",isoCode:"PY"},{name:"Peru",primaryLanguageCode:"es",isoCode:"PE"},{name:"Philippines",primaryLanguageCode:"en",isoCode:"PH"},{name:"Pitcairn",primaryLanguageCode:"en",isoCode:"PN"},{name:"Poland",primaryLanguageCode:"pl",isoCode:"PL"},{name:"Portugal",primaryLanguageCode:"pt",isoCode:"PT"},{name:"Puerto Rico",primaryLanguageCode:"es",isoCode:"PR"},{name:"Qatar",primaryLanguageCode:"ar",isoCode:"QA"},{name:"Republic of Kosovo",primaryLanguageCode:"sq",isoCode:"XK"},{name:"Romania",primaryLanguageCode:"ro",isoCode:"RO"},{name:"Russia",primaryLanguageCode:"ru",isoCode:"RU"},{name:"Rwanda",primaryLanguageCode:"rw",isoCode:"RW"},{name:"Runion",primaryLanguageCode:"fr",isoCode:"RE"},{name:"Saint Barthlemy",primaryLanguageCode:"fr",isoCode:"BL"},{name:"Saint Helena, Ascension and Tristan da Cunha",primaryLanguageCode:"en",isoCode:"SH"},{name:"Saint Kitts and Nevis",primaryLanguageCode:"en",isoCode:"KN"},{name:"Saint Lucia",primaryLanguageCode:"en",isoCode:"LC"},{name:"Saint Martin (French part)",primaryLanguageCode:"en",isoCode:"MF"},{name:"Saint Pierre and Miquelon",primaryLanguageCode:"fr",isoCode:"PM"},{name:"Saint Vincent and the Grenadines",primaryLanguageCode:"en",isoCode:"VC"},{name:"Samoa",primaryLanguageCode:"sm",isoCode:"WS"},{name:"San Marino",primaryLanguageCode:"it",isoCode:"SM"},{name:"Sao Tome and Principe",primaryLanguageCode:"pt",isoCode:"ST"},{name:"Saudi Arabia",primaryLanguageCode:"ar",isoCode:"SA"},{name:"Senegal",primaryLanguageCode:"fr",isoCode:"SN"},{name:"Serbia",primaryLanguageCode:"sr",isoCode:"RS"},{name:"Seychelles",primaryLanguageCode:"fr",isoCode:"SC"},{name:"Sierra Leone",primaryLanguageCode:"en",isoCode:"SL"},{name:"Singapore",primaryLanguageCode:"en",isoCode:"SG"},{name:"Sint Maarten (Dutch part)",primaryLanguageCode:"nl",isoCode:"SX"},{name:"Slovakia",primaryLanguageCode:"sk",isoCode:"SK"},{name:"Slovenia",primaryLanguageCode:"sl",isoCode:"SI"},{name:"Solomon Islands",primaryLanguageCode:"en",isoCode:"SB"},{name:"Somalia",primaryLanguageCode:"ar",isoCode:"SO"},{name:"South Africa",primaryLanguageCode:"en",isoCode:"ZA"},{name:"South Georgia and the South Sandwich Islands",primaryLanguageCode:"en",isoCode:"GS"},{name:"South Sudan",primaryLanguageCode:"en",isoCode:"SS"},{name:"Spain",primaryLanguageCode:"es",isoCode:"ES"},{name:"Sri Lanka",primaryLanguageCode:"si",isoCode:"LK"},{name:"Sudan",primaryLanguageCode:"ar",isoCode:"SD"},{name:"Suriname",primaryLanguageCode:"nl",isoCode:"SR"},{name:"Svalbard and Jan Mayen",primaryLanguageCode:"no",isoCode:"SJ"},{name:"Swaziland",primaryLanguageCode:"en",isoCode:"SZ"},{name:"Sweden",primaryLanguageCode:"sv",isoCode:"SE"},{name:"Switzerland",primaryLanguageCode:"de",isoCode:"CH"},{name:"Syrian Arab Republic",primaryLanguageCode:"ar",isoCode:"SY"},{name:"Taiwan",primaryLanguageCode:"zh",isoCode:"TW"},{name:"Tajikistan",primaryLanguageCode:"tg",isoCode:"TJ"},{name:"Tanzania, United Republic of",primaryLanguageCode:"en",isoCode:"TZ"},{name:"Thailand",primaryLanguageCode:"th",isoCode:"TH"},{name:"Timor-Leste",primaryLanguageCode:"pt",isoCode:"TL"},{name:"Togo",primaryLanguageCode:"fr",isoCode:"TG"},{name:"Tokelau",primaryLanguageCode:"en",isoCode:"TK"},{name:"Tonga",primaryLanguageCode:"en",isoCode:"TO"},{name:"Trinidad and Tobago",primaryLanguageCode:"en",isoCode:"TT"},{name:"Tunisia",primaryLanguageCode:"ar",isoCode:"TN"},{name:"Turkey",primaryLanguageCode:"tr",isoCode:"TR"},{name:"Turkmenistan",primaryLanguageCode:"tk",isoCode:"TM"},{name:"Turks and Caicos Islands",primaryLanguageCode:"en",isoCode:"TC"},{name:"Tuvalu",primaryLanguageCode:"en",isoCode:"TV"},{name:"Uganda",primaryLanguageCode:"en",isoCode:"UG"},{name:"Ukraine",primaryLanguageCode:"uk",isoCode:"UA"},{name:"United Arab Emirates",primaryLanguageCode:"ar",isoCode:"AE"},{name:"United Kingdom of Great Britain and Northern Ireland",primaryLanguageCode:"en",isoCode:"GB"},{name:"United States Minor Outlying Islands",primaryLanguageCode:"en",isoCode:"UM"},{name:"Uruguay",primaryLanguageCode:"es",isoCode:"UY"},{name:"Uzbekistan",primaryLanguageCode:"uz",isoCode:"UZ"},{name:"Vanuatu",primaryLanguageCode:"en",isoCode:"VU"},{name:"Venezuela (Bolivarian Republic of)",primaryLanguageCode:"es",isoCode:"VE"},{name:"Vietnam",primaryLanguageCode:"vi",isoCode:"VN"},{name:"Virgin Islands (British)",primaryLanguageCode:"en",isoCode:"VG"},{name:"Virgin Islands (U.S.)",primaryLanguageCode:"en",isoCode:"VI"},{name:"Wallis and Futuna",primaryLanguageCode:"fr",isoCode:"WF"},{name:"Western Sahara",primaryLanguageCode:"es",isoCode:"EH"},{name:"Yemen",primaryLanguageCode:"ar",isoCode:"YE"},{name:"Zambia",primaryLanguageCode:"en",isoCode:"ZM"},{name:"Zimbabwe",primaryLanguageCode:"en",isoCode:"ZW"},{name:"land Islands",primaryLanguageCode:"sv",isoCode:"AX"}],o=(()=>{const a=r(),e={};return a.forEach((a=>{e[a.isoCode]=a})),e})();var s;!function(a){a.USD="USD",a.GBP="GBP",a.CAD="CAD",a.EUR="EUR",a.AUD="AUD",a.NZD="NZD"}(s||(s={}));const t=()=>[{isoCode:"AL",name:"Alabama"},{isoCode:"AK",name:"Alaska"},{isoCode:"AZ",name:"Arizona"},{isoCode:"AR",name:"Arkansas"},{isoCode:"CA",name:"California"},{isoCode:"CO",name:"Colorado"},{isoCode:"CT",name:"Connecticut"},{isoCode:"DC",name:"District of Columbia"},{isoCode:"DE",name:"Delaware"},{isoCode:"FL",name:"Florida"},{isoCode:"GA",name:"Georgia"},{isoCode:"HI",name:"Hawaii"},{isoCode:"ID",name:"Idaho"},{isoCode:"IL",name:"Illinois"},{isoCode:"IN",name:"Indiana"},{isoCode:"IA",name:"Iowa"},{isoCode:"KS",name:"Kansas"},{isoCode:"KY",name:"Kentucky"},{isoCode:"LA",name:"Louisiana"},{isoCode:"ME",name:"Maine"},{isoCode:"MD",name:"Maryland"},{isoCode:"MA",name:"Massachusetts"},{isoCode:"MI",name:"Michigan"},{isoCode:"MN",name:"Minnesota"},{isoCode:"MS",name:"Mississippi"},{isoCode:"MO",name:"Missouri"},{isoCode:"MT",name:"Montana"},{isoCode:"NE",name:"Nebraska"},{isoCode:"NV",name:"Nevada"},{isoCode:"NH",name:"New Hampshire"},{isoCode:"NJ",name:"New Jersey"},{isoCode:"NM",name:"New Mexico"},{isoCode:"NY",name:"New York"},{isoCode:"NC",name:"North Carolina"},{isoCode:"ND",name:"North Dakota"},{isoCode:"OH",name:"Ohio"},{isoCode:"OK",name:"Oklahoma"},{isoCode:"OR",name:"Oregon"},{isoCode:"PA",name:"Pennsylvania"},{isoCode:"RI",name:"Rhode Island"},{isoCode:"SC",name:"South Carolina"},{isoCode:"SD",name:"South Dakota"},{isoCode:"TN",name:"Tennessee"},{isoCode:"TX",name:"Texas"},{isoCode:"UT",name:"Utah"},{isoCode:"VT",name:"Vermont"},{isoCode:"VA",name:"Virginia"},{isoCode:"WA",name:"Washington"},{isoCode:"WV",name:"West Virginia"},{isoCode:"WI",name:"Wisconsin"},{isoCode:"WY",name:"Wyoming"}],N=(()=>{const a=t(),e={};return a.forEach((a=>{e[a.isoCode]=a})),e})();return {a:(a,e,{postId:n,subredditName:r,adAccountId:o}={})=>i({source:"boost_post_page",action:a,noun:e},n,r,o),b:i,c:r,d:o,e:N,f:()=>[{label:"USD $",value:s.USD},{label:"AUD $",value:s.AUD},{label:"CAD $",value:s.CAD},{label:"EUR ",value:s.EUR},{label:"GBP ",value:s.GBP},{label:"NZD $",value:s.NZD}],g:a=>({[s.USD]:"USD $",[s.AUD]:"AUD $",[s.CAD]:"CAD $",[s.EUR]:"EUR ",[s.GBP]:"GBP ",[s.NZD]:"NZD $"}[a]),p:n,s:t,v:function(e){const i=n(`/boost-post/${e.startsWith("t3_")?e.slice(3):e}`);a.dW.assign(i)}};}));
SML.dm("B_eoQ41X",["CVEbQKiO","D7lSuCop","UeyFDWWE","CWo_XZVj","ClF_poCN"],(async(t,e,o,s,r)=>{let a=class extends t.s{constructor(){super(...arguments),this.postId="",this.subredditName="",this.isLoaded=!1,this._getPageType=e.z,this.handleClick=()=>{s.v(this.postId),e.e(this,s.b({source:"post",action:"click",noun:"promote_button"},this.postId,this.subredditName))}}static get styles(){return[e.t]}async connectedCallback(){super.connectedCallback?.(),e.e(this,s.b({source:"post",action:"view",noun:"promote_button"},this.postId,this.subredditName)),this.isLoaded=!0}createRenderRoot(){return this}render(){let s;const a=this._getPageType();return a&&r.i(a)&&(s="Promote"),t.x`<span class="relative flex justify-end"> ${o.c({appearance:"secondary",leadingIcon:t.G({size:o.I[e._.Small],attributes:{className:"icon-promote-post","aria-hidden":"true"}}),attributes:{name:"promote-post-button","data-post-click-location":e.a8.PROMOTE_POST_BUTTON,onclick:this.handleClick,className:"me-0 ps-[6px] pe-[6px] ms-[6px] flex-shrink-0",disabled:!this.isLoaded},size:e._.Small,screenReaderContent:"Promote Post",children:s})} </span>`;}};t._([t.n({attribute:"post-id"})],a.prototype,"postId",void 0),t._([t.n({attribute:"subreddit-name"})],a.prototype,"subredditName",void 0),t._([t.b()],a.prototype,"isLoaded",void 0),a=t._([t.c("promote-post-button")],a)}));
SML.dm("NZrnLhhZ",["ClF_poCN","D7lSuCop","B_eoQ41X","CVEbQKiO","CWo_XZVj","UeyFDWWE"],(async(t,E)=>{var r;!function(t){t[t.ShredditPost=0]="ShredditPost",t[t.PostStats=1]="PostStats",t[t.PostStatsEntryPoint=2]="PostStatsEntryPoint"}(r||(r={}));const o=new Map([[r.PostStats,[E.aa.ProfilePerformance]],[r.PostStatsEntryPoint,t.r]]);let s;const T=()=>{if(!s){const t=new Map;for(const[E,r]of o.entries())for(const o of r)t.set(o,E);s=t}return s};return{get P(){return r},g:t=>{if(t){const E=T().get(t);if(E)return E}return r.ShredditPost}}}));
SML.dm("YDaizTe1",["CVEbQKiO","D7lSuCop","BxmAGM9T","CITAGWir","kExRqc7d"],(async(t,e,a)=>{const i=t.s,n="translation-intervention-modal",{I18nPostTranslationOverride:s,I18nCommentTranslationOverride:o}=e.T,r=()=>!!e.l.getItem(e.L.I18nTranslationInterventionShown),l=()=>e.l.setItem(e.L.I18nTranslationInterventionShown,"true");let d=class extends i{constructor(){super(...arguments),this.translationContextValue=e.at,this.open=!1,this.pubsub=new e.P(this),this.handleTranslationOverride=t=>{t.isContextUpdateEvent||r()||this.open||(this.translationOverrideActive=t.isTranslationActive,this.translationSourceId=t.id,this.show())},this.show=()=>{r()||(this.open=!0,this.modal?.showModal(),l())},this.close=()=>{this.translationOverrideActive=void 0,this.translationSourceId=void 0,this.open&&(this.modal?.close(),this.open=!1,this.dispatchEvent(new CustomEvent("translation-intervention-modal:close",{bubbles:!0,composed:!0})))},this.getThingTelemetryMetadata=()=>({post:"post"===this.mode?{id:this.translationSourceId,translation_state:!!this.translationOverrideActive}:"mtseo-post"===this.mode?{id:this.translationSourceId}:void 0,comment:"comment"===this.mode?{id:this.translationSourceId,translation_state:!!this.translationOverrideActive}:void 0}),this.handleDismiss=()=>{e.e(this,a.e({isImmersiveTranslationsActive:!!this.translationContextValue.isTranslationActive,isImmersiveVisit:this.isImmersiveVisit,...this.getThingTelemetryMetadata()})),this.close()},this.handleClick=t=>{e.e(this,a.f({actionType:t,isImmersiveTranslationsActive:"keep"===t?!!this.translationContextValue.isTranslationActive:!this.translationContextValue.isTranslationActive,isImmersiveVisit:this.isImmersiveVisit,...this.getThingTelemetryMetadata()})),"keep"===t?this.close():this.handleSubmit()},this.handleSubmit=()=>{"mtseo-post"===this.mode&&e.l.setItem(e.L.I18nTranslationInterventionShown,"mtseo-disabled");const t=this.translationOverrideActive;this.dispatchContextUpdateEvent(t),this.close()}}connectedCallback(){super.connectedCallback(),r()||("post"===this.mode&&this.pubsub.subscribe(s,this.handleTranslationOverride,!1),"comment"===this.mode&&this.pubsub.subscribe(o,this.handleTranslationOverride,!1))}dispatchContextUpdateEvent(t){const a=new CustomEvent("update-translation-context",{bubbles:!0,composed:!0,detail:{...this.translationContextValue,isTranslationActive:t}});this.dispatchEvent(a),this.pubsub.publish(e.T.I18nPostTranslationOverride,{isTranslationActive:t,id:"",isContextUpdateEvent:!0,pageType:"feed"===this.pageType?"FEED":"PDP"})}render(){const a=this.translationOverrideActive?{body:"It looks like you know another language. Would you like all your content automatically translated?",confirmButton:"Continue Without Translations",cancelButton:"Turn On Translations"}:{body:"It looks like you know another language. Would you like to keep automatic translations turned on?",confirmButton:"Continue With Translations",cancelButton:"Turn off Translations"};return t.x` <faceplate-modal blocking ?open="${this.open}" class="${n} w-[350px] m:w-[320px] h-fit z-10"> <div slot="title" class="w-full m:w-fit"> <h3 class="my-0 font-bold inline-flex text-18" data-testid="i18n-modal-title"> ${"Update translations on Reddit"} </h3> </div> <div slot="closeButton" class="flex items-center"> ${e.k({attributes:{"aria-label":"Close","data-testid":"i18n-modal-close-button",onclick:this.handleDismiss},appearance:"secondary",leadingIcon:t.C({size:t.q.Small}),size:e._.Small})} </div> <div class="flex flex-col w-full box-border"> <span class="text-16 my-lg text-pretty">${a.body}</span> <div class="flex flex-col w-full items-stretch gap-xs"> ${e.k({appearance:"primary",size:e._.Large,shape:"pill",attributes:{className:"flex box-border w-full","data-testid":"i18n-modal-confirm-button",onclick:this.handleClick.bind(this,"keep")},children:t.x`<span class="font-semibold text-14">${a.confirmButton}</span>`})} ${e.k({appearance:"secondary",size:e._.Large,shape:"pill",attributes:{className:"flex box-border w-full","data-testid":"i18n-modal-cancel-button",onclick:this.handleClick.bind(this,"change")},children:t.x`<span class="font-semibold text-14">${a.cancelButton}</span>`})} </div> </div> </faceplate-modal> `;}};d.styles=[e.t],t._([e.as({context:e.au,subscribe:!0}),t.b()],d.prototype,"translationContextValue",void 0),t._([t.n({type:String,attribute:"mode"})],d.prototype,"mode",void 0),t._([t.n({type:Boolean,attribute:"open"})],d.prototype,"open",void 0),t._([t.n({type:String,attribute:"page-type"})],d.prototype,"pageType",void 0),t._([t.n({type:Boolean,attribute:"is-immersive-visit"})],d.prototype,"isImmersiveVisit",void 0),t._([t.b()],d.prototype,"translationOverrideActive",void 0),t._([t.b()],d.prototype,"translationSourceId",void 0),t._([t.z(`faceplate-modal.${n}`)],d.prototype,"modal",void 0),d=t._([t.c("translation-intervention-modal")],d)}));
SML.dm("BRarYp5X",["D7lSuCop"],(async e=>{const a="devplatform",r=a=>{switch(a){case e.aa.PostDetail:return"pdp";case e.aa.Profile:return"profile";case e.aa.Community:return"subreddit";case e.aa.Embed:return"embed";case e.aa.Home:case e.aa.Popular:case e.aa.All:case e.aa.CustomFeed:case e.aa.GeoCuratedFeed:case e.aa.UserPosts:case e.aa.ModQueue:case e.aa.ModQueueAll:case e.aa.SearchResults:return"feed";default:return""}};var t;!function(e){e.all="all",e.arena="arena",e.conversation="conversation",e.custom="custom",e.embed="embed",e.home="home",e.modQueue="mod_queue",e.modQueueAll="mod_queue_all",e.news="news",e.popular="popular",e.profile="profile",e.promotedSearchTrend="promoted_search_trend",e.read="read",e.search="search",e.subreddit="subreddit",e.user="user",e.watch="watch"}(t||(t={}));const s=a=>{switch(a){case e.aa.All:return t.all;case e.aa.ArenaFeed:return t.arena;case e.aa.Community:return t.subreddit;case e.aa.CustomFeed:case e.aa.GeoCuratedFeed:return t.custom;case e.aa.Embed:return t.embed;case e.aa.Home:return t.home;case e.aa.ModQueue:return t.modQueue;case e.aa.ModQueueAll:return t.modQueueAll;case e.aa.Popular:return t.popular;case e.aa.Profile:return t.profile;case e.aa.SearchResults:return t.search;case e.aa.UserPosts:return t.user;default:return""}};return{D:a,a:(e,a)=>{if(URL.canParse(e)){const r=new URL(e);return r.searchParams.set("entry_point",a),r.toString()}return e},c:e=>({source:a,action:e.action,noun:e.noun,devplatform_custom_post_info:{post_id:e.postId,subreddit_id:e.subredditId,block_type:e.blockType,presentation_context:e.pageType?r(e.pageType):"",feed_type:e.pageType?s(e.pageType):"",watermark:e.watermark,post_chrome:e.post_chrome},devplatform:{runtime:"web",installation_id:e.appInstallationId,app_id:e.appId,app_slug:e.appSlug,app_name:e.appSlug,app_version_number:e.appVersionNumber,public_api_version:e.appPublicApiVersion,internal_entry_point:e.internalEntryPoint||"",app_recommendation_criteria:e.appRecommendationCriteria||""},request:{user_agent:e.userAgent},post:e.post})}}));
SML.dm("DE0FOF-R",["D7lSuCop"],(async t=>{const e={next:"nextElementSibling",prev:"previousElementSibling"};var r,s;!function(t){t.FEED="feed",t.COMMENTS_PAGE="comments_page"}(r||(r={})),function(t){t.NEXT="next",t.PREV="prev"}(s||(s={}));return{get P(){return s},a:class{constructor(s,n){this.cache={},this.isPostOrComment=t=>["shreddit-comment","shreddit-post","shreddit-ad-post","shreddit-profile-comment"].includes(t?.tagName.toLowerCase()??""),this.traverse=t=>{const e=this.current;this._current?this.findPostOrComment(t):this._current=this.options.getFirstElement(),this.focusElement(e)},this.focusElement=e=>{if(!this.current||e===this.current)return;const s=document.activeElement;this.current?.onHotkeysFocus?this.current.onHotkeysFocus?.({preventScroll:!0}):this.current.hotkeyController?.onFocus?.({preventScroll:!0}),s===document.activeElement&&t.aP(this.current)?.focus(),this.current.style.scrollMarginTop="var(--shreddit-header-height)";const n=this.isCurrentComment?"start":this.options.type===r.COMMENTS_PAGE?"end":"center";this.current.scrollIntoView({behavior:"instant",block:n})},this.findPostOrComment=t=>{let r=this._current;for(let s=0;r&&s<this.options.maxTraversalCount;s++){const s=r,n=this.options.customTraversal?.(t,r);if(r=n??r?.[e[t]]??s.parentElement?.[e[t]],this.options?.customPostOrCommentDetection?.(r)||this.isPostOrComment(r)){this._current=r;break}}},this.host=s,this.host.addController(this),this.options={maxTraversalCount:10,...n}}hostConnected(){}hostDisconnected(){}get current(){return this._current!==this.cache?.rawElement&&(this.cache={rawElement:this._current,postOrComment:this.options?.customPostOrCommentDetection?.(this._current)??this._current}),this.cache?.postOrComment}get isCurrentPost(){return["shreddit-post","shreddit-ad-post"].includes(this.current?.tagName.toLowerCase()??"")}get isCurrentComment(){return"shreddit-comment"===(this.current?.tagName.toLowerCase()??"")}get isCurrentProfileComment(){return"shreddit-profile-comment"===(this.current?.tagName.toLowerCase()??"")}},get b(){return r}}}));
SML.dm("DgqUM2V2",["CVEbQKiO","D7lSuCop","BWyYpeH6","LCU6ttla","BC8XSJYX","BNksWu9w","UeyFDWWE","B6r1xcS1","NZrnLhhZ","DJy2jSvu","CCphb8vV","DlWm-1vG","Cx0Ea5Jz","DsV3drw0","BRarYp5X","Bgpq8Ukm","Bw4iLYyr","DlFJW-AA","DE0FOF-R","5NUG_JHL","BYDFL-1r","gYqzC9DM","B011DCe8","AhHXxeIZ","GpA9mJze","B92R8McT","Bd8lDV8U","DR8kbffm","B_eoQ41X","CWo_XZVj","YDaizTe1","58f2cEWE","DkJsPyQM","BmXCRIMH","B05atAPk","BwmVBZAv","Bj8wOYTD","CK9FveTr","ClF_poCN","likT9J3g","CGzEIBwW","DEQ-l4mm","CK47trMR","BxmAGM9T","CITAGWir","kExRqc7d","CU4mObWU","n2VAdrRK","CLkam3rl"],(async(t,e,o,i,s,n,r,a,l,d,p,h,c,u,m,b,v,g,T,E)=>{const S=72e6,C=[S,S,1296e5,216e6,216e6],y=()=>{const t=localStorage.getItem(e.L.CrosspostingUpsellExperiment);if(t)return JSON.parse(t)},P=t=>{localStorage.setItem(e.L.CrosspostingUpsellExperiment,JSON.stringify(t))},k=async t=>{if((()=>{const t=y();if(!t)return!1;const{timer:e,snoozes:o,savedDate:i}=t;return o>=C.length||(new Date).getTime()-i<e})())return;const o=await e.v({operation:e.O.WhereToCrosspostNewModSuggestions,variables:{postId:t}}),i=o.data?.whereToCrosspostSuggestions?.edges;return i&&i?.length>0&&"Subreddit"===i[0]?.node?.subredditInfo.__typename?i[0]?.node?.subredditInfo:void 0};function I(t,e=!0){t=t||"";const[o,i]=t.split("?");let s=`https://www.reddit.com${("/"!==o[0]&&o.length>0?"/":"")+o}`;return e&&!s.endsWith("/")&&(s+="/"),i&&(s+=`?${i}`),s}let N=class extends t.s{constructor(){super(),this.name="",this.prefixedName="",this.subredditId="",this.isNsfw=!1,this.postId="",this.isOpen=!1,this.wasSeen=!1,this.trackExperimentEvent=(t,o,i)=>{e.e(this,e.b({source:t,action:o,noun:i},{subreddit:{id:this.subredditId,name:this.name,nsfw:this.isNsfw},post:{id:this.postId||""}}))},this.onShareClick=()=>{P({timer:18e5,snoozes:1,savedDate:(new Date).getTime()}),this.isOpen=!1,this.wasSeen=!0,this.trackExperimentEvent("crosspost_prompt","share","button")},this.onSkipClick=()=>{this.onMaybeSetCooldown(),this.isOpen=!1},new e.ag(this,this,{threshold:[.5]})}connectedCallback(){e.al.subscribe(this.onMaybeSetCooldown,{shouldBeCalledFirst:!0}),super.connectedCallback(),this.addEventListener("faceplate-leave",this.onMaybeSetCooldown),this.trackExperimentEvent("crosspost_prompt","view","coachmark"),setTimeout((()=>{this.onMaybeSetCooldown()}),3e5)}disconnectedCallback(){super.disconnectedCallback(),e.al.unsubscribe(this.onMaybeSetCooldown),this.removeEventListener("faceplate-leave",this.onMaybeSetCooldown)}onMaybeSetCooldown(){this.wasSeen||this.saveNoShareTimer()}saveNoShareTimer(){const t=y(),e=t?.snoozes||0;P({snoozes:e+1,timer:C[e],savedDate:(new Date).getTime()}),this.trackExperimentEvent("crosspost_prompt","hide","button"),this.wasSeen=!0}render(){return t.x`<rpl-coachmark ?open="${this.isOpen}" placement="${i.P.TopEnd}" appearance="${s.a.Inverted}"> <slot></slot> <rpl-coachmark-card slot="content" appearance="${s.a.Inverted}" class="w-[220px]"> <div slot="title" class="pt-xs pb-2xs"> ${"Share with your newly created community"} </div> <div class="text-12"> ${`${this.prefixedName} might enjoy this post, try sharing it in your community.`} </div> ${e.k({attributes:{slot:"primary-button",href:I(`${this.prefixedName}/submit/?source_id=${this.postId}&crosspost_experiment_referral=true`),target:"_blank",rel:"noopener noreferrer",onclick:this.onShareClick},children:"Share",appearance:"plainInverted",size:e._.Small})} ${e.k({attributes:{slot:"secondary-button",onclick:this.onSkipClick},children:"Skip",appearance:"plainInverted",size:e._.Small})} </rpl-coachmark-card> </rpl-coachmark>`;}};N.styles=[e.t],t._([t.n({type:String,attribute:"name"})],N.prototype,"name",void 0),t._([t.n({type:String,attribute:"prefixed-name"})],N.prototype,"prefixedName",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],N.prototype,"subredditId",void 0),t._([t.n({type:Boolean,attribute:"nsfw"})],N.prototype,"isNsfw",void 0),t._([t.n({type:String,attribute:"post-id"})],N.prototype,"postId",void 0),t._([t.n({type:Boolean,attribute:"open",reflect:!0})],N.prototype,"isOpen",void 0),t._([t.b()],N.prototype,"wasSeen",void 0),N=t._([t.c("crosspost-upsell-coachmark")],N);class _{constructor(t){this._getPageType=e.z,this.host=t,this.host.addController(this)}hostConnected(){}hostDisconnected(){}maybeRenderPromotePostButton(){return this.host.isPromoteablePost&&l.g(this._getPageType())===l.P.ShredditPost?t.x`<promote-post-button post-id="${this.host.id}" subreddit-name="${t.l(this.host.subredditPrefixedName)}"></promote-post-button>`:t.x``}}let R=class extends t.s{constructor(){super(...arguments),this.translationContextValue=e.at,this.postId="",this.href="",this.withIntervention=!1,this.isImmersiveVisit=!1}canShowInterventionModal(){const t=!!e.l.getItem(e.L.I18nTranslationInterventionShown);return!!this.translationContextValue?.isTranslationActive&&this.withIntervention&&!t}onShowOriginalClick(t){t.preventDefault?.(),t.stopPropagation?.(),this.canShowInterventionModal()?this.translationInterventionModal.handleTranslationOverride({isTranslationActive:!1,id:this.postId}):this.navigateToOriginal()}navigateToOriginal(){window.location.href=this.href}render(){const e=t.x`<translation-intervention-modal mode="mtseo-post" page-type="pdp" ?is-immersive-visit="${this.isImmersiveVisit}" @translation-intervention-modal:close="${this.navigateToOriginal}"></translation-intervention-modal>`;return t.x`<a href="${this.href}" class="flex cursor-pointer my-xs pl-md xs:px-0 text-primary text-decoration-none" @click="${this.onShowOriginalClick}"> ${"See original"} </a> ${this.canShowInterventionModal()?e:t.A}`;}};R.styles=[e.t],t._([e.as({context:e.au,subscribe:!0}),t.b()],R.prototype,"translationContextValue",void 0),t._([t.z("translation-intervention-modal")],R.prototype,"translationInterventionModal",void 0),t._([t.n({type:String,attribute:"post-id"})],R.prototype,"postId",void 0),t._([t.n({type:String,attribute:"href"})],R.prototype,"href",void 0),t._([t.n({type:Boolean,attribute:"with-intervention"})],R.prototype,"withIntervention",void 0),t._([t.n({type:Boolean,attribute:"isImmersiveVisit"})],R.prototype,"isImmersiveVisit",void 0),R=t._([t.c("mtseo-show-original-link")],R);const w="toggle__expando",O="toggle__expando-button",x="thumbnail",D="ssr-share-button",f="share-button",L="mod-content-actions",A="credit-bar",M="post-flair",$="full-post-link",B="mod-content-state-indicators";class U{constructor(t){this.initialized=!1,this.handleToggleEvent=t=>{e.a(t)&&this.toggleExpando()},(this.host=t).addController(this)}get expandoElement(){return this.host.isCompactView?this.host.querySelector(`.${w}`):this.host.shadowRoot?.querySelector('slot[name="expando"]')??null}get hasExpandoContent(){return this.host.isCompactView?!!this.host.querySelector(`.${w}`):!!this.host.shadowRoot?.querySelector('slot[name="expando"]')?.assignedElements().length}get toggleElement(){return(this.host.isCompactView?this.host.querySelector(`button.${O}`)||this.host.shadowRoot?.querySelector(`button.${O}`):this.host.shadowRoot?.querySelector('slot[name="thumbnail"]'))??null}async hostConnected(){await this.host.updateComplete,this.initializeListeners()}hostDisconnected(){this.toggleElement?.removeEventListener("click",this.handleToggleEvent),this.toggleElement?.removeEventListener("keydown",this.handleToggleEvent),this.initialized=!1}async hostUpdated(){await this.host.updateComplete,this.initialized||this.initializeListeners()}initializeListeners(){this.initialized||this.expandoElement&&this.hasExpandoContent&&this.toggleElement&&(this.toggleElement?.addEventListener("click",this.handleToggleEvent),this.toggleElement?.addEventListener("keydown",this.handleToggleEvent),this.initialized=!0)}toggleExpando(){this.expandoElement&&this.hasExpandoContent&&(this.host.showExpando=!this.host.showExpando,this.expandoElement.classList.toggle("hidden",!this.host.showExpando),this.expandoElement.classList.toggle("block",this.host.showExpando))}renderExpandoButton(){const e="Expand content",o={attributes:{className:"icon-expand","aria-hidden":"true"},size:r.I[this.host.defaultActionButtonSize]},i=this.host.showExpando?t.C(o):t.eu(o),s=this.hasExpandoContent?"":"disabled pointer-all";return t.x` ${r.c({appearance:p.a4()?"bordered":"secondary",attributes:{type:"button",className:`${O} ${this.host.defaultActionButtonClassnames} ${s}`,disabled:!this.hasExpandoContent,"aria-expanded":this.host.showExpando?"true":"false","aria-label":"post content","aria-controls":`${this.host.id}-expando-content`},size:this.host.defaultActionButtonSize,leadingIcon:i,screenReaderContent:e})} `;}}class H{constructor(t){this.initializeHotkeys=()=>{"enabled"===e.cb("shreddit_hotkeys_m1")&&this.host.viewContext===u.P.CommentsPage&&(this.subscriberController?.subscribe(e.cd.NEXT_POST_COMMENT,this.nextPostOrComment),this.subscriberController?.subscribe(e.cd.PREVIOUS_POST_COMMENT,this.prevPostOrComment),this.subscriberController?.subscribe(e.cd.UPVOTE,this.upvote),this.subscriberController?.subscribe(e.cd.DOWNVOTE,this.downvote),this.subscriberController?.subscribe(e.cd.REPLY_TO_COMMENT,this.onReplyToComment),this.subscriberController?.subscribe(e.cd.HIDE_POST,this.onToggleHide),this.subscriberController?.subscribe(e.cd.TOGGLE_SAVE,this.onToggleSave),this.subscriberController?.subscribe(e.cd.TOGGLE_COLLAPSE_COMMENT,this.onCommentToggleCollapse),this.subscriberController?.subscribe(e.cd.COPY_POST_OR_COMMENT_LINK,this.onCopyLink),this.subscriberController?.subscribe(e.cd.SUBMIT,this.onSubmitComment))},this.findShredditPost=t=>t instanceof z?t:t?.querySelector("shreddit-post, shreddit-ad-post"),this.cleanupHotkeys=()=>{"enabled"===e.cb("shreddit_hotkeys_m1")&&this.host.viewContext===u.P.CommentsPage&&(this.subscriberController?.unsubscribe(e.cd.NEXT_POST_COMMENT,this.nextPostOrComment),this.subscriberController?.unsubscribe(e.cd.PREVIOUS_POST_COMMENT,this.prevPostOrComment),this.subscriberController?.unsubscribe(e.cd.UPVOTE,this.upvote),this.subscriberController?.unsubscribe(e.cd.DOWNVOTE,this.downvote),this.subscriberController?.unsubscribe(e.cd.REPLY_TO_COMMENT,this.onReplyToComment),this.subscriberController?.unsubscribe(e.cd.HIDE_POST,this.onToggleHide),this.subscriberController?.unsubscribe(e.cd.TOGGLE_SAVE,this.onToggleSave),this.subscriberController?.unsubscribe(e.cd.TOGGLE_COLLAPSE_COMMENT,this.onCommentToggleCollapse),this.subscriberController?.unsubscribe(e.cd.COPY_POST_OR_COMMENT_LINK,this.onCopyLink),this.subscriberController?.unsubscribe(e.cd.SUBMIT,this.onSubmitComment))},this.nextPostOrComment=()=>{this.postOrCommentTraversalController?.traverse(T.P.NEXT);const t=this.postOrCommentTraversalController?.current instanceof z?"post":"comment";this.host.trackEvent(u.W("next",t))},this.prevPostOrComment=()=>{this.postOrCommentTraversalController?.traverse(T.P.PREV);const t=this.postOrCommentTraversalController?.current instanceof z?"post":"comment";this.host.trackEvent(u.W("previous",t))},this.upvote=()=>{this.onVote(o.V.Upvote)},this.downvote=()=>{this.onVote(o.V.Downvote)},this.onFocus=t=>{this.host.viewContext===u.P.CommentsPage?this.host.shadowRoot?.querySelector(".shreddit-post-container")?.focus(t):this?.host.querySelector("[slot=full-post-link]")?.focus(t)},this.onVote=async t=>{let e;if(!this.postOrCommentTraversalController?.current)return;e=this.postOrCommentTraversalController?.isCurrentComment?(this.postOrCommentTraversalController?.current).commentActionRow:this.postOrCommentTraversalController?.current;const i=void 0;e&&(e.interactionFromHotkey=!0,t===o.V.Upvote?await e.handleUpvote(i):await e.handleDownvote(i),e.interactionFromHotkey=!1)},this.customPostTraversal=(t,e)=>{if(t===T.P.NEXT){const t=e?.querySelector("shreddit-comment-tree");if(t||"shreddit-comment-tree"===e?.tagName.toLowerCase())return e?.querySelector("shreddit-comment")}else if(!e?.previousElementSibling&&"shreddit-comment-tree"===e?.parentElement?.tagName.toLowerCase())return document.querySelector("shreddit-post")},this.onReplyToComment=()=>{this.postOrCommentTraversalController?.isCurrentPost?this.host.handleClickCommentsButton():this.postOrCommentTraversalController?.current?.querySelector("shreddit-comment-action-row")?.focusOnCommentComposer()},this.onToggleSave=()=>{if(this.postOrCommentTraversalController?.isCurrentComment){const t=this.postOrCommentTraversalController?.current?.overlowMenuItemProps?.find((t=>"save"===t.id));t?.onClick?.()}else this.postOverflowActions?.find((t=>"save"===t.id))?.onClick()},this.onToggleHide=()=>{(this.postOrCommentTraversalController?.isCurrentPost||this.host.isFeed)&&this.postOverflowActions?.find((t=>"hide"===t.id))?.onClick()},this.onCopyLink=()=>{let t;t=this.postOrCommentTraversalController?.isCurrentComment?this.postOrCommentTraversalController?.current?.shareButton:this.host.shareButtonRef?.value,t?.handleCopyLinkClick()},this.onCommentToggleCollapse=()=>{this.postOrCommentTraversalController?.isCurrentComment&&this.postOrCommentTraversalController.current.handleCollapse?.()},this.onSubmitComment=()=>{this.postOrCommentTraversalController?.isCurrentComment?this.postOrCommentTraversalController.current?.shredditComposer?.form?.submit():document.querySelector("shreddit-composer")?.form?.submit()},this.host=t,t.addController(this)}hostConnected(){this.subscriberController=new e.cc(this.host),this.postOrCommentTraversalController=new T.a(this.host,{type:T.b.COMMENTS_PAGE,getFirstElement:()=>this.host,customPostOrCommentDetection:this.findShredditPost,customTraversal:(t,e)=>this.customPostTraversal(t,e)}),this.initializeHotkeys()}hostDisconnected(){this.cleanupHotkeys()}get postOverflowActions(){return this.host.querySelector("shreddit-post-overflow-menu")?.overflowActions}onToggleExpando(){this.host._expandoController?.toggleExpando()}}const V=d.W(e.W(e.d(t.s)));let z=class extends V{get readMoreButton(){return this.querySelector(`#${this.id}-read-more-button`)??void 0}getCurrentVoteType(){return this.postVoteType}constructor(){super(),this.archived=!1,this.deleted=!1,this.hidden=!1,this.id="",this.game=!1,this.nsfw=!1,this.promoted=!1,this.spoiler=!1,this.subredditId=void 0,this.isSubscribed=!1,this.postLanguage="",this.translationLanguage="",this.isTranslationOn=!1,this.commentCount=0,this.permalink="",this.viewContext=u.P.AggregateFeed,this.viewType=e.a3.CardView,this.isSlimCard=!1,this.isDesktopViewport=!1,this.isReportingEnabled=!1,this.isLinkPost=!1,this.isAma=!1,this.isEmbed=!1,this.isNotBrandSafe=!1,this.isCrosspost=!1,this.isCrosspostable=!1,this.isEmbeddable=!1,this.isUserLoggedIn=!1,this.disabled=!1,this.showFullContent=!1,this.isTranslatable=!1,this.isTranslationFetched=!1,this.isPostTranslated=!1,this.isPostBodyTranslated=!1,this.isMTSEOUserPage=!1,this.hasMTSEOTranslationInterruption=!1,this.morePostsCursor=void 0,this.isPostLeaveEventsEnabled=!1,this.isLocked=!1,this.isBanned=!1,this.isContestMode=!1,this.pdpTarget="_self",this.isPromoteablePost=!1,this.previousActionsFeature=!1,this.updateAnimation=void 0,this.itemState=b.M.UNMODERATED,this.areReportsExpandable=!1,this.isCompactUIExp=!1,this.isPostCommentTapExp=!1,this.isPdpSeekerM1LO=!1,this.shareButtonSSR=!1,this.interactionFromHotkey=!1,this.applyFeedsSimplification=!1,this.showPostRemovalBanner=!0,this.showExpando=!1,this.useShortHiddenPostForm=!1,this.isThumbnailSet=!1,this.isUpdatingPostBody=!1,this.displayPostAnalytics=!1,this.isCrosspostingCoachmarkOpen=!1,this.eligibleCrosspostingSubreddit=void 0,this.hasBeenViewed=!1,this.hasBeenConsumed=!1,this.getScrollContainerSelector=()=>[u.P.ModQueue,u.P.ModQueueAll].includes(this.viewContext)?'[slot="mod-queue-feed"]':this.viewContext===u.P.CommentsPage?'[slot="pdp-panel"]':void 0,this._events=new e.E(this),this._promotePostButtonController=new _(this),this._outboundLinkTrackingController=new a.O(this,(()=>({pageType:e.z(),postId:this.id,subredditId:this.subredditId}))),this._expandoController=new U(this),this.pubsub=new e.P(this),this.shareButtonRef=e.aE(),this.onSubscriptionChange=async t=>{let o;this.subredditName===t.name&&(o=t.subscribed&&this.isSubscribed!==t.subscribed,this.isSubscribed=t.subscribed),o&&this.isEligibleForRelatedCommunityRecommendations&&(await this._activateFeature({name:e.ft,queryParams:{subredditId:this.subredditId||"",pageType:String(this._getPageType())},root:(this.isHomeFeed||this.isPopularFeed)&&this.parentElement||document,renderMode:this.isHomeFeed||this.isPopularFeed?e.g.Append:void 0}))},this.handleVisibilityChange=t=>{this.isPostInViewport&&t&&(this._hasPageUnloaded=!1,this.isPDP||(this.handleView(u.m(this),!0),this.becameVisibleOnScreenTimestamp=Date.now()))},this.handleCalledFirstVisibilityChange=t=>{this.isPostInViewport&&(t||this._hasPageUnloaded||(this.handleConsume(),this.isPostLeaveEventsEnabled&&this.trackEvent(u.X(this))))},this.renderTabUpdateActionComponent=e=>this.isPDP?t.x`<ac-set trigger-elem="${t.l(e)}" target="${a.S}" attribute="pageindex" value="1"></ac-set>`:t.A,this._activateFeature=async t=>e.f(t),this._getPageType=e.z,this.showShortHiddenPostForm=()=>this.hidden&&this.useShortHiddenPostForm,this.handleLoadMorePosts=async()=>{const t=document.querySelector(`#partial-more-posts-${this.morePostsCursor}`);t&&"true"!==t?.getAttribute("hasBeenLoaded")&&(t?.setAttribute("hasBeenLoaded","true"),await(t?.load()))},this.trackConsume=()=>{this.trackEvent(u.Y(this))},this.handleRsvpClick=t=>{this.trackEvent(u.v(this))},this.handleUnRsvpClick=t=>{this.trackEvent(u.w(this))},this._getPostScoreDelta=t=>o.g(this.postVoteType,t),this._onUpdatePostVoteType=async()=>await o.o(this.id,"post",this.postVoteType),this.trackReadMoreClick=()=>{this.trackEvent(u.Z(this))},this.onBeforeUnloadCallback=()=>{this.onBeforeUnload()},this.handleCustomPostSnapshotEvent=async()=>{const t=this.querySelector("shreddit-devvit-ui-loader"),o=t?await t.captureSafetyReport():"";this.dispatchEvent(e.c("stage-devplatform-snapshot",{postId:this.id,encodedData:o}))},this.setStateApproved=()=>{this.showPostRemovalBanner=!1,this.itemState=b.M.APPROVED},this.setStateRemoved=()=>{this.showPostRemovalBanner=!0,this.itemState=b.M.REMOVED},this.onPostUpdateAction=({postId:t,action:e,value:o})=>{if(this.id===t)switch(e){case c.a.markAsNsfw:this.nsfw=o;break;case c.a.markAsSpoiler:this.spoiler=o;break;case c.a.delete:this.deleted=o;break;case c.a.hide:this.applyHideChanges(o);break;case c.a.lock:this.isLocked=Boolean(o);break;case c.a.approve:case c.a.approveOptimistic:this.setStateApproved();break;case c.a.remove:case c.a.removeAsSpam:case c.a.confirmRemoval:case c.a.addRemovalReason:case c.a.removeOptimistic:case c.a.removeAsSpamOptimistic:case c.a.confirmRemovalOptimistic:this.setStateRemoved()}},this.applyHideChanges=t=>{this.useShortHiddenPostForm=t,this.hidden=t},this.unhidePost=async()=>{try{await c.n(this.id,!0);const t=e.c("faceplate-alert",{level:e.a4.success,message:"Removed from hidden"});this.dispatchEvent(t);const o={postId:this.id,action:c.a.hide,value:!1};this.pubsub.publish(e.T.PostUpdated,o),this.trackEvent(u.V(this.viewContext))}catch(t){const o=e.c("faceplate-alert",{level:e.a4.error,sourceElement:"unhide-post",cause:"uncategorized",message:"Unable to unhide post"});this.dispatchEvent(o)}},this.addEventListener("click",this.handleClickPost),new e.ag(this,this,{threshold:[.5]})}static get styles(){return[e.t,e.j(".rpl-vote-button-group {\n  /* APPEARANCE AGNOSTIC STYLES */\n  /* PLAIN APPEARANCE */\n  /* SECONDARY APPEARANCE */\n  /* BORDERED APPEARANCE */\n  --vote-button-divider-color: var(--color-neutral-border-weak);\n  /* MEDIA APPEARANCE */\n}\n.rpl-vote-button-group:not([disabled]) .rpl-vote-button-group-label {\n  color: var(--vote-button-label-color);\n}\n.rpl-vote-button-group:not([disabled]):hover.rpl-vote-button-group-label {\n  color: var(--vote-button-label-color-hover);\n}\n.rpl-vote-button-group .rpl-vote-button-group-divider {\n  background-color: var(--vote-button-divider-color);\n}\n.rpl-vote-button-group[disabled] button[rpl]:disabled {\n  --button-color-background-disabled: transparent;\n}\n.rpl-vote-button-group.button-plain {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n}\n.rpl-vote-button-group.button-plain button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain.upvote {\n  --vote-button-label-color: var(--color-upvote-plain);\n}\n.rpl-vote-button-group.button-plain.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-plain-weaker);\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n  --button-color-text-disabled: var(--color-upvote-plain-disabled);\n  --button-color-text-activated: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-plain.downvote {\n  --vote-button-label-color: var(--color-downvote-plain);\n}\n.rpl-vote-button-group.button-plain.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-plain-weaker);\n  --button-color-text-disabled: var(--color-downvote-plain-disabled);\n  --button-color-text-activated: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n  --vote-button-divider-color: var(--color-neutral-border);\n}\n.rpl-vote-button-group.button-secondary button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-secondary.upvote,\n.rpl-vote-button-group.button-secondary.upvote button[rpl] {\n  --button-color-text-default: var(--color-upvote-onBackground);\n  --button-color-text-hover: var(--color-upvote-onBackground);\n  --button-color-text-disabled: var(--color-upvote-disabled);\n  --button-color-text-activated: var(--color-upvote-onBackground);\n}\n.rpl-vote-button-group.button-secondary.upvote:not([disabled]),\n.rpl-vote-button-group.button-secondary.upvote button[rpl]:not([disabled]) {\n  --button-color-background-default: var(--color-upvote-background);\n  --button-color-background-hover: var(--color-upvote-background-hover);\n  --button-color-background-active: var(--color-upvote-background-hover);\n  --vote-button-divider-color: var(--color-upvote-onBackground);\n  --vote-button-label-color: var(--color-media-onBackground);\n}\n.rpl-vote-button-group.button-secondary.downvote,\n.rpl-vote-button-group.button-secondary.downvote button[rpl] {\n  --button-color-text-default: var(--color-downvote-onBackground);\n  --button-color-text-hover: var(--color-downvote-onBackground);\n  --button-color-text-disabled: var(--color-downvote-disabled);\n  --button-color-text-activated: var(--color-downvote-onBackground);\n}\n.rpl-vote-button-group.button-secondary.downvote:not([disabled]),\n.rpl-vote-button-group.button-secondary.downvote button[rpl]:not([disabled]) {\n  --button-color-background-default: var(--color-downvote-background);\n  --button-color-background-hover: var(--color-downvote-background-hover);\n  --button-color-background-active: var(--color-downvote-background-hover);\n  --vote-button-divider-color: var(--color-upvote-onBackground);\n  --vote-button-label-color: var(--color-media-onBackground);\n}\n.rpl-vote-button-group.button-bordered-cab {\n  --vote-button-label-color: var(--color-secondary-plain);\n  --vote-button-label-color-hover: var(--color-secondary-plain);\n}\n.rpl-vote-button-group.button-bordered-cab button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab.upvote {\n  --vote-button-label-color: var(--color-upvote-plain);\n}\n.rpl-vote-button-group.button-bordered-cab.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-plain-weaker);\n  --button-color-text-hover: var(--color-upvote-plain-weaker);\n  --button-color-text-disabled: var(--color-upvote-plain-disabled);\n  --button-color-text-activated: var(--color-upvote-plain-weaker);\n}\n.rpl-vote-button-group.button-bordered-cab.downvote {\n  --vote-button-label-color: var(--color-downvote-plain);\n}\n.rpl-vote-button-group.button-bordered-cab.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-plain-weaker);\n  --button-color-text-hover: var(--color-downvote-plain-weaker);\n  --button-color-text-disabled: var(--color-downvote-plain-disabled);\n  --button-color-text-activated: var(--color-downvote-plain-weaker);\n}\n.rpl-vote-button-group.button-media-cab {\n  --vote-button-label-color: var(--color-media-onBackground);\n  --vote-button-label-color-hover: var(--color-media-onBackground);\n  --vote-button-divider-color: var(--color-media-border-weak);\n}\n.rpl-vote-button-group.button-media-cab button[rpl]:first-child {\n  --button-color-text-hover: var(--color-upvote-onStrongScrim-weaker);\n}\n.rpl-vote-button-group.button-media-cab button[rpl]:last-child {\n  --button-color-text-hover: var(--color-downvote-onStrongScrim-weaker);\n}\n.rpl-vote-button-group.button-media-cab.upvote {\n  --vote-button-label-color: var(--color-upvote-onStrongScrim);\n}\n.rpl-vote-button-group.button-media-cab.upvote button[rpl]:first-child {\n  --button-color-text-default: var(--color-upvote-onStrongScrim-weaker);\n  --button-color-text-activated: var(--color-upvote-onStrongScrim-weaker);\n  --button-color-text-disabled: var(--color-upvote-onStrongScrim-disabled);\n}\n.rpl-vote-button-group.button-media-cab.downvote {\n  --vote-button-label-color: var(--color-downvote-onStrongScrim);\n}\n.rpl-vote-button-group.button-media-cab.downvote button[rpl]:last-child {\n  --button-color-text-default: var(--color-downvote-onStrongScrim-weaker);\n  --button-color-text-activated: var(--color-downvote-onStrongScrim-weaker);\n  --button-color-text-disabled: var(--color-downvote-onStrongScrim-disabled);\n}\n.pdp-flair-slot::slotted(*) {\n  margin: var(--size-2xs) 0;\n}\n.feed-flair-slot::slotted(*) {\n  margin-bottom: var(--size-xs);\n}\n.text-decoration-none {\n  text-decoration: none;\n}\n:host([item-state~='APPROVED']),\n:host([item-state~='REMOVED']) {\n  background-color: var(--color-neutral-background-weak);\n}\n:host([updateAnimation~='light']) {\n  animation: realtimeFade 3s;\n  animation-timing-function: ease-out;\n}\n:host([updateAnimation~='dark']) {\n  animation: realtimeFadeNight 3s;\n  animation-timing-function: ease-out;\n}\n@keyframes realtimeFade {\n  from {\n    background-color: #fff2bd;\n    border: 1px solid #dbaf00;\n  }\n  to {\n    background-color: #f0f5f9;\n    border: 1px solid transparent;\n  }\n}\n@keyframes realtimeFadeNight {\n  from {\n    background-color: #665505;\n    border: 1px solid #382d03;\n  }\n  to {\n    background-color: #030303;\n    border: 1px solid #343536;\n  }\n}\n.condensed-post-title-heading {\n  margin: 0;\n}\n")]}connectedCallback(){super.connectedCallback(),"enabled"===window.CLIENT_EXPERIMENTS?.shreddit_pdp_no_mod_js_lo?g.g()&&this.initModActionsController():this.initModActionsController(),this.querySelector("shreddit-post-text-body")?.addEventListener(u.R,this.trackReadMoreClick),this.isObserved||this.enableObserver({rootMargin:"0px"}),this.postVoteType=this.voteType,this.postScore=this.score,this.gallery&&this.addEventListener("faceplate-carousel:slide",this.handleCarouselArrowClick),this.addEventListener("faceplate-hovercard:open",this.handleHovercardOpen),this.addEventListener("capture-devplatform-snapshot",this.handleCustomPostSnapshotEvent),e.al.subscribe(this.onBeforeUnloadCallback,{shouldBeCalledFirst:!0}),e.am(this.handleVisibilityChange,{immediate:!0}),e.am(this.handleCalledFirstVisibilityChange,{immediate:!0,shouldBeCalledFirst:!0}),this.pubsub.subscribe(e.T.PostUpdated,this.onPostUpdateAction),this.addEventListener(c.e,this.handleClickCommentsButton),this.addEventListener(c.f,this.handleShareButtonInteraction),this.addEventListener(c.b,this.handleRsvpClick),this.addEventListener(c.E,this.handleUnRsvpClick),this.pubsub.subscribe(e.T.SubredditSubscriptionChange,this.onSubscriptionChange),"enabled"===e.cb("shreddit_hotkeys_m1")&&(this.hotkeyController=new H(this))}async initModActionsController(){const{ModActionsController:t}=await SML.di("./v9RaKRju.js",import.meta.url,"v9RaKRju");new t(this,{getThingIdFn:()=>this.id})}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.listingBelowConsumeTimer),this.isObserved&&this.disableObserver(),this.hasBeenViewed=!1,this.isPostInViewport=!1,this.querySelector("shreddit-post-text-body")?.removeEventListener(u.R,this.trackReadMoreClick),this.gallery&&this.removeEventListener("faceplate-carousel:slide",this.handleCarouselArrowClick),this.removeEventListener("faceplate-hovercard:open",this.handleHovercardOpen),e.al.unsubscribe(this.onBeforeUnloadCallback),e.an(this.handleVisibilityChange),e.an(this.handleCalledFirstVisibilityChange),this.removeEventListener(c.e,this.handleClickCommentsButton),this.removeEventListener(c.f,this.handleShareButtonInteraction),this.removeEventListener(c.b,this.handleRsvpClick),this.removeEventListener(c.E,this.handleUnRsvpClick),this.removeEventListener("capture-devplatform-snapshot",this.handleCustomPostSnapshotEvent)}get isFeed(){return u.b(this.viewContext)}get isPopularFeed(){return this.isFeed&&u._(this._getPageType())}get isHomeFeed(){return this.isFeed&&u.$(this._getPageType())}get isPDP(){return u.i(this.viewContext)}get isBrandConversations(){return u.a0(this.viewContext)}get isCardView(){return p.cT(this.viewType)}get isCompactView(){return p.bN(this.viewType)}get isEligibleForRelatedCommunityRecommendations(){return this.isUserLoggedIn&&!!this.subredditId&&(this.isPDP&&!this.isDesktopViewport||this.isHomeFeed||this.isPopularFeed)}renderThumbnail(){return t.x` <slot name="${x}" @slotchange="${this.handleThumbnailSlotChange}"></slot>`}renderExpando(){return t.x`<slot class="hidden col-span-2 w-full mb-xs xs:my-xs" name="${"expando"}"></slot>`}renderCommentsButton(){const o=this.isFeed?{className:this.defaultActionButtonClassnames,onclick:this.handleClickCommentsButton,name:"comments-action-button","data-post-click-location":e.a8.COMMENTS_BUTTON,href:this.permalink,target:this.pdpTarget}:{type:"button",className:this.defaultActionButtonClassnames,onclick:this.handleClickCommentsButton,name:"comments-action-button","data-post-click-location":e.a8.COMMENTS_BUTTON};return t.x`${r.c({appearance:p.a4()?"bordered":"secondary",attributes:o,size:this.defaultActionButtonSize,children:t.x`${this.renderTabUpdateActionComponent("closest(button)")}<faceplate-number number="${this.commentCount}" pretty></faceplate-number>${!this.isUserLoggedIn&&this.isPostCommentTapExp?p.cY({triggerElem:"closest(button)",target:"closest(button)",eventName:"reply"}):t.A}`,leadingIcon:t.aV({attributes:{className:"icon-comment","aria-hidden":"true"},size:r.I[this.defaultActionButtonSize]}),screenReaderContent:"Go to comments"})}`;}renderAwardButton(){return!this.isAwardable||this.applyFeedsSimplification?t.A:t.x`<award-button appearance="${p.a4()?"bordered":"secondary"}" size="${this.defaultActionButtonSize}" button-class="${this.defaultActionButtonClassnames}" thing-id="${this.id}" count="${t.l(this.awardCount)}" award-id="${t.l(this.awardId)}" icon-url="${t.l(this.hideAwardIcon?void 0:this.awardIconUrl)}" icon-urls="${t.l(this.hideAwardIcon?void 0:JSON.stringify(this.awardIconUrls))}" ?is-awarded-by-user="${this.isAwardedByUser}" ?has-iconic-award="${this.hasIconicAward}" ?has-branded-award="${this.hasBrandedAward}" subreddit-id="${t.l(this.subredditId)}" post-id="${this.id}" feed-index="${t.l(this.feedIndex)}" post-type="${t.l(this.postType)}" score="${t.l(this.postScore)}" comment-count="${this.commentCount}"></award-button>`}get defaultActionButtonSize(){return e._.Small}get defaultActionButtonClassnames(){return p.l("flex flex-row justify-center items-center","h-xl","font-semibold","relative")}renderVoteButton(){const i=p.b8(),s=i?o.a:o.v,n=i?o.b:o.u,r=i?o.c:o.d,a=this.postScore,l="Vote",d={voteType:this.postVoteType||null,appearance:p.a4()?"bordered":"secondary",size:this.defaultActionButtonSize,attributes:{disabled:this.archived}},h=n({...d,voteCount:a,initialStateText:l,screenReaderContent:"Upvote",onClick:this.handleUpvote}),c=r({...d,screenReaderContent:"Downvote",onClick:this.handleDownvote});return t.x` <span class="relative leading-[0] ${this.disabled?"disabled":""}"> ${this.renderTabUpdateActionComponent()} ${s({attributes:{"data-post-click-location":e.a8.VOTE,className:this.defaultActionButtonClassnames},voteCount:a,voteType:this.postVoteType,upvoteButton:h,downvoteButton:c,appearance:d.appearance,size:d.size,initialStateText:l})} </span> `}renderShareButton(){if(this.applyFeedsSimplification)return t.A;const o=t.x` <shreddit-post-share-button data-post-click-location="${e.a8.SHARE}" permalink="${this.permalink}" source-id="${this.id}" ?is-crosspostable="${this.isCrosspostable}" ?is-embeddable="${this.isEmbeddable}" ?is-desktop-viewport="${this.isDesktopViewport}" ?ssr="${this.shareButtonSSR}" ?hide-button-text="${!this.isDesktopViewport}" ?show-share-menu-profile-coachmark="${this.showShareMenuProfileCoachmark}" size="${this.defaultActionButtonSize}" button-class="${this.defaultActionButtonClassnames}" @click="${this.handleShareButtonInteraction}" @keydown="${this.handleShareButtonInteraction}" appearance="${p.a4()?"bordered":"secondary"}" data-faceplate-tracking-context="${JSON.stringify({post:{id:this.id}})}" ${e.aq(this.shareButtonRef)}> ${this.shareButtonSSR?t.x`<slot name="${D}" slot="${D}"></slot>`:t.A} </shreddit-post-share-button> `;return this.isCrosspostingV2Enabled&&this.isCrosspostingCoachmarkOpen&&"Subreddit"===this.eligibleCrosspostingSubreddit?.__typename?t.x`<slot name="${f}"> <crosspost-upsell-coachmark post-id="${this.id}" name="${this.eligibleCrosspostingSubreddit?.name}" prefixed-name="${this.eligibleCrosspostingSubreddit?.prefixedName}" subreddit-id="${this.eligibleCrosspostingSubreddit?.id}" ?open="${this.isCrosspostingCoachmarkOpen}"> ${o} </crosspost-upsell-coachmark> </slot> `:t.x` <slot name="${f}"> ${o} </slot> `}renderExpandoButton(){return this.isDesktopViewport?this._expandoController.renderExpandoButton():""}renderReportButton(){const o="Report";return t.x` ${r.c({appearance:"secondary",attributes:{onclick:()=>{var t,o;this.trackEvent((t="post",e.b({source:t,action:"click",noun:"report"}))),this.dispatchEvent((o=this.id,e.c(e.j5,{thingId:o})))},type:"button",className:this.defaultActionButtonClassnames},size:this.defaultActionButtonSize,children:this.isDesktopViewport?o:"",leadingIcon:t.ci({attributes:{className:"icon-report","aria-hidden":"true"},size:r.I[this.defaultActionButtonSize]}),screenReaderContent:o})} `}renderActionRowWhitespace(){return t.x`<slot name="${"action-row-whitespace"}"></slot>`}renderActionRow(){if(this.isPDP&&this.isPdpSeekerM1LO)return this.renderSeekerPostInfoRow();const o=["shreddit-post-container flex gap-sm flex-row items-center flex-nowrap justify-start"];this.isPDP?this.isCompactUIExp?o.push("py-xs px-md xs:px-0"):o.push("h-2xl mt-md px-md xs:px-0"):this.isCardView&&!this.promoted&&!this.isCrosspost&&this.isEmbed&&o.push("pt-xs");const i="enabled"===e.cb("shreddit_hotkeys_m1");return t.x`<div class="${o.join(" ")}" data-testid="action-row" tabindex="${i?"0":"-1"}" aria-label="${"Actions available for this post"}"> ${this.renderVoteButton()} ${this.renderCommentsButton()} ${this.renderAwardButton()} ${this.renderShareButton()} ${this.isReportingEnabled&&!this.isFeed?this.renderReportButton():""} <div class="ms-auto flex flex-row"> <slot name="${L}"></slot> ${this.isDesktopViewport?this._promotePostButtonController.maybeRenderPromotePostButton():t.A} </div> ${this.renderActionRowWhitespace()} </div>`;}renderSeekerPostInfoRow(){return t.x` <div class="px-md xs:px-0 py-xs truncate text-neutral-content-weak text-12 flex items-center gap-2xs font-semibold" data-testid="seeker-post-info-row"> ${void 0!==this.postScore?t.x` ${t.bh({size:t.q.Small})} <faceplate-number number="${this.postScore}" pretty></faceplate-number> ${t.bf({size:t.q.Small})} `:t.A} ${this.postScore&&this.commentCount?t.x`<span data-testid="seeker-post-info-row-divider"></span>`:t.A} ${this.commentCount?t.x` ${t.aV({size:t.q.Small})} <faceplate-number number="${this.commentCount}" pretty></faceplate-number> `:t.A} </div> `}renderMessageBanner(){return t.x` ${this.isLocked?t.x`<slot name="${"post-locked-banner"}"></slot>`:null} ${this.isBanned?t.x`<slot name="${"post-banned-banner"}"></slot>`:null} <slot name="${"post-archived-banner"}"></slot> ${this.showPostRemovalBanner?t.x`<slot name="${"post-removed-banner"}"></slot>`:null} ${this.isContestMode?t.x`<slot name="${"post-contest-mode-banner"}"></slot>`:null} `}getMaxTextBodyHeight(t){return this.isPDP?Math.max(t,253):208}trackContentTagClick(t){t.detail.type===n.C.APP&&this.trackWatermarkEvent("v1_badge")}trackWatermarkEvent(t){const o=e.b(m.c({postId:this.id||"",subredditId:this.subredditId||"",blockType:"",pageType:e.z(),action:"click",noun:"watermark",appId:this.appId||"",appInstallationId:this.appInstallationId||"",appVersionNumber:this.appVersionNumber||"",appPublicApiVersion:this.appPublicApiVersion||"",appName:this.appSlug||"",appSlug:this.appSlug||"",userAgent:window.navigator?.userAgent.toLowerCase()||"unknown",watermark:t}));this.trackEvent(o)}renderPostHeader(){return t.x` <slot name="${A}"></slot> ${this.isEligibleForRelatedCommunityRecommendations?t.x`<slot name="${"related-community-recommendation"}"></slot>`:t.x``} <div id="content-tag-container" class="flex justify-between gap-xs ${e.x({"px-md":this.isPDP,"xs:px-0":this.isPDP})}"> ${this.renderContentTags()} ${this.renderAppPrivacyButton()} </div> ${this.renderPostLinkForMTSEO()} `}renderAppPrivacyButton(){return this.appName?t.x`<rpl-dialog-trigger dialog-id="${this.appSlug}-privacy-dialog"> ${e.k({appearance:"plain",attributes:{onclick:()=>(this.trackWatermarkEvent("v1_privacy_link"),this._activateFeature({name:e.j6,routeParams:{appSlug:this.appSlug,appName:this.appName,appOwnerId:this.appOwnerId||"null",postId:this.id,subredditId:this.subredditId},renderMode:e.g.Contents})),className:"flex gap-xs"},children:"Privacy",leadingIcon:t.aP({size:t.q.ExtraSmall}),size:e._.ExtraSmall})} </rpl-dialog-trigger>`:t.A;}renderPostLinkForMTSEO(){if(!this.isMTSEOUserPage)return"";const o=new RegExp(/[^?]+/),i=this.permalink?.match(o);if(!i||0===i.length)return"";const s=e.c4(i[0],e.j8,e.j7);return t.x` <mtseo-show-original-link post-id="${this.id}" href="${s}" ?with-intervention="${this.hasMTSEOTranslationInterruption}"></mtseo-show-original-link> `}renderTitle(){const e=t.x`<slot name="${"title"}"></slot>`;return this.showFullContent||this.isPDP?e:t.x`<h2 class="condensed-post-title-heading">${e}</h2>`}renderTextBody(){return t.x`<slot name="${"text-body"}"></slot>`}renderPostMediaContainer(e){return t.x` <slot name="${"post-media-container"}" class="${e??""}"></slot> `}renderFeedFlair(){return this.isPDP?"":t.x`<div> <slot name="${M}" class="feed-flair-slot"></slot> </div>`}renderPDPFlair(){const e=this.isCompactUIExp?"leading-none":"xs:px-0";return this.isPDP?t.x`<div class="px-md ${e}"> <slot name="${M}" class="pdp-flair-slot"></slot> </div>`:""}renderDeletedPost(){return t.x` <div class="deleted-post h-3xl flex items-center"> <p class="font-semibold text-neutral-content-strong text-14"> ${"Post deleted"} </p> </div> `;}renderHiddenPost(){return t.x` <div class="hidden-post h-3xl flex items-center justify-between px-md"> <div> <p class="m-0 font-semibold text-neutral-content-strong text-14"> ${"Post hidden"} </p> </div> ${e.k({attributes:{onclick:this.unhidePost},size:e._.Medium,appearance:"secondary",children:"Undo"})} </div> `;}renderCompactView(){const e="grid grid-cols-[1fr_min-content] grid-rows-[auto_auto_auto_auto_auto] xs:grid-cols-[min-content_1fr] xs:grid-rows-[auto_auto_auto_auto]",o="col-start-1 col-end-3 row-start-1 row-end-2 xs:col-start-1 xs:col-end-3 xs:row-start-1 xs:row-end-2",i="col-start-2 col-end-3 row-start-2 row-end-3 xs:col-start-1 xs:col-end-2 xs:row-start-2 xs:row-end-4",s="col-start-1 col-end-2 row-start-2 row-end-3 xs:col-start-2 xs:col-end-3 xs:row-start-2 xs:row-end-3 overflow-hidden",n="col-start-1 col-end-3 row-start-3 row-end-4 xs:hidden",r="col-start-1 col-end-3 row-start-4 row-end-5 xs:col-start-2 xs:col-end-3 xs:row-start-3 xs:row-end-4",a="col-start-1 col-end-3 row-start-5 row-end-6 xs:col-start-2 xs:col-end-3 xs:row-start-4 xs:row-end-5 overflow-hidden",l="col-start-1 col-end-3 row-start-6 row-end-7 xs:col-start-2 xs:col-end-3 xs:row-start-5 xs:row-end-6";return t.x` <slot name="${$}"></slot> <div class="${p.l("grid",e)}"> <div class="${o}"> <slot name="${"recommendation-bar"}"></slot> </div> <div class="${p.l(i,"mt-2xs ml-xs xs:my-2xs xs:ml-0 xs:mr-md")}"> <slot name="${x}"></slot> </div> <div class="${p.l(s,"mt-2xs")}"> <div class="mb-2xs xs:mb-0"> <slot name="${A}"></slot> </div> <div class="overflow-hidden"> ${this.renderTitle()} <slot name="${"content-tags"}"></slot> <slot name="${"app-privacy"}"></slot> <slot name="${M}"></slot> </div> <div> <slot name="${B}"></slot> <slot name="${L}"></slot> </div> <div> <slot name="${"desktop-cta-row"}"></slot> </div> </div> <div class="${n}"> <slot name="${"mobile-cta-row"}"></slot> </div> <div class="${p.l(r,"flex gap-2xs overflow-hidden items-center mb-2xs mt-xs xs:mt-[2px]")}"> <slot name="${"action-bar-ad-cta"}"></slot> ${this.renderExpandoButton()}${this.renderVoteButton()} <slot name="${"overflow-menu-bar"}" class="grow overflow-hidden block"></slot> </div> <div class="${a}"> <slot name="${"expando-content"}"></slot> </div> <div class="${l}">${this.renderPostStatsEntryPoint()}</div> </div> ${this.renderPostStatsContainer()} `}renderPostStatsContainer(){return t.x`<slot name="${"post-insights-panel"}"></slot>`}renderPostStatsEntryPoint(){return t.x`<slot name="${"post-stats-entry-point"}"></slot>`}renderCardViewPostFooter(){return t.x` ${this.renderMessageBanner()} <slot name="${"post-recovery-section"}"></slot> ${this.renderActionRow()} ${this.renderPostStatsEntryPoint()} ${this.renderPostStatsContainer()} `}renderContentTags(){return t.x`<shreddit-content-tags post-id="${this.id}" ?nsfw="${this.nsfw}" ?spoiler="${this.spoiler}" app="${this.appSlug}" ?game="${this.game}" @tag-click="${t=>this.trackContentTagClick(t)}"></shreddit-content-tags>`}renderSlimCardPost(){return t.x` <slot name="${$}"></slot> <slot></slot> <div class="pt-xs">${this.renderCardViewPostFooter()}</div> `}renderCardView(){const e=this.isThumbnailSet?"ml-xs xs:ml-sm":void 0;return t.x` <slot name="${$}"></slot> ${this.renderPostHeader()} <div class="flex"> <div class="flex flex-col grow max-w-full"> ${this.renderTitle()} ${this.renderPDPFlair()} <slot name="${B}"></slot> ${this.isPDP?null:this.renderTextBody()} ${this.renderFeedFlair()} </div> <div class="${t.l(e)}">${this.renderThumbnail()}</div> </div> ${this.renderPostMediaContainer("xs:pt-md")} ${this.isPDP?this.renderTextBody():null} <slot></slot> ${this.renderCardViewPostFooter()} `}render(){return this.deleted?this.renderDeletedPost():this.showShortHiddenPostForm()?this.renderHiddenPost():this.isCompactView?this.renderCompactView():this.isSlimCard?this.renderSlimCardPost():this.renderCardView()}handleView(t,e,o){!e&&this.isPDP||u.a1(this.viewContext)&&this.hasBeenViewed||this.trackEvent(t),this.gallery&&this.trackEvent(v.a(this,0,o)),this.morePostsCursor&&this.handleLoadMorePosts()}handleConsume(){!this.isPDP&&this.becameVisibleOnScreenTimestamp&&Date.now()-this.becameVisibleOnScreenTimestamp>u.a&&!u.a1(this.viewContext)&&this.trackConsume()}handleClick(t,e){t&&this.trackEvent(t),e&&this.dispatchEvent(e)}handleShareButtonInteraction(){this.isDesktopViewport?this.handleClick(u.a2(this)):this.handleClick(u.a3(this))}_navigateToUrl(t,e){"_self"===e?window.location.href=t:window.open(t,e)}handleClickCommentsButton(t){if(this.trackEvent(u.q(this)),this.isFeed)return;this.isPostCommentTapExp||E.s("smooth");if((t?.currentTarget?.querySelector("faceplate-number")?.number??0)>0&&!this.isPostCommentTapExp){const t=document.querySelector("shreddit-comments-sort-dropdown")?.querySelector("shreddit-sort-dropdown")?.shadowRoot?.querySelector("faceplate-dropdown-menu")?.querySelector("button");t?.focus()}else{if(!this.isUserLoggedIn&&this.isPostCommentTapExp)return;const t=document.querySelector("comment-body-header comment-composer-host");this.isPostCommentTapExp&&t?.scrollIntoView({behavior:"smooth",block:"center"}),t?.focus()}}handleClickPost(t){const e=u.a4(t,this);this.handleClick(e)}handleCarouselArrowClick(t){t.preventDefault();const e=t;v.h(this,e)}async handleUpdatePostVote(t){const i=this.postScore,s=this.postVoteType;if(void 0!==this.postScore){const e=this._getPostScoreDelta(t);this.postScore=this.postScore+e}this.postVoteType=t===this.postVoteType?void 0:t;try{await this._onUpdatePostVoteType(),this.postVoteType&&this.pubsub.publish(this.postVoteType===o.V.Upvote?e.T.PostUpvoted:e.T.PostDownvoted,{postId:this.id})}catch(o){this.postScore=i,this.postVoteType=s,this.dispatchEvent(e.c("faceplate-alert",{level:e.a4.warning,message:o,sourceElement:t,cause:`failed-${t}`}))}}async handleCrosspostingV2Experiment(){const t=await k(this.id);this.eligibleCrosspostingSubreddit=t,this.isCrosspostingCoachmarkOpen=!!t}async handleUpvote(t){const i=this.postVoteType===o.V.Upvote;if(this.isUserLoggedIn)return this.handleClick(i?u.k(this):u.u(this)),await this.handleUpdatePostVote(o.V.Upvote),!i&&this.isCrosspostingV2Enabled&&this.handleCrosspostingV2Experiment(),void(this.isAma&&!i&&this.pubsub.publish(e.T.TriggerAmaRemindMeModal,{postId:this.id}));this.disabled?(this.dispatchEvent(e.c(e.ab.upvoteTry)),this.trackEvent(u.a5(this))):this.handleClick(u.u(this),e.c(e.ab.upvote))}async handleDownvote(t){if(this.isUserLoggedIn)return this.handleClick(this.postVoteType===o.V.Downvote?u.k(this):u.l(this)),void (await this.handleUpdatePostVote(o.V.Downvote));this.disabled?(this.dispatchEvent(e.c(e.ab.downvoteTry)),this.trackEvent(u.a5(this))):this.handleClick(u.l(this),e.c(e.ab.downvote))}onBeforeUnload(){this._hasPageUnloaded=!0,this.isPostInViewport&&(this.handleConsume(),this.isPostLeaveEventsEnabled&&this.trackEvent(u.X(this)))}handleHovercardOpen(t){if(!(t.target instanceof HTMLElement&&"id"in t.target.dataset))return;const e=t.target.dataset.id;"community-hover-card"===e&&this.trackEvent(u.a6(this)),"user-hover-card"===e&&this.trackEvent(u.a7(this))}handleThumbnailSlotChange(t){const e=t.target?.assignedElements();this.isThumbnailSet=e.length>0}observerIsIntersectingCallback(t){this.isNotBrandSafe&&t.target===this&&window.dispatchEvent(e.c(h.B,{postId:this.id,isInView:!0})),this.isPostInViewport||(this.isPostInViewport=!0,this.becameVisibleOnScreenTimestamp=Date.now(),this.handleView(u.m(this),!this.isPDP),this.isTranslatable&&p.bl.post(this),this.hasBeenViewed=!0,u.a1(this.viewContext)&&(this.listingBelowConsumeTimer=setTimeout(this.trackConsume,u.a)))}observerIsNotIntersectingCallback(t){clearTimeout(this.listingBelowConsumeTimer),this.isNotBrandSafe&&t.target===this&&window.dispatchEvent(e.c(h.B,{postId:this.id,isInView:!1}));const o=this.isPostInViewport;this.isPostInViewport=!1,o&&(this.handleConsume(),this.isPostLeaveEventsEnabled&&this.trackEvent(u.X(this)))}};return t._([t.n({type:Boolean})],z.prototype,"archived",void 0),t._([t.n({type:Boolean})],z.prototype,"deleted",void 0),t._([t.n({type:Boolean,reflect:!0})],z.prototype,"hidden",void 0),t._([t.n({type:String,attribute:"author-id"})],z.prototype,"authorId",void 0),t._([t.n({type:String,attribute:"created-timestamp"})],z.prototype,"createdTimestamp",void 0),t._([t.n({type:String})],z.prototype,"domain",void 0),t._([t.n({type:String,attribute:"content-href"})],z.prototype,"contentHref",void 0),t._([t.n({type:String})],z.prototype,"id",void 0),t._([t.n({type:String,attribute:"user-id"})],z.prototype,"userId",void 0),t._([t.n({type:String,attribute:"app-id"})],z.prototype,"appId",void 0),t._([t.n({type:String,attribute:"app-slug"})],z.prototype,"appSlug",void 0),t._([t.n({type:Boolean})],z.prototype,"game",void 0),t._([t.n({type:String,attribute:"app-installation-id"})],z.prototype,"appInstallationId",void 0),t._([t.n({type:String,attribute:"app-name"})],z.prototype,"appName",void 0),t._([t.n({type:String,attribute:"app-owner-id"})],z.prototype,"appOwnerId",void 0),t._([t.n({type:String,attribute:"app-version-number"})],z.prototype,"appVersionNumber",void 0),t._([t.n({type:String,attribute:"app-public-api-version"})],z.prototype,"appPublicApiVersion",void 0),t._([t.n({type:Boolean,reflect:!0})],z.prototype,"nsfw",void 0),t._([t.n({type:Boolean})],z.prototype,"promoted",void 0),t._([t.n({type:Number})],z.prototype,"score",void 0),t._([t.n({type:Boolean,reflect:!0})],z.prototype,"spoiler",void 0),t._([t.n({type:String,attribute:"subreddit-id"})],z.prototype,"subredditId",void 0),t._([t.n({type:String,attribute:"subreddit-name"})],z.prototype,"subredditName",void 0),t._([t.n({type:Boolean,attribute:"is-subscribed"})],z.prototype,"isSubscribed",void 0),t._([t.n({type:String,attribute:"subreddit-prefixed-name"})],z.prototype,"subredditPrefixedName",void 0),t._([t.n({type:String,attribute:"post-title"})],z.prototype,"postTitle",void 0),t._([t.n({type:String,attribute:"post-type"})],z.prototype,"postType",void 0),t._([t.n({type:String,attribute:"recommendation-source"})],z.prototype,"recommendationSource",void 0),t._([t.n({type:String,attribute:"recommendation-subreddit-id"})],z.prototype,"recommendationSubredditId",void 0),t._([t.n({type:String,attribute:"recommendation-subreddit-name"})],z.prototype,"recommendationSubredditName",void 0),t._([t.n({type:String,attribute:"post-language"})],z.prototype,"postLanguage",void 0),t._([t.n({type:String,attribute:"translation-language"})],z.prototype,"translationLanguage",void 0),t._([t.n({type:Boolean,attribute:"is-translation-on",reflect:!0})],z.prototype,"isTranslationOn",void 0),t._([t.n({type:Number})],z.prototype,"feedIndex",void 0),t._([t.n({type:Boolean,attribute:"stickied"})],z.prototype,"isStickied",void 0),t._([t.n({type:Boolean,attribute:"highlighted"})],z.prototype,"isHighlighted",void 0),t._([t.n({type:Boolean,attribute:"crossposting-v2-enabled"})],z.prototype,"isCrosspostingV2Enabled",void 0),t._([t.n({type:Number,attribute:"comment-count"})],z.prototype,"commentCount",void 0),t._([t.n({type:Boolean,attribute:"is-awardable"})],z.prototype,"isAwardable",void 0),t._([t.n({type:Number,attribute:"award-count"})],z.prototype,"awardCount",void 0),t._([t.n({type:String,attribute:"award-id"})],z.prototype,"awardId",void 0),t._([t.n({type:String,attribute:"award-icon-url"})],z.prototype,"awardIconUrl",void 0),t._([t.n({type:Array,attribute:"award-icon-urls"})],z.prototype,"awardIconUrls",void 0),t._([t.n({type:Boolean,attribute:"hide-award-icon"})],z.prototype,"hideAwardIcon",void 0),t._([t.n({type:Boolean,attribute:"is-awarded-by-user"})],z.prototype,"isAwardedByUser",void 0),t._([t.n({type:Boolean,attribute:"has-iconic-award"})],z.prototype,"hasIconicAward",void 0),t._([t.n({type:Boolean,attribute:"has-branded-award"})],z.prototype,"hasBrandedAward",void 0),t._([t.n({type:String})],z.prototype,"permalink",void 0),t._([t.n({type:Boolean})],z.prototype,"gallery",void 0),t._([t.n({type:String,attribute:"view-context"})],z.prototype,"viewContext",void 0),t._([t.n({type:String,attribute:"view-type"})],z.prototype,"viewType",void 0),t._([t.n({type:Boolean,attribute:"is-slim-card"})],z.prototype,"isSlimCard",void 0),t._([t.n({type:Boolean,attribute:"is-desktop-viewport"})],z.prototype,"isDesktopViewport",void 0),t._([t.n({type:Boolean,attribute:"is-reporting-enabled"})],z.prototype,"isReportingEnabled",void 0),t._([t.n({type:Boolean,attribute:"is-link-post"})],z.prototype,"isLinkPost",void 0),t._([t.n({type:Boolean,attribute:"is-ama"})],z.prototype,"isAma",void 0),t._([t.n({type:Boolean,attribute:"is-embed"})],z.prototype,"isEmbed",void 0),t._([t.n({type:Boolean,attribute:"is-not-brand-safe"})],z.prototype,"isNotBrandSafe",void 0),t._([t.n({type:Boolean,attribute:"is-crosspost"})],z.prototype,"isCrosspost",void 0),t._([t.n({type:Boolean,attribute:"is-crosspostable"})],z.prototype,"isCrosspostable",void 0),t._([t.n({type:Boolean,attribute:"is-embeddable"})],z.prototype,"isEmbeddable",void 0),t._([t.n({type:Boolean,attribute:"user-logged-in"})],z.prototype,"isUserLoggedIn",void 0),t._([t.n({type:Boolean,attribute:"disabled"})],z.prototype,"disabled",void 0),t._([t.n({type:String,attribute:"vote-type"})],z.prototype,"voteType",void 0),t._([t.n({type:Boolean,attribute:"show-full-content"})],z.prototype,"showFullContent",void 0),t._([t.n({type:Boolean,attribute:"is-translatable"})],z.prototype,"isTranslatable",void 0),t._([t.n({type:Boolean,attribute:"is-translation-fetched",reflect:!0})],z.prototype,"isTranslationFetched",void 0),t._([t.n({type:Boolean,attribute:"is-post-translated",reflect:!0})],z.prototype,"isPostTranslated",void 0),t._([t.n({type:Boolean,attribute:"is-post-body-translated",reflect:!0})],z.prototype,"isPostBodyTranslated",void 0),t._([t.n({type:Boolean,attribute:"is-mt-seo-user-page",reflect:!0})],z.prototype,"isMTSEOUserPage",void 0),t._([t.n({type:Boolean,attribute:"has-mt-seo-translation-interruption"})],z.prototype,"hasMTSEOTranslationInterruption",void 0),t._([t.n({type:String,attribute:"more-posts-cursor"})],z.prototype,"morePostsCursor",void 0),t._([t.n({type:Boolean,attribute:"should-track-post-leave-events"})],z.prototype,"isPostLeaveEventsEnabled",void 0),t._([t.n({type:Boolean,attribute:"locked",reflect:!0})],z.prototype,"isLocked",void 0),t._([t.n({type:Boolean,attribute:"banned",reflect:!0})],z.prototype,"isBanned",void 0),t._([t.n({type:Boolean,attribute:"is-contest-mode",reflect:!0})],z.prototype,"isContestMode",void 0),t._([t.n({type:String,attribute:"pdp-target"})],z.prototype,"pdpTarget",void 0),t._([t.n({type:Boolean,attribute:"is-promoteable-post"})],z.prototype,"isPromoteablePost",void 0),t._([t.n({type:String,attribute:"moderation-verdict"})],z.prototype,"moderationVerdict",void 0),t._([t.n({type:Boolean,attribute:"previous-actions-feature"})],z.prototype,"previousActionsFeature",void 0),t._([t.n({type:String,reflect:!0})],z.prototype,"updateAnimation",void 0),t._([t.n({type:String,attribute:"item-state",reflect:!0})],z.prototype,"itemState",void 0),t._([t.n({type:Boolean,attribute:"are-reports-expandable"})],z.prototype,"areReportsExpandable",void 0),t._([t.n({type:Boolean,attribute:"compact-ui-experiment"})],z.prototype,"isCompactUIExp",void 0),t._([t.n({type:Boolean,attribute:"post-comment-tap-exp"})],z.prototype,"isPostCommentTapExp",void 0),t._([t.n({type:Boolean,attribute:"is-pdp-seeker-m1-lo"})],z.prototype,"isPdpSeekerM1LO",void 0),t._([t.n({type:Boolean,attribute:"share-button-ssr"})],z.prototype,"shareButtonSSR",void 0),t._([t.n({type:Boolean,attribute:"interaction-from-hotkey"})],z.prototype,"interactionFromHotkey",void 0),t._([t.n({type:Boolean,attribute:"apply-feeds-simplification"})],z.prototype,"applyFeedsSimplification",void 0),t._([t.b()],z.prototype,"showPostRemovalBanner",void 0),t._([t.b()],z.prototype,"showExpando",void 0),t._([t.b()],z.prototype,"postVoteType",void 0),t._([t.b()],z.prototype,"postScore",void 0),t._([t.b()],z.prototype,"useShortHiddenPostForm",void 0),t._([t.b()],z.prototype,"isThumbnailSet",void 0),t._([t.b()],z.prototype,"isUpdatingPostBody",void 0),t._([t.b()],z.prototype,"displayPostAnalytics",void 0),t._([t.b()],z.prototype,"isCrosspostingCoachmarkOpen",void 0),t._([t.b()],z.prototype,"eligibleCrosspostingSubreddit",void 0),z=t._([t.c("shreddit-post")],z),{get S(){return z}}}));
SML.dm("DSd7tq2f",["CVEbQKiO","D7lSuCop"],(async(t,s)=>{const e=new DOMParser;let i=class extends t.s{constructor(){super(...arguments),this.postId="",this.flairClass="",this.pubsub=new s.P(this),this.onPostFlairChange=t=>{t.postId===this.postId&&this.renderUpdatedFlair(t.updatedHtml)}}connectedCallback(){super.connectedCallback(),requestAnimationFrame((()=>{this.pubsub.subscribe(s.T.PostFlairUpdated,this.onPostFlairChange)}))}renderUpdatedFlair(t){const s=this.shadowRoot?.querySelector("slot")?.assignedElements({flatten:!0})[0];if(!t&&s)return void s.remove();const i=e.parseFromString(t,"text/html").body.firstChild;if(i){if(this.flairClass&&i instanceof HTMLElement){const t=this.flairClass.split(" ").filter((t=>!!t));i.classList.add(...t)}s?s.replaceWith(i):this.appendChild(i)}}render(){return t.x`<slot></slot>`}};i.styles=[s.t],t._([t.n({type:String,attribute:"post-id"})],i.prototype,"postId",void 0),t._([t.n({type:String,attribute:"flair-class"})],i.prototype,"flairClass",void 0),i=t._([t.c("shreddit-post-flair")],i)}));
SML.dm("Dbrwygq6",["CVEbQKiO","D7lSuCop"],(async(t,o)=>{let e=class extends t.s{constructor(){super(...arguments),this.isDesktop=!1,this.isLoggedIn=!1,this.isFollowed=!1,this.trackingSource="profile",this.toggleLoadingIcon=()=>{const t=this.isFollowed?".unfollow-button":".follow-button",o=this.querySelector(`${t} .loading-icon`),e=this.querySelector(`${t} .button-leading-icon`)?.parentElement;if(o?.classList.toggle("hidden"),e?.classList.toggle("hidden"),!this.isDesktop){const o=this.querySelector(`${t} .button-text`);o?.classList.toggle("hidden")}}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.onClick)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.onClick)}async onClick(){if(this.redditorId&&this.isLoggedIn){const t={input:{accountId:this.redditorId,state:this.isFollowed?o.a7.None:o.a7.Followed}};this.toggleLoadingIcon();try{const e=await o.v({operation:o.O.UpdateProfileFollowState,variables:t});return this.toggleLoadingIcon(),void(e.data.updateProfileFollowState?.ok&&!e.data.updateProfileFollowState?.errors&&(this.isFollowed=!this.isFollowed))}catch(t){return window.Sentry?.captureError?.(t),void this.toggleLoadingIcon()}}}render(){return t.x`<slot name="button-${this.isFollowed?"unfollow":"follow"}"></slot>`}};e.styles=[o.t],t._([t.n({type:Boolean,attribute:"is-desktop"})],e.prototype,"isDesktop",void 0),t._([t.n({type:Boolean,attribute:"is-logged-in"})],e.prototype,"isLoggedIn",void 0),t._([t.n({type:Boolean,attribute:"is-followed"})],e.prototype,"isFollowed",void 0),t._([t.n({type:String,attribute:"redditor-id"})],e.prototype,"redditorId",void 0),t._([t.n({type:Object,attribute:"tracking-source"})],e.prototype,"trackingSource",void 0),e=t._([t.c("follow-button")],e)}));
SML.dm("kx-XrXmb",["DlFJW-AA","CGytz8Wq","Dbrwygq6","Caoa8uoZ","KzHvibf8","CVEbQKiO","D7lSuCop","CCphb8vV","DlWm-1vG"],(async E=>{E.g()&&(SML.di("./DHC9SEXT.js",import.meta.url,"DHC9SEXT"),SML.di("./UBJIXwif.js",import.meta.url,"UBJIXwif"),SML.di("./C2T0Wo2U.js",import.meta.url,"C2T0Wo2U"))}));
SML.dm("Cx3gnMrw",["CVEbQKiO","D7lSuCop","CCphb8vV"],(async(e,t,i)=>{let a=class extends e.s{constructor(){super(...arguments),this._windowEvents=new t.E(this,(()=>window)),this.enableEscapeKey=!1,this.handleBackClick=()=>{if(void 0===window.navigation)return void history.back();if(!this.subredditPrefixedName&&!this.postId)return void history.back();const e=window.navigation.currentEntry;if(e&&e.url){const t=e.index,i=new URL(e.url);for(let e=t-1;e>=0;e--){const t=window.navigation.entries()[e];if(t.url){const e=new URL(t.url);if(e.host===i.host&&e.pathname!==i.pathname)return void window.navigation.traverseTo(t.key)}}}window.navigation.navigate(this.destinationUrl)},this.handleEscKey=this._windowEvents.define("keydown",(e=>{if(this.enableEscapeKey&&"Escape"===e.key){if(e.target instanceof Element){const t=null!==e.target.closest('[contenteditable="true"]'),i=null!==e.target.closest("faceplate-hovercard"),a=i&&"dialog"===e.target.getAttribute("aria-haspopup");if(t||i&&!a)return}this.handleBackClick()}}))}get destinationUrl(){return this.mtSeoSubredditLink||i.y(this.subredditPrefixedName)}render(){const i="Back";return e.x` ${t.k({appearance:"secondary",attributes:{type:"button","aria-label":i,onclick:this.handleBackClick},size:t._.Small,screenReaderContent:i,leadingIcon:e.H({size:e.q.Small})})} `}};a.styles=[t.t],e._([e.n({attribute:"subreddit-prefixed-name"})],a.prototype,"subredditPrefixedName",void 0),e._([e.n({type:String,attribute:"mt-seo-subreddit-link"})],a.prototype,"mtSeoSubredditLink",void 0),e._([e.n({attribute:"post-id"})],a.prototype,"postId",void 0),e._([e.n({type:Boolean,attribute:"enable-escape-key"})],a.prototype,"enableEscapeKey",void 0),a=e._([e.c("pdp-back-button")],a)}));
SML.dm("ChTnMlER",["CVEbQKiO","D7lSuCop","CCphb8vV","AhHXxeIZ"],(async(t,a,i)=>{let e=class extends t.s{constructor(){super(...arguments),this.translationContextValue=a.at,this.pubsub=new a.P(this),this.getIsTranslationActive=()=>{const t=i.U();return"boolean"==typeof this.postTranslated?this.postTranslated:t||!!this.translationContextValue?.isTranslationActive},this.onPostTranslationOverride=t=>{(t.id===this.postId||t.isContextUpdateEvent)&&(this.postTranslated=t.isTranslationActive)},this.handleClick=()=>{if(!this.postId)return;const t=a.z()===a.aa.PostDetail;this.pubsub.publish(a.T.I18nPostTranslationOverride,{id:this.postId,isTranslationActive:!this.getIsTranslationActive(),pageType:t?"PDP":"FEED"})}}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(a.T.I18nPostTranslationOverride,this.onPostTranslationOverride,!1);const t=i.X.get();this.isPdpBannerSettingEnabled=t?.isPdpBannerSettingEnabled??!0,this.pageType=a.z()}render(){return this.isPdpBannerSettingEnabled&&this.pageType===a.aa.PostDetail?t.A:t.x` <rpl-tooltip appearance="inverted" placement="top" trigger="hover focus" content="${this.getIsTranslationActive()?"Show original":"Translate"}"> ${a.k({appearance:"plain",attributes:{onclick:this.handleClick,"aria-label":"Toggle post translation"},leadingIcon:this.getIsTranslationActive()?t.ae({size:t.q.ExtraSmall,attributes:{"data-testid":"post-translation-status-icon-translated-icon","aria-label":"Post is translated",className:"text-primary-plain"}}):t.af({size:t.q.ExtraSmall,attributes:{"data-testid":"post-translation-status-icon-original-icon","aria-label":"Post is in original language",className:"text-primary-plain"}}),size:a._.ExtraSmall})} </rpl-tooltip> `;}};e.styles=[a.t],t._([t.n({type:String,attribute:"post-id"})],e.prototype,"postId",void 0),t._([a.as({context:a.au,subscribe:!0}),t.b()],e.prototype,"translationContextValue",void 0),t._([t.b()],e.prototype,"postTranslated",void 0),t._([t.b()],e.prototype,"isPdpBannerSettingEnabled",void 0),t._([t.b()],e.prototype,"pageType",void 0),e=t._([t.c("post-translation-status-icon")],e)}));
SML.dm("Dk3HCob_",["D7lSuCop","CVEbQKiO","CCphb8vV","DlFJW-AA","BmOBRqii","DgqUM2V2","DSd7tq2f","kx-XrXmb","Cx3gnMrw","B7NvqZE0","ChTnMlER","BPaL2p2o","BYDFL-1r","gYqzC9DM","DkJsPyQM","B011DCe8","BWyYpeH6","UeyFDWWE","BmXCRIMH","5NUG_JHL","B05atAPk","BwmVBZAv","AhHXxeIZ","BC8XSJYX","LCU6ttla","GpA9mJze","B92R8McT","Bd8lDV8U","BNksWu9w","Cx0Ea5Jz","Bj8wOYTD","DR8kbffm","CK9FveTr","DJy2jSvu","likT9J3g","CGzEIBwW","ClF_poCN","DEQ-l4mm","CK47trMR","B6r1xcS1","NZrnLhhZ","B_eoQ41X","CWo_XZVj","YDaizTe1","BxmAGM9T","CITAGWir","kExRqc7d","CU4mObWU","DlWm-1vG","DsV3drw0","BRarYp5X","Bgpq8Ukm","Bw4iLYyr","n2VAdrRK","CLkam3rl","58f2cEWE","DE0FOF-R","CGytz8Wq","Dbrwygq6","Caoa8uoZ","KzHvibf8"],(async(t,o,n,s)=>{let e=class extends o.s{constructor(){super(...arguments),this.isMobile=!1,this.showDurationS=8,this.postId="",this.isPillVisible=!1,this.hostCommentCount=0,this.isAddedTabEvent=!1,this.commentCountSubscriptionController=new t.bG(this),this.onData=t=>{this.isAddedTabEvent||(document.querySelector(`.${n.a0}`)?.addEventListener("click",this.handleAmaCommentTabClick),this.isAddedTabEvent=!0);const o=t.subscribe.data.hostCommentCountChange||0;o<=0||(this.hostCommentCount+=o,this.isPillVisible?clearTimeout(this.currentCountDown):this.isPillVisible=!0,this.currentCountDown=setTimeout((()=>{this.isPillVisible=!1}),1e3*this.showDurationS))},this.scrollToCommentsAndRefreshAnswers=()=>{const t=document.querySelector(`.${n.a0}`)?.offsetTop;if(!t)return;const o=document.querySelector("nav")?.offsetHeight??0;window.scrollTo({top:t-o,behavior:"smooth"});const s=document.querySelector('button[value="answered"]');s?.click()},this.onPillClick=()=>{this.isPillVisible=!1,this.hostCommentCount=0,this.currentCountDown&&clearTimeout(this.currentCountDown),this.currentCountDown=void 0,this.scrollToCommentsAndRefreshAnswers()},this.handleAmaCommentTabClick=t=>{const o=t.target?.getAttribute("value"),n=o&&o.toLowerCase();"all"!==n&&"answered"!==n||(this.isPillVisible=!1,this.hostCommentCount=0,this.currentCountDown&&clearTimeout(this.currentCountDown))}}static get styles(){return[o.i`:host{left:50%;position:fixed;top:calc(var(--shreddit-header-height) + 32px);transform:translateX(-50%);z-index:1001}`,t.t]}getTitleText(){return t.bH({one:`${this.hostCommentCount} new answer`,other:`${this.hostCommentCount} new answers`,count:this.hostCommentCount});}connectedCallback(){super.connectedCallback(),this.commentCountSubscriptionController.subscribe({query:{operationName:"SubscribeSubscription",query:"\n          subscription SubscribeSubscription($input: SubscribeInput!) {\n            subscribe(input: $input) {\n              ... on BasicMessage {\n                data {\n                  ... on CommentCountUpdateMessageData {\n                    hostCommentCountChange\n                  }\n                }\n              }\n            }\n          }\n          ",variables:{input:{channel:{teamOwner:"CONTENT_AND_COMMUNITIES",category:"COMMENT_COUNT_UPDATE",postID:this.postId}}}},onData:t=>{t.data&&this.onData(t.data)}})}disconnectedCallback(){super.disconnectedCallback(),document.querySelector(`.${n.a0}`)?.removeEventListener("click",this.handleAmaCommentTabClick)}render(){return this.isPillVisible?t.k({appearance:"primary",attributes:{onclick:this.onPillClick},children:this.getTitleText(),size:this.isMobile?t._.Small:t._.Large,role:"button"}):o.A}};o._([o.n({type:Boolean,attribute:"is-mobile"})],e.prototype,"isMobile",void 0),o._([o.n({type:Number,attribute:"show-duration-in-s"})],e.prototype,"showDurationS",void 0),o._([o.n({type:String,attribute:"post-id"})],e.prototype,"postId",void 0),o._([o.b()],e.prototype,"isPillVisible",void 0),o._([o.b()],e.prototype,"hostCommentCount",void 0),e=o._([o.c("ama-new-comment-pill")],e),"enabled"===window.CLIENT_EXPERIMENTS?.shreddit_pdp_no_mod_js_lo?s.g()&&SML.di("./DhRKKX8J.js",import.meta.url,"DhRKKX8J"):SML.di("./DhRKKX8J.js",import.meta.url,"DhRKKX8J")}));
SML.dm("Ba3i_x37",["CVEbQKiO","D7lSuCop","BWyYpeH6","UeyFDWWE","C6s1R5yD","D_QMHsXc","DlWm-1vG","DgqUM2V2","DsV3drw0","CCphb8vV","Bw4iLYyr","BR8SLhNF","KzHvibf8","Cq9O5zpS","gYqzC9DM","BPaL2p2o","BmXCRIMH","5NUG_JHL","B05atAPk","BwmVBZAv","DkJsPyQM","Cx0Ea5Jz","Bj8wOYTD","BYDFL-1r","B011DCe8","AhHXxeIZ","BC8XSJYX","LCU6ttla","GpA9mJze","B92R8McT","Bd8lDV8U","BNksWu9w","DR8kbffm","CK9FveTr","DJy2jSvu","likT9J3g","CGzEIBwW","ClF_poCN","DEQ-l4mm","CK47trMR","B6r1xcS1","NZrnLhhZ","B_eoQ41X","CWo_XZVj","YDaizTe1","BxmAGM9T","CITAGWir","kExRqc7d","CU4mObWU","BRarYp5X","Bgpq8Ukm","DlFJW-AA","58f2cEWE","DE0FOF-R","n2VAdrRK","CLkam3rl"],(async(t,e,i,a,s,r,n,o,d,l,E,T)=>{const p=[e.A.BACKGROUND,e.A.PROMOTED_LABEL,e.A.CREDIT_BAR_WHITESPACE,e.A.TITLE,e.A.TEXT_BODY,e.A.ACTION_BAR_WHITESPACE];class c{constructor(t){this._currGalleryIndex=0,this.handleGalleryNavEvent=t=>{const{detail:{details:e}}=t,{noun:i,action:a,source:s,post:r}=e;r?.id===this.host.postId&&"gallery"===s&&"click"===a&&("forward"===i&&this._currGalleryIndex+1<this.host.galleryItems.length&&this._currGalleryIndex++,"backward"===i&&this._currGalleryIndex-1>=0&&this._currGalleryIndex--,this.host.querySelectorAll("call-to-action-gallery-links").forEach((t=>t.handleGalleryNavEvent(this._currGalleryIndex))),this.host.querySelectorAll("shreddit-dynamic-ad-link").forEach((t=>{p.includes(t.clickLocation)&&(t.galleryIndex=this._currGalleryIndex)})))},(this.host=t).addController(this)}hostConnected(){this.host.galleryItems?.length&&this.host.addEventListener("track-event",this.handleGalleryNavEvent)}hostDisconnected(){this.host.removeEventListener("track-event",this.handleGalleryNavEvent)}}class m{constructor(t){(this.host=t).addController(this)}hostConnected(){this.host.impressionId||this.host.hasAdEvents||(this.hydrateAdEventsFromStorage(),this.hydrateAdUserTargetingFromStorage(),this.host.hasAdEvents&&(this.updateDynamicLinkUrls(),this.host.setupAdObserver()))}updateDynamicLinkUrls(){this.host.querySelectorAll("shreddit-dynamic-ad-link").forEach((t=>{const i="/"===t.outboundLinkOverride?.charAt(0),a=!!this.host.galleryItems,s=!!this.host.isReminderAd;i||s||!a&&t.outboundLinkOverride===e.eF||(t.outboundLinkOverride=this.host.galleryItems?this.host.galleryItems[t.galleryIndex??0]?.outboundUrl:this.host.outboundLinkUrl)}))}hydrateAdEventsFromStorage(){const t=new URL(e.dW.href).searchParams.get(e.eG);this.host.impressionId=t||"";const i=n.c(this.host.impressionId);i&&(this.host.adEvents=i.adEvents,this.host.outboundLinkUrl=i.clickRedirectUrl,this.host.galleryItems&&i.galleryAdData&&(this.host.galleryItems=i.galleryAdData?.map(((t,e)=>({...(this.host.galleryItems||[])[e],adEvents:t.adEvents,outboundUrl:t.clickRedirectUrl})))),this.host.encryptedTrackingPayload=i.encryptedTrackingPayload,this.host.additionalEventMetadata=i.additionalEventMetadata)}hydrateAdUserTargetingFromStorage(){const t=n.d();t&&(this.host.adUserTargeting=t)}}const h=r.W(o.S);let u=class extends h{constructor(){super(...arguments),this.adEvents=[],this.impressionId="0",this.isBlank=!1,this.isCommentingDisabled=!1,this.isSharingDisabled=!1,this.isSurveyAd=!1,this.isPromotedCommunityPost=!1,this.isReminderAd=!1,this.isReminderAdModalKsEnabled=!1,this.placement=e.Z.FEED,this.AdPostHydrationController=new m(this),this.AdPostGalleryLinksController=new c(this),this.pubSub=new e.P(this),this._trackAdClick=this._events.define("observe-ad-click",(async t=>{const i=this.postType===e.eH.Image,a=this.postType===e.eH.Video,r=a&&this.viewType!==e.a3.CompactView&&t.detail.clickLocation!==e.A.MEDIA,o=a&&this.viewType===e.a3.CompactView;(i||o||r)&&(await this._activateLeadGenDialog(),s.s({leadGenInfo:this.leadGenInfo,postId:this.id,impressionId:this.impressionId,onSuccess:()=>this.dispatchEvent(e.c(n.L))}))})),this.onAdUpdateAction=({action:t,impressionId:e})=>{"hide"===t&&e===this.impressionId&&(this.hidden=!0)}}static get styles(){return[...super.styles,e.j(":host {\n  position: relative;\n}\n.ad-link-bar {\n  grid-column: 1 / 13;\n  height: 40px;\n  border-top: transparent;\n}\n.meta-row {\n  grid-column: 1 / 4;\n}\n.grid-template-col-inherit {\n  grid-template-columns: inherit;\n}\n")]}_activateLeadGenDialog(){return s.a({leadGenInfo:this.leadGenInfo})}get hasAdEvents(){return this.adEvents?.length>0}handleCarouselArrowClick(t){t.preventDefault();const e=t;E.h(this,e,this.impressionId)}handleClickPost(t){if(!this.isReminderAd||this.isReminderAdModalKsEnabled)return void super.handleClickPost(t);const i=this.querySelector("ad-reminder-button");if(i?.isReminderSet||!1)return void super.handleClickPost(t);T.s(t,{includeFeedChecks:!0})?super.handleClickPost(t):(t.preventDefault(),this.pubSub.publish(e.T.TriggerAdReminderModal,{postId:this.id}))}async handleUpvote(t){if(super.handleUpvote(t),this.isUserLoggedIn&&this.isReminderAd){super.getCurrentVoteType()===i.V.Upvote&&this.pubsub.publish(e.T.TriggerAdReminderModal,{postId:this.id})}}async connectedCallback(){super.connectedCallback(),this.pubSub.subscribe(e.T.AdUpdated,this.onAdUpdateAction),this.setupAdObserver()}setupAdObserver(){!this.isAdObserved&&this.hasAdEvents&&this.enableAdObserver({postElement:this,events:r.e(this.adEvents),postId:this.id,impressionId:this.impressionId,adType:this.adType,dimensions:this.dimensions,galleryItems:this.galleryItems?.map((t=>({...t,adEvents:r.e(t.adEvents||[])})))})}handleView(t,e){super.handleView(t,e,this.galleryItems?.length)}handleShareClick(){if(this.isSharingDisabled){const t=e.c("faceplate-alert",{level:e.a4.notice,message:"Sharing has been disabled for this post"});this.dispatchEvent(t)}else this.handleShareButtonInteraction()}handleClickCommentsButton(t){if(this.isSurveyAd)super.handleClickCommentsButton(t);else if(this.isCommentingDisabled){const t=e.c("faceplate-alert",{level:e.a4.notice,message:"Comments have been disabled for this post"});this.dispatchEvent(t)}else this.isFeed?(n.s({impressionId:this.impressionId,adEvents:this.adEvents,clickRedirectUrl:this.outboundLinkUrl,galleryAdData:this.galleryItems?.map((t=>({adEvents:t.adEvents,clickRedirectUrl:t.outboundUrl}))),encryptedTrackingPayload:this.encryptedTrackingPayload,additionalEventMetadata:this.additionalEventMetadata}),n.b(this.adUserTargeting),this.trackEvent(d.q(this))):super.handleClickCommentsButton(t)}renderCommentsButton(){if(this.isCommentingDisabled)return t.x`${a.c({size:this.defaultActionButtonSize,appearance:l.a4()?"bordered":"secondary",attributes:{type:"button",className:this.defaultActionButtonClassnames,onclick:this.handleClickCommentsButton,name:"comments-action-button","data-post-click-location":e.a8.COMMENTS_BUTTON},leadingIcon:t.c6({attributes:{className:"icon-comment","aria-hidden":"true"},size:a.I[this.defaultActionButtonSize]}),screenReaderContent:"comments",children:t.x`<faceplate-number number="${this.commentCount}" pretty></faceplate-number>`})}`;{const t=new URL(this.permalink,window.location.origin);return t.searchParams.set(e.bQ,"1"),t.searchParams.set(e.eG,this.impressionId),this.leadGenInfo?.campaignId&&t.searchParams.set(e.eI,this.leadGenInfo.campaignId),this.isPromotedCommunityPost&&t.searchParams.set(e.eJ,this.postId),this.permalink=t.pathname+t.search,super.renderCommentsButton()}}renderShareButton(){if(this.isSharingDisabled){const e="Share";return t.x`${a.c({size:this.defaultActionButtonSize,appearance:l.a4()?"bordered":"secondary",attributes:{type:"button",onclick:this.handleShareClick,onkeydown:this.handleShareClick,className:this.defaultActionButtonClassnames},leadingIcon:t.c7({attributes:{className:"icon-share","aria-hidden":"true"},size:a.I[this.defaultActionButtonSize]}),screenReaderContent:e,children:e})}`}return this.shareButtonSSR=!1,super.renderShareButton()}renderHiddenPost(){return t.x` <div class="hidden-post h-3xl flex items-center justify-between px-md"> <div> <p class="m-0 font-semibold text-neutral-content-strong text-14"> ${"Ad hidden"} </p> </div> </div> `;}renderActionRow(){return this.isSurveyAd?t.x``:super.renderActionRow()}render(){return this.hidden?this.renderHiddenPost():t.x` <shreddit-with-observer-wrapper id="in-feed-ad" .config="${{threshold:e.ai}}"> ${this.isBlank?null:super.render()} </shreddit-with-observer-wrapper>`}};t._([t.n({type:String,attribute:"post-id"})],u.prototype,"postId",void 0),t._([t.n({type:Array,attribute:"ad-events",reflect:!0})],u.prototype,"adEvents",void 0),t._([t.n({type:Array,attribute:"gallery-items",reflect:!0})],u.prototype,"galleryItems",void 0),t._([t.n({type:Object,attribute:!0})],u.prototype,"dimensions",void 0),t._([t.n({type:String,attribute:"ad-type"})],u.prototype,"adType",void 0),t._([t.n({type:String,attribute:"outbound-link-url",reflect:!0})],u.prototype,"outboundLinkUrl",void 0),t._([t.n({type:String,attribute:"impression-id",reflect:!0})],u.prototype,"impressionId",void 0),t._([t.n({type:Object,attribute:"ad-user-targeting",reflect:!0})],u.prototype,"adUserTargeting",void 0),t._([t.n({type:Boolean,attribute:"is-blank"})],u.prototype,"isBlank",void 0),t._([t.n({type:Boolean,attribute:"is-commenting-disabled"})],u.prototype,"isCommentingDisabled",void 0),t._([t.n({type:Boolean,attribute:"is-sharing-disabled"})],u.prototype,"isSharingDisabled",void 0),t._([t.n({type:Boolean,attribute:"is-survey-ad"})],u.prototype,"isSurveyAd",void 0),t._([t.n({type:Boolean,attribute:"is-promoted-community-post"})],u.prototype,"isPromotedCommunityPost",void 0),t._([t.n({type:Boolean,attribute:"is-reminder-ad"})],u.prototype,"isReminderAd",void 0),t._([t.n({type:Boolean,attribute:"is-reminder-ad-modal-ks-enabled"})],u.prototype,"isReminderAdModalKsEnabled",void 0),t._([t.n({type:String,attribute:"country-code"})],u.prototype,"countryCode",void 0),t._([t.n({type:String,attribute:"placement"})],u.prototype,"placement",void 0),t._([t.n({type:Object,attribute:"lead-gen-info"})],u.prototype,"leadGenInfo",void 0),t._([t.n({type:String,attribute:"campaign-id"})],u.prototype,"campaignId",void 0),t._([t.n({type:String,attribute:"encrypted-tracking-payload"})],u.prototype,"encryptedTrackingPayload",void 0),t._([t.n({type:Array,attribute:"additional-event-metadata"})],u.prototype,"additionalEventMetadata",void 0),t._([t.n({type:String,attribute:"ad-transparency-encoded-data"})],u.prototype,"adTransparencyEncodedData",void 0),t._([t.n({type:String,attribute:"ads-correlation-id"})],u.prototype,"adsCorrelationId",void 0),u=t._([t.c("shreddit-ad-post")],u)}));
SML.dm("rPGPQWBN",[],(async()=>{var n;!function(n){n.Collapsed="0",n.Expanded="1"}(n||(n={}));const e={[n.Collapsed]:"flex-nav-collapsed",[n.Expanded]:"flex-nav-expanded"},t=Object.values(n);return{F:"hui_flex_nav_expanded_state",a:{LeftSidebarContainer:"left-sidebar-container",ContainerDiv:"flex-left-nav-container",ContentsDiv:"flex-left-nav-contents",ButtonsContainer:"flex-nav-buttons",ExpandButton:"flex-nav-expand-button",CollapseButton:"flex-nav-collapse-button",SubgridContainer:"subgrid-container"},get b(){return n},c:e,i:n=>!!n&&t.includes(n)}}));
SML.dm("CzuI_xOV",["CVEbQKiO","D7lSuCop","CCphb8vV","rPGPQWBN"],(async(t,e,n,i)=>{let s=class extends e.w{constructor(){super(...arguments),this.isHovered=!1,this.hoverDelayStart=150,this.hoverDelayEnd=150,this.preventNextAnimations=!1,this.containerElement=null,this.contentsElement=null,this.expandButton=null,this.collapseButton=null,this.gridTransitionPromise=null,this.gridTransitioning=!1,this.trigger="hover",this.interactionController=new n.a5(this,{hoverDelayStart:()=>this.hoverDelayStart,hoverDelayEnd:()=>this.hoverDelayEnd,isInteractedWith:t=>t.isHovered}),this.noAnimate=!1,this.parentGridSelector=".grid-container",this.hotkeysController=new e.cc(this),this.handleSlotChange=t=>{const e=document.getElementById(i.a.ContainerDiv),n=document.getElementById(i.a.ContentsDiv),s=document.getElementById(i.a.ExpandButton),a=document.getElementById(i.a.CollapseButton);n&&this.contentsElement!==n&&(this.contentsElement?.removeEventListener("mouseenter",this.interactionController.handleMouseEnter),n.addEventListener("mouseenter",this.interactionController.handleMouseEnter),this.contentsElement=n,this.isExpanded||(this.contentsVisibility=!1)),e&&this.containerElement!==e&&(this.containerElement=e),a&&a!==this.collapseButton&&(this.collapseButton?.removeEventListener("click",this.toggleState),this.collapseButton=a,a.addEventListener("click",this.toggleState)),s&&s!==this.expandButton&&(this.expandButton?.removeEventListener("click",this.toggleState),this.expandButton?.removeEventListener("keydown",this.handleExpandKeydown),this.expandButton=s,s.addEventListener("click",this.toggleState),s.addEventListener("mouseover",this.handleExpandButtonMouseOver),s.addEventListener("keydown",this.handleExpandKeydown))},this.handleExpandKeydown=async t=>{if("Tab"!==t.key)return;t.preventDefault();const e=document.querySelector("reddit-skip-to-sidebar")?.shadowRoot?.querySelector("a");if(e)return this.emitter.dispatch("focus-delegate",{detail:{el:e}}),e.focus();const n=document.getElementById("shreddit-skip-link");n instanceof HTMLElement&&(this.emitter.dispatch("focus-delegate",{detail:{el:n}}),n.focus())},this.handleExpandButtonMouseOver=t=>{this.isHovered?this.interactionController.handleMouseEnter(t):t.stopImmediatePropagation()},this.toggleStateViaHotkey=()=>{this.toggleState(void 0,{viaHotkey:!0})},this.toggleState=(t,n)=>{const s=document.querySelector(this.parentGridSelector);var a,d;void 0!==this.country&&void 0!==this.expanded&&s&&(this.emitTrackingEvent(this.isExpanded?"collapse":"expand",n),this.expanded=this.isExpanded?i.b.Collapsed:i.b.Expanded,s instanceof HTMLElement&&(this.gridTransitioning=!0,this.gridTransitionPromise=this.preventNextAnimations?r():o(s).then((()=>{this.gridTransitioning=!1})),s.classList.remove(...Object.values(i.c)),s.classList.add(i.c[this.expanded])),a=this.expanded,d=this.country,e.G({name:i.F,value:a,country:d}))}}get isExpanded(){return this.expanded===i.b.Expanded}set contentsVisibility(t){this.contentsElement&&(this.contentsElement.hidden=!t)}emitTrackingEvent(t,n){let i;n?.viaHotkey&&(i={action_info:{trigger_type:e.cM.HOTKEY}});const[s,a,o]={expand:["nav","click","open_community_nav"],collapse:["nav","click","close_community_nav"],hover:["nav","hover","open_community_nav"],unhover:["nav","hover","close_community_nav"]}[t];return e.e(this,{source:s,action:a,noun:o,...i})}async stopAnimations(){const t=[];this.containerElement&&t.push(e.bY(this.containerElement)),this.contentsElement&&t.push(e.bY(this.contentsElement)),await Promise.all(t)}async runAnimations(t,n){if(this.preventNextAnimations)return;const i=[],s=e.bZ(this,`flex-left-nav-container.${t}-${n}`),a=e.bZ(this,`flex-left-nav-contents.${t}-${n}`);this.containerElement&&i.push(e.b_(this.containerElement,s.keyframes,s.options)),this.contentsElement&&i.push(e.b_(this.contentsElement,a.keyframes,a.options)),await Promise.all(i)}async connectedCallback(){super.connectedCallback(),await this.syncFlexNavStateNoAnimate(),this.isExpanded||this.updateComplete.then((()=>this.contentsVisibility=!1)),this.addEventListener("mouseleave",this.interactionController.handleMouseLeave),"enabled"===e.cb("shreddit_hotkeys_m1")&&this.hotkeysController.subscribe(e.cd.OPEN_NAVIGATION,this.toggleStateViaHotkey)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("mouseleave",this.interactionController.handleMouseLeave),"enabled"===e.cb("shreddit_hotkeys_m1")&&this.hotkeysController.unsubscribe(e.cd.OPEN_NAVIGATION,this.toggleStateViaHotkey)}willUpdate(t){t.has("expanded")&&this.hasUpdated&&this.handleExpandedStateChanged(),super.willUpdate(t)}updated(){}focusContents(){this.isExpanded?this.collapseButton?.focus():this.expandButton?.focus()}async syncFlexNavStateNoAnimate(){const t=(()=>{const t=e.D.get(i.F);return i.i(t)?t:null})();null!==t&&this.expanded!==t&&(this.preventAnimationsForUpdate(),this.toggleState(),await this.updateComplete)}async preventAnimationsForUpdate(){this.preventNextAnimations=!0;const t=document.querySelector(this.parentGridSelector);t instanceof HTMLElement&&(t.style.transition="none"),this.setAttribute("skip-animation",""),await Promise.all([this.updateComplete,r()]),this.removeAttribute("skip-animation"),t instanceof HTMLElement&&(t.style.transition=""),this.preventNextAnimations=!1}async handleExpandedStateChanged(){this.emitter.dispatch(this.isExpanded?"expand":"collapse");const t=this.updateComplete,e=(this.isExpanded?this.collapseButton:this.expandButton)?.parentElement,n=(this.isExpanded?this.expandButton:this.collapseButton)?.parentElement;if(a(e)&&(e.disabled=!0),a(n)&&n.hide?.(),t.then((async()=>{this.focusContents()})),await this.stopAnimations(),this.isExpanded&&(this.contentsVisibility=!0),!this.isHovered&&this.containerElement){const t=this.isExpanded?"show":"hide";await this.runAnimations("expand",t)}else this.gridTransitioning&&this.gridTransitionPromise?.then((()=>{this.emitter.dispatch("after-grid-transition"),this.isHovered=!1,this.classList.remove("hovered")}));this.isExpanded||(this.contentsVisibility=!1),a(e)&&(e.disabled=!1),this.emitter.dispatch(this.isExpanded?"after-expand":"after-collapse")}async startInteraction(){this.isExpanded||this.isHovered||this.gridTransitioning||(this.emitTrackingEvent("hover"),this.emitter.dispatch("hover"),await this.stopAnimations(),this.classList.add("hover-started"),this.contentsVisibility=!0,this.isHovered=!0,await this.runAnimations("hover","show"),this.classList.remove("hover-started"),this.classList.add("hovered"),this.emitter.dispatch("after-hover"))}async finishInteraction(){!this.isExpanded&&this.isHovered&&(this.emitTrackingEvent("unhover"),this.emitter.dispatch("unhover"),await this.stopAnimations(),await this.runAnimations("hover","hide"),this.classList.remove("hovered"),this.isHovered=!1,this.contentsVisibility=!1,this.emitter.dispatch("after-unhover"))}render(){return t.x` <slot @slotchange="${this.handleSlotChange}"></slot> ${this.isExpanded?t.A:t.x`<div class="hoverable-target ${this.isHovered?"hovered":""}" @mouseenter="${this.interactionController.handleMouseEnter}"></div>`} `}};s.styles=t.i`:host(.hover-started),:host(.hovered){z-index:10!important;border-top:1px solid var(--color-neutral-border)!important}.hoverable-target{position:fixed;top:calc(var(--shreddit-header-height) + 72px);width:calc(var(--flex-nav-closed-size) + 16px);bottom:0;z-index:calc(var(--flex-nav-z-index) + 1)}.hoverable-target.hovered{z-index:calc(var(--flex-nav-z-index) - 1);top:var(--shreddit-header-height);width:calc(var(--flex-nav-expanded-size) + 16px)}`,t._([t.b()],s.prototype,"isHovered",void 0),t._([t.n({type:String,reflect:!0})],s.prototype,"expanded",void 0),t._([t.n({type:String})],s.prototype,"country",void 0),t._([t.n({type:Boolean})],s.prototype,"noAnimate",void 0),t._([t.n({type:String})],s.prototype,"parentGridSelector",void 0),s=t._([t.c("flex-left-nav-container")],s);const a=t=>"rpl-tooltip"===t?.tagName.toLowerCase(),o=(t,e=1200)=>{const n=t=>new Promise((n=>{t.addEventListener("transitionend",n),setTimeout(n,e)}));return Array.isArray(t)?Promise.all(t.map(n)):n(t)},r=()=>new Promise((t=>requestAnimationFrame(t)));return e.bW("flex-left-nav-container.expand-show",{keyframes:[{transform:"translateX(var(--closed-floating-translation))"},{transform:"translateX(var(--open-floating-translation))"}],options:{duration:250,easing:"cubic-bezier(0.65, 0, 0.35, 1)"}}),e.bW("flex-left-nav-container.expand-hide",{keyframes:[{transform:"translateX(var(--open-floating-translation))"},{transform:"translateX(var(--closed-floating-translation))"}],options:{duration:300,easing:"cubic-bezier(0.87, 0, 0.13, 1)"}}),e.bW("flex-left-nav-container.hover-show",{keyframes:[{boxShadow:"var(--left-nav-box-shadow-none)",transform:"translateX(var(--closed-floating-translation))"},{boxShadow:"var(--left-nav-box-shadow-hover)",transform:"translateX(var(--open-floating-translation))"}],options:{duration:250,easing:"cubic-bezier(0.65, 0, 0.35, 1)"}}),e.bW("flex-left-nav-container.hover-hide",{keyframes:[{boxShadow:"var(--left-nav-box-shadow-hover)",transform:"translateX(var(--open-floating-translation))"},{boxShadow:"var(--left-nav-box-shadow-none)",transform:"translateX(var(--closed-floating-translation))"}],options:{duration:300,easing:"cubic-bezier(0.87, 0, 0.13, 1)"}}),e.bW("flex-left-nav-contents.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250,easing:"linear"}}),e.bW("flex-left-nav-contents.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:300,easing:"linear"}}),{get F(){return s}}}));