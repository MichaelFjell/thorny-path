SML.di("./CVEbQKiO.js",import.meta.url,"CVEbQKiO");SML.di("./likT9J3g.js",import.meta.url,"likT9J3g");SML.di("./Cq9O5zpS.js",import.meta.url,"Cq9O5zpS");SML.di("./D_QMHsXc.js",import.meta.url,"D_QMHsXc");SML.di("./D7lSuCop.js",import.meta.url,"D7lSuCop");SML.di("./DlWm-1vG.js",import.meta.url,"DlWm-1vG");SML.di("./CCphb8vV.js",import.meta.url,"CCphb8vV");SML.di("./Cx0Ea5Jz.js",import.meta.url,"Cx0Ea5Jz");SML.di("./Bj8wOYTD.js",import.meta.url,"Bj8wOYTD");
SML.dm("Dbahtbtw",["CVEbQKiO","likT9J3g","D_QMHsXc","D7lSuCop","DlWm-1vG","Cq9O5zpS","CCphb8vV","Cx0Ea5Jz","Bj8wOYTD"],(async(e,t,i,s,n)=>{const r=i.W(e.s);let d=class extends r{constructor(){super(...arguments),this.impressionId="0",this.isBTFPlacement=!1,this.isBlank=!1,this.url="",this.randomHouseAdIndex=0,this.adEvents=[],this.outboundLinkUrl="",this.placement=s.Z.SIDEBARS,this.isLargeBanner=!1,this.hasBrandUnsafeContent=!1,this.showBrandSafeContent=!1,this.visible=!0,this.serverSideRendered=!1,this.adType=s.ah.DISPLAY,this._brandUnsafePostIds=new Set,this.handleVideoMediaClick=()=>{n.s({impressionId:this.impressionId,adEvents:this.adEvents,clickRedirectUrl:this.outboundLinkUrl})},this.checkNeighboringSidebarAd=()=>{if(this.isBTFPlacement){const e=this.previousElementSibling;"DSA-TRANSPARENCY-MODAL-PROVIDER"===e?.tagName&&this.hideBTFSidebarAd()}},this.hideBTFSidebarAd=()=>{!this.isBlank&&this.isBTFPlacement&&(this.style.display="none")},this.showBTFSidebarAd=()=>{!this.isBlank&&this.isBTFPlacement&&(this.style.display="block")},this.setBrandUnsafeView=e=>{if(this.hasBrandUnsafeContent&&this.isLargeBanner)return;const{postId:t,isInView:i}=e.detail;i?this._brandUnsafePostIds.add(t):this._brandUnsafePostIds.has(t)&&!i&&this._brandUnsafePostIds.delete(t),this.hasBrandUnsafeContent=this._brandUnsafePostIds.size>0}}static get styles(){return[s.t]}connectedCallback(){super.connectedCallback(),this.enableAdObserver({postElement:this,events:i.e(this.adEvents),postId:this.postId,impressionId:this.impressionId,adType:this.adType}),window.addEventListener(n.B,this.setBrandUnsafeView),window.addEventListener(n.H,this.hideBTFSidebarAd),window.addEventListener(n.S,this.showBTFSidebarAd),this.checkInitialLoadForBrandSafety(),this.checkNeighboringSidebarAd(),this.videoMediaClickTracker?.addEventListener("click",this.handleVideoMediaClick)}disconnectedCallback(){this.videoMediaClickTracker?.removeEventListener("click",this.handleVideoMediaClick),window.removeEventListener(n.B,this.setBrandUnsafeView),window.removeEventListener(n.H,this.hideBTFSidebarAd),window.removeEventListener(n.S,this.showBTFSidebarAd),super.disconnectedCallback()}updated(e){e.has("hasBrandUnsafeContent")&&(this.visible=!1,setTimeout((()=>{this.showBrandSafeContent=this.hasBrandUnsafeContent,this.visible=!0}),250))}get videoMediaClickTracker(){return this.serverSideRendered&&this.adType===s.ah.VIDEO?this.querySelector(`click-location-tracker[click-location="${s.A.MEDIA}"]`):null}checkInitialLoadForBrandSafety(){const e=document.querySelectorAll("shreddit-post[is-not-brand-safe]");for(let t=0;t<e.length;t++){const i=e[t];if(!i.isPostInViewport)break;this.setBrandUnsafeView(s.c(n.B,{postId:i.id,isInView:!0}))}}trackAdClick(){this.outboundClickHandler()}outboundClickHandler(){s.l.isAvailable()&&(s.l.setItem(s.L.LastClickedAdId,this.postId),s.l.setItem(s.L.ImpressionId,this.impressionId),s.l.setItem(s.L.AdPlacement,this.placement))}get contentExists(){return!!(this.serverSideRendered?this.shadowRoot?.hasChildNodes:this.querySelector('[slot="sidebar-content"]'))}renderAdSidebarContent(){return e.x` <article class="transition-opacity ease-in-out duration-250 m-0 ${this.visible?"opacity-100":"opacity-0"}"> <slot name="promoted-label"></slot> <shreddit-dynamic-ad-link outbound-link-override="${e.l(this.outboundLinkUrl?void 0:this.url)}" target="_blank" @click="${this.trackAdClick}" post-id="${this.postId}" click-location="${s.A.MEDIA}" impression-id="${this.impressionId}" encrypted-tracking-payload="${e.l(this.encryptedTrackingPayload)}"> <div class="flex justify-center"> <slot name="sidebar-content"></slot> </div> </shreddit-dynamic-ad-link> </article> `}renderHouseSidebarContent(){const i="m-0 border-none border-0 p-0 transition-opacity ease-in-out duration-250 "+(this.visible?"opacity-100":"opacity-0");return e.x` ${t.a({attributes:{href:this.houseAdHref,target:"_blank",className:i},suppressVisitedStyle:!0,underline:"none",children:e.x` <article> <div class="h-[32px]"></div> <div class="flex justify-center"> <img alt="brand safe sidebar ad" class="w-[300px] flex rounded-2" slot="sidebar-content" src="${this.houseAdImage}"> </div> </article>`})}`}renderContent(){return this.showBrandSafeContent?this.renderHouseSidebarContent():this.serverSideRendered?e.x`<div class="transition-opacity ease-in-out duration-250 ${this.visible?"opacity-100":"opacity-0"}"> <slot></slot> </div>`:this.renderAdSidebarContent()}render(){return e.x` <shreddit-with-observer-wrapper .config="${{threshold:s.ai}}"> ${!this.isBlank&&this.contentExists?this.renderContent():null} </shreddit-with-observer-wrapper> `}};e._([e.n({type:String})],d.prototype,"id",void 0),e._([e.n({type:String,attribute:"post-id"})],d.prototype,"postId",void 0),e._([e.n({type:String,attribute:"house-ad-image"})],d.prototype,"houseAdImage",void 0),e._([e.n({type:String,attribute:"house-ad-href"})],d.prototype,"houseAdHref",void 0),e._([e.n({type:String,attribute:"impression-id"})],d.prototype,"impressionId",void 0),e._([e.n({type:Boolean,attribute:"is-btf-placement"})],d.prototype,"isBTFPlacement",void 0),e._([e.n({type:Boolean,attribute:"is-blank"})],d.prototype,"isBlank",void 0),e._([e.n({type:Boolean,attribute:"is-media-only",reflect:!0})],d.prototype,"isMediaOnly",void 0),e._([e.n({type:String})],d.prototype,"url",void 0),e._([e.n({type:Number})],d.prototype,"randomHouseAdIndex",void 0),e._([e.n({type:Array,attribute:"ad-events",reflect:!0})],d.prototype,"adEvents",void 0),e._([e.n({type:String,attribute:"outbound-link-url",reflect:!0})],d.prototype,"outboundLinkUrl",void 0),e._([e.n({type:String,attribute:"author-id"})],d.prototype,"authorId",void 0),e._([e.n({type:String,attribute:"placement"})],d.prototype,"placement",void 0),e._([e.n({type:String,attribute:"subreddit-id"})],d.prototype,"subredditId",void 0),e._([e.n({type:Boolean,attribute:"is-large-banner"})],d.prototype,"isLargeBanner",void 0),e._([e.n({type:Boolean})],d.prototype,"hasBrandUnsafeContent",void 0),e._([e.n({type:Boolean})],d.prototype,"showBrandSafeContent",void 0),e._([e.n({type:Boolean})],d.prototype,"visible",void 0),e._([e.n({type:String,attribute:"encrypted-tracking-payload"})],d.prototype,"encryptedTrackingPayload",void 0),e._([e.n({type:Boolean,attribute:"server-side-rendered"})],d.prototype,"serverSideRendered",void 0),e._([e.n({type:String,attribute:"ad-type"})],d.prototype,"adType",void 0),e._([e.n({type:String,attribute:"ads-correlation-id"})],d.prototype,"adsCorrelationId",void 0),d=e._([e.c("shreddit-sidebar-ad")],d);var o=Object.freeze({__proto__:null,get ShredditSidebarAd(){return d}});return{get i(){return o}}}));