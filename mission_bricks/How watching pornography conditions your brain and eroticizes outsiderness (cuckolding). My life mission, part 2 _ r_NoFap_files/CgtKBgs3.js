SML.di("./CVEbQKiO.js",import.meta.url,"CVEbQKiO");SML.di("./D7lSuCop.js",import.meta.url,"D7lSuCop");SML.di("./C_AONjmd.js",import.meta.url,"C_AONjmd");SML.di("./BSzJg9M8.js",import.meta.url,"BSzJg9M8");SML.di("./CCphb8vV.js",import.meta.url,"CCphb8vV");SML.di("./xsszdj8W.js",import.meta.url,"xsszdj8W");SML.di("./CU4mObWU.js",import.meta.url,"CU4mObWU");SML.di("./CTD6cIv6.js",import.meta.url,"CTD6cIv6");SML.di("./ccIdaLiK.js",import.meta.url,"ccIdaLiK");SML.di("./CXdNNYNO.js",import.meta.url,"CXdNNYNO");SML.di("./Btl6S_1h.js",import.meta.url,"Btl6S_1h");SML.di("./CCOsF7IJ.js",import.meta.url,"CCOsF7IJ");SML.di("./Mh6HSk7W.js",import.meta.url,"Mh6HSk7W");SML.di("./D9dm-Sy6.js",import.meta.url,"D9dm-Sy6");SML.di("./BMNJiqQ9.js",import.meta.url,"BMNJiqQ9");SML.di("./CK9FveTr.js",import.meta.url,"CK9FveTr");SML.di("./CnXcxhtF.js",import.meta.url,"CnXcxhtF");SML.di("./CLkam3rl.js",import.meta.url,"CLkam3rl");
SML.dm("CgtKBgs3",["CVEbQKiO","D7lSuCop","C_AONjmd","BSzJg9M8","CCphb8vV","xsszdj8W","CU4mObWU","CTD6cIv6","ccIdaLiK","CXdNNYNO","Btl6S_1h","CCOsF7IJ","Mh6HSk7W","D9dm-Sy6","BMNJiqQ9","CK9FveTr","CnXcxhtF","CLkam3rl"],(async(e,t,a)=>{let i=t.v,s=t.f,r=class extends e.s{constructor(){super(...arguments),this.registry=t.g8,this.pubsub=new t.P(this),this.compareModifiers=(e,t)=>!!e==!!t,this.hasMatchingModifiers=(e,t)=>{if(!t)return!1;const{metaKey:a,altKey:i,shiftKey:s,ctrlKey:r}=e,{meta:n,alt:o,ctrl:l,shift:m}=t,E=!(navigator.userAgent.includes("Mac")||!n||l||!r);return(this.compareModifiers(a,n)||E)&&(this.compareModifiers(r,l)||E)&&this.compareModifiers(s,m)&&this.compareModifiers(i,o)},this.getContextualSubscriber=(e,a,i)=>{const s=e.composedPath();return Array.from(i).find((i=>this.hasMatchingModifiers(e,t.g9.keys[a]?.[i])&&void 0===t.ga[i]&&s?.find((e=>t.gb.has(e)))))},this.getGlobalSubscriber=(e,a,i)=>Array.from(i).find((i=>this.hasMatchingModifiers(e,t.g9.keys[a]?.[i]))),this.publishHotkeyEvent=async e=>{const a=e.key.toLowerCase(),i=t.g9.keys[a],r=this.getContextualSubscriber(e,a,t.gc),n=this.getGlobalSubscriber(e,a,t.gd),o=r??n;if(i&&(this.enabled||"?"===a)&&(o&&i[o].allowFromInput||!e.composedPath().find((e=>e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement||e instanceof HTMLElement&&e.hasAttribute("contenteditable"))))){if(i[t.cd.SHOW_SHORTCUTS]&&(await s({name:t.ge,bodyParams:{enabled:encodeURIComponent(!!this.enabled),open:"true"}})),r)return this.pubsub.publish(t.T.Hotkeys,{id:r}),void this.cancelEvent(e);n&&(this.pubsub.publish(t.T.Hotkeys,{id:n}),this.cancelEvent(e))}},this.cancelEvent=e=>{e.preventDefault(),e.stopImmediatePropagation()},this.onHotkeysToggle=async e=>{const{detail:{checked:a,target:s}}=e;try{const e=await i({operation:t.O.UpdateAccountPreferences,variables:{input:{isHotkeysEnabled:a}}});if(this.enabled=a,e.errors.length>0)throw new Error("Could not save setting")}catch{s.checked=!a;const e=t.c("faceplate-alert",{level:t.a4.error,cause:"uncategorized",message:"We had some issues saving your changes. Please try again."});this.dispatchEvent(e)}}}connectedCallback(){super.connectedCallback(),document.addEventListener("keydown",this.publishHotkeyEvent),document.addEventListener(a.S.TOGGLE,this.onHotkeysToggle)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("keydown",this.publishHotkeyEvent),document.removeEventListener(a.S.TOGGLE,this.onHotkeysToggle)}willUpdate(e){e.has("enabled")&&this.enabled&&!Object.keys(t.g9.keys).length?t.gf(this.registry):e.has("registry")&&(t.gg(),t.gf(this.registry))}};e._([e.n({type:Object})],r.prototype,"registry",void 0),e._([e.n({type:Boolean})],r.prototype,"enabled",void 0),r=e._([e.c("shreddit-hotkeys-controller")],r)}));